basic:
  commandPrefix: "#ai"
  debug: true
  showThinkingMessage: false
  debugToConsoleOnly: true
  quoteReply: false
  autoRecall:
    enabled: false
    delay: 60
    recallError: true
  toggleMode: both
  togglePrefix: "#111"
  showTokenUsage: true
admin:
  masterQQ: []
  loginNotifyPrivate: true
  sensitiveCommandMasterOnly: true
llm:
  defaultModel: gemini-3-pro-preview
  defaultChatPresetId: f6732fbd-e809-451a-9533-717839de5318
  embeddingModel: gemini-3-pro-preview
  dimensions: 1536
  models:
    chat: gemini-3-pro-preview
    roleplay: ""
    toolCall: ""
    search: ""
    reasoning: ""
  chatModel: gemini-3-pro-preview
  codeModel: gemini-3-pro-preview
  translationModel: gemini-3-pro-preview
bym:
  enable: false
  probability: 0.02
  temperature: 0.9
  maxTokens: 100
  recall: false
  model: ""
  systemPrompt: 你是一个真实的人类用户，正在和朋友们聊天。请用简短、自然、口语化的方式回复，就像真人一样。不要说你是AI。
  inheritPersonality: true
  presetMap: {}
  exclusiveFeatures:
    - groupSummary
    - userPortrait
tools:
  showCallLogs: true
  useForwardMsg: true
  parallelExecution: true
  sendIntermediateReply: true
builtinTools:
  enabled: true
  allowedTools: []
  disabledTools:
    - kick_member
    - mute_member
    - recall_message
  dangerousTools:
    - kick_member
    - mute_member
    - recall_message
  allowDangerous: false
channels:
  - id: openai-44dc5dab
    name: my
    adapterType: openai
    baseUrl: http://103.109.22.74:3000/v1
    apiKey: sk-lgrpDhWB7Mm5L521zGdwDO6JescMn9m7xtmQLkAgL0iMXf4h
    models:
      - qwen/qwen3-next-80b-a3b-instruct
      - gemini-3-pro-preview
    priority: 1
    enabled: true
    advanced:
      streaming:
        enabled: true
        chunkSize: 1024
      thinking:
        enableReasoning: false
        defaultLevel: medium
        adaptThinking: true
        sendThinkingAsMessage: false
      llm:
        temperature: 0.7
        maxTokens: 4000
        topP: 1
        frequencyPenalty: 0
        presencePenalty: 0
    apiKeys:
      - key: sk-lgrpDhWB7Mm5L521zGdwDO6JescMn9m7xtmQLkAgL0iMXf4h
        enabled: true
    strategy: round-robin
mcp:
  enabled: true
  servers:
    context7:
      type: sse
      url: https://mcp.context7.com/mcp
redis:
  enabled: true
  host: 127.0.0.1
  port: 6379
  password: ""
  db: 0
images:
  storagePath: ./data/images
  maxSize: 10485760
  allowedFormats:
    - jpg
    - jpeg
    - png
    - gif
    - webp
web:
  port: 3000
  permanentAuthToken: 8ceb8747-46d1-408c-bd20-20e5f029bb7f
context:
  maxMessages: 20
  maxTokens: 8096
  cleaningStrategy: auto
  isolation:
    groupUserIsolation: false
    privateIsolation: true
  autoContext:
    enabled: true
    maxHistoryMessages: 20
    includeToolCalls: false
memory:
  enabled: true
  storage: database
  autoExtract: true
  pollInterval: 5
  maxMemories: 50
  groupContext:
    enabled: true
    collectInterval: 10
    maxMessagesPerCollect: 50
    analyzeThreshold: 20
    extractUserInfo: true
    extractTopics: true
    extractRelations: true
  minScore: 0.7
presets:
  defaultId: f6732fbd-e809-451a-9533-717839de5318
  allowUserSwitch: true
  perUserPreset: false
  perGroupPreset: false
personality:
  priority:
    - group_user
    - group
    - user
    - default
  useIndependent: true
  isolateContext:
    enabled: false
    clearOnSwitch: false
loadBalancing:
  strategy: round-robin
thinking:
  defaultLevel: low
  enableReasoning: true
  showThinkingContent: true
  useForwardMsg: true
features:
  groupSummary:
    enabled: true
    maxMessages: 100
    autoTrigger: false
  userPortrait:
    enabled: true
    minMessages: 10
  poke:
    enabled: true
    pokeBack: true
    message: 别戳了，戳我干嘛~
    useAI: true
  reaction:
    enabled: true
    useAI: false
  voiceReply:
    enabled: false
    ttsProvider: system
    triggerOnTool: false
    triggerAlways: false
    maxTextLength: 500
  imageGen:
    enabled: true
    apiUrl: https://business.928100.xyz/v1/chat/completions
    apiKey: X-Free
    model: gemini-3-pro-image
  autoCleanOnError:
    enabled: false
    notifyUser: true
streaming:
  enabled: true
trigger:
  private:
    enabled: true
    mode: always
  group:
    enabled: true
    at: true
    prefix: true
    keyword: false
    random: false
    randomRate: 0.05
    reply: false
    replyBot: false
  prefixes:
    - "#chat"
  keywords: []
  collectGroupMsg: true
  blacklistUsers: []
  whitelistUsers: []
  blacklistGroups: []
  whitelistGroups: []
  prefixPersonas: []
listener:
  enabled: true
  triggerMode: at
  triggerPrefix: "#chat"
  triggerKeywords: []
  randomReplyRate: 0.1
  privateChat:
    enabled: true
    alwaysReply: true
  groupChat:
    enabled: true
    collectMessages: true
  blacklistUsers: []
  whitelistUsers: []
  blacklistGroups: []
  whitelistGroups: []
  priority: 99999
customTools:
  - name: execute_command
    description: 执行shell命令（注意安全）
    parameters:
      type: object
      properties:
        command:
          type: string
          description: 要执行的命令
      required:
        - command
    handler: >-
      const { command } = args


      // 安全检查 - 禁止危险命令

      const dangerous = ['rm -rf', 'mkfs', 'dd if=', ':(){', 'chmod -R 777']

      if (dangerous.some(d => command.includes(d))) {
        return { error: '检测到危险命令，已拒绝执行' }
      }


      try {
        const { stdout, stderr } = await runtime.utils.exec(command)
        // 返回详细的执行结果，让模型明确知道命令已成功执行
        const result = {
          success: true,
          command: command,
          stdout: stdout || '(无输出)',
          stderr: stderr || '(无错误)'
        }
        // 返回结构化结果，模型可以清楚看到命令已执行成功
        return {
          text: `命令执行成功\n命令: ${command}\n输出: ${stdout || '(命令已执行，无标准输出)'}\n${stderr ? '错误输出: ' + stderr : ''}`.trim()
        }
      } catch (error) {
        return { 
          text: `命令执行失败\n命令: ${command}\n错误: ${error.message}`,
          error: error.message 
        }
      }
    custom: true
    createdAt: 1764500123529
