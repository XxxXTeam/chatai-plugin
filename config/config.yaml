basic:
  commandPrefix: "#ai"
  debug: true
  showThinkingMessage: false
  debugToConsoleOnly: true
  quoteReply: false
  autoRecall:
    enabled: false
    delay: 60
    recallError: true
  toggleMode: both
  togglePrefix: "#111"
  showTokenUsage: true
admin:
  masterQQ: []
  loginNotifyPrivate: true
  sensitiveCommandMasterOnly: true
llm:
  defaultModel: qwen/qwen3-next-80b-a3b-thinking
  defaultChatPresetId: f6732fbd-e809-451a-9533-717839de5318
  embeddingModel: gemini-3-pro-preview
  dimensions: 1536
  models:
    chat: []
    roleplay: []
    toolCall: []
    search: []
    reasoning: []
  fallback:
    enabled: true
    models: []
    maxRetries: 3
    retryDelay: 500
    notifyOnFallback: false
  chatModel: ""
  codeModel: ""
  translationModel: ""
bym:
  enable: false
  probability: 0.5
  temperature: 0.9
  maxTokens: 100
  recall: true
  model: ""
  systemPrompt: 你是一个真实的人类用户，正在和朋友们聊天。请用简短、自然、口语化的方式回复，就像真人一样。不要说你是AI。
  inheritPersonality: true
  presetMap: {}
  exclusiveFeatures:
    - groupSummary
    - userPortrait
tools:
  showCallLogs: true
  useForwardMsg: true
  parallelExecution: true
  sendIntermediateReply: true
builtinTools:
  enabled: true
  allowedTools: []
  disabledTools:
    - kick_member
    - mute_member
    - recall_message
  dangerousTools:
    - kick_member
    - mute_member
    - recall_message
  allowDangerous: false
channels:
  - id: openai-44dc5dab
    name: my
    adapterType: openai
    baseUrl: http://103.109.22.74:3000/v1
    apiKey: sk-lgrpDhWB7Mm5L521zGdwDO6JescMn9m7xtmQLkAgL0iMXf4h
    models:
      - qwen/qwen3-next-80b-a3b-thinking
    priority: 1
    enabled: true
    advanced:
      streaming:
        enabled: true
        chunkSize: 1024
      thinking:
        enableReasoning: false
        defaultLevel: medium
        adaptThinking: true
        sendThinkingAsMessage: false
      llm:
        temperature: 0.7
        maxTokens: 4000
        topP: 1
        frequencyPenalty: 0
        presencePenalty: 0
    apiKeys:
      - key: sk-lgrpDhWB7Mm5L521zGdwDO6JescMn9m7xtmQLkAgL0iMXf4h
        enabled: true
    strategy: round-robin
    lastHealthCheck: 1765619852101
    testedAt: 1765619852101
  - id: openai-12c1cc32
    name: "111111"
    adapterType: openai
    baseUrl: https://api.openai.com/v1
    apiKey: 166824c7-9a88-47ad-8964-d4ee0b5319cf
    models: []
    priority: 100
    enabled: true
    advanced:
      streaming:
        enabled: false
        chunkSize: 1024
      thinking:
        enableReasoning: false
        defaultLevel: medium
        adaptThinking: true
        sendThinkingAsMessage: false
      llm:
        temperature: 0.7
        maxTokens: 4000
        topP: 1
        frequencyPenalty: 0
        presencePenalty: 0
    apiKeys: []
    strategy: round-robin
    status: idle
    lastHealthCheck: null
    testedAt: null
mcp:
  enabled: true
  servers:
    context7:
      type: sse
      url: https://mcp.context7.com/mcp
redis:
  enabled: true
  host: 127.0.0.1
  port: 6379
  password: ""
  db: 0
images:
  storagePath: ./data/images
  maxSize: 10485760
  allowedFormats:
    - jpg
    - jpeg
    - png
    - gif
    - webp
web:
  port: 3000
  permanentAuthToken: 8ceb8747-46d1-408c-bd20-20e5f029bb7f
context:
  maxMessages: 20
  maxTokens: 8096
  cleaningStrategy: auto
  isolation:
    groupUserIsolation: false
    privateIsolation: true
  autoContext:
    enabled: true
    maxHistoryMessages: 20
    includeToolCalls: false
  autoEnd:
    enabled: false
    maxRounds: 50
    notifyUser: true
    notifyMessage: 对话已达到最大轮数限制，已自动开始新会话。
memory:
  enabled: true
  storage: database
  autoExtract: true
  pollInterval: 5
  maxMemories: 50
  groupContext:
    enabled: true
    collectInterval: 10
    maxMessagesPerCollect: 50
    analyzeThreshold: 20
    extractUserInfo: true
    extractTopics: true
    extractRelations: true
  minScore: 0.7
presets:
  defaultId: f6732fbd-e809-451a-9533-717839de5318
  allowUserSwitch: true
  perUserPreset: false
  perGroupPreset: false
personality:
  priority:
    - group
    - group_user
    - user
    - default
  useIndependent: true
  isolateContext:
    enabled: false
    clearOnSwitch: false
loadBalancing:
  strategy: round-robin
thinking:
  defaultLevel: low
  enableReasoning: true
  showThinkingContent: true
  useForwardMsg: true
  enabled: false
features:
  groupSummary:
    enabled: true
    maxMessages: 100
    autoTrigger: false
  userPortrait:
    enabled: true
    minMessages: 10
  poke:
    enabled: true
    pokeBack: true
    message: 别戳了，戳我干嘛~
    useAI: true
  reaction:
    enabled: true
    useAI: false
  voiceReply:
    enabled: false
    ttsProvider: system
    triggerOnTool: false
    triggerAlways: false
    maxTextLength: 500
  imageGen:
    enabled: true
    apiUrl: https://business.928100.xyz/v1/chat/completions
    apiKey: sk-3d2f9b84e7f510b1a08f7b3d6c9a6a7f17fbbad5624ea29f22d9c742bf39c863
    model: gemini-3-pro-preview-image
    apis:
      - "0": h
        "1": t
        "2": t
        "3": p
        "4": s
        "5": ":"
        "6": /
        "7": /
        "8": b
        "9": u
        "10": s
        "11": i
        "12": n
        "13": e
        "14": s
        "15": s
        "16": "2"
        "17": a
        "18": p
        "19": i
        "20": .
        "21": o
        "22": p
        "23": e
        "24": n
        "25": e
        "26": l
        "27": .
        "28": t
        "29": o
        "30": p
        apiKey: sk-3d2f9b84e7f510b1a08f7b3d6c9a6a7f17fbbad5624ea29f22d9c742bf39c863
        baseUrl: http://45.142.115.211:19000
        models:
          - gemini-2.5-flash
          - gemini-2.5-flash-image
          - gemini-2.5-flash-search
          - gemini-2.5-flash-video
          - gemini-2.5-pro
          - gemini-2.5-pro-image
          - gemini-2.5-pro-search
          - gemini-2.5-pro-video
          - gemini-3-pro
          - gemini-3-pro-image
          - gemini-3-pro-preview
          - gemini-3-pro-preview-image
          - gemini-3-pro-preview-search
          - gemini-3-pro-preview-video
          - gemini-3-pro-search
          - gemini-3-pro-video
    videoModel: gemini-3-pro-preview-video
  autoCleanOnError:
    enabled: true
    notifyUser: false
streaming:
  enabled: true
trigger:
  private:
    enabled: true
    mode: prefix
  group:
    enabled: true
    at: true
    prefix: true
    keyword: false
    random: false
    randomRate: 0.05
    reply: false
    replyBot: false
  prefixes:
    - "#chat"
  keywords: []
  collectGroupMsg: true
  blacklistUsers: []
  whitelistUsers: []
  blacklistGroups: []
  whitelistGroups: []
  prefixPersonas: []
listener:
  enabled: true
  triggerMode: at
  triggerPrefix: "#chat"
  triggerKeywords: []
  randomReplyRate: 0.1
  privateChat:
    enabled: true
    alwaysReply: true
  groupChat:
    enabled: true
    collectMessages: true
  blacklistUsers: []
  whitelistUsers: []
  blacklistGroups: []
  whitelistGroups: []
  priority: 99999
customTools:
  - name: execute_command
    description: 执行shell命令（注意安全）
    parameters:
      type: object
      properties:
        command:
          type: string
          description: 要执行的命令
      required:
        - command
    handler: >-
      const { command } = args


      // 安全检查 - 禁止危险命令

      const dangerous = ['rm -rf', 'mkfs', 'dd if=', ':(){', 'chmod -R 777']

      if (dangerous.some(d => command.includes(d))) {
        return { error: '检测到危险命令，已拒绝执行' }
      }


      try {
        const { stdout, stderr } = await runtime.utils.exec(command)
        // 返回详细的执行结果，让模型明确知道命令已成功执行
        const result = {
          success: true,
          command: command,
          stdout: stdout || '(无输出)',
          stderr: stderr || '(无错误)'
        }
        // 返回结构化结果，模型可以清楚看到命令已执行成功
        return {
          text: `命令执行成功\n命令: ${command}\n输出: ${stdout || '(命令已执行，无标准输出)'}\n${stderr ? '错误输出: ' + stderr : ''}`.trim()
        }
      } catch (error) {
        return { 
          text: `命令执行失败\n命令: ${command}\n错误: ${error.message}`,
          error: error.message 
        }
      }
    custom: true
    createdAt: 1764500123529
