(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8422,(e,t,r)=>{t.exports=e.r(13765)},79923,e=>{"use strict";let t=(0,e.i(50974).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],79923)},87126,e=>{"use strict";var t=e.i(33169),r=e.i(17171);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"skeleton",className:(0,r.cn)("bg-accent animate-pulse rounded-md",e),...a})}e.s(["Skeleton",()=>a])},5850,e=>{"use strict";let t=(0,e.i(50974).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],5850)},32647,e=>{"use strict";var t=e.i(84548);e.s(["CheckCircle2",()=>t.default])},29720,e=>{"use strict";let t=(0,e.i(50974).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],29720)},60381,e=>{"use strict";let t=(0,e.i(50974).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],60381)},30243,e=>{"use strict";var t=e.i(33169),r=e.i(17171);function a({className:e,type:a,...s}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground/60 selection:bg-primary selection:text-primary-foreground","dark:bg-input/30 border-input h-10 w-full min-w-0 rounded-lg border bg-background/50 px-3 py-2 text-base shadow-xs","transition-all duration-200 outline-none","file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:border-ring/50 hover:bg-background","focus-visible:border-primary focus-visible:ring-primary/20 focus-visible:ring-[3px] focus-visible:bg-background","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive","md:text-sm",e),...s})}e.s(["Input",()=>a])},89908,e=>{"use strict";var t=e.i(79333);e.s(["Loader2",()=>t.default])},51200,e=>{"use strict";var t=e.i(33169),r=e.i(17171);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm transition-all duration-200","hover:shadow-md dark:border-border/50 dark:shadow-none dark:hover:border-border",e),...a})}function s({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>s,"CardTitle",()=>i])},72029,69343,92024,94237,e=>{"use strict";var t=e.i(33169),r=e.i(60844);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function s(...e){return t=>{let r=!1,s=e.map(e=>{let s=a(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():a(e[t],null)}}}}function i(...e){return r.useCallback(s(...e),e)}e.s(["composeRefs",()=>s,"useComposedRefs",()=>i],69343);var n=Symbol.for("react.lazy"),l=r[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===n&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function o(e){var a;let i,n=(a=e,(i=r.forwardRef((e,t)=>{let{children:a,...i}=e;if(d(a)&&"function"==typeof l&&(a=l(a._payload)),r.isValidElement(a)){var n;let e,l,d=(n=a,(l=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(l=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),o=function(e,t){let r={...t};for(let a in t){let s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...e)=>{let t=i(...e);return s(...e),t}:s&&(r[a]=s):"style"===a?r[a]={...s,...i}:"className"===a&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}(i,a.props);return a.type!==r.Fragment&&(o.ref=t?s(t,d):d),r.cloneElement(a,o)}return r.Children.count(a)>1?r.Children.only(null):null})).displayName=`${a}.SlotClone`,i),o=r.forwardRef((e,a)=>{let{children:s,...i}=e;d(s)&&"function"==typeof l&&(s=l(s._payload));let o=r.Children.toArray(s),c=o.find(m);if(c){let e=c.props.children,s=o.map(t=>t!==c?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(n,{...i,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,s):null})}return(0,t.jsx)(n,{...i,ref:a,children:s})});return o.displayName=`${e}.Slot`,o}var c=o("Slot"),u=Symbol("radix.slottable");function m(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}e.s(["Slot",()=>c,"createSlot",()=>o],92024);var p=e.i(7284);let x=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,h=p.clsx,f=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return h(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:s,defaultVariants:i}=t,n=Object.keys(s).map(e=>{let t=null==r?void 0:r[e],a=null==i?void 0:i[e];if(null===t)return null;let n=x(t)||x(a);return s[e][n]}),l=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return h(e,n,null==t||null==(a=t.compoundVariants)?void 0:a.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...l}[t]):({...i,...l})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)};e.s(["cva",0,f],94237);var g=e.i(17171);let v=f("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md",destructive:"bg-destructive text-white shadow-sm hover:bg-destructive/90 hover:shadow-md focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/80",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground hover:border-accent dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white shadow-sm hover:bg-emerald-700 hover:shadow-md dark:bg-emerald-600",warning:"bg-amber-500 text-amber-950 shadow-sm hover:bg-amber-600 hover:shadow-md"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-lg px-6 has-[>svg]:px-4",xl:"h-12 rounded-xl px-8 text-base has-[>svg]:px-6",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function b({className:e,variant:r,size:a,asChild:s=!1,...i}){return(0,t.jsx)(s?c:"button",{"data-slot":"button",className:(0,g.cn)(v({variant:r,size:a,className:e})),...i})}e.s(["Button",()=>b,"buttonVariants",()=>v],72029)},13107,e=>{"use strict";var t=e.i(33169),r=e.i(92024),a=e.i(94237),s=e.i(17171);let i=(0,a.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:a,asChild:n=!1,...l}){let d=n?r.Slot:"span";return(0,t.jsx)(d,{"data-slot":"badge",className:(0,s.cn)(i({variant:a}),e),...l})}e.s(["Badge",()=>n])},66432,e=>{"use strict";var t=e.i(60844);e.i(92865);var r=e.i(92024),a=e.i(33169),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let i=(0,r.createSlot)(`Primitive.${s}`),n=t.forwardRef((e,t)=>{let{asChild:r,...n}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(r?i:s,{...n,ref:t})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{});e.s(["Primitive",()=>s])},99573,e=>{"use strict";var t=e.i(33169),r=e.i(60844),a=e.i(66432),s=r.forwardRef((e,r)=>(0,t.jsx)(a.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var i=e.i(17171);function n({className:e,...r}){return(0,t.jsx)(s,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}e.s(["Label",()=>n],99573)},20650,e=>{"use strict";var t=e.i(33169),r=e.i(17171);function a({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Textarea",()=>a])},15204,e=>{"use strict";let t=(0,e.i(50974).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);e.s(["Sparkles",()=>t],15204)},82251,e=>{"use strict";let t=(0,e.i(50974).default)("gamepad-2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);e.s(["Gamepad2",()=>t],82251)},9831,e=>{"use strict";let t=(0,e.i(50974).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],9831)},27691,e=>{"use strict";let t=(0,e.i(50974).default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);e.s(["Heart",()=>t],27691)},35908,e=>{"use strict";let t=(0,e.i(50974).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],35908)},82333,e=>{"use strict";var t=e.i(33169),r=e.i(8422),a=e.i(60844),s=e.i(51200),i=e.i(72029),n=e.i(30243),l=e.i(99573),d=e.i(20650),o=e.i(13107),c=e.i(87126),u=e.i(79342),m=e.i(82251),p=e.i(79923),x=e.i(9831),h=e.i(5850),f=e.i(60381),g=e.i(32647),v=e.i(29720),b=e.i(35908),y=e.i(27691),j=e.i(15204),k=e.i(89908);let w={name:"角色名",world:"世界观",identity:"身份",personality:"性格",likes:"喜好",dislikes:"厌恶",background:"背景故事",secret:"秘密",scene:"当前场景",meetingReason:"相遇原因",greeting:"开场白",summary:"前情提要",relationship:"关系"},N={name:(0,t.jsx)(v.User,{className:"h-4 w-4"}),world:(0,t.jsx)(b.MapPin,{className:"h-4 w-4"}),personality:(0,t.jsx)(j.Sparkles,{className:"h-4 w-4"}),relationship:(0,t.jsx)(y.Heart,{className:"h-4 w-4"})};function C(){let e,v,b=(0,r.useSearchParams)().get("code"),[y,j]=(0,a.useState)(!0),[C,S]=(0,a.useState)(!1),[_,z]=(0,a.useState)(""),[M,T]=(0,a.useState)(!1),[$,I]=(0,a.useState)(null),[A,P]=(0,a.useState)(null),[R,H]=(0,a.useState)({}),[O,B]=(0,a.useState)(!1),[D,E]=(0,a.useState)(!1),[V,L]=(0,a.useState)(0),F=(0,a.useCallback)(async e=>{try{let t=await fetch("/chatai/api/game-edit/session",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok){if(401===t.status){localStorage.removeItem("game_edit_token"),S(!0),j(!1);return}throw Error("加载失败")}let r=await t.json();if(0===r.code)P(r.data),H(r.data.gameData||{}),L(r.data.remainingTime),S(!1);else throw Error(r.message)}catch(e){I(e.message||"加载失败")}finally{j(!1)}},[]),U=(0,a.useCallback)(async e=>{j(!0);try{let t=await fetch("/chatai/api/game-edit/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e.trim()})}),r=await t.json();0===r.code?(localStorage.setItem("game_edit_token",r.data.token),u.toast.success("登录成功"),F(r.data.token)):(u.toast.error(r.message||"编辑码无效或已过期"),S(!0),j(!1))}catch{u.toast.error("登录失败，请检查网络"),S(!0),j(!1)}},[F]);(0,a.useEffect)(()=>{if(b){window.history.replaceState({},"","/chatai/game-edit"),U(b);return}let e=localStorage.getItem("game_edit_token");if(!e){S(!0),j(!1);return}F(e)},[b,U,F]),(0,a.useEffect)(()=>{if(V<=0)return;let e=setInterval(()=>{L(t=>t<=1e3?(clearInterval(e),I("编辑会话已过期"),0):t-1e3)},1e3);return()=>clearInterval(e)},[V]);let q=(e,t)=>{H(r=>({...r,environment:{...r.environment,[e]:t}}))},W=async()=>{_.trim()?(T(!0),await U(_),T(!1)):u.toast.error("请输入编辑码")},G=async()=>{if(A){B(!0);try{let e=await fetch("/chatai/api/game-edit/session",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("game_edit_token")||""}`},body:JSON.stringify({updates:R})}),t=await e.json();if(0!==t.code)return void u.toast.error(t.message||"提交失败");E(!0),localStorage.removeItem("game_edit_token"),u.toast.success("编辑已提交！请返回游戏查看更新")}catch{u.toast.error("网络错误")}finally{B(!1)}}};return y?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 dark:from-gray-900 dark:to-purple-900 p-4",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[(0,t.jsx)(c.Skeleton,{className:"h-12 w-48"}),(0,t.jsx)(c.Skeleton,{className:"h-64 w-full"})]})}):$?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 dark:from-gray-900 dark:to-purple-900 flex items-center justify-center p-4",children:(0,t.jsx)(s.Card,{className:"max-w-md w-full",children:(0,t.jsxs)(s.CardContent,{className:"pt-6 text-center",children:[(0,t.jsx)(f.AlertCircle,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"无法加载"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:$})]})})}):C?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-gray-900 dark:to-purple-900",children:(0,t.jsxs)("div",{className:"w-full max-w-md space-y-4",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto p-3 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 w-fit mb-2",children:(0,t.jsx)(m.Gamepad2,{className:"h-6 w-6 text-white"})}),(0,t.jsx)(s.CardTitle,{children:"游戏信息编辑"}),(0,t.jsx)(s.CardDescription,{children:"输入编辑码以访问编辑页面"})]}),(0,t.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,t.jsx)(n.Input,{value:_,onChange:e=>z(e.target.value),onKeyDown:e=>"Enter"===e.key&&W(),placeholder:"输入编辑码（UUID格式）",className:"text-center font-mono",autoFocus:!0}),(0,t.jsxs)(i.Button,{className:"w-full bg-purple-600 hover:bg-purple-700",onClick:W,disabled:M,children:[M&&(0,t.jsx)(k.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"进入编辑"]})]})]}),(0,t.jsx)(s.Card,{className:"bg-muted/50",children:(0,t.jsxs)(s.CardContent,{className:"pt-4",children:[(0,t.jsxs)("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[(0,t.jsx)(f.AlertCircle,{className:"h-4 w-4 text-muted-foreground"}),"如何获取编辑码？"]}),(0,t.jsxs)("ol",{className:"text-xs text-muted-foreground space-y-1 list-decimal list-inside",children:[(0,t.jsxs)("li",{children:["在游戏群中发送 ",(0,t.jsx)("code",{className:"bg-background px-1 py-0.5 rounded border",children:"#游戏在线编辑"})]}),(0,t.jsx)("li",{children:"Bot 将私聊发送编辑链接或编辑码"}),(0,t.jsxs)("li",{children:["编辑码有效期为 ",(0,t.jsx)("strong",{children:"30分钟"})]})]})]})})]})}):D?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-50 dark:from-gray-900 dark:to-emerald-900 flex items-center justify-center p-4",children:(0,t.jsx)(s.Card,{className:"max-w-md w-full",children:(0,t.jsxs)(s.CardContent,{className:"pt-6 text-center",children:[(0,t.jsx)(g.CheckCircle2,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"编辑已提交"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"请返回游戏查看更新后的信息"})]})})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 dark:from-gray-900 dark:to-purple-900 p-4",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500",children:(0,t.jsx)(m.Gamepad2,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(s.CardTitle,{children:"游戏信息编辑"}),(0,t.jsx)(s.CardDescription,{children:"编辑你的游戏角色和环境设定"})]})]}),(0,t.jsxs)(o.Badge,{variant:"outline",className:"flex items-center gap-1",children:[(0,t.jsx)(p.Clock,{className:"h-3 w-3"}),(e=Math.floor(V/6e4),v=Math.floor(V%6e4/1e3),`${e}:${v.toString().padStart(2,"0")}`)]})]})})}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-base",children:"角色设定"})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("div",{className:"space-y-4",children:A?.editableFields.environment.map(e=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(l.Label,{className:"flex items-center gap-2",children:[N[e],w[e]||e]}),["background","summary","greeting","scene"].includes(e)?(0,t.jsx)(d.Textarea,{value:R.environment?.[e]||"",onChange:t=>q(e,t.target.value),placeholder:`输入${w[e]||e}...`,rows:3}):(0,t.jsx)(n.Input,{value:R.environment?.[e]||"",onChange:t=>q(e,t.target.value),placeholder:`输入${w[e]||e}...`})]},e))})})]}),(0,t.jsxs)(s.Card,{className:"border-dashed",children:[(0,t.jsx)(s.CardHeader,{className:"pb-2",children:(0,t.jsxs)(s.CardTitle,{className:"text-sm flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(x.Lock,{className:"h-4 w-4"}),"受保护的信息（只读）"]})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"好感度:"}),(0,t.jsx)("span",{children:R.session?.affection??"???"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"信任度:"}),(0,t.jsx)("span",{children:R.session?.trust??"???"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"金币:"}),(0,t.jsx)("span",{children:R.session?.gold??"???"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"秘密:"}),(0,t.jsx)("span",{className:"text-muted-foreground italic",children:"隐藏"})]})]})})]}),A?.editableFields.session.length>0&&(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-base",children:"会话设定"})}),(0,t.jsx)(s.CardContent,{className:"space-y-4",children:A.editableFields.session.map(e=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(l.Label,{className:"flex items-center gap-2",children:[N[e],w[e]||e]}),(0,t.jsx)(n.Input,{value:R.session?.[e]||"",onChange:t=>{var r;return r=t.target.value,void H(t=>({...t,session:{...t.session,[e]:r}}))},placeholder:`输入${w[e]||e}...`})]},e))})]}),(0,t.jsx)(i.Button,{className:"w-full",size:"lg",onClick:G,disabled:O||V<=0,children:O?(0,t.jsx)(t.Fragment,{children:"保存中..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Save,{className:"mr-2 h-4 w-4"}),"提交编辑"]})})]})})}function S(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 dark:from-gray-900 dark:to-purple-900 p-4",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[(0,t.jsx)(c.Skeleton,{className:"h-12 w-48"}),(0,t.jsx)(c.Skeleton,{className:"h-64 w-full"})]})}),children:(0,t.jsx)(C,{})})}e.s(["default",()=>S])}]);