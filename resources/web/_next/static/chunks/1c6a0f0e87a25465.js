(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,24666,e=>{"use strict";var s=e.i(52542),l=e.i(40418),a=e.i(51200),t=e.i(72029),r=e.i(30243),n=e.i(99573),d=e.i(13107),i=e.i(87126),c=e.i(20308),m=e.i(94518),o=e.i(25466),x=e.i(10201),h=e.i(47686),u=e.i(20650),j=e.i(81080),g=e.i(75979),p=e.i(79342),b=e.i(60713),v=e.i(35771),f=e.i(89908),y=e.i(32308),N=e.i(97058),S=e.i(40204),_=e.i(68466),w=e.i(70620),I=e.i(63959);let T=(0,e.i(50974).default)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);var M=e.i(74940),C=e.i(80830),P=e.i(98858),E=e.i(19460),k=e.i(15204),V=e.i(17286),L=e.i(10273),B=e.i(44697),F=e.i(14775),G=e.i(96173),z=e.i(64516),D=e.i(10148),A=e.i(57345),R=e.i(77759),H=e.i(79923),O=e.i(51078),U=e.i(17171);let X={default:"默认",at:"仅@触发",prefix:"仅前缀",all:"全部消息"};function $(){let[e,$]=(0,l.useState)([]),[q,Z]=(0,l.useState)([]),[K,W]=(0,l.useState)([]),[,J]=(0,l.useState)([]),[Q,Y]=(0,l.useState)(!0),[ee,es]=(0,l.useState)(!1),[el,ea]=(0,l.useState)(null),[et,er]=(0,l.useState)(!1),[en,ed]=(0,l.useState)(""),[ei,ec]=(0,l.useState)(!1),[em,eo]=(0,l.useState)(null),[ex,eh]=(0,l.useState)(!1),[eu,ej]=(0,l.useState)(!1),[eg,ep]=(0,l.useState)([]),[eb,ev]=(0,l.useState)("all"),[ef,ey]=(0,l.useState)(!1),[eN,eS]=(0,l.useState)("basic"),[e_,ew]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=()=>ey(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let[eI,eT]=(0,l.useState)({groupId:"",groupName:"",presetId:"__default__",systemPrompt:"",modelId:"__default__",chatModel:"",toolModel:"",dispatchModel:"",imageModel:"",drawModel:"",searchModel:"",roleplayModel:"",profileModel:"",enabled:!0,triggerMode:"default",bymEnabled:"inherit",bymPresetId:"__default__",bymPrompt:"",bymProbability:"inherit",bymModel:"",bymTemperature:"inherit",bymMaxTokens:"inherit",emojiThiefEnabled:"inherit",emojiThiefSeparateFolder:!0,emojiThiefMaxCount:500,emojiThiefStealRate:1,emojiThiefTriggerMode:"random",emojiThiefTriggerRate:.05,toolsEnabled:"inherit",imageGenEnabled:"inherit",imageGenModel:"",summaryEnabled:"inherit",summaryModel:"",eventEnabled:"inherit",welcomeEnabled:"inherit",welcomeMessage:"",welcomePrompt:"",goodbyeEnabled:"inherit",goodbyePrompt:"",pokeEnabled:"inherit",pokeBack:!1,summaryPushEnabled:"inherit",summaryPushIntervalType:"day",summaryPushIntervalValue:1,summaryPushHour:22,summaryPushMessageCount:100,summaryPushModel:"",customPrefix:"",knowledgeIds:[],inheritFrom:[]}),eM=async()=>{try{let[e,s,l,a]=await Promise.all([g.scopeApi.getGroups(),g.presetsApi.list(),g.channelsApi.list(),g.knowledgeApi.list()]);$(e?.data||[]),Z(s?.data||[]),W((a?.data||[]).map(e=>({id:e.id,name:e.name}))),J(l?.data||[]);let t=new Set;(l?.data||[]).forEach(e=>{Array.isArray(e.models)&&e.models.forEach(e=>t.add(e))}),ep(Array.from(t).sort())}catch(e){p.toast.error("加载数据失败"),console.error(e)}finally{Y(!1)}};(0,l.useEffect)(()=>{eM()},[]);let eC=()=>{eT({groupId:"",groupName:"",presetId:"__default__",systemPrompt:"",modelId:"__default__",chatModel:"",toolModel:"",dispatchModel:"",imageModel:"",drawModel:"",searchModel:"",roleplayModel:"",profileModel:"",enabled:!0,triggerMode:"default",bymEnabled:"inherit",bymPresetId:"__default__",bymPrompt:"",bymProbability:"inherit",bymModel:"",bymTemperature:"inherit",bymMaxTokens:"inherit",emojiThiefEnabled:"inherit",emojiThiefSeparateFolder:!0,emojiThiefMaxCount:500,emojiThiefStealRate:1,emojiThiefTriggerMode:"random",emojiThiefTriggerRate:.05,toolsEnabled:"inherit",imageGenEnabled:"inherit",imageGenModel:"",summaryEnabled:"inherit",summaryModel:"",eventEnabled:"inherit",welcomeEnabled:"inherit",welcomeMessage:"",welcomePrompt:"",goodbyeEnabled:"inherit",goodbyePrompt:"",pokeEnabled:"inherit",pokeBack:!1,summaryPushEnabled:"inherit",summaryPushIntervalType:"day",summaryPushIntervalValue:1,summaryPushHour:22,summaryPushMessageCount:100,summaryPushModel:"",customPrefix:"",knowledgeIds:[],inheritFrom:[]}),ea(null)},eP=e=>{if(e){ea(e);let s=e.settings||{},l=s.chatModel||s.modelId||e.modelId||"";eT({groupId:e.groupId,groupName:s.groupName||e.groupName||"",presetId:e.presetId||s.presetId||"__default__",systemPrompt:e.systemPrompt||s.systemPrompt||"",modelId:"__default__",chatModel:l,toolModel:s.toolModel||"",dispatchModel:s.dispatchModel||"",imageModel:s.imageModel||"",drawModel:s.drawModel||"",searchModel:s.searchModel||"",roleplayModel:s.roleplayModel||"",profileModel:s.profileModel||"",enabled:e.enabled??s.enabled??!0,triggerMode:s.triggerMode||e.triggerMode||"default",bymEnabled:void 0===s.bymEnabled?"inherit":s.bymEnabled?"on":"off",bymPresetId:s.bymPresetId||"__default__",bymPrompt:s.bymPrompt||"",bymProbability:void 0===s.bymProbability?"inherit":s.bymProbability,bymModel:s.bymModel||"",bymTemperature:void 0===s.bymTemperature?"inherit":s.bymTemperature,bymMaxTokens:void 0===s.bymMaxTokens?"inherit":s.bymMaxTokens,emojiThiefEnabled:void 0===s.emojiThiefEnabled?"inherit":s.emojiThiefEnabled?"on":"off",emojiThiefSeparateFolder:s.emojiThiefSeparateFolder??!0,emojiThiefMaxCount:s.emojiThiefMaxCount??500,emojiThiefStealRate:s.emojiThiefStealRate??1,emojiThiefTriggerMode:s.emojiThiefTriggerMode||"random",emojiThiefTriggerRate:s.emojiThiefTriggerRate??.05,toolsEnabled:void 0===s.toolsEnabled?"inherit":s.toolsEnabled?"on":"off",imageGenEnabled:void 0===s.imageGenEnabled?"inherit":s.imageGenEnabled?"on":"off",imageGenModel:s.imageGenModel||"",summaryEnabled:void 0===s.summaryEnabled?"inherit":s.summaryEnabled?"on":"off",summaryModel:s.summaryModel||"",eventEnabled:void 0===s.eventEnabled?"inherit":s.eventEnabled?"on":"off",welcomeEnabled:void 0===s.welcomeEnabled?"inherit":s.welcomeEnabled?"on":"off",welcomeMessage:s.welcomeMessage||"",welcomePrompt:s.welcomePrompt||"",goodbyeEnabled:void 0===s.goodbyeEnabled?"inherit":s.goodbyeEnabled?"on":"off",goodbyePrompt:s.goodbyePrompt||"",pokeEnabled:void 0===s.pokeEnabled?"inherit":s.pokeEnabled?"on":"off",pokeBack:s.pokeBack??!1,summaryPushEnabled:void 0===s.summaryPushEnabled?"inherit":s.summaryPushEnabled?"on":"off",summaryPushIntervalType:s.summaryPushIntervalType||"day",summaryPushIntervalValue:s.summaryPushIntervalValue??1,summaryPushHour:s.summaryPushHour??22,summaryPushMessageCount:s.summaryPushMessageCount??100,summaryPushModel:s.summaryPushModel||"",customPrefix:s.customPrefix||"",knowledgeIds:e.knowledgeIds||[],inheritFrom:e.inheritFrom||[]})}else eC();es(!0)},eE=async()=>{if(!eI.groupId)return void p.toast.error("请填写群号");er(!0);try{await g.scopeApi.updateGroup(eI.groupId,{groupName:eI.groupName,presetId:"__default__"===eI.presetId?"":eI.presetId,systemPrompt:eI.systemPrompt||null,chatModel:eI.chatModel||void 0,toolModel:eI.toolModel||void 0,dispatchModel:eI.dispatchModel||void 0,imageModel:eI.imageModel||void 0,drawModel:eI.drawModel||void 0,searchModel:eI.searchModel||void 0,roleplayModel:eI.roleplayModel||void 0,profileModel:eI.profileModel||void 0,enabled:eI.enabled,triggerMode:eI.triggerMode,bymEnabled:"inherit"===eI.bymEnabled?void 0:"on"===eI.bymEnabled,bymPresetId:"__default__"===eI.bymPresetId?void 0:eI.bymPresetId,bymPrompt:eI.bymPrompt||void 0,bymProbability:"inherit"===eI.bymProbability?void 0:eI.bymProbability,bymModel:eI.bymModel||void 0,bymTemperature:"inherit"===eI.bymTemperature?void 0:eI.bymTemperature,bymMaxTokens:"inherit"===eI.bymMaxTokens?void 0:eI.bymMaxTokens,emojiThiefEnabled:"inherit"===eI.emojiThiefEnabled?void 0:"on"===eI.emojiThiefEnabled,emojiThiefSeparateFolder:eI.emojiThiefSeparateFolder,emojiThiefMaxCount:eI.emojiThiefMaxCount,emojiThiefStealRate:eI.emojiThiefStealRate,emojiThiefTriggerMode:eI.emojiThiefTriggerMode,emojiThiefTriggerRate:eI.emojiThiefTriggerRate,toolsEnabled:"inherit"===eI.toolsEnabled?void 0:"on"===eI.toolsEnabled,imageGenEnabled:"inherit"===eI.imageGenEnabled?void 0:"on"===eI.imageGenEnabled,imageGenModel:eI.imageGenModel||void 0,summaryEnabled:"inherit"===eI.summaryEnabled?void 0:"on"===eI.summaryEnabled,summaryModel:eI.summaryModel||void 0,eventEnabled:"inherit"===eI.eventEnabled?void 0:"on"===eI.eventEnabled,welcomeEnabled:"inherit"===eI.welcomeEnabled?void 0:"on"===eI.welcomeEnabled,welcomeMessage:eI.welcomeMessage||void 0,welcomePrompt:eI.welcomePrompt||void 0,goodbyeEnabled:"inherit"===eI.goodbyeEnabled?void 0:"on"===eI.goodbyeEnabled,goodbyePrompt:eI.goodbyePrompt||void 0,pokeEnabled:"inherit"===eI.pokeEnabled?void 0:"on"===eI.pokeEnabled,pokeBack:eI.pokeBack,summaryPushEnabled:"inherit"===eI.summaryPushEnabled?void 0:"on"===eI.summaryPushEnabled,summaryPushIntervalType:eI.summaryPushIntervalType,summaryPushIntervalValue:eI.summaryPushIntervalValue,summaryPushHour:eI.summaryPushHour,summaryPushMessageCount:eI.summaryPushMessageCount,summaryPushModel:eI.summaryPushModel||void 0,customPrefix:eI.customPrefix||void 0,knowledgeIds:eI.knowledgeIds.length>0?eI.knowledgeIds:void 0,inheritFrom:eI.inheritFrom.length>0?eI.inheritFrom:void 0}),p.toast.success("群配置已保存"),es(!1),eC(),eM()}catch(e){p.toast.error("保存失败"),console.error(e)}finally{er(!1)}},ek=async()=>{if(em){eh(!0);try{await g.scopeApi.deleteGroup(em.groupId),p.toast.success("群配置已删除"),ec(!1),eo(null),eM()}catch(e){p.toast.error("删除失败"),console.error(e)}finally{eh(!1)}}},eV=async e=>{let s=!(e.enabled??e.settings?.enabled??!0);ew(e.groupId);try{await g.scopeApi.updateGroup(e.groupId,{enabled:s}),p.toast.success(s?"已启用群组":"已禁用群组"),eM()}catch(e){p.toast.error("切换失败"),console.error(e)}finally{ew(null)}},eL=(0,l.useMemo)(()=>e.filter(e=>{let s=e.groupId.includes(en)||e.groupName?.toLowerCase().includes(en.toLowerCase()),l=e.enabled??e.settings?.enabled??!0,a="all"===eb||"enabled"===eb&&l||"disabled"===eb&&!l;return s&&a}),[e,en,eb]),eB=(0,l.useMemo)(()=>({total:e.length,enabled:e.filter(e=>e.enabled??e.settings?.enabled??!0).length,disabled:e.filter(e=>!(e.enabled??e.settings?.enabled??!0)).length}),[e]);if(Q)return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(i.Skeleton,{className:"h-8 w-32"}),(0,s.jsx)(i.Skeleton,{className:"h-10 w-24"})]}),(0,s.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,l)=>(0,s.jsx)(a.Card,{children:(0,s.jsx)(a.CardContent,{className:"p-4",children:(0,s.jsx)(i.Skeleton,{className:"h-16 w-full"})})},l))})]});let eF=()=>(0,s.jsxs)(j.Tabs,{value:eN,onValueChange:eS,className:"w-full",children:[(0,s.jsxs)(j.TabsList,{className:"grid w-full grid-cols-4 mb-4",children:[(0,s.jsxs)(j.TabsTrigger,{value:"basic",className:"text-xs sm:text-sm",children:[(0,s.jsx)(S.Settings,{className:"h-3.5 w-3.5 mr-1 hidden sm:inline"}),"基础"]}),(0,s.jsxs)(j.TabsTrigger,{value:"features",className:"text-xs sm:text-sm",children:[(0,s.jsx)(G.Zap,{className:"h-3.5 w-3.5 mr-1 hidden sm:inline"}),"功能"]}),(0,s.jsxs)(j.TabsTrigger,{value:"bym",className:"text-xs sm:text-sm",children:[(0,s.jsx)(k.Sparkles,{className:"h-3.5 w-3.5 mr-1 hidden sm:inline"}),"伪人"]}),(0,s.jsxs)(j.TabsTrigger,{value:"advanced",className:"text-xs sm:text-sm",children:[(0,s.jsx)(I.BookOpen,{className:"h-3.5 w-3.5 mr-1 hidden sm:inline"}),"高级"]})]}),(0,s.jsxs)(j.TabsContent,{value:"basic",className:"space-y-4 mt-0",children:[(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{htmlFor:"groupId",children:"群号 *"}),(0,s.jsx)(r.Input,{id:"groupId",value:eI.groupId,onChange:e=>eT({...eI,groupId:e.target.value}),placeholder:"123456789",disabled:!!el})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{htmlFor:"groupName",children:"群名称"}),(0,s.jsx)(r.Input,{id:"groupName",value:eI.groupName,onChange:e=>eT({...eI,groupName:e.target.value}),placeholder:"可选，便于识别"})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"使用预设"}),(0,s.jsxs)(x.Select,{value:eI.presetId,onValueChange:e=>eT({...eI,presetId:e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"使用默认预设"})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"使用默认预设"}),q.map(e=>(0,s.jsx)(x.SelectItem,{value:e.id,children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{children:e.name}),e.description&&(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:e.description})]})},e.id))]})]}),eI.presetId&&"__default__"!==eI.presetId&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:q.find(e=>e.id===eI.presetId)?.systemPromptPreview||""})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"触发模式"}),(0,s.jsxs)(x.Select,{value:eI.triggerMode,onValueChange:e=>eT({...eI,triggerMode:e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"default",children:"默认"}),(0,s.jsx)(x.SelectItem,{value:"at",children:"仅@触发"}),(0,s.jsx)(x.SelectItem,{value:"prefix",children:"仅前缀触发"}),(0,s.jsx)(x.SelectItem,{value:"all",children:"全部消息"})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"自定义前缀"}),(0,s.jsx)(r.Input,{value:eI.customPrefix,onChange:e=>eT({...eI,customPrefix:e.target.value}),placeholder:"留空使用全局前缀，如 #ai"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"独立人设"}),(0,s.jsx)(u.Textarea,{value:eI.systemPrompt,onChange:e=>eT({...eI,systemPrompt:e.target.value}),placeholder:"不填写则使用预设配置...",rows:3,className:"font-mono text-sm resize-none"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(P.Power,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)(n.Label,{className:"font-normal",children:"启用AI响应"})]}),(0,s.jsx)(c.Switch,{checked:eI.enabled,onCheckedChange:e=>eT({...eI,enabled:e})})]})]}),(0,s.jsxs)(j.TabsContent,{value:"features",className:"space-y-3 mt-0",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"群管理员也可通过命令控制这些功能"}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-md bg-muted",children:(0,s.jsx)(G.Zap,{className:"h-4 w-4 text-muted-foreground"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"工具调用"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"允许AI使用搜索、代码执行等工具"})]})]}),(0,s.jsxs)(x.Select,{value:eI.toolsEnabled,onValueChange:e=>eT({...eI,toolsEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-28",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"继承"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"开启"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-md bg-muted",children:(0,s.jsx)(V.Image,{className:"h-4 w-4 text-muted-foreground"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"绘图功能"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"文生图、图生图等"})]})]}),(0,s.jsxs)(x.Select,{value:eI.imageGenEnabled,onValueChange:e=>eT({...eI,imageGenEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-28",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"继承"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"开启"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"})]})]})]}),"on"===eI.imageGenEnabled&&(0,s.jsxs)("div",{className:"ml-4 pl-4 border-l-2 border-muted space-y-2 animate-fade-in",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"绘图模型"}),(0,s.jsxs)(x.Select,{value:eI.imageGenModel||"__default__",onValueChange:e=>eT({...eI,imageGenModel:"__default__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"继承全局"})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"继承全局"}),eg.filter(e=>e.includes("image")||e.includes("gemini")||e.includes("dalle")||e.includes("flux")).map(e=>(0,s.jsx)(x.SelectItem,{value:e,children:e},e))]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-md bg-muted",children:(0,s.jsx)(L.MessageSquare,{className:"h-4 w-4 text-muted-foreground"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"群聊总结"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"允许使用群聊总结"})]})]}),(0,s.jsxs)(x.Select,{value:eI.summaryEnabled,onValueChange:e=>eT({...eI,summaryEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-28",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"继承"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"开启"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"})]})]})]}),"on"===eI.summaryEnabled&&(0,s.jsxs)("div",{className:"ml-4 pl-4 border-l-2 border-muted space-y-2 animate-fade-in",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"总结模型"}),(0,s.jsxs)(x.Select,{value:eI.summaryModel||"__default__",onValueChange:e=>eT({...eI,summaryModel:"__default__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"继承全局"})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"继承全局"}),eg.map(e=>(0,s.jsx)(x.SelectItem,{value:e,children:e},e))]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-md bg-muted",children:(0,s.jsx)(B.PartyPopper,{className:"h-4 w-4 text-muted-foreground"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"事件处理"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"入群欢迎、退群提醒"})]})]}),(0,s.jsxs)(x.Select,{value:eI.eventEnabled,onValueChange:e=>eT({...eI,eventEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-28",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"继承"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"开启"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"})]})]})]}),"off"!==eI.eventEnabled&&(0,s.jsxs)("div",{className:"ml-4 pl-4 border-l-2 border-muted space-y-4 animate-fade-in",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(D.UserPlus,{className:"h-4 w-4 text-green-500"}),(0,s.jsx)(n.Label,{className:"text-sm font-medium",children:"入群欢迎"})]}),(0,s.jsxs)(x.Select,{value:eI.welcomeEnabled,onValueChange:e=>eT({...eI,welcomeEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-24",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"继承"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"开启"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"})]})]})]}),"on"===eI.welcomeEnabled&&(0,s.jsxs)("div",{className:"space-y-2 pl-6",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"固定欢迎语"}),(0,s.jsx)(u.Textarea,{value:eI.welcomeMessage,placeholder:"留空则使用AI生成，支持 {nickname} {at} 变量",onChange:e=>eT({...eI,welcomeMessage:e.target.value}),rows:2,className:"text-sm"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"AI欢迎提示词"}),(0,s.jsx)(u.Textarea,{value:eI.welcomePrompt,placeholder:"为新成员生成欢迎消息时的提示...",onChange:e=>eT({...eI,welcomePrompt:e.target.value}),rows:2,className:"text-sm"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(A.UserMinus,{className:"h-4 w-4 text-red-500"}),(0,s.jsx)(n.Label,{className:"text-sm font-medium",children:"退群提醒"})]}),(0,s.jsxs)(x.Select,{value:eI.goodbyeEnabled,onValueChange:e=>eT({...eI,goodbyeEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-24",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"继承"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"开启"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"})]})]})]}),"on"===eI.goodbyeEnabled&&(0,s.jsxs)("div",{className:"space-y-1 pl-6",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"AI告别提示词"}),(0,s.jsx)(u.Textarea,{value:eI.goodbyePrompt,placeholder:"为离开成员生成告别消息时的提示...",onChange:e=>eT({...eI,goodbyePrompt:e.target.value}),rows:2,className:"text-sm"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(R.Hand,{className:"h-4 w-4 text-blue-500"}),(0,s.jsx)(n.Label,{className:"text-sm font-medium",children:"戳一戳回复"})]}),(0,s.jsxs)(x.Select,{value:eI.pokeEnabled,onValueChange:e=>eT({...eI,pokeEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-24",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"继承"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"开启"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"})]})]})]}),"on"===eI.pokeEnabled&&(0,s.jsxs)("div",{className:"flex items-center gap-2 pl-6",children:[(0,s.jsx)(c.Switch,{checked:eI.pokeBack,onCheckedChange:e=>eT({...eI,pokeBack:e})}),(0,s.jsx)(n.Label,{className:"text-xs",children:"戳回去（而非文字回复）"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-md bg-muted",children:(0,s.jsx)(F.Palette,{className:"h-4 w-4 text-muted-foreground"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"表情小偷"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"收集并发送表情包"})]})]}),(0,s.jsxs)(x.Select,{value:eI.emojiThiefEnabled,onValueChange:e=>eT({...eI,emojiThiefEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-28",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"继承"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"开启"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"})]})]})]}),"off"!==eI.emojiThiefEnabled&&(0,s.jsxs)("div",{className:"ml-4 pl-4 border-l-2 border-muted space-y-3 animate-fade-in",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"独立存储"}),(0,s.jsx)(c.Switch,{checked:eI.emojiThiefSeparateFolder,onCheckedChange:e=>eT({...eI,emojiThiefSeparateFolder:e})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"最大数量"}),(0,s.jsx)(r.Input,{type:"number",min:10,max:5e3,value:eI.emojiThiefMaxCount,onChange:e=>eT({...eI,emojiThiefMaxCount:parseInt(e.target.value)||500})})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"偷取概率 (%)"}),(0,s.jsx)(r.Input,{type:"number",min:1,max:100,value:Math.round(100*eI.emojiThiefStealRate),onChange:e=>eT({...eI,emojiThiefStealRate:parseInt(e.target.value)/100})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"发送模式"}),(0,s.jsxs)(x.Select,{value:eI.emojiThiefTriggerMode||"off",onValueChange:e=>eT({...eI,emojiThiefTriggerMode:e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"}),(0,s.jsx)(x.SelectItem,{value:"chat_follow",children:"聊天触发"}),(0,s.jsx)(x.SelectItem,{value:"chat_random",children:"聊天随机"}),(0,s.jsx)(x.SelectItem,{value:"bym_follow",children:"伪人触发"}),(0,s.jsx)(x.SelectItem,{value:"bym_random",children:"伪人随机"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"发送概率 (%)"}),(0,s.jsx)(r.Input,{type:"number",min:1,max:100,value:Math.round((eI.emojiThiefTriggerRate??.05)*100),onChange:e=>eT({...eI,emojiThiefTriggerRate:parseInt(e.target.value)/100}),disabled:"off"===eI.emojiThiefTriggerMode||"chat_follow"===eI.emojiThiefTriggerMode||"bym_follow"===eI.emojiThiefTriggerMode})]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"触发模式100%发送，随机模式按概率发送"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-md bg-muted",children:(0,s.jsx)(H.Clock,{className:"h-4 w-4 text-muted-foreground"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"定时总结推送"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"定期推送群聊总结报告"})]})]}),(0,s.jsxs)(x.Select,{value:eI.summaryPushEnabled,onValueChange:e=>eT({...eI,summaryPushEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-28",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"继承"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"开启"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"})]})]})]}),"on"===eI.summaryPushEnabled&&(0,s.jsxs)("div",{className:"ml-4 pl-4 border-l-2 border-muted space-y-3 animate-fade-in",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"间隔类型"}),(0,s.jsxs)(x.Select,{value:eI.summaryPushIntervalType,onValueChange:e=>eT({...eI,summaryPushIntervalType:e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"day",children:"按天"}),(0,s.jsx)(x.SelectItem,{value:"hour",children:"按小时"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"间隔值"}),(0,s.jsx)(r.Input,{type:"number",min:1,value:eI.summaryPushIntervalValue,onChange:e=>eT({...eI,summaryPushIntervalValue:parseInt(e.target.value)||1})})]})]}),"day"===eI.summaryPushIntervalType&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"推送时间"}),(0,s.jsxs)(x.Select,{value:String(eI.summaryPushHour),onValueChange:e=>eT({...eI,summaryPushHour:parseInt(e)}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-32",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsx)(x.SelectContent,{children:Array.from({length:24},(e,l)=>(0,s.jsxs)(x.SelectItem,{value:String(l),children:[l.toString().padStart(2,"0"),":00"]},l))})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"消息数量"}),(0,s.jsx)(r.Input,{type:"number",min:10,max:500,value:eI.summaryPushMessageCount||100,onChange:e=>eT({...eI,summaryPushMessageCount:parseInt(e.target.value)||100}),className:"w-24"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"总结模型"}),(0,s.jsxs)(x.Select,{value:eI.summaryPushModel||"__default__",onValueChange:e=>eT({...eI,summaryPushModel:"__default__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"使用默认模型"})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"使用默认总结模型"}),eg.map(e=>(0,s.jsx)(x.SelectItem,{value:e,children:e},e))]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"留空使用全局总结模型"})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"每次总结获取指定数量的新消息，不会重复总结已处理的消息"})]})]}),(0,s.jsxs)(j.TabsContent,{value:"bym",className:"space-y-4 mt-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-md bg-gradient-to-br from-purple-500/20 to-pink-500/20",children:(0,s.jsx)(k.Sparkles,{className:"h-4 w-4 text-purple-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"伪人模式"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"随机回复，模拟真人聊天"})]})]}),(0,s.jsxs)(x.Select,{value:eI.bymEnabled,onValueChange:e=>eT({...eI,bymEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-28",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"继承"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"开启"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"})]})]})]}),"off"!==eI.bymEnabled&&(0,s.jsxs)("div",{className:"space-y-4 animate-fade-in",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"伪人人设"}),(0,s.jsxs)(x.Select,{value:eI.bymPresetId,onValueChange:e=>eT({...eI,bymPresetId:e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"选择人设..."})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"使用默认预设"}),(0,s.jsx)(x.SelectItem,{value:"__custom__",children:"自定义提示词"}),q.map(e=>(0,s.jsx)(x.SelectItem,{value:e.id,children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{children:e.name}),e.description&&(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:e.description})]})},e.id))]})]}),eI.bymPresetId&&"__default__"!==eI.bymPresetId&&"__custom__"!==eI.bymPresetId&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:q.find(e=>e.id===eI.bymPresetId)?.systemPromptPreview||""})]}),"__custom__"===eI.bymPresetId&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"自定义提示词"}),(0,s.jsx)(u.Textarea,{value:eI.bymPrompt,onChange:e=>eT({...eI,bymPrompt:e.target.value}),placeholder:"你是一个真实的群友...",rows:3,className:"font-mono text-sm"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"触发概率"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:"inherit"===eI.bymProbability?(0,s.jsx)(t.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>eT({...eI,bymProbability:.02}),children:"继承全局"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Input,{type:"number",min:0,max:100,value:"number"==typeof eI.bymProbability?Math.round(100*eI.bymProbability):2,onChange:e=>eT({...eI,bymProbability:parseInt(e.target.value)/100}),className:"w-20"}),(0,s.jsx)("span",{className:"text-sm",children:"%"}),(0,s.jsx)(t.Button,{variant:"ghost",size:"sm",onClick:()=>eT({...eI,bymProbability:"inherit"}),children:(0,s.jsx)(M.X,{className:"h-3 w-3"})})]})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"使用模型"}),(0,s.jsxs)(x.Select,{value:eI.bymModel||"__default__",onValueChange:e=>eT({...eI,bymModel:"__default__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"继承"})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"继承全局"}),eg.map(e=>(0,s.jsx)(x.SelectItem,{value:e,children:e},e))]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"温度"}),"inherit"===eI.bymTemperature?(0,s.jsx)(t.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>eT({...eI,bymTemperature:.9}),children:"继承全局"}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.Input,{type:"number",min:0,max:2,step:.1,value:"number"==typeof eI.bymTemperature?eI.bymTemperature:.9,onChange:e=>eT({...eI,bymTemperature:parseFloat(e.target.value)})}),(0,s.jsx)(t.Button,{variant:"ghost",size:"sm",onClick:()=>eT({...eI,bymTemperature:"inherit"}),children:(0,s.jsx)(M.X,{className:"h-3 w-3"})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"最大Token"}),"inherit"===eI.bymMaxTokens?(0,s.jsx)(t.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>eT({...eI,bymMaxTokens:100}),children:"继承全局"}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.Input,{type:"number",min:10,max:2e3,value:"number"==typeof eI.bymMaxTokens?eI.bymMaxTokens:100,onChange:e=>eT({...eI,bymMaxTokens:parseInt(e.target.value)})}),(0,s.jsx)(t.Button,{variant:"ghost",size:"sm",onClick:()=>eT({...eI,bymMaxTokens:"inherit"}),children:(0,s.jsx)(M.X,{className:"h-3 w-3"})})]})]})]})]})]}),(0,s.jsxs)(j.TabsContent,{value:"advanced",className:"space-y-4 mt-0",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w.Bot,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)(n.Label,{children:"模型配置"})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"为本群配置各场景独立模型（留空使用全局配置）"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)(n.Label,{className:"text-xs",children:["对话模型 ",(0,s.jsx)("span",{className:"text-muted-foreground",children:"（主模型）"})]}),(0,s.jsxs)(x.Select,{value:eI.chatModel||"__default__",onValueChange:e=>eT({...eI,chatModel:"__default__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"使用全局配置"})}),(0,s.jsxs)(x.SelectContent,{className:"max-h-[200px] overflow-y-auto",children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"使用全局配置"}),eg.map(e=>(0,s.jsx)(x.SelectItem,{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)(n.Label,{className:"text-xs",children:["工具模型 ",(0,s.jsx)("span",{className:"text-muted-foreground",children:"（需要调用工具时）"})]}),(0,s.jsxs)(x.Select,{value:eI.toolModel||"__default__",onValueChange:e=>eT({...eI,toolModel:"__default__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"使用全局配置"})}),(0,s.jsxs)(x.SelectContent,{className:"max-h-[200px] overflow-y-auto",children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"使用全局配置"}),eg.map(e=>(0,s.jsx)(x.SelectItem,{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)(n.Label,{className:"text-xs",children:["调度模型 ",(0,s.jsx)("span",{className:"text-muted-foreground",children:"（工具组分类）"})]}),(0,s.jsxs)(x.Select,{value:eI.dispatchModel||"__default__",onValueChange:e=>eT({...eI,dispatchModel:"__default__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"使用全局配置"})}),(0,s.jsxs)(x.SelectContent,{className:"max-h-[200px] overflow-y-auto",children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"使用全局配置"}),eg.map(e=>(0,s.jsx)(x.SelectItem,{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)(n.Label,{className:"text-xs",children:["图像理解模型 ",(0,s.jsx)("span",{className:"text-muted-foreground",children:"（分析图片）"})]}),(0,s.jsxs)(x.Select,{value:eI.imageModel||"__default__",onValueChange:e=>eT({...eI,imageModel:"__default__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"使用全局配置"})}),(0,s.jsxs)(x.SelectContent,{className:"max-h-[200px] overflow-y-auto",children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"使用全局配置"}),eg.map(e=>(0,s.jsx)(x.SelectItem,{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)(n.Label,{className:"text-xs",children:["绘图模型 ",(0,s.jsx)("span",{className:"text-muted-foreground",children:"（生成图片）"})]}),(0,s.jsxs)(x.Select,{value:eI.drawModel||"__default__",onValueChange:e=>eT({...eI,drawModel:"__default__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"使用全局配置"})}),(0,s.jsxs)(x.SelectContent,{className:"max-h-[200px] overflow-y-auto",children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"使用全局配置"}),eg.map(e=>(0,s.jsx)(x.SelectItem,{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)(n.Label,{className:"text-xs",children:["搜索模型 ",(0,s.jsx)("span",{className:"text-muted-foreground",children:"（联网搜索）"})]}),(0,s.jsxs)(x.Select,{value:eI.searchModel||"__default__",onValueChange:e=>eT({...eI,searchModel:"__default__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"使用全局配置"})}),(0,s.jsxs)(x.SelectContent,{className:"max-h-[200px] overflow-y-auto",children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"使用全局配置"}),eg.map(e=>(0,s.jsx)(x.SelectItem,{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)(n.Label,{className:"text-xs",children:["伪人模型 ",(0,s.jsx)("span",{className:"text-muted-foreground",children:"（模拟真人）"})]}),(0,s.jsxs)(x.Select,{value:eI.roleplayModel||"__default__",onValueChange:e=>eT({...eI,roleplayModel:"__default__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"使用全局配置"})}),(0,s.jsxs)(x.SelectContent,{className:"max-h-[200px] overflow-y-auto",children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"使用全局配置"}),eg.map(e=>(0,s.jsx)(x.SelectItem,{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)(n.Label,{className:"text-xs",children:["总结模型 ",(0,s.jsx)("span",{className:"text-muted-foreground",children:"（群聊总结）"})]}),(0,s.jsxs)(x.Select,{value:eI.summaryModel||"__default__",onValueChange:e=>eT({...eI,summaryModel:"__default__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"使用全局配置"})}),(0,s.jsxs)(x.SelectContent,{className:"max-h-[200px] overflow-y-auto",children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"使用全局配置"}),eg.map(e=>(0,s.jsx)(x.SelectItem,{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)(n.Label,{className:"text-xs",children:["画像模型 ",(0,s.jsx)("span",{className:"text-muted-foreground",children:"（用户画像分析）"})]}),(0,s.jsxs)(x.Select,{value:eI.profileModel||"__default__",onValueChange:e=>eT({...eI,profileModel:"__default__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"使用全局配置"})}),(0,s.jsxs)(x.SelectContent,{className:"max-h-[200px] overflow-y-auto",children:[(0,s.jsx)(x.SelectItem,{value:"__default__",children:"使用全局配置"}),eg.map(e=>(0,s.jsx)(x.SelectItem,{value:e,children:e},e))]})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(I.BookOpen,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)(n.Label,{children:"群组知识库"})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"为本群配置专属知识库"}),eI.knowledgeIds.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:eI.knowledgeIds.map(e=>{let l=K.find(s=>s.id===e);return(0,s.jsxs)(d.Badge,{variant:"secondary",className:"gap-1",children:[l?.name||e,(0,s.jsx)("button",{onClick:()=>eT({...eI,knowledgeIds:eI.knowledgeIds.filter(s=>s!==e)}),children:(0,s.jsx)(M.X,{className:"h-3 w-3"})})]},e)})}),(0,s.jsxs)(x.Select,{value:"",onValueChange:e=>e&&!eI.knowledgeIds.includes(e)&&eT({...eI,knowledgeIds:[...eI.knowledgeIds,e]}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"添加知识库..."})}),(0,s.jsx)(x.SelectContent,{children:K.filter(e=>!eI.knowledgeIds.includes(e.id)).map(e=>(0,s.jsx)(x.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(T,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)(n.Label,{children:"继承配置"})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"从其他来源继承提示词和知识库"}),eI.inheritFrom.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:eI.inheritFrom.map(l=>{let[a,t]=l.split(":"),r=l;return"preset"===a?r=`预设: ${q.find(e=>e.id===t)?.name||t}`:"group"===a&&(r=`群: ${e.find(e=>e.groupId===t)?.groupName||t}`),(0,s.jsxs)(d.Badge,{variant:"outline",className:"gap-1",children:[r,(0,s.jsx)("button",{onClick:()=>eT({...eI,inheritFrom:eI.inheritFrom.filter(e=>e!==l)}),children:(0,s.jsx)(M.X,{className:"h-3 w-3"})})]},l)})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)(x.Select,{value:"",onValueChange:e=>e&&!eI.inheritFrom.includes(e)&&eT({...eI,inheritFrom:[...eI.inheritFrom,e]}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"预设..."})}),(0,s.jsx)(x.SelectContent,{children:q.filter(e=>!eI.inheritFrom.includes(`preset:${e.id}`)).map(e=>(0,s.jsx)(x.SelectItem,{value:`preset:${e.id}`,children:e.name},e.id))})]}),(0,s.jsxs)(x.Select,{value:"",onValueChange:e=>e&&!eI.inheritFrom.includes(e)&&eT({...eI,inheritFrom:[...eI.inheritFrom,e]}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"群组..."})}),(0,s.jsx)(x.SelectContent,{children:e.filter(e=>e.groupId!==eI.groupId&&!eI.inheritFrom.includes(`group:${e.groupId}`)).map(e=>(0,s.jsx)(x.SelectItem,{value:`group:${e.groupId}`,children:e.groupName||e.groupId},e.groupId))})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(B.PartyPopper,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)(n.Label,{children:"事件处理扩展"})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"配置入群欢迎、退群通知等事件响应"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"入群欢迎"}),(0,s.jsxs)(x.Select,{value:eI.welcomeEnabled,onValueChange:e=>eT({...eI,welcomeEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-24",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"继承"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"开启"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"})]})]})]}),"on"===eI.welcomeEnabled&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"欢迎语"}),(0,s.jsx)(r.Input,{value:eI.welcomeMessage,onChange:e=>eT({...eI,welcomeMessage:e.target.value}),placeholder:"留空使用AI生成"})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"自定义提示词"}),(0,s.jsx)(u.Textarea,{value:eI.welcomePrompt,onChange:e=>eT({...eI,welcomePrompt:e.target.value}),placeholder:"[事件通知] {nickname} 加入了群聊...",rows:2})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"退群通知"}),(0,s.jsxs)(x.Select,{value:eI.goodbyeEnabled,onValueChange:e=>eT({...eI,goodbyeEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-24",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"继承"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"开启"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"})]})]})]}),"on"===eI.goodbyeEnabled&&(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"自定义提示词"}),(0,s.jsx)(u.Textarea,{value:eI.goodbyePrompt,onChange:e=>eT({...eI,goodbyePrompt:e.target.value}),placeholder:"[事件通知] {nickname} {action}了群聊...",rows:2})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"戳一戳响应"}),(0,s.jsxs)(x.Select,{value:eI.pokeEnabled,onValueChange:e=>eT({...eI,pokeEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-24",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"继承"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"开启"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"})]})]})]}),"on"===eI.pokeEnabled&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"自动回戳"}),(0,s.jsx)(c.Switch,{checked:eI.pokeBack,onCheckedChange:e=>eT({...eI,pokeBack:e})})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(L.MessageSquare,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)(n.Label,{children:"定时总结推送"})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"配置自动推送群聊总结"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"启用定时推送"}),(0,s.jsxs)(x.Select,{value:eI.summaryPushEnabled,onValueChange:e=>eT({...eI,summaryPushEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-24",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"继承"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"开启"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"关闭"})]})]})]}),"on"===eI.summaryPushEnabled&&(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"间隔类型"}),(0,s.jsxs)(x.Select,{value:eI.summaryPushIntervalType,onValueChange:e=>eT({...eI,summaryPushIntervalType:e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"day",children:"天"}),(0,s.jsx)(x.SelectItem,{value:"hour",children:"小时"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"间隔值"}),(0,s.jsx)(r.Input,{type:"number",min:1,value:eI.summaryPushIntervalValue,onChange:e=>eT({...eI,summaryPushIntervalValue:parseInt(e.target.value)||1})})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.Label,{className:"text-xs",children:"推送时间"}),(0,s.jsx)(r.Input,{type:"number",min:0,max:23,value:eI.summaryPushHour,onChange:e=>eT({...eI,summaryPushHour:parseInt(e.target.value)||0})})]})]})]})]})]});return(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"群组管理"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5",children:"配置群聊个性化设置和独立人设"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:eM,className:"gap-1.5",children:[(0,s.jsx)(N.RefreshCw,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"刷新"})]}),(0,s.jsxs)(t.Button,{size:"sm",onClick:()=>{eC(),eS("basic"),es(!0)},className:"gap-1.5",children:[(0,s.jsx)(b.Plus,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"添加群"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[(0,s.jsxs)("button",{onClick:()=>ev("all"),className:(0,U.cn)("p-3 sm:p-4 rounded-xl border transition-all text-left","all"===eb?"border-primary bg-primary/5 shadow-sm":"hover:border-muted-foreground/30"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(y.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"全部"})]}),(0,s.jsx)("p",{className:"text-lg sm:text-2xl font-bold",children:eB.total})]}),(0,s.jsxs)("button",{onClick:()=>ev("enabled"),className:(0,U.cn)("p-3 sm:p-4 rounded-xl border transition-all text-left","enabled"===eb?"border-emerald-500 bg-emerald-500/5 shadow-sm":"hover:border-muted-foreground/30"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(P.Power,{className:"h-4 w-4 text-emerald-500"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"已启用"})]}),(0,s.jsx)("p",{className:"text-lg sm:text-2xl font-bold text-emerald-600",children:eB.enabled})]}),(0,s.jsxs)("button",{onClick:()=>ev("disabled"),className:(0,U.cn)("p-3 sm:p-4 rounded-xl border transition-all text-left","disabled"===eb?"border-zinc-500 bg-zinc-500/5 shadow-sm":"hover:border-muted-foreground/30"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(E.PowerOff,{className:"h-4 w-4 text-zinc-400"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"已禁用"})]}),(0,s.jsx)("p",{className:"text-lg sm:text-2xl font-bold text-zinc-500",children:eB.disabled})]})]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(C.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(r.Input,{placeholder:"搜索群号或群名称...",value:en,onChange:e=>ed(e.target.value),className:"pl-9 h-10"}),en&&(0,s.jsx)(t.Button,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 p-0",onClick:()=>ed(""),children:(0,s.jsx)(M.X,{className:"h-4 w-4"})})]}),0===eL.length?(0,s.jsx)(a.Card,{className:"border-dashed",children:(0,s.jsxs)(a.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)("div",{className:"p-4 rounded-full bg-muted mb-4",children:(0,s.jsx)(y.Users,{className:"h-8 w-8 text-muted-foreground"})}),(0,s.jsx)("p",{className:"text-lg font-medium mb-1",children:en||"all"!==eb?"未找到匹配的群":"暂无群配置"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:en?"尝试其他搜索词":"添加群组来配置个性化设置"}),!en&&"all"===eb&&(0,s.jsxs)(t.Button,{onClick:()=>{eC(),eS("basic"),es(!0)},children:[(0,s.jsx)(b.Plus,{className:"mr-2 h-4 w-4"}),"添加第一个群"]})]})}):(0,s.jsx)("div",{className:"space-y-2 sm:space-y-3",children:eL.map(e=>{let l=e.enabled??e.settings?.enabled??!0,r=e.settings?.modelId||e.modelId,n=e.settings||{};return(0,s.jsx)(a.Card,{className:(0,U.cn)("group transition-all hover:shadow-md",!l&&"opacity-60"),children:(0,s.jsx)(a.CardContent,{className:"p-3 sm:p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("button",{onClick:()=>eV(e),disabled:e_===e.groupId,className:(0,U.cn)("mt-1 flex-shrink-0 w-10 h-10 rounded-xl flex items-center justify-center transition-all",l?"bg-emerald-500/10 text-emerald-600 hover:bg-emerald-500/20":"bg-zinc-500/10 text-zinc-500 hover:bg-zinc-500/20"),children:e_===e.groupId?(0,s.jsx)(f.Loader2,{className:"h-5 w-5 animate-spin"}):l?(0,s.jsx)(P.Power,{className:"h-5 w-5"}):(0,s.jsx)(E.PowerOff,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)("span",{className:"font-semibold text-base",children:e.groupName||e.groupId}),e.groupName&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground font-mono",children:["#",e.groupId]}),(0,s.jsx)(d.Badge,{variant:l?"default":"secondary",className:"text-xs",children:l?"已启用":"已禁用"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[e.systemPrompt&&(0,s.jsxs)(d.Badge,{variant:"outline",className:"text-xs gap-1 font-normal",children:[(0,s.jsx)(_.FileText,{className:"h-3 w-3"}),"独立人设"]}),!e.systemPrompt&&(0,s.jsxs)(d.Badge,{variant:"outline",className:"text-xs gap-1 font-normal",children:[(0,s.jsx)(F.Palette,{className:"h-3 w-3"}),q.find(s=>s.id===e.presetId)?.name||"默认预设"]}),r&&(0,s.jsxs)(d.Badge,{variant:"outline",className:"text-xs gap-1 font-normal max-w-[140px] truncate",children:[(0,s.jsx)(w.Bot,{className:"h-3 w-3 flex-shrink-0"}),r]}),(0,s.jsxs)(d.Badge,{variant:"outline",className:"text-xs gap-1 font-normal",children:[(0,s.jsx)(G.Zap,{className:"h-3 w-3"}),X[e.triggerMode||"default"]||"默认"]}),n.bymEnabled&&(0,s.jsxs)(d.Badge,{variant:"outline",className:"text-xs gap-1 font-normal bg-purple-500/10 border-purple-500/30",children:[(0,s.jsx)(k.Sparkles,{className:"h-3 w-3 text-purple-500"}),"伪人"]}),e.knowledgeIds&&e.knowledgeIds.length>0&&(0,s.jsxs)(d.Badge,{variant:"outline",className:"text-xs gap-1 font-normal",children:[(0,s.jsx)(I.BookOpen,{className:"h-3 w-3"}),e.knowledgeIds.length]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,s.jsx)(t.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>eP(e),children:(0,s.jsx)(S.Settings,{className:"h-4 w-4"})}),(0,s.jsxs)(O.DropdownMenu,{children:[(0,s.jsx)(O.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsx)(t.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,s.jsx)(z.MoreHorizontal,{className:"h-4 w-4"})})}),(0,s.jsxs)(O.DropdownMenuContent,{align:"end",children:[(0,s.jsxs)(O.DropdownMenuItem,{onClick:()=>eP(e),children:[(0,s.jsx)(S.Settings,{className:"h-4 w-4 mr-2"}),"编辑配置"]}),(0,s.jsxs)(O.DropdownMenuItem,{onClick:()=>eV(e),children:[l?(0,s.jsx)(E.PowerOff,{className:"h-4 w-4 mr-2"}):(0,s.jsx)(P.Power,{className:"h-4 w-4 mr-2"}),l?"禁用群组":"启用群组"]}),(0,s.jsx)(O.DropdownMenuSeparator,{}),(0,s.jsxs)(O.DropdownMenuItem,{className:"text-destructive",onClick:()=>{eo(e),ec(!0)},children:[(0,s.jsx)(v.Trash2,{className:"h-4 w-4 mr-2"}),"删除配置"]})]})]})]})]})})},e.groupId)})}),ef?(0,s.jsx)(o.Sheet,{open:ee,onOpenChange:es,children:(0,s.jsxs)(o.SheetContent,{side:"bottom",className:"h-[85vh] rounded-t-2xl",children:[(0,s.jsxs)(o.SheetHeader,{className:"pb-4",children:[(0,s.jsx)(o.SheetTitle,{children:el?"编辑群配置":"添加群"}),(0,s.jsx)(o.SheetDescription,{children:"配置群聊个性化设置"})]}),(0,s.jsx)(h.ScrollArea,{className:"h-[calc(85vh-180px)] pr-4",children:eF()}),(0,s.jsxs)(o.SheetFooter,{className:"pt-4 flex-row gap-2",children:[(0,s.jsx)(t.Button,{variant:"outline",className:"flex-1",onClick:()=>es(!1),children:"取消"}),(0,s.jsxs)(t.Button,{className:"flex-1",onClick:eE,disabled:et,children:[et&&(0,s.jsx)(f.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"保存"]})]})]})}):(0,s.jsx)(m.Dialog,{open:ee,onOpenChange:es,children:(0,s.jsxs)(m.DialogContent,{className:"max-w-2xl max-h-[85vh]",children:[(0,s.jsxs)(m.DialogHeader,{children:[(0,s.jsx)(m.DialogTitle,{children:el?"编辑群配置":"添加群"}),(0,s.jsx)(m.DialogDescription,{children:"配置群聊个性化设置和独立人设"})]}),(0,s.jsx)(h.ScrollArea,{className:"max-h-[60vh] pr-4",children:eF()}),(0,s.jsxs)(m.DialogFooter,{children:[(0,s.jsx)(t.Button,{variant:"outline",onClick:()=>es(!1),children:"取消"}),(0,s.jsxs)(t.Button,{onClick:eE,disabled:et,children:[et&&(0,s.jsx)(f.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"保存"]})]})]})}),(0,s.jsx)(m.Dialog,{open:ei,onOpenChange:ec,children:(0,s.jsxs)(m.DialogContent,{className:"max-w-md",children:[(0,s.jsxs)(m.DialogHeader,{children:[(0,s.jsx)(m.DialogTitle,{children:"确认删除"}),(0,s.jsxs)(m.DialogDescription,{children:["确定要删除群 ",(0,s.jsx)("strong",{children:em?.groupName||em?.groupId})," 的配置吗？此操作不可撤销。"]})]}),(0,s.jsxs)(m.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,s.jsx)(t.Button,{variant:"outline",onClick:()=>ec(!1),children:"取消"}),(0,s.jsxs)(t.Button,{variant:"destructive",onClick:ek,disabled:ex,children:[ex&&(0,s.jsx)(f.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"删除"]})]})]})})]})}e.s(["default",()=>$],24666)}]);

//# sourceMappingURL=90e581138af337e2.js.map