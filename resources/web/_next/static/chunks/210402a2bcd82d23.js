(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99818,e=>{"use strict";var s,a=e.i(52542),t=e.i(40418),r=e.i(51200),l=e.i(72029),n=e.i(13107),c=e.i(87126),i=e.i(47686),o=e.i(81080),d=e.i(30243),m=e.i(99573),x=e.i(20650),h=e.i(94518),p=e.i(10201),g=e.i(75979),u=e.i(79342);(s={})[s.SUCCESS=0]="SUCCESS",s[s.UNKNOWN=-1]="UNKNOWN",s[s.NETWORK_ERROR=-2]="NETWORK_ERROR",s[s.TIMEOUT=-3]="TIMEOUT",s[s.CANCELLED=-4]="CANCELLED",s[s.VALIDATION_FAILED=1001]="VALIDATION_FAILED",s[s.AUTH_REQUIRED=1002]="AUTH_REQUIRED",s[s.AUTH_INVALID=1003]="AUTH_INVALID",s[s.AUTH_EXPIRED=1004]="AUTH_EXPIRED",s[s.PERMISSION_DENIED=1005]="PERMISSION_DENIED",s[s.INVALID_FORMAT=1006]="INVALID_FORMAT",s[s.MISSING_FIELD=1007]="MISSING_FIELD",s[s.FIELD_TOO_LONG=1008]="FIELD_TOO_LONG",s[s.FIELD_TOO_SHORT=1009]="FIELD_TOO_SHORT",s[s.INVALID_VALUE=1010]="INVALID_VALUE",s[s.NOT_FOUND=2001]="NOT_FOUND",s[s.ALREADY_EXISTS=2002]="ALREADY_EXISTS",s[s.CONFLICT=2003]="CONFLICT",s[s.LOCKED=2004]="LOCKED",s[s.DELETED=2005]="DELETED",s[s.CHANNEL_ERROR=3001]="CHANNEL_ERROR",s[s.CHANNEL_UNAVAILABLE=3002]="CHANNEL_UNAVAILABLE",s[s.CHANNEL_QUOTA_EXCEEDED=3003]="CHANNEL_QUOTA_EXCEEDED",s[s.CHANNEL_RATE_LIMITED=3004]="CHANNEL_RATE_LIMITED",s[s.CHANNEL_AUTH_FAILED=3005]="CHANNEL_AUTH_FAILED",s[s.MODEL_NOT_FOUND=3006]="MODEL_NOT_FOUND",s[s.MODEL_UNAVAILABLE=3007]="MODEL_UNAVAILABLE",s[s.RATE_LIMITED=4001]="RATE_LIMITED",s[s.QUOTA_EXCEEDED=4002]="QUOTA_EXCEEDED",s[s.CONCURRENT_LIMIT=4003]="CONCURRENT_LIMIT",s[s.INTERNAL_ERROR=5001]="INTERNAL_ERROR",s[s.DATABASE_ERROR=5002]="DATABASE_ERROR",s[s.CONFIG_ERROR=5003]="CONFIG_ERROR",s[s.STORAGE_ERROR=5004]="STORAGE_ERROR",s[s.EXTERNAL_API_ERROR=6001]="EXTERNAL_API_ERROR",s[s.EXTERNAL_TIMEOUT=6002]="EXTERNAL_TIMEOUT",s[s.EXTERNAL_UNAVAILABLE=6003]="EXTERNAL_UNAVAILABLE",s[s.TOOL_EXECUTION_FAILED=7001]="TOOL_EXECUTION_FAILED",s[s.TOOL_NOT_FOUND=7002]="TOOL_NOT_FOUND",s[s.TOOL_DISABLED=7003]="TOOL_DISABLED",s[s.MCP_CONNECTION_FAILED=8001]="MCP_CONNECTION_FAILED",s[s.MCP_SERVER_ERROR=8002]="MCP_SERVER_ERROR",s[s.MCP_RESOURCE_NOT_FOUND=8003]="MCP_RESOURCE_NOT_FOUND";var N=e.i(75549),j=e.i(19367),v=e.i(90808),f=e.i(68587),C=e.i(97058),y=e.i(89908),E=e.i(60381),S=e.i(17171);let b={disconnected:{icon:(0,a.jsx)(f.WifiOff,{className:"h-3.5 w-3.5"}),label:"已断开",color:"text-muted-foreground",bgColor:"bg-muted"},connecting:{icon:(0,a.jsx)(y.Loader2,{className:"h-3.5 w-3.5 animate-spin"}),label:"连接中",color:"text-yellow-600 dark:text-yellow-400",bgColor:"bg-yellow-100 dark:bg-yellow-900/30"},connected:{icon:(0,a.jsx)(v.Wifi,{className:"h-3.5 w-3.5"}),label:"实时连接",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30"},reconnecting:{icon:(0,a.jsx)(C.RefreshCw,{className:"h-3.5 w-3.5 animate-spin"}),label:"重连中",color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-100 dark:bg-orange-900/30"},error:{icon:(0,a.jsx)(E.AlertCircle,{className:"h-3.5 w-3.5"}),label:"连接错误",color:"text-red-600 dark:text-red-400",bgColor:"bg-red-100 dark:bg-red-900/30"}};function w({className:e,showDetails:s=!1,onEvent:r}){let{status:c,reconnectCount:i,connect:o,disconnect:d,lastEvent:m,isConnected:x}=function(e={}){return function(e,s={}){let{autoReconnect:a=!0,reconnectDelay:r=3e3,maxReconnectAttempts:l=5,onEvent:n,onConnect:c,onDisconnect:i,onError:o}=s,[d,m]=(0,t.useState)("disconnected"),[x,h]=(0,t.useState)(null),[p,g]=(0,t.useState)([]),[u,j]=(0,t.useState)(0),v=(0,t.useRef)(null),f=(0,t.useRef)(null),C=(0,t.useCallback)(()=>{v.current&&v.current.close(),m("connecting");let s=localStorage.getItem("chatai_token"),t=N.default.env.NEXT_PUBLIC_API_URL||"",i=new EventSource(s?`${t}${e}?token=${encodeURIComponent(s)}`:`${t}${e}`,{withCredentials:!0});v.current=i,i.onopen=()=>{m("connected"),j(0),c?.()},i.onerror=e=>{m("error"),o?.(e),a&&u<l&&(m("reconnecting"),f.current=setTimeout(()=>{j(e=>e+1),C()},r*Math.pow(2,u)))},i.onmessage=e=>{try{let s=JSON.parse(e.data),a={event:"message",data:s,timestamp:Date.now()};h(a),g(e=>[...e.slice(-99),a]),n?.(a)}catch(e){}},["connected","heartbeat","server-connecting","server-connected","server-reconnecting","server-reconnected","server-removed","server-error","tool-executed","tool-toggled","category-toggled","tools-reloaded","tools-enabled-all","tools-disabled-all"].forEach(e=>{i.addEventListener(e,s=>{try{let a=JSON.parse(s.data),t={event:e,data:a,timestamp:Date.now()};h(t),g(e=>[...e.slice(-99),t]),n?.(t)}catch(e){}})})},[e,a,r,l,u,c,i,o,n]),y=(0,t.useCallback)(()=>{f.current&&(clearTimeout(f.current),f.current=null),v.current&&(v.current.close(),v.current=null),m("disconnected"),i?.()},[i]),E=(0,t.useCallback)(()=>{g([]),h(null)},[]);return(0,t.useEffect)(()=>(C(),()=>y()),[e]),{status:d,lastEvent:x,events:p,reconnectCount:u,connect:C,disconnect:y,clearEvents:E,isConnected:"connected"===d}}("/api/skills/sse",e)}({onEvent:r?e=>r({event:e.event,data:e.data}):void 0}),h=b[c];return(0,a.jsx)(j.TooltipProvider,{children:(0,a.jsxs)(j.Tooltip,{children:[(0,a.jsx)(j.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)("div",{className:(0,S.cn)("flex items-center gap-2",e),children:[(0,a.jsxs)(n.Badge,{variant:"outline",className:(0,S.cn)("flex items-center gap-1.5 px-2 py-0.5 font-normal transition-colors",h.color,h.bgColor),children:[h.icon,s&&(0,a.jsx)("span",{className:"text-xs",children:h.label}),(0,a.jsx)("span",{className:(0,S.cn)("h-1.5 w-1.5 rounded-full",x?"bg-green-500 animate-pulse":"bg-muted-foreground")})]}),("error"===c||"disconnected"===c)&&(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>o(),children:(0,a.jsx)(C.RefreshCw,{className:"h-3.5 w-3.5"})})]})}),(0,a.jsx)(j.TooltipContent,{side:"bottom",className:"max-w-xs",children:(0,a.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,a.jsx)("p",{className:"font-medium",children:h.label}),"reconnecting"===c&&(0,a.jsxs)("p",{className:"text-muted-foreground",children:["重连尝试: ",i]}),m&&(0,a.jsxs)("p",{className:"text-muted-foreground",children:["最后事件: ",m.event]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:x?"实时接收服务器状态更新":"点击刷新按钮重新连接"})]})})]})})}var A=e.i(80830),O=e.i(50974);let T=(0,O.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var L=e.i(34536),k=e.i(48352);let _=[{name:"Filesystem",package:"@modelcontextprotocol/server-filesystem",description:"文件系统访问，读写本地文件",category:"文件系统",popular:!0,args:"/"},{name:"Memory",package:"@modelcontextprotocol/server-memory",description:"持久化记忆存储",category:"存储",popular:!0},{name:"GitHub",package:"@modelcontextprotocol/server-github",description:"GitHub API 集成",category:"开发工具",popular:!0,env:{GITHUB_PERSONAL_ACCESS_TOKEN:""}},{name:"Brave Search",package:"@modelcontextprotocol/server-brave-search",description:"Brave 搜索引擎",category:"搜索",popular:!0,env:{BRAVE_API_KEY:""}},{name:"Puppeteer",package:"@modelcontextprotocol/server-puppeteer",description:"浏览器自动化",category:"浏览器",popular:!0},{name:"SQLite",package:"@modelcontextprotocol/server-sqlite",description:"SQLite 数据库访问",category:"数据库"},{name:"PostgreSQL",package:"@modelcontextprotocol/server-postgres",description:"PostgreSQL 数据库",category:"数据库",env:{POSTGRES_CONNECTION_STRING:""}},{name:"Fetch",package:"@modelcontextprotocol/server-fetch",description:"HTTP 请求工具",category:"网络"},{name:"Slack",package:"@modelcontextprotocol/server-slack",description:"Slack 集成",category:"通讯",env:{SLACK_BOT_TOKEN:""}},{name:"Google Maps",package:"@modelcontextprotocol/server-google-maps",description:"Google 地图服务",category:"地图",env:{GOOGLE_MAPS_API_KEY:""}},{name:"AWS KB",package:"@modelcontextprotocol/server-aws-kb-retrieval",description:"AWS 知识库检索",category:"云服务"},{name:"Sentry",package:"@modelcontextprotocol/server-sentry",description:"Sentry 错误监控",category:"监控",env:{SENTRY_AUTH_TOKEN:""}},{name:"GitLab",package:"@modelcontextprotocol/server-gitlab",description:"GitLab API 集成",category:"开发工具",env:{GITLAB_PERSONAL_ACCESS_TOKEN:""}},{name:"Git",package:"@modelcontextprotocol/server-git",description:"Git 版本控制操作",category:"开发工具"},{name:"Sequential Thinking",package:"@modelcontextprotocol/server-sequential-thinking",description:"顺序思维推理",category:"AI 增强",popular:!0},{name:"Everything",package:"@modelcontextprotocol/server-everything",description:"测试用全功能服务器",category:"测试"},{name:"Context7",package:"@upstash/context7-mcp",description:"文档和代码示例检索",category:"知识库",popular:!0},{name:"Exa Search",package:"exa-mcp-server",description:"Exa AI 搜索引擎",category:"搜索",env:{EXA_API_KEY:""}},{name:"Playwright",package:"@anthropic-ai/playwright-mcp",description:"浏览器自动化测试",category:"浏览器"}],I=[...new Set(_.map(e=>e.category))];function R({onSelect:e,selectedPackage:s,className:r}){let[l,c]=(0,t.useState)(""),[o,m]=(0,t.useState)(null),x=_.filter(e=>{let s=!l||e.name.toLowerCase().includes(l.toLowerCase())||e.package.toLowerCase().includes(l.toLowerCase())||e.description.toLowerCase().includes(l.toLowerCase()),a=!o||e.category===o;return s&&a}),h=x.filter(e=>e.popular),p=x.filter(e=>!e.popular);return(0,a.jsxs)("div",{className:(0,S.cn)("space-y-4",r),children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(A.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(d.Input,{placeholder:"搜索 NPM 包...",value:l,onChange:e=>c(e.target.value),className:"pl-9"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[(0,a.jsx)(n.Badge,{variant:null===o?"default":"outline",className:"cursor-pointer transition-colors",onClick:()=>m(null),children:"全部"}),I.map(e=>(0,a.jsx)(n.Badge,{variant:o===e?"default":"outline",className:"cursor-pointer transition-colors",onClick:()=>m(o===e?null:e),children:e},e))]}),(0,a.jsx)(i.ScrollArea,{className:"h-[280px] pr-2",children:(0,a.jsxs)("div",{className:"space-y-4",children:[h.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground",children:[(0,a.jsx)(L.Star,{className:"h-3 w-3"}),"热门"]}),(0,a.jsx)("div",{className:"grid gap-2",children:h.map(t=>(0,a.jsx)(D,{pkg:t,isSelected:s===t.package,onSelect:()=>e(t)},t.package))})]}),p.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[h.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground",children:[(0,a.jsx)(T,{className:"h-3 w-3"}),"其他"]}),(0,a.jsx)("div",{className:"grid gap-2",children:p.map(t=>(0,a.jsx)(D,{pkg:t,isSelected:s===t.package,onSelect:()=>e(t)},t.package))})]}),0===x.length&&(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"未找到匹配的包"})]})}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(T,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"也可以手动输入任意 NPM 包名"}),(0,a.jsxs)("a",{href:"https://github.com/modelcontextprotocol/servers",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-0.5 text-primary hover:underline",children:["查看更多",(0,a.jsx)(k.ExternalLink,{className:"h-3 w-3"})]})]})]})}function D({pkg:e,isSelected:s,onSelect:t}){return(0,a.jsx)(l.Button,{variant:s?"secondary":"outline",className:(0,S.cn)("w-full justify-start h-auto py-2.5 px-3 text-left",s&&"ring-2 ring-primary"),onClick:t,children:(0,a.jsxs)("div",{className:"flex flex-col gap-0.5 w-full min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium truncate",children:e.name}),e.popular&&(0,a.jsx)(L.Star,{className:"h-3 w-3 text-yellow-500 shrink-0"}),e.env&&Object.keys(e.env).length>0&&(0,a.jsx)(n.Badge,{variant:"outline",className:"text-[10px] px-1 py-0 shrink-0",children:"需配置"})]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground truncate",children:e.package}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground/80 line-clamp-1",children:e.description})]})})}var B=e.i(72024),U=e.i(83949),P=e.i(4084),M=e.i(62754),H=e.i(60713),F=e.i(35771),V=e.i(49165);let G=(0,O.default)("file-braces",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);var J=e.i(90541),$=e.i(61176),X=e.i(17020),z=e.i(85876),K=e.i(3190),W=e.i(60422),Q=e.i(17286),Y=e.i(79923),q=e.i(29720),Z=e.i(32308),ee=e.i(10273),es=e.i(48832);let ea=(0,O.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var et=e.i(94701),er=e.i(64775),el=e.i(17969),en=e.i(20308),ec=e.i(47004),ei=e.i(83277);let eo={basic:Y.Clock,user:q.User,group:Z.Users,message:ee.MessageSquare,admin:es.Shield,file:ea,media:Q.Image,web:et.Globe,search:A.Search,utils:U.Wrench,memory:er.Brain,context:el.History};function ed(){let[e,s]=(0,t.useState)([]),[N,j]=(0,t.useState)([]),[v,f]=(0,t.useState)(!0),[E,S]=(0,t.useState)(!1),[b,A]=(0,t.useState)(!1),[O,T]=(0,t.useState)(!1),[L,k]=(0,t.useState)(!1),[_,I]=(0,t.useState)(null),[D,Q]=(0,t.useState)(""),[Y,q]=(0,t.useState)({name:"",type:"stdio",command:"",args:"",url:"",package:"",env:"",headers:""}),[Z,ee]=(0,t.useState)(!1),[es,ea]=(0,t.useState)(null),[et,er]=(0,t.useState)(!1),[el,ed]=(0,t.useState)("{}"),[em,ex]=(0,t.useState)(""),[eh,ep]=(0,t.useState)(!1),[eg,eu]=(0,t.useState)([]),[eN,ej]=(0,t.useState)(null),[ev,ef]=(0,t.useState)(null),[eC,ey]=(0,t.useState)(!1),eE=(0,t.useCallback)(async()=>{try{let[e,a,t]=await Promise.all([g.mcpApi.listServers(),g.toolsApi.list(),g.toolsApi.getCategories().catch(()=>({data:[]}))]),r=e?.data||[],l=a?.data||[],n=t?.data||[];s(Array.isArray(r)?r:[]),j(Array.isArray(l)?l:[]),eu(Array.isArray(n)?n:[])}catch(e){u.toast.error("加载MCP数据失败"),console.error(e)}finally{f(!1),S(!1)}},[]);(0,t.useEffect)(()=>{eE()},[eE]);let eS=(0,t.useCallback)(e=>{(e.event.startsWith("server-")||e.event.startsWith("tool")||e.event.startsWith("category"))&&eE()},[eE]),eb=async()=>{if(!Y.name)return void u.toast.error("请输入服务器名称");k(!0);try{let e={type:Y.type};if("stdio"===Y.type){if(!Y.command){u.toast.error("请输入命令"),k(!1);return}e.command=Y.command,Y.args&&(e.args=Y.args.split(" ").filter(e=>e))}else if("npm"===Y.type){if(!Y.package){u.toast.error("请输入NPM包名"),k(!1);return}e.package=Y.package,Y.args&&(e.args=Y.args.split(" ").filter(e=>e))}else{if(!Y.url){u.toast.error("请输入URL"),k(!1);return}if(e.url=Y.url,Y.headers)try{e.headers=JSON.parse(Y.headers)}catch{u.toast.error("Headers 格式错误 (JSON)"),k(!1);return}}if(Y.env)try{e.env=JSON.parse(Y.env)}catch{u.toast.error("环境变量格式错误 (JSON)"),k(!1);return}await g.mcpApi.createServer({name:Y.name,config:e}),u.toast.success("服务器添加成功"),A(!1),q({name:"",type:"stdio",command:"",args:"",url:"",package:"",env:"",headers:""}),ey(!1),eE()}catch(e){u.toast.error(e.response?.data?.message||"添加失败")}finally{k(!1)}},ew=async e=>{I(e);try{await g.mcpApi.reconnectServer(e),u.toast.success("重连成功"),eE()}catch(e){u.toast.error(e.response?.data?.message||"重连失败")}finally{I(null)}},eA=async e=>{if(confirm(`确定要删除服务器 "${e}" 吗？`))try{await g.mcpApi.deleteServer(e),u.toast.success("服务器已删除"),eE()}catch(e){u.toast.error(e.response?.data?.message||"删除失败")}},eO=async()=>{if(!D.trim())return void u.toast.error("请输入 JSON 配置");try{let e=JSON.parse(D),s=await g.mcpApi.importConfig(e),a=s?.data||{};u.toast.success(`导入完成: 成功 ${a.success||0}/${a.total||0}`),T(!1),Q(""),eE()}catch(e){e instanceof SyntaxError?u.toast.error("JSON 格式错误"):u.toast.error("导入失败")}},eT=e=>{ea(e),ee(!0)},eL=e=>{ea(e);let s={};e.inputSchema?.properties&&Object.entries(e.inputSchema.properties).forEach(([e,a])=>{"string"===a.type?s[e]="":"number"===a.type?s[e]=0:"boolean"===a.type?s[e]=!1:"array"===a.type?s[e]=[]:"object"===a.type&&(s[e]={})}),ed(JSON.stringify(s,null,2)),ex(""),er(!0)},ek=async()=>{if(es){ep(!0),ex("");try{let e=JSON.parse(el),s=await g.toolsApi.test({toolName:es.name,arguments:e});s?.data!==void 0?(ex(JSON.stringify(s.data,null,2)),u.toast.success("测试成功")):ex(JSON.stringify(s,null,2))}catch(s){let e=s?.response?.data?.message||s?.message||"测试失败";ex(`Error: ${e}`),u.toast.error("测试失败: "+e)}finally{ep(!1)}}},e_=async e=>{let s=`custom_${e.name.replace(/[^a-zA-Z0-9_]/g,"_")}`,a=`/**
 * 基于 ${e.name} 创建的自定义工具
 * 原始来源: ${e.serverName||"unknown"}
 */

export default {
  name: '${s}',
  
  function: {
    name: '${s}',
    description: '${(e.description||"").replace(/'/g,"\\'")}',
    parameters: ${JSON.stringify(e.inputSchema||{type:"object",properties:{}},null,4).split("\n").join("\n    ")}
  },

  async run(args, context) {
    // TODO: 实现工具逻辑
    // args: 输入参数
    // context: 上下文信息，包含 getEvent(), getBot() 等
    
    return {
      success: true,
      message: '工具执行成功',
      args
    }
  }
}
`;try{await g.toolsApi.createJs({name:s,source:a}),u.toast.success(`已复制为 JS 工具: ${s}`)}catch(e){u.toast.error("复制失败: "+(e?.response?.data?.message||e?.message||"未知错误"))}},eI=async(e,s)=>{ef(e);try{await g.toolsApi.toggleCategory(e,s),eu(a=>a.map(a=>a.key===e?{...a,enabled:s}:a)),u.toast.success(`${s?"启用":"禁用"}成功`);let a=await g.toolsApi.list(),t=a?.data||[];j(Array.isArray(t)?t:[])}catch(e){u.toast.error("操作失败: "+(e?.response?.data?.message||e?.message||"未知错误"))}finally{ef(null)}},eR=N.filter(e=>e?.isBuiltin||e?.serverName==="builtin"),eD=N.filter(e=>e&&!e.isBuiltin&&"builtin"!==e.serverName);return v?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(c.Skeleton,{className:"h-8 w-32"}),(0,a.jsx)(c.Skeleton,{className:"h-10 w-24"})]}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsx)(c.Skeleton,{className:"h-6 w-32"})}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)(c.Skeleton,{className:"h-20 w-full"})})]},s))})]}):(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"MCP 工具管理"}),(0,a.jsx)(w,{showDetails:!0,onEvent:eS})]}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,a.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>{S(!0),eE()},disabled:E,children:[E?(0,a.jsx)(y.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(C.RefreshCw,{className:"mr-2 h-4 w-4"}),"刷新"]}),(0,a.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>T(!0),children:[(0,a.jsx)(G,{className:"mr-2 h-4 w-4"}),"导入配置"]}),(0,a.jsxs)(l.Button,{size:"sm",onClick:()=>A(!0),children:[(0,a.jsx)(H.Plus,{className:"mr-2 h-4 w-4"}),"添加服务器"]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{className:"pb-2",children:(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"服务器数"})}),(0,a.jsx)(r.CardContent,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.length}),e.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,a.jsxs)("span",{className:"flex items-center text-green-600",children:[(0,a.jsx)(P.CheckCircle,{className:"h-3 w-3 mr-0.5"}),e.filter(e=>"connected"===e.status).length]}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"/"}),(0,a.jsxs)("span",{className:"flex items-center text-gray-500",children:[(0,a.jsx)(M.XCircle,{className:"h-3 w-3 mr-0.5"}),e.filter(e=>"connected"!==e.status).length]})]})]})})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{className:"pb-2",children:(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"工具总数"})}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:N.length})})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{className:"pb-2",children:(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"内置工具"})}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:eR.length})})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{className:"pb-2",children:(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"外部工具"})}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:eD.length})})]})]}),(0,a.jsxs)(o.Tabs,{defaultValue:"servers",children:[(0,a.jsxs)(o.TabsList,{children:[(0,a.jsxs)(o.TabsTrigger,{value:"servers",className:"flex items-center gap-2",children:[(0,a.jsx)(B.Server,{className:"h-4 w-4"}),"服务器 (",e.length,")"]}),(0,a.jsxs)(o.TabsTrigger,{value:"tools",className:"flex items-center gap-2",children:[(0,a.jsx)(U.Wrench,{className:"h-4 w-4"}),"工具 (",N.length,")"]})]}),(0,a.jsx)(o.TabsContent,{value:"servers",className:"space-y-4",children:0===e.length?(0,a.jsx)(r.Card,{children:(0,a.jsxs)(r.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,a.jsx)(B.Server,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"暂无MCP服务器"})]})}):(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:e.map(e=>(0,a.jsxs)(r.Card,{className:`transition-all border-l-4 ${"connected"===e.status?"border-l-green-500":"border-l-gray-300"}`,children:[(0,a.jsxs)(r.CardHeader,{className:"pb-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:`w-2 h-2 rounded-full ${"connected"===e.status?"bg-green-500 animate-pulse":"bg-gray-400"}`}),(0,a.jsx)(r.CardTitle,{className:"text-base",children:e.name})]}),(0,a.jsx)(n.Badge,{variant:"connected"===e.status?"default":"secondary",className:"connected"===e.status?"bg-green-100 text-green-700 hover:bg-green-100":"",children:"connected"===e.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.CheckCircle,{className:"h-3 w-3 mr-1"})," 已连接"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.XCircle,{className:"h-3 w-3 mr-1"})," 离线"]})})]}),(0,a.jsxs)(r.CardDescription,{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Badge,{variant:"outline",className:"text-xs",children:e.config?.type||e.type||"未知"}),e.config?.package&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground truncate max-w-[150px]",children:e.config.package})]})]}),(0,a.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"工具数"}),(0,a.jsx)("span",{className:"font-medium",children:e.toolsCount||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"资源数"}),(0,a.jsx)("span",{className:"font-medium",children:e.resourcesCount||0})]}),e.config?.command&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"命令"}),(0,a.jsx)("span",{className:"truncate max-w-[200px] font-mono text-xs",children:e.config.command})]}),e.config?.url&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"URL"}),(0,a.jsx)("span",{className:"truncate max-w-[200px] font-mono text-xs",children:e.config.url})]}),e.connectedAt&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"连接时间"}),(0,a.jsx)("span",{children:new Date(e.connectedAt).toLocaleString("zh-CN")})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2 border-t",children:[(0,a.jsxs)(l.Button,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>ew(e.name),disabled:_===e.name,children:[_===e.name?(0,a.jsx)(y.Loader2,{className:"mr-1.5 h-3.5 w-3.5 animate-spin"}):(0,a.jsx)(V.RotateCcw,{className:"mr-1.5 h-3.5 w-3.5"}),"重连"]}),(0,a.jsx)(l.Button,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>eA(e.name),children:(0,a.jsx)(F.Trash2,{className:"h-4 w-4"})})]})]})]},e.name))})}),(0,a.jsx)(o.TabsContent,{value:"tools",className:"space-y-4",children:(0,a.jsxs)(o.Tabs,{defaultValue:"builtin",children:[(0,a.jsxs)(o.TabsList,{className:"flex-wrap h-auto gap-1",children:[(0,a.jsxs)(o.TabsTrigger,{value:"builtin",children:["内置工具 (",eR.length,")"]}),(0,a.jsxs)(o.TabsTrigger,{value:"external",children:["外部工具 (",eD.length,")"]})]}),(0,a.jsx)(o.TabsContent,{value:"builtin",className:"space-y-4",children:eg.length>0?(0,a.jsx)("div",{className:"max-h-[70vh] overflow-y-auto",children:(0,a.jsx)("div",{className:"space-y-3 pr-2",children:eg.map(e=>{let s=eo[e.key]||U.Wrench,t=eN===e.key,c=eR.filter(s=>e.tools.some(e=>e.name===s.name));return(0,a.jsx)(r.Card,{className:`transition-all ${!1===e.enabled?"opacity-60":""}`,children:(0,a.jsxs)(ei.Collapsible,{open:t,onOpenChange:()=>ej(t?null:e.key),children:[(0,a.jsx)(ei.CollapsibleTrigger,{asChild:!0,children:(0,a.jsx)(r.CardHeader,{className:"cursor-pointer hover:bg-muted/50 transition-colors py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,a.jsx)(s,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(r.CardTitle,{className:"text-base flex items-center gap-2",children:[e.name,(0,a.jsxs)(n.Badge,{variant:"secondary",className:"text-xs",children:[e.toolCount," 工具"]})]}),(0,a.jsx)(r.CardDescription,{className:"text-xs mt-0.5",children:e.description})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)(en.Switch,{checked:!1!==e.enabled,onCheckedChange:s=>eI(e.key,s),disabled:ev===e.key}),ev===e.key&&(0,a.jsx)(y.Loader2,{className:"h-4 w-4 animate-spin"})]}),t?(0,a.jsx)(W.ChevronUp,{className:"h-4 w-4"}):(0,a.jsx)(K.ChevronDown,{className:"h-4 w-4"})]})]})})}),(0,a.jsx)(ei.CollapsibleContent,{children:(0,a.jsx)(r.CardContent,{className:"pt-0",children:(0,a.jsx)("div",{className:"grid gap-2 sm:grid-cols-1 lg:grid-cols-2",children:c.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-muted/50 transition-colors group",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(J.Code,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0"}),(0,a.jsx)("span",{className:"font-medium text-sm truncate",children:e.name})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-1 pl-5",children:e.description||"无描述"})]}),(0,a.jsxs)("div",{className:"flex gap-1 ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>eT(e),children:(0,a.jsx)($.Eye,{className:"h-3.5 w-3.5"})}),(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>eL(e),children:(0,a.jsx)(X.Play,{className:"h-3.5 w-3.5"})})]})]},e.name))})})})]})},e.key)})})}):(0,a.jsx)(r.Card,{children:(0,a.jsxs)(r.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,a.jsx)(U.Wrench,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"暂无内置工具类别"})]})})}),(0,a.jsx)(o.TabsContent,{value:"external",children:0===eD.length?(0,a.jsx)(r.Card,{children:(0,a.jsxs)(r.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,a.jsx)(B.Server,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"暂无外部 MCP 工具"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"添加 MCP 服务器后，其工具将显示在这里"})]})}):(0,a.jsx)(i.ScrollArea,{className:"h-[500px]",children:(0,a.jsx)("div",{className:"grid gap-3 sm:grid-cols-1 lg:grid-cols-2",children:eD.map(e=>(0,a.jsx)(r.Card,{className:"hover:shadow-md transition-shadow group",children:(0,a.jsx)(r.CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(B.Server,{className:"h-4 w-4 text-blue-500"}),(0,a.jsx)("span",{className:"font-medium truncate",children:e.name}),(0,a.jsx)(n.Badge,{variant:"outline",className:"text-xs shrink-0",children:e.serverName})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description||"无描述"}),e.inputSchema?.properties&&(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1",children:[Object.keys(e.inputSchema.properties).slice(0,3).map(e=>(0,a.jsx)(n.Badge,{variant:"secondary",className:"text-xs",children:e},e)),Object.keys(e.inputSchema.properties).length>3&&(0,a.jsxs)(n.Badge,{variant:"secondary",className:"text-xs",children:["+",Object.keys(e.inputSchema.properties).length-3]})]})]}),(0,a.jsxs)("div",{className:"flex gap-1 ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>eT(e),children:(0,a.jsx)($.Eye,{className:"h-4 w-4"})}),(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>eL(e),children:(0,a.jsx)(X.Play,{className:"h-4 w-4"})}),(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>e_(e),title:"复制为 JS 工具",children:(0,a.jsx)(z.Copy,{className:"h-4 w-4"})})]})]})})},e.name))})})})]})})]}),(0,a.jsx)(h.Dialog,{open:b,onOpenChange:A,children:(0,a.jsxs)(h.DialogContent,{className:"w-[95vw] max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(h.DialogHeader,{children:[(0,a.jsx)(h.DialogTitle,{children:"添加 MCP 服务器"}),(0,a.jsx)(h.DialogDescription,{children:"配置新的 MCP 服务器连接，或从常用包中快速选择"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{children:"名称"}),(0,a.jsx)(d.Input,{value:Y.name,onChange:e=>q({...Y,name:e.target.value}),placeholder:"服务器名称"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{children:"类型"}),(0,a.jsxs)(p.Select,{value:Y.type,onValueChange:e=>{q({...Y,type:e}),"npm"===e?ey(!0):ey(!1)},children:[(0,a.jsx)(p.SelectTrigger,{children:(0,a.jsx)(p.SelectValue,{})}),(0,a.jsxs)(p.SelectContent,{children:[(0,a.jsx)(p.SelectItem,{value:"stdio",children:"Stdio (本地命令)"}),(0,a.jsx)(p.SelectItem,{value:"npm",children:"NPM 包 (npx)"}),(0,a.jsx)(p.SelectItem,{value:"sse",children:"SSE (Server-Sent Events)"}),(0,a.jsx)(p.SelectItem,{value:"http",children:"HTTP"})]})]})]})]}),"stdio"===Y.type&&(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{children:"命令"}),(0,a.jsx)(d.Input,{value:Y.command,onChange:e=>q({...Y,command:e.target.value}),placeholder:"例如: node, npx, python"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{children:"参数 (空格分隔)"}),(0,a.jsx)(d.Input,{value:Y.args,onChange:e=>q({...Y,args:e.target.value}),placeholder:"-y @modelcontextprotocol/server-filesystem /"})]})]}),"npm"===Y.type&&(0,a.jsxs)(a.Fragment,{children:[eC&&(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)(m.Label,{className:"text-sm font-medium",children:"快速选择常用包"}),(0,a.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>ey(!1),children:"手动输入"})]}),(0,a.jsx)(R,{onSelect:e=>{q({...Y,name:e.name.toLowerCase().replace(/\s+/g,"-"),type:"npm",package:e.package,args:e.args||"",env:e.env?JSON.stringify(e.env,null,2):""}),ey(!1)},selectedPackage:Y.package})]}),!eC&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(m.Label,{className:"text-sm font-medium",children:"NPM 包配置"}),(0,a.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>ey(!0),children:"从列表选择"})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{children:"NPM 包名"}),(0,a.jsx)(d.Input,{value:Y.package,onChange:e=>q({...Y,package:e.target.value}),placeholder:"@modelcontextprotocol/server-filesystem"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{children:"参数 (空格分隔)"}),(0,a.jsx)(d.Input,{value:Y.args,onChange:e=>q({...Y,args:e.target.value}),placeholder:"/"})]})]})]})]}),("sse"===Y.type||"http"===Y.type)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{children:"URL"}),(0,a.jsx)(d.Input,{value:Y.url,onChange:e=>q({...Y,url:e.target.value}),placeholder:"sse"===Y.type?"http://localhost:8080/sse":"http://localhost:8080/mcp"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{children:"Headers (JSON 格式)"}),(0,a.jsx)(x.Textarea,{value:Y.headers,onChange:e=>q({...Y,headers:e.target.value}),placeholder:'{"Authorization": "Bearer xxx"}',rows:3})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{children:"环境变量 (JSON 格式，可选)"}),(0,a.jsx)(x.Textarea,{value:Y.env,onChange:e=>q({...Y,env:e.target.value}),placeholder:'{"API_KEY": "xxx"}',rows:2})]})]}),(0,a.jsxs)(h.DialogFooter,{children:[(0,a.jsx)(l.Button,{variant:"outline",onClick:()=>A(!1),children:"取消"}),(0,a.jsxs)(l.Button,{onClick:eb,disabled:L,children:[L&&(0,a.jsx)(y.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"添加"]})]})]})}),(0,a.jsx)(h.Dialog,{open:O,onOpenChange:T,children:(0,a.jsxs)(h.DialogContent,{className:"w-[95vw] max-w-lg",children:[(0,a.jsxs)(h.DialogHeader,{children:[(0,a.jsx)(h.DialogTitle,{children:"导入 MCP 配置"}),(0,a.jsx)(h.DialogDescription,{children:"粘贴 Claude Desktop 或其他 MCP 客户端的配置 JSON"})]}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)(x.Textarea,{value:D,onChange:e=>Q(e.target.value),placeholder:'{\n  "mcpServers": {\n    "server-name": {\n      "command": "npx",\n      "args": ["-y", "@modelcontextprotocol/server-xxx"]\n    }\n  }\n}',rows:12,className:"font-mono text-sm"})}),(0,a.jsxs)(h.DialogFooter,{children:[(0,a.jsx)(l.Button,{variant:"outline",onClick:()=>T(!1),children:"取消"}),(0,a.jsx)(l.Button,{onClick:eO,children:"导入"})]})]})}),(0,a.jsx)(h.Dialog,{open:Z,onOpenChange:ee,children:(0,a.jsxs)(h.DialogContent,{className:"w-[95vw] max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(h.DialogHeader,{children:[(0,a.jsx)(h.DialogTitle,{children:"工具详情"}),(0,a.jsx)(h.DialogDescription,{children:es?.name})]}),es&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m.Label,{className:"text-muted-foreground",children:"名称"}),(0,a.jsx)("p",{className:"font-medium",children:es.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m.Label,{className:"text-muted-foreground",children:"描述"}),(0,a.jsx)("p",{children:es.description||"无描述"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m.Label,{className:"text-muted-foreground",children:"来源"}),(0,a.jsx)(n.Badge,{variant:"outline",className:"ml-2",children:es.serverName||"builtin"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m.Label,{className:"text-muted-foreground",children:"输入参数"}),(0,a.jsx)(ec.CodeBlock,{code:JSON.stringify(es.inputSchema||{},null,2),language:"json",className:"mt-2",maxHeight:"300px"})]})]})]})}),(0,a.jsx)(h.Dialog,{open:et,onOpenChange:er,children:(0,a.jsxs)(h.DialogContent,{className:"w-[95vw] max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(h.DialogHeader,{children:[(0,a.jsx)(h.DialogTitle,{children:"测试工具"}),(0,a.jsx)(h.DialogDescription,{children:es?.name})]}),es&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m.Label,{children:"参数 (JSON)"}),(0,a.jsx)(x.Textarea,{value:el,onChange:e=>ed(e.target.value),placeholder:'{"key": "value"}',rows:8,className:"font-mono text-sm mt-2 bg-[#1e1e1e] text-[#d4d4d4] border-neutral-700",style:{fontFamily:"'Consolas', 'Monaco', 'Courier New', monospace"}})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(l.Button,{onClick:ek,disabled:eh,children:[eh&&(0,a.jsx)(y.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"执行测试"]}),(0,a.jsx)(l.Button,{variant:"outline",onClick:()=>eL(es),children:"重置参数"})]}),em&&(0,a.jsxs)("div",{children:[(0,a.jsx)(m.Label,{children:"测试结果"}),em.startsWith("Error")?(0,a.jsx)("pre",{className:"mt-2 p-3 rounded-lg text-sm overflow-auto max-h-[300px] bg-red-50 dark:bg-red-950 text-red-700 dark:text-red-300",children:em}):(0,a.jsx)(ec.CodeBlock,{code:em,language:"json",className:"mt-2",maxHeight:"300px"})]})]})]})})]})}e.s(["default",()=>ed],99818)}]);

//# sourceMappingURL=cec30eda4d303fc8.js.map