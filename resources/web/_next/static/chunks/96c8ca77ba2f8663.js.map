{"version":3,"sources":["turbopack:///[project]/plugins/chatgpt-plugin/frontend/components/ui/card.tsx","turbopack:///[project]/plugins/chatgpt-plugin/frontend/components/ui/badge.tsx","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.556.0_react@19.2.1/node_modules/lucide-react/src/icons/refresh-cw.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.556.0_react@19.2.1/node_modules/lucide-react/src/icons/trash-2.ts","turbopack:///[project]/plugins/chatgpt-plugin/frontend/components/ui/textarea.tsx","turbopack:///[project]/plugins/chatgpt-plugin/frontend/components/ui/table.tsx","turbopack:///[project]/plugins/chatgpt-plugin/frontend/app/(dashboard)/memory/page.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n    return (\r\n        <div\r\n            data-slot=\"card\"\r\n            className={cn(\r\n                'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm transition-all duration-200',\r\n                'hover:shadow-md dark:border-border/50 dark:shadow-none dark:hover:border-border',\r\n                className\r\n            )}\r\n            {...props}\r\n        />\r\n    )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n    return (\r\n        <div\r\n            data-slot=\"card-header\"\r\n            className={cn(\r\n                '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n                className\r\n            )}\r\n            {...props}\r\n        />\r\n    )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n    return <div data-slot=\"card-title\" className={cn('leading-none font-semibold', className)} {...props} />\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n    return <div data-slot=\"card-description\" className={cn('text-muted-foreground text-sm', className)} {...props} />\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n    return (\r\n        <div\r\n            data-slot=\"card-action\"\r\n            className={cn('col-start-2 row-span-2 row-start-1 self-start justify-self-end', className)}\r\n            {...props}\r\n        />\r\n    )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n    return <div data-slot=\"card-content\" className={cn('px-6', className)} {...props} />\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n    return (\r\n        <div data-slot=\"card-footer\" className={cn('flex items-center px-6 [.border-t]:pt-6', className)} {...props} />\r\n    )\r\n}\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardAction, CardDescription, CardContent }\r\n","import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst badgeVariants = cva(\r\n    'inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',\r\n    {\r\n        variants: {\r\n            variant: {\r\n                default: 'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',\r\n                secondary: 'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',\r\n                destructive:\r\n                    'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n                outline: 'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground'\r\n            }\r\n        },\r\n        defaultVariants: {\r\n            variant: 'default'\r\n        }\r\n    }\r\n)\r\n\r\nfunction Badge({\r\n    className,\r\n    variant,\r\n    asChild = false,\r\n    ...props\r\n}: React.ComponentProps<'span'> & VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\r\n    const Comp = asChild ? Slot : 'span'\r\n\r\n    return <Comp data-slot=\"badge\" className={cn(badgeVariants({ variant }), className)} {...props} />\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8', key: 'v9h5vc' }],\n  ['path', { d: 'M21 3v5h-5', key: '1q7to0' }],\n  ['path', { d: 'M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16', key: '3uifl3' }],\n  ['path', { d: 'M8 16H3v5', key: '1cv678' }],\n];\n\n/**\n * @component @name RefreshCw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAwIDEgOS05IDkuNzUgOS43NSAwIDAgMSA2Ljc0IDIuNzRMMjEgOCIgLz4KICA8cGF0aCBkPSJNMjEgM3Y1aC01IiAvPgogIDxwYXRoIGQ9Ik0yMSAxMmE5IDkgMCAwIDEtOSA5IDkuNzUgOS43NSAwIDAgMS02Ljc0LTIuNzRMMyAxNiIgLz4KICA8cGF0aCBkPSJNOCAxNkgzdjUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/refresh-cw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RefreshCw = createLucideIcon('refresh-cw', __iconNode);\n\nexport default RefreshCw;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10 11v6', key: 'nco0om' }],\n  ['path', { d: 'M14 11v6', key: 'outv1u' }],\n  ['path', { d: 'M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6', key: 'miytrc' }],\n  ['path', { d: 'M3 6h18', key: 'd0wm0j' }],\n  ['path', { d: 'M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2', key: 'e791ji' }],\n];\n\n/**\n * @component @name Trash2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTQgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTkgNnYxNGEyIDIgMCAwIDEtMiAySDdhMiAyIDAgMCAxLTItMlY2IiAvPgogIDxwYXRoIGQ9Ik0zIDZoMTgiIC8+CiAgPHBhdGggZD0iTTggNlY0YTIgMiAwIDAgMSAyLTJoNGEyIDIgMCAwIDEgMiAydjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/trash-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trash2 = createLucideIcon('trash-2', __iconNode);\n\nexport default Trash2;\n","import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {\r\n    return (\r\n        <textarea\r\n            data-slot=\"textarea\"\r\n            className={cn(\r\n                'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n                className\r\n            )}\r\n            {...props}\r\n        />\r\n    )\r\n}\r\n\r\nexport { Textarea }\r\n","'use client'\r\n\r\nimport * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Table({ className, ...props }: React.ComponentProps<'table'>) {\r\n    return (\r\n        <div data-slot=\"table-container\" className=\"relative w-full overflow-x-auto\">\r\n            <table data-slot=\"table\" className={cn('w-full caption-bottom text-sm', className)} {...props} />\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction TableHeader({ className, ...props }: React.ComponentProps<'thead'>) {\r\n    return <thead data-slot=\"table-header\" className={cn('[&_tr]:border-b', className)} {...props} />\r\n}\r\n\r\nfunction TableBody({ className, ...props }: React.ComponentProps<'tbody'>) {\r\n    return <tbody data-slot=\"table-body\" className={cn('[&_tr:last-child]:border-0', className)} {...props} />\r\n}\r\n\r\nfunction TableFooter({ className, ...props }: React.ComponentProps<'tfoot'>) {\r\n    return (\r\n        <tfoot\r\n            data-slot=\"table-footer\"\r\n            className={cn('bg-muted/50 border-t font-medium [&>tr]:last:border-b-0', className)}\r\n            {...props}\r\n        />\r\n    )\r\n}\r\n\r\nfunction TableRow({ className, ...props }: React.ComponentProps<'tr'>) {\r\n    return (\r\n        <tr\r\n            data-slot=\"table-row\"\r\n            className={cn('hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors', className)}\r\n            {...props}\r\n        />\r\n    )\r\n}\r\n\r\nfunction TableHead({ className, ...props }: React.ComponentProps<'th'>) {\r\n    return (\r\n        <th\r\n            data-slot=\"table-head\"\r\n            className={cn(\r\n                'text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',\r\n                className\r\n            )}\r\n            {...props}\r\n        />\r\n    )\r\n}\r\n\r\nfunction TableCell({ className, ...props }: React.ComponentProps<'td'>) {\r\n    return (\r\n        <td\r\n            data-slot=\"table-cell\"\r\n            className={cn(\r\n                'p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',\r\n                className\r\n            )}\r\n            {...props}\r\n        />\r\n    )\r\n}\r\n\r\nfunction TableCaption({ className, ...props }: React.ComponentProps<'caption'>) {\r\n    return (\r\n        <caption data-slot=\"table-caption\" className={cn('text-muted-foreground mt-4 text-sm', className)} {...props} />\r\n    )\r\n}\r\n\r\nexport { Table, TableHeader, TableBody, TableFooter, TableHead, TableRow, TableCell, TableCaption }\r\n","'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle\r\n} from '@/components/ui/dialog'\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'\r\nimport { Brain, Loader2, Plus, RefreshCw, Search, Sparkles, Trash2, Users } from 'lucide-react'\r\nimport { memoryApi } from '@/lib/api'\r\nimport { toast } from 'sonner'\r\n\r\ninterface Memory {\r\n    id: number\r\n    content: string\r\n    timestamp?: number\r\n    importance?: number\r\n    score?: number\r\n    source?: string\r\n    metadata?: Record<string, unknown>\r\n}\r\n\r\ninterface ApiResponse<T = unknown> {\r\n    data?: T\r\n    message?: string\r\n}\r\n\r\n// 记忆来源映射\r\nconst sourceLabels: Record<string, { label: string; color: string }> = {\r\n    poll_summary: { label: '定时总结', color: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300' },\r\n    auto_extract: { label: '自动提取', color: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300' },\r\n    group_context: {\r\n        label: '群聊分析',\r\n        color: 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300'\r\n    },\r\n    manual: { label: '手动添加', color: 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300' },\r\n    ai_tool: { label: 'AI工具', color: 'bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300' }\r\n}\r\n\r\nexport default function MemoryPage() {\r\n    const [userId, setUserId] = useState('')\r\n    const [userList, setUserList] = useState<string[]>([])\r\n    const [memories, setMemories] = useState<Memory[]>([])\r\n    const [loading, setLoading] = useState(false)\r\n    const [stats, setStats] = useState({ totalUsers: 0, totalMemories: 0 })\r\n\r\n    // 添加记忆弹窗\r\n    const [addDialogOpen, setAddDialogOpen] = useState(false)\r\n    const [newMemory, setNewMemory] = useState({ content: '', metadata: '{}' })\r\n    const [saving, setSaving] = useState(false)\r\n\r\n    // 搜索\r\n    const [searchQuery, setSearchQuery] = useState('')\r\n    const [searchResults, setSearchResults] = useState<Memory[]>([])\r\n    const [searching, setSearching] = useState(false)\r\n\r\n    // 总结\r\n    const [summarizing, setSummarizing] = useState(false)\r\n\r\n    // 获取用户列表\r\n    const fetchUserList = async () => {\r\n        try {\r\n            const res = (await memoryApi.getUsers()) as ApiResponse<string[]>\r\n            const users = res?.data || []\r\n            setUserList(users)\r\n            setStats(prev => ({ ...prev, totalUsers: users.length }))\r\n        } catch {\r\n            console.error('获取用户列表失败')\r\n        }\r\n    }\r\n\r\n    // 获取用户记忆\r\n    const fetchMemories = async () => {\r\n        if (!userId) {\r\n            toast.warning('请选择或输入用户ID')\r\n            return\r\n        }\r\n\r\n        setLoading(true)\r\n        try {\r\n            const res = (await memoryApi.get(userId)) as ApiResponse<Memory[]>\r\n            const data = res?.data || []\r\n            setMemories(data)\r\n            setStats(prev => ({ ...prev, totalMemories: data.length }))\r\n        } catch {\r\n            toast.error('获取记忆失败')\r\n            setMemories([])\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    // 添加记忆\r\n    const handleAddMemory = async () => {\r\n        if (!newMemory.content.trim()) {\r\n            toast.warning('请输入记忆内容')\r\n            return\r\n        }\r\n\r\n        setSaving(true)\r\n        try {\r\n            let metadata = {}\r\n            try {\r\n                metadata = JSON.parse(newMemory.metadata)\r\n            } catch {\r\n                // ignore\r\n            }\r\n\r\n            await memoryApi.create({\r\n                userId,\r\n                content: newMemory.content,\r\n                metadata\r\n            })\r\n            toast.success('添加成功')\r\n            setAddDialogOpen(false)\r\n            setNewMemory({ content: '', metadata: '{}' })\r\n            fetchMemories()\r\n        } catch {\r\n            toast.error('添加失败')\r\n        } finally {\r\n            setSaving(false)\r\n        }\r\n    }\r\n\r\n    // 删除记忆\r\n    const handleDeleteMemory = async (memoryId: number) => {\r\n        try {\r\n            await memoryApi.delete(userId, String(memoryId))\r\n            toast.success('删除成功')\r\n            fetchMemories()\r\n        } catch {\r\n            toast.error('删除失败')\r\n        }\r\n    }\r\n\r\n    // 清空用户记忆\r\n    const handleClearMemories = async () => {\r\n        if (!userId) return\r\n        if (!confirm('确定清空该用户的所有记忆？')) return\r\n\r\n        try {\r\n            await memoryApi.clearUser(userId)\r\n            toast.success('清空成功')\r\n            setMemories([])\r\n        } catch {\r\n            toast.error('清空失败')\r\n        }\r\n    }\r\n\r\n    // 清空所有用户记忆\r\n    const handleClearAllMemories = async () => {\r\n        if (!confirm('确定清空所有用户的记忆？此操作不可恢复！')) return\r\n\r\n        setLoading(true)\r\n        try {\r\n            const res = (await memoryApi.clearAll()) as ApiResponse<{ deletedCount: number }>\r\n            const count = res?.data?.deletedCount || 0\r\n            toast.success(`清空成功，共清空 ${count} 个用户的记忆`)\r\n            setMemories([])\r\n            await fetchUserList()\r\n        } catch {\r\n            toast.error('清空失败')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    // 搜索记忆\r\n    const handleSearch = async () => {\r\n        if (!userId || !searchQuery.trim()) {\r\n            toast.warning('请输入搜索关键词')\r\n            return\r\n        }\r\n\r\n        setSearching(true)\r\n        try {\r\n            const res = (await memoryApi.search({ userId, query: searchQuery })) as ApiResponse<Memory[]>\r\n            setSearchResults(res?.data || [])\r\n        } catch {\r\n            toast.error('搜索失败')\r\n            setSearchResults([])\r\n        } finally {\r\n            setSearching(false)\r\n        }\r\n    }\r\n\r\n    // 手动触发记忆总结（覆盖式）\r\n    const handleSummarize = async () => {\r\n        if (!userId) {\r\n            toast.warning('请先选择用户')\r\n            return\r\n        }\r\n\r\n        if (!confirm(`确定要总结整理 ${userId} 的记忆？\\n\\n这将合并重复记忆并覆盖旧数据。`)) {\r\n            return\r\n        }\r\n\r\n        setSummarizing(true)\r\n        try {\r\n            const res = (await memoryApi.summarize(userId)) as ApiResponse<{\r\n                success: boolean\r\n                beforeCount: number\r\n                afterCount: number\r\n                error?: string\r\n            }>\r\n            const data = res?.data\r\n            if (data?.success) {\r\n                toast.success(`记忆整理完成\\n整理前: ${data.beforeCount} 条\\n整理后: ${data.afterCount} 条`)\r\n                fetchMemories()\r\n            } else {\r\n                toast.error(data?.error || '总结失败')\r\n            }\r\n        } catch {\r\n            toast.error('总结失败')\r\n        } finally {\r\n            setSummarizing(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchUserList()\r\n    }, [])\r\n\r\n    const displayMemories = searchResults.length > 0 ? searchResults : memories\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* 统计卡片 */}\r\n            <div className=\"grid gap-4 md:grid-cols-3\">\r\n                <Card>\r\n                    <CardHeader className=\"pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium text-muted-foreground\">用户数</CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <Users className=\"h-5 w-5 text-primary\" />\r\n                            <span className=\"text-2xl font-bold\">{stats.totalUsers}</span>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n                <Card>\r\n                    <CardHeader className=\"pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium text-muted-foreground\">当前用户记忆数</CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <Brain className=\"h-5 w-5 text-green-500\" />\r\n                            <span className=\"text-2xl font-bold\">{memories.length}</span>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n                <Card>\r\n                    <CardHeader className=\"pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium text-muted-foreground\">已选用户</CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <span className=\"text-xl font-medium\">{userId || '-'}</span>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* 记忆管理 */}\r\n            <Card>\r\n                <CardHeader>\r\n                    <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n                        <div>\r\n                            <CardTitle>记忆管理</CardTitle>\r\n                            <CardDescription>管理用户的长期记忆数据</CardDescription>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <Button variant=\"outline\" size=\"sm\" onClick={fetchUserList}>\r\n                                <RefreshCw className=\"mr-2 h-4 w-4\" />\r\n                                刷新用户\r\n                            </Button>\r\n                            <Button variant=\"destructive\" size=\"sm\" onClick={handleClearAllMemories}>\r\n                                <Trash2 className=\"mr-2 h-4 w-4\" />\r\n                                清空所有记忆\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                    {/* 搜索栏 */}\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                        <Select value={userId || '__none__'} onValueChange={v => setUserId(v === '__none__' ? '' : v)}>\r\n                            <SelectTrigger className=\"w-[200px]\">\r\n                                <SelectValue placeholder=\"选择用户\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"__none__\">选择用户...</SelectItem>\r\n                                {userList.map(u => (\r\n                                    <SelectItem key={u} value={u}>\r\n                                        {u}\r\n                                    </SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                        <Input\r\n                            value={userId}\r\n                            onChange={e => setUserId(e.target.value)}\r\n                            placeholder=\"或直接输入用户ID\"\r\n                            className=\"w-[180px]\"\r\n                        />\r\n                        <Button onClick={fetchMemories} disabled={loading || !userId}>\r\n                            {loading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                            <Search className=\"mr-2 h-4 w-4\" />\r\n                            查询记忆\r\n                        </Button>\r\n                        <Button variant=\"outline\" onClick={() => setAddDialogOpen(true)} disabled={!userId}>\r\n                            <Plus className=\"mr-2 h-4 w-4\" />\r\n                            添加记忆\r\n                        </Button>\r\n                        {memories.length > 0 && (\r\n                            <>\r\n                                <Button\r\n                                    variant=\"secondary\"\r\n                                    onClick={handleSummarize}\r\n                                    disabled={summarizing}\r\n                                    title=\"合并重复记忆，覆盖旧数据\"\r\n                                >\r\n                                    {summarizing ? (\r\n                                        <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                                    ) : (\r\n                                        <Sparkles className=\"mr-2 h-4 w-4\" />\r\n                                    )}\r\n                                    总结整理\r\n                                </Button>\r\n                                <Button variant=\"destructive\" onClick={handleClearMemories}>\r\n                                    <Trash2 className=\"mr-2 h-4 w-4\" />\r\n                                    清空记忆\r\n                                </Button>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* 搜索框 */}\r\n                    {userId && memories.length > 0 && (\r\n                        <div className=\"flex gap-2\">\r\n                            <Input\r\n                                value={searchQuery}\r\n                                onChange={e => setSearchQuery(e.target.value)}\r\n                                placeholder=\"搜索记忆内容...\"\r\n                                className=\"max-w-[300px]\"\r\n                                onKeyDown={e => e.key === 'Enter' && handleSearch()}\r\n                            />\r\n                            <Button variant=\"outline\" onClick={handleSearch} disabled={searching}>\r\n                                {searching && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                                搜索\r\n                            </Button>\r\n                            {searchResults.length > 0 && (\r\n                                <Button variant=\"ghost\" onClick={() => setSearchResults([])}>\r\n                                    清除搜索\r\n                                </Button>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* 记忆列表 */}\r\n                    {!userId ? (\r\n                        <div className=\"text-center py-12 text-muted-foreground\">\r\n                            <Brain className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\r\n                            <p>请选择或输入用户ID查询记忆</p>\r\n                        </div>\r\n                    ) : displayMemories.length === 0 ? (\r\n                        <div className=\"text-center py-12 text-muted-foreground\">\r\n                            <Brain className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\r\n                            <p>该用户暂无记忆</p>\r\n                        </div>\r\n                    ) : (\r\n                        <Table>\r\n                            <TableHeader>\r\n                                <TableRow>\r\n                                    <TableHead className=\"w-[60px]\">ID</TableHead>\r\n                                    <TableHead>内容</TableHead>\r\n                                    <TableHead className=\"w-[90px]\">来源</TableHead>\r\n                                    <TableHead className=\"w-[70px]\">相似度</TableHead>\r\n                                    <TableHead className=\"w-[140px]\">时间</TableHead>\r\n                                    <TableHead className=\"w-[60px]\">操作</TableHead>\r\n                                </TableRow>\r\n                            </TableHeader>\r\n                            <TableBody>\r\n                                {displayMemories.map(memory => {\r\n                                    const source = (memory.source ||\r\n                                        (memory.metadata as Record<string, unknown>)?.source ||\r\n                                        'manual') as string\r\n                                    const sourceInfo = sourceLabels[source] || {\r\n                                        label: source,\r\n                                        color: 'bg-gray-100 text-gray-800'\r\n                                    }\r\n                                    return (\r\n                                        <TableRow key={memory.id}>\r\n                                            <TableCell className=\"font-mono text-xs\">{memory.id}</TableCell>\r\n                                            <TableCell className=\"max-w-[400px]\">\r\n                                                <div\r\n                                                    className=\"truncate\"\r\n                                                    title={\r\n                                                        typeof memory.content === 'string'\r\n                                                            ? memory.content\r\n                                                            : JSON.stringify(memory.content)\r\n                                                    }\r\n                                                >\r\n                                                    {typeof memory.content === 'string'\r\n                                                        ? memory.content\r\n                                                        : JSON.stringify(memory.content)}\r\n                                                </div>\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <span\r\n                                                    className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${sourceInfo.color}`}\r\n                                                >\r\n                                                    {sourceInfo.label}\r\n                                                </span>\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                {memory.score ? (\r\n                                                    <Badge variant=\"secondary\">\r\n                                                        {(memory.score * 100).toFixed(1)}%\r\n                                                    </Badge>\r\n                                                ) : (\r\n                                                    '-'\r\n                                                )}\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-xs text-muted-foreground\">\r\n                                                {memory.timestamp\r\n                                                    ? new Date(memory.timestamp).toLocaleString('zh-CN')\r\n                                                    : '-'}\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Button\r\n                                                    variant=\"ghost\"\r\n                                                    size=\"icon\"\r\n                                                    className=\"h-8 w-8 text-destructive\"\r\n                                                    onClick={() => handleDeleteMemory(memory.id)}\r\n                                                >\r\n                                                    <Trash2 className=\"h-4 w-4\" />\r\n                                                </Button>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    )\r\n                                })}\r\n                            </TableBody>\r\n                        </Table>\r\n                    )}\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* 添加记忆弹窗 */}\r\n            <Dialog open={addDialogOpen} onOpenChange={setAddDialogOpen}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>添加记忆</DialogTitle>\r\n                        <DialogDescription>为用户 {userId} 添加新的记忆</DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>记忆内容</Label>\r\n                            <Textarea\r\n                                value={newMemory.content}\r\n                                onChange={e => setNewMemory({ ...newMemory, content: e.target.value })}\r\n                                placeholder=\"输入要记住的内容...\"\r\n                                rows={4}\r\n                            />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label>元数据 (可选, JSON格式)</Label>\r\n                            <Textarea\r\n                                value={newMemory.metadata}\r\n                                onChange={e => setNewMemory({ ...newMemory, metadata: e.target.value })}\r\n                                placeholder='{\"type\": \"fact\", \"importance\": \"high\"}'\r\n                                rows={2}\r\n                                className=\"font-mono text-sm\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <DialogFooter>\r\n                        <Button variant=\"outline\" onClick={() => setAddDialogOpen(false)}>\r\n                            取消\r\n                        </Button>\r\n                        <Button onClick={handleAddMemory} disabled={saving}>\r\n                            {saving && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                            添加\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[2,3]}