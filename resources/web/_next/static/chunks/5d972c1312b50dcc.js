(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9641,e=>{"use strict";var s=e.i(69867),t=e.i(92024),r=e.i(94237),a=e.i(45030);let i=(0,r.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:r,asChild:n=!1,...l}){let c=n?t.Slot:"span";return(0,s.jsx)(c,{"data-slot":"badge",className:(0,a.cn)(i({variant:r}),e),...l})}e.s(["Badge",()=>n])},41049,e=>{"use strict";var s=e.i(69867),t=e.i(45030);function r({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function a({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function i({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...r})}function n({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...r})}function l({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>a,"CardTitle",()=>i])},71205,e=>{"use strict";var s=e.i(69867),t=e.i(45030);function r({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"skeleton",className:(0,t.cn)("bg-accent animate-pulse rounded-md",e),...r})}e.s(["Skeleton",()=>r])},72024,e=>{"use strict";let s=(0,e.i(50974).default)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);e.s(["Server",()=>s],72024)},95083,e=>{"use strict";var s=e.i(69867),t=e.i(28179),r=e.i(11190),a=e.i(89419),i=e.i(41049),n=e.i(9641),l=e.i(61375),c=e.i(71205),d=e.i(34852),o=e.i(70620),h=e.i(10273),x=e.i(35670),u=e.i(83949),m=e.i(40204),g=e.i(32308),f=e.i(50974);let v=(0,f.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var j=e.i(14775),p=e.i(72024);let b=(0,f.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var y=e.i(17969),N=e.i(88233);function C(){let[e,f]=(0,t.useState)(null),[C,w]=(0,t.useState)(!0),k=(0,a.useSearchParams)(),A=(0,a.useRouter)();if((0,t.useEffect)(()=>{let e=k.get("auth_token");e&&(localStorage.setItem("chaite_token",e),A.replace("/"))},[k,A]),(0,t.useEffect)(()=>{(async()=>{try{let[e,s,t,r]=await Promise.all([d.channelsApi.list(!0),d.configApi.get(),d.toolsApi.list().catch(()=>({data:[]})),d.mcpApi.listServers().catch(()=>({data:[]}))]);f({channels:e?.data||[],config:s?.data||{},toolsCount:Array.isArray(t?.data)?t.data.length:0,serversCount:Array.isArray(r?.data)?r.data.length:0})}catch(e){console.error("Failed to fetch dashboard data:",e)}finally{w(!1)}})()},[]),C)return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(c.Skeleton,{className:"h-4 w-20"}),(0,s.jsx)(c.Skeleton,{className:"h-4 w-4"})]}),(0,s.jsx)(i.CardContent,{children:(0,s.jsx)(c.Skeleton,{className:"h-8 w-16"})})]},t))})});let S=e?.channels.filter(e=>e.enabled&&"active"===e.status).length||0,P=e?.channels.length||0,B=e?.channels.reduce((e,s)=>e+(Array.isArray(s.models)?s.models.length:0),0)||0,T=[{title:"活跃渠道",value:`${S}/${P}`,icon:x.Plug,description:"可用API渠道",href:"/channels",gradient:"from-green-500 to-emerald-600",iconColor:"text-green-600"},{title:"MCP服务器",value:e?.serversCount||0,icon:p.Server,description:"已连接服务",href:"/mcp",gradient:"from-cyan-500 to-blue-600",iconColor:"text-cyan-600"},{title:"AI模型",value:B,icon:o.Bot,description:"可用模型数",href:"/channels",gradient:"from-purple-500 to-indigo-600",iconColor:"text-purple-600"},{title:"工具数",value:e?.toolsCount||0,icon:u.Wrench,description:"MCP工具",href:"/tools",gradient:"from-amber-500 to-orange-600",iconColor:"text-amber-600"}],H=[{label:"系统设置",icon:m.Settings,href:"/settings",color:"text-blue-500"},{label:"渠道管理",icon:x.Plug,href:"/channels",color:"text-green-500"},{label:"预设管理",icon:j.Palette,href:"/presets",color:"text-purple-500"},{label:"工具配置",icon:u.Wrench,href:"/tools",color:"text-amber-500"},{label:"MCP服务",icon:p.Server,href:"/mcp",color:"text-cyan-500"},{label:"对话历史",icon:h.MessageSquare,href:"/conversations",color:"text-pink-500"},{label:"调用记录",icon:y.History,href:"/history",color:"text-orange-500"},{label:"用户管理",icon:g.Users,href:"/users",color:"text-indigo-500"},{label:"群组管理",icon:N.UsersRound,href:"/groups",color:"text-teal-500"}];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",children:T.map(e=>(0,s.jsx)(r.default,{href:e.href,children:(0,s.jsxs)(i.Card,{className:"group relative overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer h-full border-0 shadow-md",children:[(0,s.jsx)("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${e.gradient}`}),(0,s.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(i.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:e.title}),(0,s.jsx)("div",{className:"p-2 rounded-lg bg-muted/50 group-hover:bg-muted transition-colors",children:(0,s.jsx)(e.icon,{className:`h-4 w-4 ${e.iconColor}`})})]}),(0,s.jsxs)(i.CardContent,{children:[(0,s.jsx)("div",{className:"text-3xl font-bold",children:e.value}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.description})]})]})},e.title))}),(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(b,{className:"h-5 w-5"}),"快捷入口"]}),(0,s.jsx)(i.CardDescription,{children:"快速跳转到各功能页面"})]}),(0,s.jsx)(i.CardContent,{children:(0,s.jsx)("div",{className:"grid gap-3 grid-cols-3 sm:grid-cols-5 lg:grid-cols-9",children:H.map(e=>(0,s.jsx)(r.default,{href:e.href,children:(0,s.jsxs)(l.Button,{variant:"ghost",className:"w-full h-auto flex flex-col gap-2 py-4 hover:bg-accent",children:[(0,s.jsx)(e.icon,{className:`h-6 w-6 ${e.color}`}),(0,s.jsx)("span",{className:"text-xs font-medium",children:e.label})]})},e.href))})})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(x.Plug,{className:"h-5 w-5"}),"渠道状态"]}),(0,s.jsx)(i.CardDescription,{children:"API渠道连接状态"})]}),(0,s.jsx)(r.default,{href:"/channels",children:(0,s.jsxs)(l.Button,{variant:"ghost",size:"sm",children:["查看全部 ",(0,s.jsx)(b,{className:"ml-1 h-4 w-4"})]})})]}),(0,s.jsx)(i.CardContent,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[e?.channels.slice(0,5).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium truncate",children:e.name}),(0,s.jsx)(n.Badge,{variant:"active"===e.status?"default":"error"===e.status?"destructive":"secondary",children:"active"===e.status?"正常":"error"===e.status?"异常":"未测试"})]},e.id)),(!e?.channels||0===e.channels.length)&&(0,s.jsxs)("div",{className:"text-center py-4",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"暂无渠道配置"}),(0,s.jsx)(r.default,{href:"/channels",children:(0,s.jsx)(l.Button,{size:"sm",children:"添加渠道"})})]})]})})]}),(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(v,{className:"h-5 w-5"}),"系统状态"]}),(0,s.jsx)(i.CardDescription,{children:"插件运行状态"})]}),(0,s.jsx)(i.CardContent,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm",children:"AI响应"}),(0,s.jsx)(n.Badge,{className:"bg-green-100 text-green-700 hover:bg-green-100",children:"正常"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm",children:"MCP服务"}),(0,s.jsx)(n.Badge,{variant:e?.config?.mcp?.enabled?"default":"secondary",children:e?.config?.mcp?.enabled?"已启用":"已禁用"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm",children:"伪人模式"}),(0,s.jsx)(n.Badge,{variant:e?.config?.bym?.enable?"default":"secondary",children:e?.config?.bym?.enable?"已启用":"已禁用"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm",children:"MCP服务器"}),(0,s.jsxs)(n.Badge,{variant:"outline",children:[e?.serversCount||0," 个"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm",children:"可用工具"}),(0,s.jsxs)(n.Badge,{variant:"outline",children:[e?.toolsCount||0," 个"]})]})]})})]})]})]})}e.s(["default",()=>C],95083)}]);