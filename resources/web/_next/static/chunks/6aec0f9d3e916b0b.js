(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41049,e=>{"use strict";var t=e.i(42548),r=e.i(45030);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function a({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function c({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>n,"CardDescription",()=>i,"CardHeader",()=>a,"CardTitle",()=>c])},89908,e=>{"use strict";var t=e.i(79333);e.s(["Loader2",()=>t.default])},84636,(e,t,r)=>{t.exports=e.r(94726)},4084,e=>{"use strict";let t=(0,e.i(50974).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],4084)},62754,e=>{"use strict";let t=(0,e.i(50974).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],62754)},73862,e=>{"use strict";var t=e.i(42548),r=e.i(5614),s=e.i(84636),a=e.i(41049),c=e.i(89908),i=e.i(4084),n=e.i(62754),l=e.i(34852),d=e.i(79342);function o(){let e=(0,s.useRouter)(),o=(0,s.useSearchParams)(),[u,m]=(0,r.useState)("loading"),[x,h]=(0,r.useState)("正在验证登录凭证...");return(0,r.useEffect)(()=>{let t=o.get("token"),r=localStorage.getItem("chaite_token");if(r)try{let t=r.split(".");if(3===t.length){let r=JSON.parse(atob(t[1]));if(1e3*r.exp>Date.now()){m("success"),h("已登录，正在跳转..."),e.push("/");return}}}catch{localStorage.removeItem("chaite_token")}if(!t){m("error"),h("无效的登录链接");return}(async()=>{try{let r=await l.authApi.verifyToken(t);if(r?.success||r?.data?.token){let t=r?.data?.token;localStorage.setItem("chaite_token",t),m("success"),h("登录成功，正在跳转..."),d.toast.success("登录成功"),setTimeout(()=>{e.push("/")},10)}else throw Error(r?.message||"验证失败")}catch(e){console.error("Token验证失败:",e),m("error"),h(e?.response?.data?.message||e?.message||"登录凭证无效或已过期"),d.toast.error("登录失败")}})()},[o,e]),(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:(0,t.jsxs)(a.Card,{className:"w-full max-w-md",children:[(0,t.jsxs)(a.CardHeader,{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex justify-center mb-4",children:["loading"===u&&(0,t.jsx)(c.Loader2,{className:"h-12 w-12 text-primary animate-spin"}),"success"===u&&(0,t.jsx)(i.CheckCircle,{className:"h-12 w-12 text-green-500"}),"error"===u&&(0,t.jsx)(n.XCircle,{className:"h-12 w-12 text-destructive"})]}),(0,t.jsx)(a.CardTitle,{className:"text-xl",children:x})]}),"error"===u&&(0,t.jsx)(a.CardContent,{className:"text-center",children:(0,t.jsx)("button",{onClick:()=>e.push("/login"),className:"text-primary hover:underline",children:"返回登录页面"})})]})})}function u(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:(0,t.jsx)(a.Card,{className:"w-full max-w-md",children:(0,t.jsxs)(a.CardHeader,{className:"text-center",children:[(0,t.jsx)("div",{className:"flex justify-center mb-4",children:(0,t.jsx)(c.Loader2,{className:"h-12 w-12 text-primary animate-spin"})}),(0,t.jsx)(a.CardTitle,{className:"text-xl",children:"正在加载..."})]})})}),children:(0,t.jsx)(o,{})})}e.s(["default",()=>u])}]);