(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9256,e=>{"use strict";var t=e.i(52542),r=e.i(28349),s=e.i(44728),a=e.i(40418),i=e.i(17171),o=e.i(37249),n=e.i(40204),l=e.i(10273),d=e.i(32308),c=e.i(35670),u=e.i(70620),h=e.i(83949),p=e.i(17969),m=e.i(14775),g=e.i(50974);let f=(0,g.default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var x=e.i(88233),b=e.i(3190);let y=(0,g.default)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var k=e.i(64775),w=e.i(63959);let v=(0,g.default)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);var j=e.i(13089),N=e.i(90907),S=e.i(29144),C=e.i(94701),M=e.i(82018),I=e.i(68466),A=e.i(72024),D=e.i(23359),O=e.i(72029);let P=e=>{let t,r=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,i={setState:s,getState:a,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(s,a,i);return i},T=e=>{let t=e?P(e):P,r=e=>(function(e,t=e=>e){let r=a.default.useSyncExternalStore(e.subscribe,a.default.useCallback(()=>t(e.getState()),[e,t]),a.default.useCallback(()=>t(e.getInitialState()),[e,t]));return a.default.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},B=e=>e?T(e):T,z=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>z(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>z(t)(e)}}},E=(e,t)=>(r,s,a)=>{let i,o={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let s=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=r.getItem(e))?t:null;return a instanceof Promise?a.then(s):s(a)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},n=!1,l=new Set,d=new Set,c=o.storage;if(!c)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...e)},s,a);let u=()=>{let e=o.partialize({...s()});return c.setItem(o.name,{state:e,version:o.version})},h=a.setState;a.setState=(e,t)=>(h(e,t),u());let p=e((...e)=>(r(...e),u()),s,a);a.getInitialState=()=>p;let m=()=>{var e,t;if(!c)return;n=!1,l.forEach(e=>{var t;return e(null!=(t=s())?t:p)});let a=(null==(t=o.onRehydrateStorage)?void 0:t.call(o,null!=(e=s())?e:p))||void 0;return z(c.getItem.bind(c))(o.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];else{if(o.migrate){let t=o.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[a,n]=e;if(r(i=o.merge(n,null!=(t=s())?t:p),!0),a)return u()}).then(()=>{null==a||a(i,void 0),i=s(),n=!0,d.forEach(e=>e(i))}).catch(e=>{null==a||a(void 0,e)})};return a.persist={setOptions:e=>{o={...o,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>m(),hasHydrated:()=>n,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},o.skipHydration||m(),i||p},U=B()(E(e=>({token:null,isAuthenticated:!1,setToken:t=>e({token:t,isAuthenticated:!!t}),logout:()=>{localStorage.removeItem("chatai_token"),e({token:null,isAuthenticated:!1})}}),{name:"chatai-auth"}));B()((e,t)=>({config:null,loading:!1,lastFetched:null,setConfig:t=>e({config:t,lastFetched:Date.now()}),setLoading:t=>e({loading:t}),isStale:(e=6e4)=>{let{lastFetched:r}=t();return!r||Date.now()-r>e}}));let H=B()(E(e=>({sidebarOpen:!0,sidebarCollapsed:!1,theme:"system",setSidebarOpen:t=>e({sidebarOpen:t}),toggleSidebar:()=>e(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarCollapsed:t=>e({sidebarCollapsed:t}),setTheme:t=>e({theme:t})}),{name:"chatai-ui",partialize:e=>({sidebarCollapsed:e.sidebarCollapsed,theme:e.theme})}));B()(e=>({notifications:[],addNotification:t=>{let r=`${Date.now()}-${Math.random().toString(36).slice(2,9)}`;e(e=>({notifications:[...e.notifications,{...t,id:r}]})),0!==t.duration&&setTimeout(()=>{e(e=>({notifications:e.notifications.filter(e=>e.id!==r)}))},t.duration||5e3)},removeNotification:t=>e(e=>({notifications:e.notifications.filter(e=>e.id!==t)})),clearNotifications:()=>e({notifications:[]})}));var L=e.i(47686),R=e.i(25466),q=e.i(19367),W=e.i(83277);let _=[{id:"overview",label:"仪表盘",icon:o.LayoutDashboard,items:[{href:"/",label:"仪表盘",icon:o.LayoutDashboard}]},{id:"config",label:"配置中心",icon:n.Settings,items:[{href:"/settings",label:"基础设置",icon:n.Settings},{href:"/settings/system",label:"系统配置",icon:A.Server},{href:"/settings/context",label:"上下文配置",icon:I.FileText},{href:"/channels",label:"渠道管理",icon:c.Plug},{href:"/presets",label:"预设管理",icon:m.Palette},{href:"/scope",label:"人设管理",icon:y},{href:"/settings/proxy",label:"代理设置",icon:C.Globe},{href:"/settings/links",label:"登录链接",icon:D.Link}]},{id:"ai",label:"AI扩展",icon:v,items:[{href:"/tools",label:"工具配置",icon:h.Wrench},{href:"/mcp",label:"MCP服务",icon:u.Bot},{href:"/imagegen",label:"绘图预设",icon:S.Wand2},{href:"/knowledge",label:"知识库",icon:w.BookOpen},{href:"/memory",label:"记忆管理",icon:k.Brain}]},{id:"data",label:"数据记录",icon:j.Database,items:[{href:"/stats",label:"使用统计",icon:N.BarChart3},{href:"/history/usage",label:"调用统计",icon:M.Activity},{href:"/conversations",label:"对话历史",icon:l.MessageSquare},{href:"/history",label:"工具调用",icon:p.History}]},{id:"users",label:"用户管理",icon:d.Users,items:[{href:"/users",label:"用户管理",icon:d.Users},{href:"/groups",label:"群组管理",icon:x.UsersRound}]}];function K(e,t,r){return t===e||!r.some(r=>r.href!==e&&r.href.startsWith(e+"/")&&(t===r.href||t.startsWith(r.href+"/")))&&"/"!==e&&t.startsWith(e+"/")}function F(e,t){return e.items.some(r=>K(r.href,t,e.items))}function G({group:e,pathname:s,onNavClick:a,isOpen:o,onToggle:n}){let l=F(e,s),d=e.icon;if(1===e.items.length){let o=e.items[0],n=s===o.href,l=o.icon||d;return(0,t.jsxs)(r.default,{href:o.href,className:(0,i.cn)("flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 relative overflow-hidden group/item",n?"text-primary-foreground shadow-lg shadow-primary/25":"text-muted-foreground hover:text-foreground hover:bg-accent/50 hover:shadow-sm"),onClick:a,children:[n&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary to-primary/80 opacity-100 transition-opacity"}),(0,t.jsx)("div",{className:(0,i.cn)("flex h-8 w-8 items-center justify-center rounded-lg transition-all duration-300 relative z-10",n?"bg-white/20 text-white":"bg-muted/50 group-hover/item:bg-background group-hover/item:scale-110"),children:(0,t.jsx)(l,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"relative z-10",children:o.label})]})}return(0,t.jsxs)(W.Collapsible,{open:o,onOpenChange:n,children:[(0,t.jsx)(W.CollapsibleTrigger,{className:"w-full group/trigger",children:(0,t.jsxs)("div",{className:(0,i.cn)("flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 w-full relative overflow-hidden",l?"text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent/40"),children:[l&&(0,t.jsx)("div",{className:"absolute inset-0 bg-primary/5 opacity-100 transition-opacity"}),(0,t.jsx)("div",{className:(0,i.cn)("flex h-8 w-8 items-center justify-center rounded-lg transition-all duration-300 relative z-10",l?"bg-primary/10 text-primary shadow-sm":"bg-muted/50 group-hover/trigger:bg-background group-hover/trigger:scale-110"),children:(0,t.jsx)(d,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"flex-1 text-left relative z-10",children:e.label}),(0,t.jsx)(b.ChevronDown,{className:(0,i.cn)("h-4 w-4 transition-transform duration-300 text-muted-foreground/70 group-hover/trigger:text-foreground relative z-10",o&&"rotate-180")})]})}),(0,t.jsx)(W.CollapsibleContent,{className:"mt-1 ml-6 pl-3 border-l-2 border-border/40 space-y-0.5",children:e.items.map(o=>{let n=K(o.href,s,e.items),l=o.icon;return(0,t.jsxs)(r.default,{href:o.href,className:(0,i.cn)("flex items-center gap-2.5 px-3 py-2 rounded-lg text-sm transition-all duration-150",n?"bg-primary text-primary-foreground font-medium shadow-sm":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),onClick:a,children:[l&&(0,t.jsx)(l,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:o.label})]},o.href)})})]})}function J({pathname:e,onNavClick:r}){let[s,i]=(0,a.useState)(()=>{let t=new Set;return _.forEach(r=>{F(r,e)&&t.add(r.id)}),t});return(0,t.jsx)("nav",{className:"p-4 space-y-2",children:_.map(a=>(0,t.jsx)(G,{group:a,pathname:e,onNavClick:r,isOpen:s.has(a.id),onToggle:()=>{var e;return e=a.id,void i(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})}},a.id))})}function V(){let e=(0,s.usePathname)(),{sidebarOpen:a,toggleSidebar:i,setSidebarOpen:o}=H();return(0,t.jsxs)(q.TooltipProvider,{children:[(0,t.jsxs)("aside",{className:"hidden lg:block w-64 glass-sidebar h-screen sticky top-0 transition-all duration-300",children:[(0,t.jsx)("div",{className:"flex h-16 items-center px-6 border-b border-border/40 backdrop-blur-md bg-background/20",children:(0,t.jsxs)(r.default,{href:"/",className:"flex items-center gap-3 group",children:[(0,t.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-primary/80 shadow-lg shadow-primary/20 group-hover:shadow-primary/40 group-hover:scale-110 transition-all duration-300",children:(0,t.jsx)(u.Bot,{className:"h-5 w-5 text-primary-foreground"})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-bold text-lg leading-tight tracking-tight",children:"ChatAI"}),(0,t.jsx)("span",{className:"text-[10px] text-muted-foreground leading-tight uppercase tracking-wider font-semibold",children:"Assistant"})]})]})}),(0,t.jsx)(L.ScrollArea,{className:"h-[calc(100vh-4rem)]",children:(0,t.jsx)(J,{pathname:e})})]}),(0,t.jsx)(R.Sheet,{open:a,onOpenChange:o,children:(0,t.jsxs)(R.SheetContent,{side:"left",className:"w-72 p-0 glass-sidebar border-r-0",children:[(0,t.jsxs)(R.SheetHeader,{className:"h-16 flex flex-row items-center px-6 border-b border-border/40 bg-background/20",children:[(0,t.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-primary/80 shadow-md mr-3",children:(0,t.jsx)(u.Bot,{className:"h-5 w-5 text-primary-foreground"})}),(0,t.jsx)(R.SheetTitle,{className:"font-bold text-lg",children:"ChatAI"})]}),(0,t.jsx)(L.ScrollArea,{className:"h-[calc(100vh-4rem)]",children:(0,t.jsx)(J,{pathname:e,onNavClick:()=>o(!1)})})]})}),(0,t.jsxs)(q.Tooltip,{children:[(0,t.jsx)(q.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(O.Button,{variant:"default",size:"icon",className:"fixed bottom-4 right-4 z-40 lg:hidden shadow-xl rounded-full h-14 w-14 bg-gradient-to-br from-primary to-primary/80 hover:shadow-2xl hover:scale-105 transition-all duration-300",onClick:i,children:(0,t.jsx)(f,{className:"h-6 w-6"})})}),(0,t.jsx)(q.TooltipContent,{side:"left",children:(0,t.jsx)("p",{children:"打开菜单"})})]})]})}let $=(0,g.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var Z=e.i(29720),Q=e.i(80830);let X=(0,g.default)("command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);var Y=e.i(51078);let ee=(0,g.default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),et=(0,g.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var er=e.i(38910);function es(){let{setTheme:e}=(0,er.useTheme)();return(0,t.jsxs)(Y.DropdownMenu,{children:[(0,t.jsx)(Y.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(O.Button,{variant:"ghost",size:"icon",children:[(0,t.jsx)(et,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,t.jsx)(ee,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,t.jsx)("span",{className:"sr-only",children:"切换主题"})]})}),(0,t.jsxs)(Y.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(Y.DropdownMenuItem,{onClick:()=>e("light"),children:"浅色"}),(0,t.jsx)(Y.DropdownMenuItem,{onClick:()=>e("dark"),children:"深色"}),(0,t.jsx)(Y.DropdownMenuItem,{onClick:()=>e("system"),children:"跟随系统"})]})]})}function ea({title:e="ChatAi 管理面板",onSearchClick:r}){let{toggleSidebar:a}=H(),{logout:i}=U(),o=(0,s.useRouter)();return(0,t.jsxs)("header",{className:"glass-panel flex h-16 items-center gap-4 px-4 md:px-6 transition-all duration-300",children:[(0,t.jsx)(O.Button,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:a,children:(0,t.jsx)(f,{className:"h-5 w-5"})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("h1",{className:"text-lg font-semibold md:text-xl tracking-tight text-foreground/80",children:e})}),r&&(0,t.jsxs)(O.Button,{variant:"outline",size:"sm",onClick:r,className:"hidden sm:flex items-center gap-2 h-9 px-3 text-muted-foreground hover:text-foreground bg-background/50 border-border/50",children:[(0,t.jsx)(Q.Search,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm",children:"搜索功能..."}),(0,t.jsxs)("kbd",{className:"ml-2 pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border border-border/50 bg-muted/50 px-1.5 font-mono text-[10px] font-medium text-muted-foreground",children:[(0,t.jsx)(X,{className:"h-3 w-3"}),"K"]})]}),r&&(0,t.jsx)(O.Button,{variant:"ghost",size:"icon",onClick:r,className:"sm:hidden",children:(0,t.jsx)(Q.Search,{className:"h-5 w-5"})}),(0,t.jsx)(es,{}),(0,t.jsxs)(Y.DropdownMenu,{children:[(0,t.jsx)(Y.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(O.Button,{variant:"ghost",size:"icon",className:"rounded-full overflow-hidden border border-primary/20 hover:border-primary/50 transition-colors w-9 h-9",children:(0,t.jsx)("div",{className:"w-full h-full bg-gradient-to-tr from-primary/20 to-secondary/20 flex items-center justify-center",children:(0,t.jsx)(Z.User,{className:"h-4 w-4 text-primary"})})})}),(0,t.jsxs)(Y.DropdownMenuContent,{align:"end",className:"glass-card border-border/50",children:[(0,t.jsxs)(Y.DropdownMenuItem,{disabled:!0,className:"font-medium",children:[(0,t.jsx)(Z.User,{className:"mr-2 h-4 w-4"}),"管理员"]}),(0,t.jsx)(Y.DropdownMenuSeparator,{className:"bg-border/50"}),(0,t.jsxs)(Y.DropdownMenuItem,{onClick:()=>{i(),o.push("/login")},className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[(0,t.jsx)($,{className:"mr-2 h-4 w-4"}),"退出登录"]})]})]})]})}var ei=e.i(75979),eo=e.i(94518),en=e.i(43322),el=e.i(60713),ed=e.i(96173),ec=e.i(17286),eu=e.i(44697),eh=e.i(15204),ep=e.i(77759),em=e.i(79923),eg=e.i(10148);let ef=[{id:"dashboard",label:"仪表盘",description:"查看系统概览和统计数据",icon:o.LayoutDashboard,href:"/",keywords:["首页","home","overview"],group:"仪表盘"},{id:"settings",label:"基础设置",description:"配置基本系统参数",icon:n.Settings,href:"/settings",keywords:["配置","config","setting"],group:"配置中心"},{id:"settings-trigger",label:"触发配置",description:"配置AI触发方式和前缀",icon:ed.Zap,href:"/settings?tab=trigger",keywords:["触发","trigger","前缀","prefix","@"],group:"配置中心 / 基础设置"},{id:"settings-basic",label:"基础功能",description:"命令前缀、调试模式等",icon:n.Settings,href:"/settings?tab=basic",keywords:["命令","debug","调试"],group:"配置中心 / 基础设置"},{id:"settings-llm",label:"模型配置",description:"配置默认模型和备选模型",icon:u.Bot,href:"/settings?tab=llm",keywords:["模型","model","llm","ai"],group:"配置中心 / 基础设置"},{id:"settings-bym",label:"伪人配置",description:"配置伪人模式参数",icon:eh.Sparkles,href:"/settings?tab=bym",keywords:["伪人","bym","模拟","随机回复"],group:"配置中心 / 基础设置"},{id:"settings-tools",label:"工具调用配置",description:"工具执行和显示设置",icon:h.Wrench,href:"/settings?tab=tools",keywords:["工具","tool","function"],group:"配置中心 / 基础设置"},{id:"settings-thinking",label:"思考链配置",description:"思考过程显示设置",icon:k.Brain,href:"/settings?tab=thinking",keywords:["思考","thinking","chain"],group:"配置中心 / 基础设置"},{id:"settings-features",label:"高级功能",description:"群聊总结、用户画像等",icon:eh.Sparkles,href:"/settings?tab=features",keywords:["高级","功能","feature","总结","画像"],group:"配置中心 / 基础设置"},{id:"system",label:"系统配置",description:"高级系统配置选项",icon:A.Server,href:"/settings/system",keywords:["系统","system"],group:"配置中心"},{id:"context",label:"上下文配置",description:"对话上下文相关设置",icon:I.FileText,href:"/settings/context",keywords:["上下文","context"],group:"配置中心"},{id:"channels",label:"渠道管理",description:"管理AI服务渠道",icon:c.Plug,href:"/channels",keywords:["渠道","channel","api"],group:"配置中心"},{id:"channels-add",label:"添加渠道",description:"添加新的AI服务渠道",icon:el.Plus,href:"/channels?action=add",keywords:["添加","新建","add","channel"],group:"配置中心 / 渠道管理",action:"add"},{id:"presets",label:"预设管理",description:"管理AI预设配置",icon:m.Palette,href:"/presets",keywords:["预设","preset","模板"],group:"配置中心"},{id:"presets-add",label:"添加预设",description:"创建新的AI预设",icon:el.Plus,href:"/presets?action=add",keywords:["添加","新建","add","preset"],group:"配置中心 / 预设管理",action:"add"},{id:"scope",label:"人设管理",description:"管理AI角色人设",icon:y,href:"/scope",keywords:["人设","scope","角色","persona"],group:"配置中心"},{id:"proxy",label:"代理设置",description:"配置网络代理",icon:C.Globe,href:"/settings/proxy",keywords:["代理","proxy","网络"],group:"配置中心"},{id:"links",label:"登录链接",description:"管理登录链接",icon:D.Link,href:"/settings/links",keywords:["链接","link","登录"],group:"配置中心"},{id:"tools",label:"工具配置",description:"配置AI可用工具",icon:h.Wrench,href:"/tools",keywords:["工具","tool","function"],group:"AI扩展"},{id:"mcp",label:"MCP服务",description:"管理MCP服务配置",icon:u.Bot,href:"/mcp",keywords:["mcp","服务","service"],group:"AI扩展"},{id:"imagegen",label:"绘图预设",description:"配置图像生成参数",icon:S.Wand2,href:"/imagegen",keywords:["绘图","图像","image","draw"],group:"AI扩展"},{id:"knowledge",label:"知识库",description:"管理知识库内容",icon:w.BookOpen,href:"/knowledge",keywords:["知识","knowledge","rag"],group:"AI扩展"},{id:"knowledge-add",label:"添加知识库",description:"创建新的知识库",icon:el.Plus,href:"/knowledge?action=add",keywords:["添加","新建","add","knowledge"],group:"AI扩展 / 知识库",action:"add"},{id:"memory",label:"记忆管理",description:"管理AI长期记忆",icon:k.Brain,href:"/memory",keywords:["记忆","memory","存储"],group:"AI扩展"},{id:"stats",label:"使用统计",description:"查看使用统计数据",icon:N.BarChart3,href:"/stats",keywords:["统计","stats","数据"],group:"数据记录"},{id:"usage",label:"调用统计",description:"查看API调用统计",icon:M.Activity,href:"/history/usage",keywords:["调用","usage","api"],group:"数据记录"},{id:"conversations",label:"对话历史",description:"查看对话记录",icon:l.MessageSquare,href:"/conversations",keywords:["对话","chat","历史","conversation"],group:"数据记录"},{id:"history",label:"工具调用",description:"查看工具调用记录",icon:p.History,href:"/history",keywords:["工具","调用","history"],group:"数据记录"},{id:"users",label:"用户管理",description:"管理系统用户",icon:d.Users,href:"/users",keywords:["用户","user","管理"],group:"用户管理"},{id:"users-add",label:"添加用户",description:"添加新用户配置",icon:eg.UserPlus,href:"/users?action=add",keywords:["添加","新建","add","user"],group:"用户管理",action:"add"},{id:"groups",label:"群组管理",description:"管理群组配置",icon:x.UsersRound,href:"/groups",keywords:["群组","group","群"],group:"用户管理"},{id:"groups-add",label:"添加群组",description:"添加新群组配置",icon:el.Plus,href:"/groups?action=add",keywords:["添加","新建","add","group","群"],group:"用户管理",action:"add"},{id:"groups-basic",label:"群组基础设置",description:"群号、预设、触发模式",icon:n.Settings,href:"/groups?tab=basic",keywords:["群组","基础","预设","触发"],group:"用户管理 / 群组管理"},{id:"groups-features",label:"群组功能开关",description:"工具调用、绘图、总结",icon:ed.Zap,href:"/groups?tab=features",keywords:["功能","工具","绘图","总结"],group:"用户管理 / 群组管理"},{id:"groups-bym",label:"群组伪人设置",description:"群组伪人模式配置",icon:eh.Sparkles,href:"/groups?tab=bym",keywords:["伪人","bym","模拟"],group:"用户管理 / 群组管理"},{id:"groups-events",label:"群组事件处理",description:"入群欢迎、退群提醒等",icon:eu.PartyPopper,href:"/groups?tab=events",keywords:["事件","欢迎","入群","退群"],group:"用户管理 / 群组管理"},{id:"groups-welcome",label:"入群欢迎配置",description:"配置新成员入群欢迎",icon:eg.UserPlus,href:"/groups?feature=welcome",keywords:["欢迎","入群","welcome"],group:"用户管理 / 群组管理"},{id:"groups-poke",label:"戳一戳配置",description:"配置戳一戳回复",icon:ep.Hand,href:"/groups?feature=poke",keywords:["戳","poke","互动"],group:"用户管理 / 群组管理"},{id:"groups-summary",label:"定时总结配置",description:"配置群聊定时总结",icon:em.Clock,href:"/groups?feature=summary",keywords:["总结","定时","summary"],group:"用户管理 / 群组管理"},{id:"groups-imagegen",label:"群组绘图设置",description:"配置群组绘图功能",icon:ec.Image,href:"/groups?feature=imagegen",keywords:["绘图","图片","image"],group:"用户管理 / 群组管理"},{id:"groups-emoji",label:"表情包小偷",description:"配置表情包收集功能",icon:eh.Sparkles,href:"/groups?feature=emoji",keywords:["表情","emoji","小偷"],group:"用户管理 / 群组管理"},{id:"groups-models",label:"群组模型配置",description:"配置群组专用模型",icon:u.Bot,href:"/groups?tab=advanced",keywords:["模型","model","群组"],group:"用户管理 / 群组管理"},{id:"groups-knowledge",label:"群组知识库",description:"配置群组关联知识库",icon:w.BookOpen,href:"/groups?tab=advanced",keywords:["知识库","knowledge","群组"],group:"用户管理 / 群组管理"}];function ex({open:e,onOpenChange:r}){let o=(0,s.useRouter)(),[n,l]=a.useState(""),[d,c]=a.useState(0),u=a.useRef(null),h=a.useMemo(()=>n.trim()?ef.filter(e=>[e.label,e.description||"",...e.keywords||[],e.group].some(e=>(function(e,t){let r=e.toLowerCase(),s=t.toLowerCase();if(r.includes(s))return!0;let a=0;for(let e=0;e<r.length&&a<s.length;e++)r[e]===s[a]&&a++;return a===s.length})(e,n))):ef,[n]),p=a.useMemo(()=>h.reduce((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e),{}),[h]),m=a.useMemo(()=>h,[h]);a.useEffect(()=>{c(0)},[n]),a.useEffect(()=>{e&&(l(""),c(0),setTimeout(()=>u.current?.focus(),0))},[e]);let g=a.useCallback(e=>{r(!1),o.push(e.href)},[o,r]),f=a.useCallback(e=>{switch(e.key){case"ArrowDown":e.preventDefault(),c(e=>(e+1)%m.length);break;case"ArrowUp":e.preventDefault(),c(e=>(e-1+m.length)%m.length);break;case"Enter":e.preventDefault(),m[d]&&g(m[d]);break;case"Escape":e.preventDefault(),r(!1)}},[m,d,g,r]);return(0,t.jsx)(eo.Dialog,{open:e,onOpenChange:r,children:(0,t.jsxs)(eo.DialogContent,{className:"p-0 gap-0 max-w-2xl overflow-hidden bg-background/95 backdrop-blur-xl border-border/50 shadow-2xl",showCloseButton:!1,children:[(0,t.jsx)(eo.DialogTitle,{className:"sr-only",children:"全局搜索"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 px-4 border-b border-border/50",children:[(0,t.jsx)(Q.Search,{className:"h-5 w-5 text-muted-foreground shrink-0"}),(0,t.jsx)("input",{ref:u,type:"text",value:n,onChange:e=>l(e.target.value),onKeyDown:f,placeholder:"搜索功能或页面...",className:"flex-1 h-14 bg-transparent text-base outline-none placeholder:text-muted-foreground/60"}),(0,t.jsx)("kbd",{className:"hidden sm:inline-flex h-6 items-center gap-1 rounded-md border border-border/50 bg-muted/50 px-2 text-xs text-muted-foreground",children:(0,t.jsx)("span",{className:"text-[10px]",children:"ESC"})})]}),(0,t.jsx)(L.ScrollArea,{className:"max-h-[60vh]",children:(0,t.jsx)("div",{className:"p-2",children:0===h.length?(0,t.jsxs)("div",{className:"py-12 text-center",children:[(0,t.jsx)("div",{className:"mx-auto w-12 h-12 rounded-full bg-muted/50 flex items-center justify-center mb-3",children:(0,t.jsx)(Q.Search,{className:"h-6 w-6 text-muted-foreground/50"})}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"未找到匹配的功能"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground/60 mt-1",children:"尝试其他关键词"})]}):Object.entries(p).map(([e,r])=>(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("div",{className:"px-2 py-1.5 text-xs font-medium text-muted-foreground/70 uppercase tracking-wider",children:e}),r.map(e=>{let r=m.indexOf(e),s=r===d,a=e.icon;return(0,t.jsxs)("button",{onClick:()=>g(e),onMouseEnter:()=>c(r),className:(0,i.cn)("w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-left transition-all duration-150 group",s?"bg-primary text-primary-foreground shadow-md":"hover:bg-accent/50"),children:[(0,t.jsx)("div",{className:(0,i.cn)("flex h-9 w-9 items-center justify-center rounded-lg transition-all",s?"bg-white/20":"bg-muted/50 group-hover:bg-background"),children:(0,t.jsx)(a,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:(0,i.cn)("font-medium text-sm",s?"text-primary-foreground":"text-foreground"),children:e.label}),e.description&&(0,t.jsx)("div",{className:(0,i.cn)("text-xs truncate",s?"text-primary-foreground/70":"text-muted-foreground"),children:e.description})]}),(0,t.jsx)(en.ArrowRight,{className:(0,i.cn)("h-4 w-4 shrink-0 transition-all",s?"opacity-100 translate-x-0":"opacity-0 -translate-x-2 group-hover:opacity-50 group-hover:translate-x-0")})]},e.id)})]},e))})}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-2.5 border-t border-border/50 bg-muted/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("kbd",{className:"inline-flex h-5 items-center rounded border border-border/50 bg-background px-1.5 text-[10px]",children:"↑"}),(0,t.jsx)("kbd",{className:"inline-flex h-5 items-center rounded border border-border/50 bg-background px-1.5 text-[10px]",children:"↓"}),(0,t.jsx)("span",{className:"ml-1",children:"导航"})]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("kbd",{className:"inline-flex h-5 items-center rounded border border-border/50 bg-background px-1.5 text-[10px]",children:"↵"}),(0,t.jsx)("span",{className:"ml-1",children:"确认"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[(0,t.jsx)(X,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:"+"}),(0,t.jsx)("span",{children:"K"}),(0,t.jsx)("span",{className:"ml-1",children:"打开"})]})]})]})})}function eb({children:e}){let r=(0,s.useRouter)(),[i,o]=(0,a.useState)(!0),[n,l]=(0,a.useState)(!1),{open:d,setOpen:c}=function(){let[e,t]=a.useState(!1);return a.useEffect(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),t(e=>!e))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]),{open:e,setOpen:t}}();return((0,a.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("auth_token");e&&(localStorage.setItem("chatai_token",e),window.history.replaceState({},"",window.location.pathname));let t=localStorage.getItem("chatai_token");if(!t)for(let e of document.cookie.split(";")){let[r,s]=e.trim().split("=");if("auth_token"===r&&s){t=s,localStorage.setItem("chatai_token",s);break}}t?ei.systemApi.getState().then(()=>{l(!0),o(!1)}).catch(()=>{localStorage.removeItem("chatai_token"),document.cookie="auth_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",r.push("/login/")}):r.push("/login/")},[r]),i)?(0,t.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full border-4 border-muted"}),(0,t.jsx)("div",{className:"absolute top-0 left-0 w-12 h-12 rounded-full border-4 border-primary border-t-transparent animate-spin"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse-soft",children:"加载中..."})]})}):n?(0,t.jsxs)("div",{className:"flex h-screen overflow-hidden bg-background relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[#f8fafc] dark:bg-[#020617] -z-10"}),(0,t.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] rounded-full bg-primary/5 blur-[120px] -z-10 animate-pulse-soft"}),(0,t.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] rounded-full bg-blue-500/5 blur-[120px] -z-10 animate-pulse-soft delay-700"}),(0,t.jsx)(V,{}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,t.jsx)(ea,{onSearchClick:()=>c(!0)}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e})]}),(0,t.jsx)(ex,{open:d,onOpenChange:c})]}):null}e.s(["default",()=>eb],9256)}]);

//# sourceMappingURL=fc050a5a551c0768.js.map