(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48023,e=>{"use strict";let t,r;var n=e.i(69287),a=e.i(77121),o=e.i(82786),s=e.i(71317),i=e.i(39048),l=e.i(37249),d=e.i(40204),c=e.i(10273),u=e.i(32308),p=e.i(35670),h=e.i(70620),m=e.i(83949),f=e.i(17969),g=e.i(14775),x=e.i(50974);let v=(0,x.default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var b=e.i(88233),y=e.i(3190);let w=(0,x.default)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var j=e.i(64775),k=e.i(63959);let C=(0,x.default)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);var N=e.i(13089),M=e.i(90907),R=e.i(29144),S=e.i(94701),P=e.i(82018),D=e.i(68466),E=e.i(72024),_=e.i(64022);let I=e=>{let t,r=new Set,n=(e,n)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=n?n:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,o={setState:n,getState:a,getInitialState:()=>s,subscribe:e=>(r.add(e),()=>r.delete(e))},s=t=e(n,a,o);return o},O=e=>{let t=e?I(e):I,r=e=>(function(e,t=e=>e){let r=s.default.useSyncExternalStore(e.subscribe,s.default.useCallback(()=>t(e.getState()),[e,t]),s.default.useCallback(()=>t(e.getInitialState()),[e,t]));return s.default.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},T=e=>e?O(e):O,A=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>A(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>A(t)(e)}}},H=T()((t=e=>({token:null,isAuthenticated:!1,setToken:t=>e({token:t,isAuthenticated:!!t}),logout:()=>{localStorage.removeItem("chatai_token"),e({token:null,isAuthenticated:!1})}}),r={name:"chatai-auth"},(e,n,a)=>{let o,s={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let n=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=r.getItem(e))?t:null;return a instanceof Promise?a.then(n):n(a)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...r},i=!1,l=new Set,d=new Set,c=s.storage;if(!c)return t((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),e(...t)},n,a);let u=()=>{let e=s.partialize({...n()});return c.setItem(s.name,{state:e,version:s.version})},p=a.setState;a.setState=(e,t)=>(p(e,t),u());let h=t((...t)=>(e(...t),u()),n,a);a.getInitialState=()=>h;let m=()=>{var t,r;if(!c)return;i=!1,l.forEach(e=>{var t;return e(null!=(t=n())?t:h)});let a=(null==(r=s.onRehydrateStorage)?void 0:r.call(s,null!=(t=n())?t:h))||void 0;return A(c.getItem.bind(c))(s.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===s.version)return[!1,e.state];else{if(s.migrate){let t=s.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(t=>{var r;let[a,i]=t;if(e(o=s.merge(i,null!=(r=n())?r:h),!0),a)return u()}).then(()=>{null==a||a(o,void 0),o=n(),i=!0,d.forEach(e=>e(o))}).catch(e=>{null==a||a(void 0,e)})};return a.persist={setOptions:e=>{s={...s,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>i,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},s.skipHydration||m(),o||h}));T()(e=>({config:null,loading:!1,setConfig:t=>e({config:t}),setLoading:t=>e({loading:t})}));let L=T()(e=>({sidebarOpen:!0,setSidebarOpen:t=>e({sidebarOpen:t}),toggleSidebar:()=>e(e=>({sidebarOpen:!e.sidebarOpen}))}));var F=e.i(47970),z=e.i(23337),K=e.i(71418);function B({...e}){return(0,n.jsx)(z.Root,{"data-slot":"sheet",...e})}function U({...e}){return(0,n.jsx)(z.Portal,{"data-slot":"sheet-portal",...e})}function G({className:e,...t}){return(0,n.jsx)(z.Overlay,{"data-slot":"sheet-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function V({className:e,children:t,side:r="right",...a}){return(0,n.jsxs)(U,{children:[(0,n.jsx)(G,{}),(0,n.jsxs)(z.Content,{"data-slot":"sheet-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===r&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===r&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===r&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===r&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...a,children:[t,(0,n.jsxs)(z.Close,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,n.jsx)(K.XIcon,{className:"size-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function q({className:e,...t}){return(0,n.jsx)("div",{"data-slot":"sheet-header",className:(0,i.cn)("flex flex-col gap-1.5 p-4",e),...t})}function W({className:e,...t}){return(0,n.jsx)(z.Title,{"data-slot":"sheet-title",className:(0,i.cn)("text-foreground font-semibold",e),...t})}var X=e.i(40050),J=e.i(74816);let Y=[{id:"overview",label:"仪表盘",icon:l.LayoutDashboard,items:[{href:"/",label:"仪表盘",icon:l.LayoutDashboard}]},{id:"config",label:"配置中心",icon:d.Settings,items:[{href:"/settings",label:"基础设置",icon:d.Settings},{href:"/settings/system",label:"系统配置",icon:E.Server},{href:"/settings/context",label:"上下文配置",icon:D.FileText},{href:"/channels",label:"渠道管理",icon:p.Plug},{href:"/presets",label:"预设管理",icon:g.Palette},{href:"/scope",label:"人设管理",icon:w},{href:"/settings/proxy",label:"代理设置",icon:S.Globe}]},{id:"ai",label:"AI扩展",icon:C,items:[{href:"/tools",label:"工具配置",icon:m.Wrench},{href:"/mcp",label:"MCP服务",icon:h.Bot},{href:"/imagegen",label:"绘图预设",icon:R.Wand2},{href:"/knowledge",label:"知识库",icon:k.BookOpen},{href:"/memory",label:"记忆管理",icon:j.Brain}]},{id:"data",label:"数据记录",icon:N.Database,items:[{href:"/stats",label:"使用统计",icon:M.BarChart3},{href:"/history/usage",label:"调用统计",icon:P.Activity},{href:"/conversations",label:"对话历史",icon:c.MessageSquare},{href:"/history",label:"工具调用",icon:f.History}]},{id:"users",label:"用户管理",icon:u.Users,items:[{href:"/users",label:"用户管理",icon:u.Users},{href:"/groups",label:"群组管理",icon:b.UsersRound}]}];function Z(e,t,r){return t===e||!r.some(r=>r.href!==e&&r.href.startsWith(e+"/")&&(t===r.href||t.startsWith(r.href+"/")))&&"/"!==e&&t.startsWith(e+"/")}function $(e,t){return e.items.some(r=>Z(r.href,t,e.items))}function Q({group:e,pathname:t,onNavClick:r,isOpen:o,onToggle:s}){let l=$(e,t),d=e.icon;if(1===e.items.length){let o=e.items[0],s=t===o.href,l=o.icon||d;return(0,n.jsxs)(a.default,{href:o.href,className:(0,i.cn)("flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-200",s?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),onClick:r,children:[(0,n.jsx)("div",{className:(0,i.cn)("flex h-8 w-8 items-center justify-center rounded-lg transition-colors",s?"bg-primary-foreground/20":"bg-muted"),children:(0,n.jsx)(l,{className:"h-4 w-4"})}),(0,n.jsx)("span",{children:o.label})]})}return(0,n.jsxs)(J.Collapsible,{open:o,onOpenChange:s,children:[(0,n.jsx)(J.CollapsibleTrigger,{className:"w-full group",children:(0,n.jsxs)("div",{className:(0,i.cn)("flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 w-full",l?"text-foreground bg-accent/50":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[(0,n.jsx)("div",{className:(0,i.cn)("flex h-8 w-8 items-center justify-center rounded-lg transition-colors",l?"bg-primary/10 text-primary":"bg-muted group-hover:bg-muted-foreground/10"),children:(0,n.jsx)(d,{className:"h-4 w-4"})}),(0,n.jsx)("span",{className:"flex-1 text-left",children:e.label}),(0,n.jsx)(y.ChevronDown,{className:(0,i.cn)("h-4 w-4 transition-transform duration-200 text-muted-foreground",o&&"rotate-180")})]})}),(0,n.jsx)(J.CollapsibleContent,{className:"mt-1 ml-6 pl-3 border-l-2 border-border/40 space-y-0.5",children:e.items.map(o=>{let s=Z(o.href,t,e.items),l=o.icon;return(0,n.jsxs)(a.default,{href:o.href,className:(0,i.cn)("flex items-center gap-2.5 px-3 py-2 rounded-lg text-sm transition-all duration-150",s?"bg-primary text-primary-foreground font-medium shadow-sm":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),onClick:r,children:[l&&(0,n.jsx)(l,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:o.label})]},o.href)})})]})}function ee({pathname:e,onNavClick:t}){let[r,a]=(0,s.useState)(()=>{let t=new Set;return Y.forEach(r=>{$(r,e)&&t.add(r.id)}),t});return(0,n.jsx)("nav",{className:"p-4 space-y-2",children:Y.map(o=>(0,n.jsx)(Q,{group:o,pathname:e,onNavClick:t,isOpen:r.has(o.id),onToggle:()=>{var e;return e=o.id,void a(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})}},o.id))})}function et(){let e=(0,o.usePathname)(),{sidebarOpen:t,toggleSidebar:r,setSidebarOpen:s}=L();return(0,n.jsxs)(X.TooltipProvider,{children:[(0,n.jsxs)("aside",{className:"hidden lg:block w-64 bg-gradient-to-b from-card to-card/95 border-r border-border/50 h-screen sticky top-0",children:[(0,n.jsx)("div",{className:"flex h-16 items-center px-5 border-b border-border/50",children:(0,n.jsxs)(a.default,{href:"/",className:"flex items-center gap-3 group",children:[(0,n.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-primary/80 shadow-md group-hover:shadow-lg group-hover:scale-105 transition-all duration-300",children:(0,n.jsx)(h.Bot,{className:"h-5 w-5 text-primary-foreground"})}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("span",{className:"font-bold text-lg leading-tight",children:"ChatAI"}),(0,n.jsx)("span",{className:"text-[10px] text-muted-foreground leading-tight",children:"AI Assistant"})]})]})}),(0,n.jsx)(F.ScrollArea,{className:"h-[calc(100vh-4rem)]",children:(0,n.jsx)(ee,{pathname:e})})]}),(0,n.jsx)(B,{open:t,onOpenChange:s,children:(0,n.jsxs)(V,{side:"left",className:"w-72 p-0 bg-gradient-to-b from-card to-card/95",children:[(0,n.jsxs)(q,{className:"h-16 flex flex-row items-center px-5 border-b border-border/50",children:[(0,n.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-primary/80 shadow-md mr-3",children:(0,n.jsx)(h.Bot,{className:"h-5 w-5 text-primary-foreground"})}),(0,n.jsx)(W,{className:"font-bold text-lg",children:"ChatAI"})]}),(0,n.jsx)(F.ScrollArea,{className:"h-[calc(100vh-4rem)]",children:(0,n.jsx)(ee,{pathname:e,onNavClick:()=>s(!1)})})]})}),(0,n.jsxs)(X.Tooltip,{children:[(0,n.jsx)(X.TooltipTrigger,{asChild:!0,children:(0,n.jsx)(_.Button,{variant:"default",size:"icon",className:"fixed bottom-4 right-4 z-40 lg:hidden shadow-xl rounded-full h-14 w-14 bg-gradient-to-br from-primary to-primary/80 hover:shadow-2xl hover:scale-105 transition-all duration-300",onClick:r,children:(0,n.jsx)(v,{className:"h-6 w-6"})})}),(0,n.jsx)(X.TooltipContent,{side:"left",children:(0,n.jsx)("p",{children:"打开菜单"})})]})]})}let er=(0,x.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var en=e.i(29720),ea=e.i(91967),eo=e.i(89268),es=e.i(94185),ei=e.i(70672),el=e.i(92480),ed=e.i(44533),ec=e.i(67500),eu=e.i(95895),ep=e.i(78518),eh=e.i(38801),em=e.i(20344),ef=e.i(5037),eg=e.i(38389),ex=e.i(20092),ev=e.i(63822),eb=e.i(68018),ey=e.i(67768),ew=e.i(73772),ej=e.i(8825),ek=["Enter"," "],eC=["ArrowUp","PageDown","End"],eN=["ArrowDown","PageUp","Home",...eC],eM={ltr:[...ek,"ArrowRight"],rtl:[...ek,"ArrowLeft"]},eR={ltr:["ArrowLeft"],rtl:["ArrowRight"]},eS="Menu",[eP,eD,eE]=(0,ed.createCollection)(eS),[e_,eI]=(0,es.createContextScope)(eS,[eE,ef.createPopperScope,ev.createRovingFocusGroupScope]),eO=(0,ef.createPopperScope)(),eT=(0,ev.createRovingFocusGroupScope)(),[eA,eH]=e_(eS),[eL,eF]=e_(eS),ez=e=>{let{__scopeMenu:t,open:r=!1,children:a,dir:o,onOpenChange:i,modal:l=!0}=e,d=eO(t),[c,u]=s.useState(null),p=s.useRef(!1),h=(0,ey.useCallbackRef)(i),m=(0,ec.useDirection)(o);return s.useEffect(()=>{let e=()=>{p.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>p.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,n.jsx)(ef.Root,{...d,children:(0,n.jsx)(eA,{scope:t,open:r,onOpenChange:h,content:c,onContentChange:u,children:(0,n.jsx)(eL,{scope:t,onClose:s.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:p,dir:m,modal:l,children:a})})})};ez.displayName=eS;var eK=s.forwardRef((e,t)=>{let{__scopeMenu:r,...a}=e,o=eO(r);return(0,n.jsx)(ef.Anchor,{...o,...a,ref:t})});eK.displayName="MenuAnchor";var eB="MenuPortal",[eU,eG]=e_(eB,{forceMount:void 0}),eV=e=>{let{__scopeMenu:t,forceMount:r,children:a,container:o}=e,s=eH(eB,t);return(0,n.jsx)(eU,{scope:t,forceMount:r,children:(0,n.jsx)(ex.Presence,{present:r||s.open,children:(0,n.jsx)(eg.Portal,{asChild:!0,container:o,children:a})})})};eV.displayName=eB;var eq="MenuContent",[eW,eX]=e_(eq),eJ=s.forwardRef((e,t)=>{let r=eG(eq,e.__scopeMenu),{forceMount:a=r.forceMount,...o}=e,s=eH(eq,e.__scopeMenu),i=eF(eq,e.__scopeMenu);return(0,n.jsx)(eP.Provider,{scope:e.__scopeMenu,children:(0,n.jsx)(ex.Presence,{present:a||s.open,children:(0,n.jsx)(eP.Slot,{scope:e.__scopeMenu,children:i.modal?(0,n.jsx)(eY,{...o,ref:t}):(0,n.jsx)(eZ,{...o,ref:t})})})})}),eY=s.forwardRef((e,t)=>{let r=eH(eq,e.__scopeMenu),a=s.useRef(null),o=(0,eo.useComposedRefs)(t,a);return s.useEffect(()=>{let e=a.current;if(e)return(0,ew.hideOthers)(e)},[]),(0,n.jsx)(eQ,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:(0,ea.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),eZ=s.forwardRef((e,t)=>{let r=eH(eq,e.__scopeMenu);return(0,n.jsx)(eQ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),e$=(0,eb.createSlot)("MenuContent.ScrollLock"),eQ=s.forwardRef((e,t)=>{let{__scopeMenu:r,loop:a=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:d,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:p,onFocusOutside:h,onInteractOutside:m,onDismiss:f,disableOutsideScroll:g,...x}=e,v=eH(eq,r),b=eF(eq,r),y=eO(r),w=eT(r),j=eD(r),[k,C]=s.useState(null),N=s.useRef(null),M=(0,eo.useComposedRefs)(t,N,v.onContentChange),R=s.useRef(0),S=s.useRef(""),P=s.useRef(0),D=s.useRef(null),E=s.useRef("right"),_=s.useRef(0),I=g?ej.RemoveScroll:s.Fragment;s.useEffect(()=>()=>window.clearTimeout(R.current),[]),(0,ep.useFocusGuards)();let O=s.useCallback(e=>{var t,r;return E.current===D.current?.side&&(t=e,!!(r=D.current?.area)&&function(e,t){let{x:r,y:n}=e,a=!1;for(let e=0,o=t.length-1;e<t.length;o=e++){let s=t[e],i=t[o],l=s.x,d=s.y,c=i.x,u=i.y;d>n!=u>n&&r<(c-l)*(n-d)/(u-d)+l&&(a=!a)}return a}({x:t.clientX,y:t.clientY},r))},[]);return(0,n.jsx)(eW,{scope:r,searchRef:S,onItemEnter:s.useCallback(e=>{O(e)&&e.preventDefault()},[O]),onItemLeave:s.useCallback(e=>{O(e)||(N.current?.focus(),C(null))},[O]),onTriggerLeave:s.useCallback(e=>{O(e)&&e.preventDefault()},[O]),pointerGraceTimerRef:P,onPointerGraceIntentChange:s.useCallback(e=>{D.current=e},[]),children:(0,n.jsx)(I,{...g?{as:e$,allowPinchZoom:!0}:void 0,children:(0,n.jsx)(eh.FocusScope,{asChild:!0,trapped:o,onMountAutoFocus:(0,ea.composeEventHandlers)(i,e=>{e.preventDefault(),N.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:(0,n.jsx)(eu.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:u,onPointerDownOutside:p,onFocusOutside:h,onInteractOutside:m,onDismiss:f,children:(0,n.jsx)(ev.Root,{asChild:!0,...w,dir:b.dir,orientation:"vertical",loop:a,currentTabStopId:k,onCurrentTabStopIdChange:C,onEntryFocus:(0,ea.composeEventHandlers)(c,e=>{b.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,n.jsx)(ef.Content,{role:"menu","aria-orientation":"vertical","data-state":tf(v.open),"data-radix-menu-content":"",dir:b.dir,...y,...x,ref:M,style:{outline:"none",...x.style},onKeyDown:(0,ea.composeEventHandlers)(x.onKeyDown,e=>{let t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,n=1===e.key.length;if(t){var a;let t,o,s,i,l,d;"Tab"===e.key&&e.preventDefault(),!r&&n&&(a=e.key,t=S.current+a,o=j().filter(e=>!e.disabled),s=document.activeElement,i=o.find(e=>e.ref.current===s)?.textValue,l=function(e,t,r){var n;let a=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,o=r?e.indexOf(r):-1,s=(n=Math.max(o,0),e.map((t,r)=>e[(n+r)%e.length]));1===a.length&&(s=s.filter(e=>e!==r));let i=s.find(e=>e.toLowerCase().startsWith(a.toLowerCase()));return i!==r?i:void 0}(o.map(e=>e.textValue),t,i),d=o.find(e=>e.textValue===l)?.ref.current,function e(t){S.current=t,window.clearTimeout(R.current),""!==t&&(R.current=window.setTimeout(()=>e(""),1e3))}(t),d&&setTimeout(()=>d.focus()))}let o=N.current;if(e.target!==o||!eN.includes(e.key))return;e.preventDefault();let s=j().filter(e=>!e.disabled).map(e=>e.ref.current);eC.includes(e.key)&&s.reverse(),function(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}(s)}),onBlur:(0,ea.composeEventHandlers)(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(R.current),S.current="")}),onPointerMove:(0,ea.composeEventHandlers)(e.onPointerMove,tv(e=>{let t=e.target,r=_.current!==e.clientX;e.currentTarget.contains(t)&&r&&(E.current=e.clientX>_.current?"right":"left",_.current=e.clientX)}))})})})})})})});eJ.displayName=eq;var e0=s.forwardRef((e,t)=>{let{__scopeMenu:r,...a}=e;return(0,n.jsx)(el.Primitive.div,{role:"group",...a,ref:t})});e0.displayName="MenuGroup";var e1=s.forwardRef((e,t)=>{let{__scopeMenu:r,...a}=e;return(0,n.jsx)(el.Primitive.div,{...a,ref:t})});e1.displayName="MenuLabel";var e2="MenuItem",e4="menu.itemSelect",e8=s.forwardRef((e,t)=>{let{disabled:r=!1,onSelect:a,...o}=e,i=s.useRef(null),l=eF(e2,e.__scopeMenu),d=eX(e2,e.__scopeMenu),c=(0,eo.useComposedRefs)(t,i),u=s.useRef(!1);return(0,n.jsx)(e3,{...o,ref:c,disabled:r,onClick:(0,ea.composeEventHandlers)(e.onClick,()=>{let e=i.current;if(!r&&e){let t=new CustomEvent(e4,{bubbles:!0,cancelable:!0});e.addEventListener(e4,e=>a?.(e),{once:!0}),(0,el.dispatchDiscreteCustomEvent)(e,t),t.defaultPrevented?u.current=!1:l.onClose()}}),onPointerDown:t=>{e.onPointerDown?.(t),u.current=!0},onPointerUp:(0,ea.composeEventHandlers)(e.onPointerUp,e=>{u.current||e.currentTarget?.click()}),onKeyDown:(0,ea.composeEventHandlers)(e.onKeyDown,e=>{let t=""!==d.searchRef.current;r||t&&" "===e.key||ek.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});e8.displayName=e2;var e3=s.forwardRef((e,t)=>{let{__scopeMenu:r,disabled:a=!1,textValue:o,...i}=e,l=eX(e2,r),d=eT(r),c=s.useRef(null),u=(0,eo.useComposedRefs)(t,c),[p,h]=s.useState(!1),[m,f]=s.useState("");return s.useEffect(()=>{let e=c.current;e&&f((e.textContent??"").trim())},[i.children]),(0,n.jsx)(eP.ItemSlot,{scope:r,disabled:a,textValue:o??m,children:(0,n.jsx)(ev.Item,{asChild:!0,...d,focusable:!a,children:(0,n.jsx)(el.Primitive.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...i,ref:u,onPointerMove:(0,ea.composeEventHandlers)(e.onPointerMove,tv(e=>{a?l.onItemLeave(e):(l.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:(0,ea.composeEventHandlers)(e.onPointerLeave,tv(e=>l.onItemLeave(e))),onFocus:(0,ea.composeEventHandlers)(e.onFocus,()=>h(!0)),onBlur:(0,ea.composeEventHandlers)(e.onBlur,()=>h(!1))})})})}),e5=s.forwardRef((e,t)=>{let{checked:r=!1,onCheckedChange:a,...o}=e;return(0,n.jsx)(ta,{scope:e.__scopeMenu,checked:r,children:(0,n.jsx)(e8,{role:"menuitemcheckbox","aria-checked":tg(r)?"mixed":r,...o,ref:t,"data-state":tx(r),onSelect:(0,ea.composeEventHandlers)(o.onSelect,()=>a?.(!!tg(r)||!r),{checkForDefaultPrevented:!1})})})});e5.displayName="MenuCheckboxItem";var e9="MenuRadioGroup",[e7,e6]=e_(e9,{value:void 0,onValueChange:()=>{}}),te=s.forwardRef((e,t)=>{let{value:r,onValueChange:a,...o}=e,s=(0,ey.useCallbackRef)(a);return(0,n.jsx)(e7,{scope:e.__scopeMenu,value:r,onValueChange:s,children:(0,n.jsx)(e0,{...o,ref:t})})});te.displayName=e9;var tt="MenuRadioItem",tr=s.forwardRef((e,t)=>{let{value:r,...a}=e,o=e6(tt,e.__scopeMenu),s=r===o.value;return(0,n.jsx)(ta,{scope:e.__scopeMenu,checked:s,children:(0,n.jsx)(e8,{role:"menuitemradio","aria-checked":s,...a,ref:t,"data-state":tx(s),onSelect:(0,ea.composeEventHandlers)(a.onSelect,()=>o.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});tr.displayName=tt;var tn="MenuItemIndicator",[ta,to]=e_(tn,{checked:!1}),ts=s.forwardRef((e,t)=>{let{__scopeMenu:r,forceMount:a,...o}=e,s=to(tn,r);return(0,n.jsx)(ex.Presence,{present:a||tg(s.checked)||!0===s.checked,children:(0,n.jsx)(el.Primitive.span,{...o,ref:t,"data-state":tx(s.checked)})})});ts.displayName=tn;var ti=s.forwardRef((e,t)=>{let{__scopeMenu:r,...a}=e;return(0,n.jsx)(el.Primitive.div,{role:"separator","aria-orientation":"horizontal",...a,ref:t})});ti.displayName="MenuSeparator";var tl=s.forwardRef((e,t)=>{let{__scopeMenu:r,...a}=e,o=eO(r);return(0,n.jsx)(ef.Arrow,{...o,...a,ref:t})});tl.displayName="MenuArrow";var[td,tc]=e_("MenuSub"),tu="MenuSubTrigger",tp=s.forwardRef((e,t)=>{let r=eH(tu,e.__scopeMenu),a=eF(tu,e.__scopeMenu),o=tc(tu,e.__scopeMenu),i=eX(tu,e.__scopeMenu),l=s.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},p=s.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return s.useEffect(()=>p,[p]),s.useEffect(()=>{let e=d.current;return()=>{window.clearTimeout(e),c(null)}},[d,c]),(0,n.jsx)(eK,{asChild:!0,...u,children:(0,n.jsx)(e3,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":o.contentId,"data-state":tf(r.open),...e,ref:(0,eo.composeRefs)(t,o.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:(0,ea.composeEventHandlers)(e.onPointerMove,tv(t=>{i.onItemEnter(t),!t.defaultPrevented&&(e.disabled||r.open||l.current||(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{r.onOpenChange(!0),p()},100)))})),onPointerLeave:(0,ea.composeEventHandlers)(e.onPointerLeave,tv(e=>{p();let t=r.content?.getBoundingClientRect();if(t){let n=r.content?.dataset.side,a="right"===n,o=t[a?"left":"right"],s=t[a?"right":"left"];i.onPointerGraceIntentChange({area:[{x:e.clientX+(a?-5:5),y:e.clientY},{x:o,y:t.top},{x:s,y:t.top},{x:s,y:t.bottom},{x:o,y:t.bottom}],side:n}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(e),e.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:(0,ea.composeEventHandlers)(e.onKeyDown,t=>{let n=""!==i.searchRef.current;e.disabled||n&&" "===t.key||eM[a.dir].includes(t.key)&&(r.onOpenChange(!0),r.content?.focus(),t.preventDefault())})})})});tp.displayName=tu;var th="MenuSubContent",tm=s.forwardRef((e,t)=>{let r=eG(eq,e.__scopeMenu),{forceMount:a=r.forceMount,...o}=e,i=eH(eq,e.__scopeMenu),l=eF(eq,e.__scopeMenu),d=tc(th,e.__scopeMenu),c=s.useRef(null),u=(0,eo.useComposedRefs)(t,c);return(0,n.jsx)(eP.Provider,{scope:e.__scopeMenu,children:(0,n.jsx)(ex.Presence,{present:a||i.open,children:(0,n.jsx)(eP.Slot,{scope:e.__scopeMenu,children:(0,n.jsx)(eQ,{id:d.contentId,"aria-labelledby":d.triggerId,...o,ref:u,align:"start",side:"rtl"===l.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{l.isUsingKeyboardRef.current&&c.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:(0,ea.composeEventHandlers)(e.onFocusOutside,e=>{e.target!==d.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:(0,ea.composeEventHandlers)(e.onEscapeKeyDown,e=>{l.onClose(),e.preventDefault()}),onKeyDown:(0,ea.composeEventHandlers)(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),r=eR[l.dir].includes(e.key);t&&r&&(i.onOpenChange(!1),d.trigger?.focus(),e.preventDefault())})})})})})});function tf(e){return e?"open":"closed"}function tg(e){return"indeterminate"===e}function tx(e){return tg(e)?"indeterminate":e?"checked":"unchecked"}function tv(e){return t=>"mouse"===t.pointerType?e(t):void 0}tm.displayName=th;var tb="DropdownMenu",[ty,tw]=(0,es.createContextScope)(tb,[eI]),tj=eI(),[tk,tC]=ty(tb),tN=e=>{let{__scopeDropdownMenu:t,children:r,dir:a,open:o,defaultOpen:i,onOpenChange:l,modal:d=!0}=e,c=tj(t),u=s.useRef(null),[p,h]=(0,ei.useControllableState)({prop:o,defaultProp:i??!1,onChange:l,caller:tb});return(0,n.jsx)(tk,{scope:t,triggerId:(0,em.useId)(),triggerRef:u,contentId:(0,em.useId)(),open:p,onOpenChange:h,onOpenToggle:s.useCallback(()=>h(e=>!e),[h]),modal:d,children:(0,n.jsx)(ez,{...c,open:p,onOpenChange:h,dir:a,modal:d,children:r})})};tN.displayName=tb;var tM="DropdownMenuTrigger",tR=s.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,disabled:a=!1,...o}=e,s=tC(tM,r),i=tj(r);return(0,n.jsx)(eK,{asChild:!0,...i,children:(0,n.jsx)(el.Primitive.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...o,ref:(0,eo.composeRefs)(t,s.triggerRef),onPointerDown:(0,ea.composeEventHandlers)(e.onPointerDown,e=>{!a&&0===e.button&&!1===e.ctrlKey&&(s.onOpenToggle(),s.open||e.preventDefault())}),onKeyDown:(0,ea.composeEventHandlers)(e.onKeyDown,e=>{!a&&(["Enter"," "].includes(e.key)&&s.onOpenToggle(),"ArrowDown"===e.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});tR.displayName=tM;var tS=e=>{let{__scopeDropdownMenu:t,...r}=e,a=tj(t);return(0,n.jsx)(eV,{...a,...r})};tS.displayName="DropdownMenuPortal";var tP="DropdownMenuContent",tD=s.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=tC(tP,r),i=tj(r),l=s.useRef(!1);return(0,n.jsx)(eJ,{id:o.contentId,"aria-labelledby":o.triggerId,...i,...a,ref:t,onCloseAutoFocus:(0,ea.composeEventHandlers)(e.onCloseAutoFocus,e=>{l.current||o.triggerRef.current?.focus(),l.current=!1,e.preventDefault()}),onInteractOutside:(0,ea.composeEventHandlers)(e.onInteractOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;(!o.modal||n)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tD.displayName=tP,s.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=tj(r);return(0,n.jsx)(e0,{...o,...a,ref:t})}).displayName="DropdownMenuGroup",s.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=tj(r);return(0,n.jsx)(e1,{...o,...a,ref:t})}).displayName="DropdownMenuLabel";var tE=s.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=tj(r);return(0,n.jsx)(e8,{...o,...a,ref:t})});tE.displayName="DropdownMenuItem",s.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=tj(r);return(0,n.jsx)(e5,{...o,...a,ref:t})}).displayName="DropdownMenuCheckboxItem",s.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=tj(r);return(0,n.jsx)(te,{...o,...a,ref:t})}).displayName="DropdownMenuRadioGroup",s.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=tj(r);return(0,n.jsx)(tr,{...o,...a,ref:t})}).displayName="DropdownMenuRadioItem",s.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=tj(r);return(0,n.jsx)(ts,{...o,...a,ref:t})}).displayName="DropdownMenuItemIndicator";var t_=s.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=tj(r);return(0,n.jsx)(ti,{...o,...a,ref:t})});function tI({...e}){return(0,n.jsx)(tN,{"data-slot":"dropdown-menu",...e})}function tO({...e}){return(0,n.jsx)(tR,{"data-slot":"dropdown-menu-trigger",...e})}function tT({className:e,sideOffset:t=4,...r}){return(0,n.jsx)(tS,{children:(0,n.jsx)(tD,{"data-slot":"dropdown-menu-content",sideOffset:t,className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...r})})}function tA({className:e,inset:t,variant:r="default",...a}){return(0,n.jsx)(tE,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":r,className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a})}function tH({className:e,...t}){return(0,n.jsx)(t_,{"data-slot":"dropdown-menu-separator",className:(0,i.cn)("bg-border -mx-1 my-1 h-px",e),...t})}t_.displayName="DropdownMenuSeparator",s.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=tj(r);return(0,n.jsx)(tl,{...o,...a,ref:t})}).displayName="DropdownMenuArrow",s.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=tj(r);return(0,n.jsx)(tp,{...o,...a,ref:t})}).displayName="DropdownMenuSubTrigger",s.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=tj(r);return(0,n.jsx)(tm,{...o,...a,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}).displayName="DropdownMenuSubContent",e.i(95761),(0,x.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),(0,x.default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);let tL=(0,x.default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),tF=(0,x.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var tz=e.i(8430);function tK(){let{setTheme:e}=(0,tz.useTheme)();return(0,n.jsxs)(tI,{children:[(0,n.jsx)(tO,{asChild:!0,children:(0,n.jsxs)(_.Button,{variant:"ghost",size:"icon",children:[(0,n.jsx)(tF,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,n.jsx)(tL,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,n.jsx)("span",{className:"sr-only",children:"切换主题"})]})}),(0,n.jsxs)(tT,{align:"end",children:[(0,n.jsx)(tA,{onClick:()=>e("light"),children:"浅色"}),(0,n.jsx)(tA,{onClick:()=>e("dark"),children:"深色"}),(0,n.jsx)(tA,{onClick:()=>e("system"),children:"跟随系统"})]})]})}function tB({title:e="ChatAi 管理面板"}){let{toggleSidebar:t}=L(),{logout:r}=H(),a=(0,o.useRouter)();return(0,n.jsxs)("header",{className:"sticky top-0 z-30 flex h-16 items-center gap-4 border-b bg-background px-4 md:px-6",children:[(0,n.jsx)(_.Button,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:t,children:(0,n.jsx)(v,{className:"h-5 w-5"})}),(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("h1",{className:"text-lg font-semibold md:text-xl",children:e})}),(0,n.jsx)(tK,{}),(0,n.jsxs)(tI,{children:[(0,n.jsx)(tO,{asChild:!0,children:(0,n.jsx)(_.Button,{variant:"ghost",size:"icon",className:"rounded-full",children:(0,n.jsx)(en.User,{className:"h-5 w-5"})})}),(0,n.jsxs)(tT,{align:"end",children:[(0,n.jsxs)(tA,{disabled:!0,children:[(0,n.jsx)(en.User,{className:"mr-2 h-4 w-4"}),"管理员"]}),(0,n.jsx)(tH,{}),(0,n.jsxs)(tA,{onClick:()=>{r(),a.push("/login")},className:"text-destructive",children:[(0,n.jsx)(er,{className:"mr-2 h-4 w-4"}),"退出登录"]})]})]})]})}var tU=e.i(98509);function tG({children:e}){let t=(0,o.useRouter)(),[r,a]=(0,s.useState)(!0),[i,l]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("auth_token");e&&(localStorage.setItem("chatai_token",e),window.history.replaceState({},"",window.location.pathname));let r=localStorage.getItem("chatai_token");if(!r)for(let e of document.cookie.split(";")){let[t,n]=e.trim().split("=");if("auth_token"===t&&n){r=n,localStorage.setItem("chatai_token",n);break}}r?tU.systemApi.getState().then(()=>{l(!0),a(!1)}).catch(()=>{localStorage.removeItem("chatai_token"),document.cookie="auth_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",t.push("/login/")}):t.push("/login/")},[t]),r)?(0,n.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"w-12 h-12 rounded-full border-4 border-muted"}),(0,n.jsx)("div",{className:"absolute top-0 left-0 w-12 h-12 rounded-full border-4 border-primary border-t-transparent animate-spin"})]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse-soft",children:"加载中..."})]})}):i?(0,n.jsxs)("div",{className:"flex h-screen overflow-hidden bg-background",children:[(0,n.jsx)(et,{}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,n.jsx)(tB,{}),(0,n.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e})]})]}):null}e.s(["default",()=>tG],48023)}]);