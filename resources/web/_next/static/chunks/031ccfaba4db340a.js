(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99818,e=>{"use strict";var s=e.i(33169),a=e.i(60844),t=e.i(51200),r=e.i(72029),l=e.i(13107),n=e.i(87126),c=e.i(47686),i=e.i(81080),o=e.i(30243),d=e.i(99573),m=e.i(20650),x=e.i(94518),h=e.i(10201),p=e.i(75979),g=e.i(79342);e.i(10464);var u=e.i(64570),j=e.i(19367),v=e.i(90808),N=e.i(68587),y=e.i(97058),f=e.i(89908),C=e.i(60381),b=e.i(17171);let k={disconnected:{icon:(0,s.jsx)(N.WifiOff,{className:"h-3.5 w-3.5"}),label:"已断开",color:"text-muted-foreground",bgColor:"bg-muted"},connecting:{icon:(0,s.jsx)(f.Loader2,{className:"h-3.5 w-3.5 animate-spin"}),label:"连接中",color:"text-yellow-600 dark:text-yellow-400",bgColor:"bg-yellow-100 dark:bg-yellow-900/30"},connected:{icon:(0,s.jsx)(v.Wifi,{className:"h-3.5 w-3.5"}),label:"实时连接",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30"},reconnecting:{icon:(0,s.jsx)(y.RefreshCw,{className:"h-3.5 w-3.5 animate-spin"}),label:"重连中",color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-100 dark:bg-orange-900/30"},error:{icon:(0,s.jsx)(C.AlertCircle,{className:"h-3.5 w-3.5"}),label:"连接错误",color:"text-red-600 dark:text-red-400",bgColor:"bg-red-100 dark:bg-red-900/30"}};function w({className:e,showDetails:a=!1,onEvent:t}){let{status:n,reconnectCount:c,connect:i,disconnect:o,lastEvent:d,isConnected:m}=(0,u.useSkillsSSE)({onEvent:t?e=>t({event:e.event,data:e.data}):void 0}),x=k[n];return(0,s.jsx)(j.TooltipProvider,{children:(0,s.jsxs)(j.Tooltip,{children:[(0,s.jsx)(j.TooltipTrigger,{asChild:!0,children:(0,s.jsxs)("div",{className:(0,b.cn)("flex items-center gap-2",e),children:[(0,s.jsxs)(l.Badge,{variant:"outline",className:(0,b.cn)("flex items-center gap-1.5 px-2 py-0.5 font-normal transition-colors",x.color,x.bgColor),children:[x.icon,a&&(0,s.jsx)("span",{className:"text-xs",children:x.label}),(0,s.jsx)("span",{className:(0,b.cn)("h-1.5 w-1.5 rounded-full",m?"bg-green-500 animate-pulse":"bg-muted-foreground")})]}),("error"===n||"disconnected"===n)&&(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>i(),children:(0,s.jsx)(y.RefreshCw,{className:"h-3.5 w-3.5"})})]})}),(0,s.jsx)(j.TooltipContent,{side:"bottom",className:"max-w-xs",children:(0,s.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,s.jsx)("p",{className:"font-medium",children:x.label}),"reconnecting"===n&&(0,s.jsxs)("p",{className:"text-muted-foreground",children:["重连尝试: ",c]}),d&&(0,s.jsxs)("p",{className:"text-muted-foreground",children:["最后事件: ",d.event]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:m?"实时接收服务器状态更新":"点击刷新按钮重新连接"})]})})]})})}var S=e.i(80830),T=e.i(50974);let L=(0,T.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var P=e.i(34536),A=e.i(48352);let B=[{name:"Filesystem",package:"@modelcontextprotocol/server-filesystem",description:"文件系统访问，读写本地文件",category:"文件系统",popular:!0,args:"/"},{name:"Memory",package:"@modelcontextprotocol/server-memory",description:"持久化记忆存储",category:"存储",popular:!0},{name:"GitHub",package:"@modelcontextprotocol/server-github",description:"GitHub API 集成",category:"开发工具",popular:!0,env:{GITHUB_PERSONAL_ACCESS_TOKEN:""}},{name:"Brave Search",package:"@modelcontextprotocol/server-brave-search",description:"Brave 搜索引擎",category:"搜索",popular:!0,env:{BRAVE_API_KEY:""}},{name:"Puppeteer",package:"@modelcontextprotocol/server-puppeteer",description:"浏览器自动化",category:"浏览器",popular:!0},{name:"SQLite",package:"@modelcontextprotocol/server-sqlite",description:"SQLite 数据库访问",category:"数据库"},{name:"PostgreSQL",package:"@modelcontextprotocol/server-postgres",description:"PostgreSQL 数据库",category:"数据库",env:{POSTGRES_CONNECTION_STRING:""}},{name:"Slack",package:"@modelcontextprotocol/server-slack",description:"Slack 集成",category:"通讯",env:{SLACK_BOT_TOKEN:""}},{name:"Google Maps",package:"@modelcontextprotocol/server-google-maps",description:"Google 地图服务",category:"地图",env:{GOOGLE_MAPS_API_KEY:""}},{name:"AWS KB",package:"@modelcontextprotocol/server-aws-kb-retrieval",description:"AWS 知识库检索",category:"云服务"},{name:"Sentry",package:"@modelcontextprotocol/server-sentry",description:"Sentry 错误监控",category:"监控",env:{SENTRY_AUTH_TOKEN:""}},{name:"GitLab",package:"@modelcontextprotocol/server-gitlab",description:"GitLab API 集成",category:"开发工具",env:{GITLAB_PERSONAL_ACCESS_TOKEN:""}},{name:"Git",package:"@modelcontextprotocol/server-git",description:"Git 版本控制操作",category:"开发工具"},{name:"Sequential Thinking",package:"@modelcontextprotocol/server-sequential-thinking",description:"顺序思维推理",category:"AI 增强",popular:!0},{name:"Everything",package:"@modelcontextprotocol/server-everything",description:"测试用全功能服务器",category:"测试"},{name:"Context7",package:"@upstash/context7-mcp",description:"文档和代码示例检索",category:"知识库",popular:!0},{name:"Exa Search",package:"exa-mcp-server",description:"Exa AI 搜索引擎",category:"搜索",env:{EXA_API_KEY:""}},{name:"Playwright",package:"@anthropic-ai/playwright-mcp",description:"浏览器自动化测试",category:"浏览器"}],O=[...new Set(B.map(e=>e.category))];function D({onSelect:e,selectedPackage:t,className:r}){let[n,i]=(0,a.useState)(""),[d,m]=(0,a.useState)(null),x=B.filter(e=>{let s=!n||e.name.toLowerCase().includes(n.toLowerCase())||e.package.toLowerCase().includes(n.toLowerCase())||e.description.toLowerCase().includes(n.toLowerCase()),a=!d||e.category===d;return s&&a}),h=x.filter(e=>e.popular),p=x.filter(e=>!e.popular);return(0,s.jsxs)("div",{className:(0,b.cn)("space-y-4",r),children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(S.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(o.Input,{placeholder:"搜索 NPM 包...",value:n,onChange:e=>i(e.target.value),className:"pl-9"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[(0,s.jsx)(l.Badge,{variant:null===d?"default":"outline",className:"cursor-pointer transition-colors",onClick:()=>m(null),children:"全部"}),O.map(e=>(0,s.jsx)(l.Badge,{variant:d===e?"default":"outline",className:"cursor-pointer transition-colors",onClick:()=>m(d===e?null:e),children:e},e))]}),(0,s.jsx)(c.ScrollArea,{className:"h-[280px] pr-2",children:(0,s.jsxs)("div",{className:"space-y-4",children:[h.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground",children:[(0,s.jsx)(P.Star,{className:"h-3 w-3"}),"热门"]}),(0,s.jsx)("div",{className:"grid gap-2",children:h.map(a=>(0,s.jsx)(E,{pkg:a,isSelected:t===a.package,onSelect:()=>e(a)},a.package))})]}),p.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[h.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground",children:[(0,s.jsx)(L,{className:"h-3 w-3"}),"其他"]}),(0,s.jsx)("div",{className:"grid gap-2",children:p.map(a=>(0,s.jsx)(E,{pkg:a,isSelected:t===a.package,onSelect:()=>e(a)},a.package))})]}),0===x.length&&(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"未找到匹配的包"})]})}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(L,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"也可以手动输入任意 NPM 包名"}),(0,s.jsxs)("a",{href:"https://github.com/modelcontextprotocol/servers",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-0.5 text-primary hover:underline",children:["查看更多",(0,s.jsx)(A.ExternalLink,{className:"h-3 w-3"})]})]})]})}function E({pkg:e,isSelected:a,onSelect:t}){return(0,s.jsx)(r.Button,{variant:a?"secondary":"outline",className:(0,b.cn)("w-full justify-start h-auto py-2.5 px-3 text-left",a&&"ring-2 ring-primary"),onClick:t,children:(0,s.jsxs)("div",{className:"flex flex-col gap-0.5 w-full min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium truncate",children:e.name}),e.popular&&(0,s.jsx)(P.Star,{className:"h-3 w-3 text-yellow-500 shrink-0"}),e.env&&Object.keys(e.env).length>0&&(0,s.jsx)(l.Badge,{variant:"outline",className:"text-[10px] px-1 py-0 shrink-0",children:"需配置"})]}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground truncate",children:e.package}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground/80 line-clamp-1",children:e.description})]})})}var I=e.i(72024),H=e.i(83949),M=e.i(4084),_=e.i(62754),z=e.i(60713),K=e.i(35771),R=e.i(49165),G=e.i(24202),V=e.i(90541),$=e.i(61176),J=e.i(17020),F=e.i(85876),W=e.i(3190),U=e.i(60422),q=e.i(17286),Q=e.i(79923),Y=e.i(29720),X=e.i(32308),Z=e.i(10273),ee=e.i(48832);let es=(0,T.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var ea=e.i(94701),et=e.i(64775),er=e.i(17969),el=e.i(20308),en=e.i(47004),ec=e.i(83277),ei=e.i(18429),eo=e.i(31221);let ed={basic:Q.Clock,user:Y.User,group:X.Users,message:Z.MessageSquare,admin:ee.Shield,file:es,media:q.Image,web:ea.Globe,search:S.Search,utils:H.Wrench,memory:et.Brain,context:er.History};function em(){let[e,u]=(0,a.useState)([]),[j,v]=(0,a.useState)([]),[N,C]=(0,a.useState)(!0),[b,k]=(0,a.useState)(!1),[S,T]=(0,a.useState)(!1),[L,P]=(0,a.useState)(!1),[A,B]=(0,a.useState)(!1),[O,E]=(0,a.useState)(null),[q,Q]=(0,a.useState)(""),[Y,X]=(0,a.useState)({name:"",type:"stdio",command:"",args:"",url:"",package:"",env:{},headers:{}}),[Z,ee]=(0,a.useState)(!1),[es,ea]=(0,a.useState)(null),[et,er]=(0,a.useState)(!1),[em,ex]=(0,a.useState)({}),[eh,ep]=(0,a.useState)(""),[eg,eu]=(0,a.useState)(!1),[ej,ev]=(0,a.useState)(!1),[eN,ey]=(0,a.useState)(null),[ef,eC]=(0,a.useState)({name:"",type:"stdio",command:"",args:"",url:"",package:"",env:{},headers:{}}),[eb,ek]=(0,a.useState)(!1),[ew,eS]=(0,a.useState)([]),[eT,eL]=(0,a.useState)(null),[eP,eA]=(0,a.useState)(null),[eB,eO]=(0,a.useState)(!1),[eD,eE]=(0,a.useState)(!1),[eI,eH]=(0,a.useState)(null),eM=(0,a.useCallback)(async()=>{try{let[e,s,a]=await Promise.all([p.mcpApi.listServers(),p.toolsApi.list(),p.toolsApi.getCategories().catch(()=>({data:[]}))]),t=e?.data||[],r=s?.data||[],l=a?.data||[];u(Array.isArray(t)?t:[]),v(Array.isArray(r)?r:[]),eS(Array.isArray(l)?l:[])}catch(e){g.toast.error("加载MCP数据失败"),console.error(e)}finally{C(!1),k(!1)}},[]);(0,a.useEffect)(()=>{eM()},[eM]);let e_=(0,a.useCallback)(e=>{(e.event.startsWith("server-")||e.event.startsWith("tool")||e.event.startsWith("category"))&&eM()},[eM]),ez=async()=>{if(!Y.name)return void g.toast.error("请输入服务器名称");B(!0);try{let e={type:Y.type};if("stdio"===Y.type){if(!Y.command){g.toast.error("请输入命令"),B(!1);return}e.command=Y.command,Y.args&&(e.args=Y.args.split(" ").filter(e=>e))}else if("npm"===Y.type){if(!Y.package){g.toast.error("请输入NPM包名"),B(!1);return}e.package=Y.package,Y.args&&(e.args=Y.args.split(" ").filter(e=>e))}else{if(!Y.url){g.toast.error("请输入URL"),B(!1);return}e.url=Y.url,Object.keys(Y.headers).length>0&&(e.headers=Y.headers)}Object.keys(Y.env).length>0&&(e.env=Y.env),await p.mcpApi.createServer({name:Y.name,config:e}),g.toast.success("服务器添加成功"),T(!1),X({name:"",type:"stdio",command:"",args:"",url:"",package:"",env:{},headers:{}}),eO(!1),eM()}catch(e){g.toast.error(e.response?.data?.message||"添加失败")}finally{B(!1)}},eK=async e=>{E(e);try{await p.mcpApi.reconnectServer(e),g.toast.success("重连成功"),eM()}catch(e){g.toast.error(e.response?.data?.message||"重连失败")}finally{E(null)}},eR=async()=>{if(eI)try{await p.mcpApi.deleteServer(eI),g.toast.success("服务器已删除"),eM()}catch(e){g.toast.error(e.response?.data?.message||"删除失败")}},eG=async()=>{if(!q.trim())return void g.toast.error("请输入 JSON 配置");try{let e=JSON.parse(q),s=await p.mcpApi.importConfig(e),a=s?.data||{};g.toast.success(`导入完成: 成功 ${a.success||0}/${a.total||0}`),P(!1),Q(""),eM()}catch(e){e instanceof SyntaxError?g.toast.error("JSON 格式错误"):g.toast.error("导入失败")}},eV=e=>{ea(e),ee(!0)},e$=e=>{ea(e);let s={};e.inputSchema?.properties&&Object.entries(e.inputSchema.properties).forEach(([e,a])=>{"string"===a.type?s[e]="":"number"===a.type?s[e]="0":"boolean"===a.type?s[e]="false":"array"===a.type?s[e]="[]":"object"===a.type?s[e]="{}":s[e]=""}),ex(s),ep(""),er(!0)},eJ=async()=>{if(es){eu(!0),ep("");try{let e={},s=es.inputSchema?.properties||{};Object.entries(em).forEach(([a,t])=>{let r=s[a]?.type;if("number"===r)e[a]=Number(t)||0;else if("boolean"===r)e[a]="true"===t;else if("array"===r||"object"===r)try{e[a]=JSON.parse(t)}catch{e[a]=t}else e[a]=t});let a=await p.toolsApi.test({toolName:es.name,arguments:e});a?.data!==void 0?(ep(JSON.stringify(a.data,null,2)),g.toast.success("测试成功")):ep(JSON.stringify(a,null,2))}catch(s){let e=s?.response?.data?.message||s?.message||"测试失败";ep(`Error: ${e}`),g.toast.error("测试失败: "+e)}finally{eu(!1)}}},eF=async e=>{try{let s=await p.mcpApi.getServer(e.name),a=s?.data||e;ey(a);let t=a.config||{},r=t.type||a.type||"stdio";eC({name:a.name,type:r,command:t.command||"",args:t.args?.join(" ")||"",url:t.url||"",package:t.package||"",env:t.env||{},headers:t.headers||{}}),ev(!0)}catch(e){console.error("Failed to load server config:",e),g.toast.error("加载服务器配置失败")}},eW=async()=>{if(eN){ek(!0);try{let e={type:ef.type};"stdio"===ef.type?(e.command=ef.command,ef.args&&(e.args=ef.args.split(" ").filter(e=>e))):"npm"===ef.type?(e.package=ef.package,ef.args&&(e.args=ef.args.split(" ").filter(e=>e))):(e.url=ef.url,Object.keys(ef.headers).length>0&&(e.headers=ef.headers)),Object.keys(ef.env).length>0&&(e.env=ef.env),await p.mcpApi.updateServer(eN.name,{config:e}),g.toast.success("服务器配置已更新"),ev(!1),ey(null),eM()}catch(e){g.toast.error(e.response?.data?.message||"更新失败")}finally{ek(!1)}}},eU=async e=>{let s=`custom_${e.name.replace(/[^a-zA-Z0-9_]/g,"_")}`,a=`/**
 * 基于 ${e.name} 创建的自定义工具
 * 原始来源: ${e.serverName||"unknown"}
 */

export default {
  name: '${s}',
  
  function: {
    name: '${s}',
    description: '${(e.description||"").replace(/'/g,"\\'")}',
    parameters: ${JSON.stringify(e.inputSchema||{type:"object",properties:{}},null,4).split("\n").join("\n    ")}
  },

  async run(args, context) {
    // TODO: 实现工具逻辑
    // args: 输入参数
    // context: 上下文信息，包含 getEvent(), getBot() 等
    
    return {
      success: true,
      message: '工具执行成功',
      args
    }
  }
}
`;try{await p.toolsApi.createJs({name:s,source:a}),g.toast.success(`已复制为 JS 工具: ${s}`)}catch(e){g.toast.error("复制失败: "+(e?.response?.data?.message||e?.message||"未知错误"))}},eq=async(e,s)=>{eA(e);try{await p.toolsApi.toggleCategory(e,s),eS(a=>a.map(a=>a.key===e?{...a,enabled:s}:a)),g.toast.success(`${s?"启用":"禁用"}成功`);let a=await p.toolsApi.list(),t=a?.data||[];v(Array.isArray(t)?t:[])}catch(e){g.toast.error("操作失败: "+(e?.response?.data?.message||e?.message||"未知错误"))}finally{eA(null)}},eQ=j.filter(e=>e?.isBuiltin||e?.serverName==="builtin"),eY=j.filter(e=>e&&!e.isBuiltin&&"builtin"!==e.serverName);return N?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.Skeleton,{className:"h-8 w-32"}),(0,s.jsx)(n.Skeleton,{className:"h-10 w-24"})]}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[void 0,void 0,void 0].map((e,a)=>(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(n.Skeleton,{className:"h-6 w-32"})}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)(n.Skeleton,{className:"h-20 w-full"})})]},a))})]}):(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"MCP 工具管理"}),(0,s.jsx)(w,{showDetails:!0,onEvent:e_})]}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>{k(!0),eM()},disabled:b,children:[b?(0,s.jsx)(f.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(y.RefreshCw,{className:"mr-2 h-4 w-4"}),"刷新"]}),(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>P(!0),children:[(0,s.jsx)(G.FileJson,{className:"mr-2 h-4 w-4"}),"导入配置"]}),(0,s.jsxs)(r.Button,{size:"sm",onClick:()=>T(!0),children:[(0,s.jsx)(z.Plus,{className:"mr-2 h-4 w-4"}),"添加服务器"]})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-2",children:(0,s.jsx)(t.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"服务器数"})}),(0,s.jsx)(t.CardContent,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:e.length}),e.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,s.jsxs)("span",{className:"flex items-center text-green-600",children:[(0,s.jsx)(M.CheckCircle,{className:"h-3 w-3 mr-0.5"}),e.filter(e=>"connected"===e.status).length]}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"/"}),(0,s.jsxs)("span",{className:"flex items-center text-gray-500",children:[(0,s.jsx)(_.XCircle,{className:"h-3 w-3 mr-0.5"}),e.filter(e=>"connected"!==e.status).length]})]})]})})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-2",children:(0,s.jsx)(t.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"工具总数"})}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:j.length})})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-2",children:(0,s.jsx)(t.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"内置工具"})}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:eQ.length})})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-2",children:(0,s.jsx)(t.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"外部工具"})}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:eY.length})})]})]}),(0,s.jsxs)(i.Tabs,{defaultValue:"servers",children:[(0,s.jsxs)(i.TabsList,{children:[(0,s.jsxs)(i.TabsTrigger,{value:"servers",className:"flex items-center gap-2",children:[(0,s.jsx)(I.Server,{className:"h-4 w-4"}),"服务器 (",e.length,")"]}),(0,s.jsxs)(i.TabsTrigger,{value:"tools",className:"flex items-center gap-2",children:[(0,s.jsx)(H.Wrench,{className:"h-4 w-4"}),"工具 (",j.length,")"]})]}),(0,s.jsx)(i.TabsContent,{value:"servers",className:"space-y-4",children:0===e.length?(0,s.jsx)(t.Card,{children:(0,s.jsxs)(t.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(I.Server,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"暂无MCP服务器"})]})}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:e.map(e=>(0,s.jsxs)(t.Card,{className:`transition-all border-l-4 ${"connected"===e.status?"border-l-green-500":"border-l-gray-300"}`,children:[(0,s.jsxs)(t.CardHeader,{className:"pb-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:`w-2 h-2 rounded-full ${"connected"===e.status?"bg-green-500 animate-pulse":"bg-gray-400"}`}),(0,s.jsx)(t.CardTitle,{className:"text-base",children:e.name})]}),(0,s.jsx)(l.Badge,{variant:"connected"===e.status?"default":"secondary",className:"connected"===e.status?"bg-green-100 text-green-700 hover:bg-green-100":"",children:"connected"===e.status?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(M.CheckCircle,{className:"h-3 w-3 mr-1"})," 已连接"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.XCircle,{className:"h-3 w-3 mr-1"})," 离线"]})})]}),(0,s.jsxs)(t.CardDescription,{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Badge,{variant:"outline",className:"text-xs",children:e.config?.type||e.type||"未知"}),e.config?.package&&(0,s.jsx)("span",{className:"text-xs text-muted-foreground truncate max-w-[150px]",children:e.config.package})]})]}),(0,s.jsxs)(t.CardContent,{className:"space-y-4",children:[(0,s.jsx)("div",{className:"border rounded-lg overflow-hidden text-sm",children:(0,s.jsx)("table",{className:"w-full",children:(0,s.jsxs)("tbody",{className:"divide-y divide-border",children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-3 py-2 text-muted-foreground bg-muted/30 w-24",children:"工具数"}),(0,s.jsx)("td",{className:"px-3 py-2 font-medium",children:e.toolsCount||0})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-3 py-2 text-muted-foreground bg-muted/30",children:"资源数"}),(0,s.jsx)("td",{className:"px-3 py-2 font-medium",children:e.resourcesCount||0})]}),e.connectedAt&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-3 py-2 text-muted-foreground bg-muted/30",children:"连接时间"}),(0,s.jsx)("td",{className:"px-3 py-2",children:new Date(e.connectedAt).toLocaleString("zh-CN")})]}),e.config?.command&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-3 py-2 text-muted-foreground bg-muted/30",children:"命令"}),(0,s.jsx)("td",{className:"px-3 py-2 font-mono text-xs truncate max-w-[180px]",children:e.config.command})]}),e.config?.args&&e.config.args.length>0&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-3 py-2 text-muted-foreground bg-muted/30",children:"参数"}),(0,s.jsx)("td",{className:"px-3 py-2 font-mono text-xs truncate max-w-[180px]",children:e.config.args.join(" ")})]}),e.config?.package&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-3 py-2 text-muted-foreground bg-muted/30",children:"NPM 包"}),(0,s.jsx)("td",{className:"px-3 py-2 font-mono text-xs truncate max-w-[180px]",children:e.config.package})]}),e.config?.url&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-3 py-2 text-muted-foreground bg-muted/30",children:"URL"}),(0,s.jsx)("td",{className:"px-3 py-2 font-mono text-xs truncate max-w-[180px]",children:e.config.url})]})]})})}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2 border-t",children:[(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>eK(e.name),disabled:O===e.name,children:[O===e.name?(0,s.jsx)(f.Loader2,{className:"mr-1.5 h-3.5 w-3.5 animate-spin"}):(0,s.jsx)(R.RotateCcw,{className:"mr-1.5 h-3.5 w-3.5"}),"重连"]}),(0,s.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>eF(e),children:(0,s.jsx)(V.Code,{className:"h-4 w-4"})}),(0,s.jsx)(r.Button,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>{eH(e.name),eE(!0)},children:(0,s.jsx)(K.Trash2,{className:"h-4 w-4"})})]})]})]},e.name))})}),(0,s.jsx)(i.TabsContent,{value:"tools",className:"space-y-4",children:(0,s.jsxs)(i.Tabs,{defaultValue:"builtin",children:[(0,s.jsxs)(i.TabsList,{className:"flex-wrap h-auto gap-1",children:[(0,s.jsxs)(i.TabsTrigger,{value:"builtin",children:["内置工具 (",eQ.length,")"]}),(0,s.jsxs)(i.TabsTrigger,{value:"external",children:["外部工具 (",eY.length,")"]})]}),(0,s.jsx)(i.TabsContent,{value:"builtin",className:"space-y-4",children:ew.length>0?(0,s.jsx)("div",{className:"max-h-[70vh] overflow-y-auto",children:(0,s.jsx)("div",{className:"space-y-3 pr-2",children:ew.map(e=>{let a=ed[e.key]||H.Wrench,n=eT===e.key,c=eQ.filter(s=>e.tools.some(e=>e.name===s.name));return(0,s.jsx)(t.Card,{className:`transition-all ${!1===e.enabled?"opacity-60":""}`,children:(0,s.jsxs)(ec.Collapsible,{open:n,onOpenChange:()=>eL(n?null:e.key),children:[(0,s.jsx)(ec.CollapsibleTrigger,{asChild:!0,children:(0,s.jsx)(t.CardHeader,{className:"cursor-pointer hover:bg-muted/50 transition-colors py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,s.jsx)(a,{className:"h-5 w-5 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(t.CardTitle,{className:"text-base flex items-center gap-2",children:[e.name,(0,s.jsxs)(l.Badge,{variant:"secondary",className:"text-xs",children:[e.toolCount," 工具"]})]}),(0,s.jsx)(t.CardDescription,{className:"text-xs mt-0.5",children:e.description})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(el.Switch,{checked:!1!==e.enabled,onCheckedChange:s=>eq(e.key,s),disabled:eP===e.key}),eP===e.key&&(0,s.jsx)(f.Loader2,{className:"h-4 w-4 animate-spin"})]}),n?(0,s.jsx)(U.ChevronUp,{className:"h-4 w-4"}):(0,s.jsx)(W.ChevronDown,{className:"h-4 w-4"})]})]})})}),(0,s.jsx)(ec.CollapsibleContent,{children:(0,s.jsx)(t.CardContent,{className:"pt-0",children:(0,s.jsx)("div",{className:"space-y-2",children:c.map(e=>(0,s.jsxs)("div",{className:"p-3 rounded-lg border bg-card hover:bg-muted/50 transition-colors",children:[(0,s.jsx)("div",{className:"flex items-start justify-between gap-2",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(V.Code,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0"}),(0,s.jsx)("span",{className:"font-medium text-sm truncate",children:e.name})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2 pl-5",children:e.description||"无描述"})]})}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2 pt-2 border-t border-border/50",children:[(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",className:"h-8 text-xs flex-1",onClick:()=>eV(e),children:[(0,s.jsx)($.Eye,{className:"h-3.5 w-3.5 mr-1"}),"参数"]}),(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",className:"h-8 text-xs flex-1",onClick:()=>e$(e),children:[(0,s.jsx)(J.Play,{className:"h-3.5 w-3.5 mr-1"}),"测试"]})]})]},e.name))})})})]})},e.key)})})}):(0,s.jsx)(t.Card,{children:(0,s.jsxs)(t.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(H.Wrench,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"暂无内置工具类别"})]})})}),(0,s.jsx)(i.TabsContent,{value:"external",children:0===eY.length?(0,s.jsx)(t.Card,{children:(0,s.jsxs)(t.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(I.Server,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"暂无外部 MCP 工具"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"添加 MCP 服务器后，其工具将显示在这里"})]})}):(0,s.jsx)(c.ScrollArea,{className:"h-[500px]",children:(0,s.jsx)("div",{className:"space-y-3",children:eY.map(e=>(0,s.jsx)(t.Card,{className:"hover:shadow-md transition-shadow",children:(0,s.jsxs)(t.CardContent,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[(0,s.jsx)(I.Server,{className:"h-4 w-4 text-blue-500 shrink-0"}),(0,s.jsx)("span",{className:"font-medium text-sm truncate",children:e.name}),(0,s.jsx)(l.Badge,{variant:"outline",className:"text-xs shrink-0",children:e.serverName})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:e.description||"无描述"}),e.inputSchema?.properties&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-1 mb-3",children:[Object.keys(e.inputSchema.properties).slice(0,3).map(e=>(0,s.jsx)(l.Badge,{variant:"secondary",className:"text-xs",children:e},e)),Object.keys(e.inputSchema.properties).length>3&&(0,s.jsxs)(l.Badge,{variant:"secondary",className:"text-xs",children:["+",Object.keys(e.inputSchema.properties).length-3]})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2 border-t border-border/50",children:[(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",className:"h-8 text-xs flex-1",onClick:()=>eV(e),children:[(0,s.jsx)($.Eye,{className:"h-3.5 w-3.5 mr-1"}),"参数"]}),(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",className:"h-8 text-xs flex-1",onClick:()=>e$(e),children:[(0,s.jsx)(J.Play,{className:"h-3.5 w-3.5 mr-1"}),"测试"]}),(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",onClick:()=>eU(e),title:"复制为 JS 工具",children:(0,s.jsx)(F.Copy,{className:"h-3.5 w-3.5"})})]})]})},e.name))})})})]})})]}),(0,s.jsx)(x.Dialog,{open:S,onOpenChange:T,children:(0,s.jsxs)(x.DialogContent,{className:"w-[95vw] max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(x.DialogHeader,{children:[(0,s.jsx)(x.DialogTitle,{children:"添加 MCP 服务器"}),(0,s.jsx)(x.DialogDescription,{children:"配置新的 MCP 服务器连接，或从常用包中快速选择"})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{children:"名称"}),(0,s.jsx)(o.Input,{value:Y.name,onChange:e=>X({...Y,name:e.target.value}),placeholder:"服务器名称"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{children:"类型"}),(0,s.jsxs)(h.Select,{value:Y.type,onValueChange:e=>{X({...Y,type:e}),"npm"===e?eO(!0):eO(!1)},children:[(0,s.jsx)(h.SelectTrigger,{children:(0,s.jsx)(h.SelectValue,{})}),(0,s.jsxs)(h.SelectContent,{children:[(0,s.jsx)(h.SelectItem,{value:"stdio",children:"Stdio (本地命令)"}),(0,s.jsx)(h.SelectItem,{value:"npm",children:"NPM 包 (npx)"}),(0,s.jsx)(h.SelectItem,{value:"sse",children:"SSE (Server-Sent Events)"}),(0,s.jsx)(h.SelectItem,{value:"http",children:"HTTP"})]})]})]})]}),"stdio"===Y.type&&(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{children:"命令"}),(0,s.jsx)(o.Input,{value:Y.command,onChange:e=>X({...Y,command:e.target.value}),placeholder:"例如: node, npx, python"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{children:"参数 (空格分隔)"}),(0,s.jsx)(o.Input,{value:Y.args,onChange:e=>X({...Y,args:e.target.value}),placeholder:"-y @modelcontextprotocol/server-filesystem /"})]})]}),"npm"===Y.type&&(0,s.jsxs)(s.Fragment,{children:[eB&&(0,s.jsxs)("div",{className:"border rounded-lg p-4 bg-muted/30",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)(d.Label,{className:"text-sm font-medium",children:"快速选择常用包"}),(0,s.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>eO(!1),children:"手动输入"})]}),(0,s.jsx)(D,{onSelect:e=>{X({...Y,name:e.name.toLowerCase().replace(/\s+/g,"-"),type:"npm",package:e.package,args:e.args||"",env:e.env||{}}),eO(!1)},selectedPackage:Y.package})]}),!eB&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d.Label,{className:"text-sm font-medium",children:"NPM 包配置"}),(0,s.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>eO(!0),children:"从列表选择"})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{children:"NPM 包名"}),(0,s.jsx)(o.Input,{value:Y.package,onChange:e=>X({...Y,package:e.target.value}),placeholder:"@modelcontextprotocol/server-filesystem"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{children:"参数 (空格分隔)"}),(0,s.jsx)(o.Input,{value:Y.args,onChange:e=>X({...Y,args:e.target.value}),placeholder:"/"})]})]})]})]}),("sse"===Y.type||"http"===Y.type)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{children:"URL"}),(0,s.jsx)(o.Input,{value:Y.url,onChange:e=>X({...Y,url:e.target.value}),placeholder:"sse"===Y.type?"http://localhost:8080/sse":"http://localhost:8080/mcp"})]}),(0,s.jsx)(ei.KeyValueTable,{title:"请求头列表",value:Y.headers,onChange:e=>X({...Y,headers:e}),keyPlaceholder:"Header 名称",valuePlaceholder:"Header 值"})]}),(0,s.jsx)(ei.KeyValueTable,{title:"环境变量 (可选)",value:Y.env,onChange:e=>X({...Y,env:e}),keyPlaceholder:"变量名",valuePlaceholder:"变量值"})]}),(0,s.jsxs)(x.DialogFooter,{children:[(0,s.jsx)(r.Button,{variant:"outline",onClick:()=>T(!1),children:"取消"}),(0,s.jsxs)(r.Button,{onClick:ez,disabled:A,children:[A&&(0,s.jsx)(f.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"添加"]})]})]})}),(0,s.jsx)(x.Dialog,{open:L,onOpenChange:P,children:(0,s.jsxs)(x.DialogContent,{className:"w-[95vw] max-w-lg",children:[(0,s.jsxs)(x.DialogHeader,{children:[(0,s.jsx)(x.DialogTitle,{children:"导入 MCP 配置"}),(0,s.jsx)(x.DialogDescription,{children:"粘贴 Claude Desktop 或其他 MCP 客户端的配置 JSON"})]}),(0,s.jsx)("div",{className:"py-4",children:(0,s.jsx)(m.Textarea,{value:q,onChange:e=>Q(e.target.value),placeholder:'{\n  "mcpServers": {\n    "server-name": {\n      "command": "npx",\n      "args": ["-y", "@modelcontextprotocol/server-xxx"]\n    }\n  }\n}',rows:12,className:"font-mono text-sm"})}),(0,s.jsxs)(x.DialogFooter,{children:[(0,s.jsx)(r.Button,{variant:"outline",onClick:()=>P(!1),children:"取消"}),(0,s.jsx)(r.Button,{onClick:eG,children:"导入"})]})]})}),(0,s.jsx)(x.Dialog,{open:Z,onOpenChange:ee,children:(0,s.jsxs)(x.DialogContent,{className:"w-[95vw] max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(x.DialogHeader,{children:[(0,s.jsx)(x.DialogTitle,{children:"工具详情"}),(0,s.jsx)(x.DialogDescription,{children:es?.name})]}),es&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{className:"text-muted-foreground",children:"名称"}),(0,s.jsx)("p",{className:"font-medium",children:es.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{className:"text-muted-foreground",children:"描述"}),(0,s.jsx)("p",{children:es.description||"无描述"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{className:"text-muted-foreground",children:"来源"}),(0,s.jsx)(l.Badge,{variant:"outline",className:"ml-2",children:es.serverName||"builtin"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{className:"text-muted-foreground",children:"输入参数"}),(0,s.jsx)(en.CodeBlock,{code:JSON.stringify(es.inputSchema||{},null,2),language:"json",className:"mt-2",maxHeight:"300px"})]})]})]})}),(0,s.jsx)(x.Dialog,{open:et,onOpenChange:er,children:(0,s.jsxs)(x.DialogContent,{className:"w-[95vw] max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(x.DialogHeader,{children:[(0,s.jsx)(x.DialogTitle,{children:"测试工具"}),(0,s.jsx)(x.DialogDescription,{children:es?.name})]}),es&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(ei.KeyValueTable,{title:"参数列表",value:em||{},onChange:ex,keyPlaceholder:"参数名",valuePlaceholder:"参数值"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(r.Button,{onClick:eJ,disabled:eg,children:[eg&&(0,s.jsx)(f.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"执行测试"]}),(0,s.jsx)(r.Button,{variant:"outline",onClick:()=>e$(es),children:"重置参数"})]}),eh&&(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{children:"测试结果"}),eh.startsWith("Error")?(0,s.jsx)("pre",{className:"mt-2 p-3 rounded-lg text-sm overflow-auto max-h-[300px] bg-red-50 dark:bg-red-950 text-red-700 dark:text-red-300",children:eh}):(0,s.jsx)(en.CodeBlock,{code:eh,language:"json",className:"mt-2",maxHeight:"300px"})]})]})]})}),(0,s.jsx)(x.Dialog,{open:ej,onOpenChange:ev,children:(0,s.jsxs)(x.DialogContent,{className:"w-[95vw] max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(x.DialogHeader,{children:[(0,s.jsx)(x.DialogTitle,{children:"编辑服务器"}),(0,s.jsxs)(x.DialogDescription,{children:["修改 ",eN?.name," 的配置"]})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{children:"名称"}),(0,s.jsx)(o.Input,{value:ef.name,disabled:!0,className:"bg-muted"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{children:"类型"}),(0,s.jsxs)(h.Select,{value:ef.type,onValueChange:e=>eC({...ef,type:e}),children:[(0,s.jsx)(h.SelectTrigger,{children:(0,s.jsx)(h.SelectValue,{})}),(0,s.jsxs)(h.SelectContent,{children:[(0,s.jsx)(h.SelectItem,{value:"stdio",children:"Stdio (本地命令)"}),(0,s.jsx)(h.SelectItem,{value:"npm",children:"NPM 包 (npx)"}),(0,s.jsx)(h.SelectItem,{value:"sse",children:"SSE (Server-Sent Events)"}),(0,s.jsx)(h.SelectItem,{value:"http",children:"HTTP"})]})]})]}),"stdio"===ef.type&&(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{children:"命令"}),(0,s.jsx)(o.Input,{value:ef.command,onChange:e=>eC({...ef,command:e.target.value}),placeholder:"例如: node, python"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{children:"参数 (空格分隔)"}),(0,s.jsx)(o.Input,{value:ef.args,onChange:e=>eC({...ef,args:e.target.value}),placeholder:"server.js --port 3000"})]})]}),"npm"===ef.type&&(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{children:"NPM 包名"}),(0,s.jsx)(o.Input,{value:ef.package,onChange:e=>eC({...ef,package:e.target.value}),placeholder:"@modelcontextprotocol/server-filesystem"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{children:"参数 (空格分隔)"}),(0,s.jsx)(o.Input,{value:ef.args,onChange:e=>eC({...ef,args:e.target.value}),placeholder:"/"})]})]}),("sse"===ef.type||"http"===ef.type)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{children:"URL"}),(0,s.jsx)(o.Input,{value:ef.url,onChange:e=>eC({...ef,url:e.target.value}),placeholder:"http://localhost:8080/mcp"})]}),(0,s.jsx)(ei.KeyValueTable,{title:"请求头列表",value:ef.headers,onChange:e=>eC({...ef,headers:e}),keyPlaceholder:"Header 名称",valuePlaceholder:"Header 值"})]}),(0,s.jsx)(ei.KeyValueTable,{title:"环境变量 (可选)",value:ef.env,onChange:e=>eC({...ef,env:e}),keyPlaceholder:"变量名",valuePlaceholder:"变量值"})]}),(0,s.jsxs)(x.DialogFooter,{children:[(0,s.jsx)(r.Button,{variant:"outline",onClick:()=>ev(!1),children:"取消"}),(0,s.jsxs)(r.Button,{onClick:eW,disabled:eb,children:[eb&&(0,s.jsx)(f.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"保存"]})]})]})}),(0,s.jsx)(eo.DeleteDialog,{open:eD,onOpenChange:eE,title:"删除服务器",itemName:eI||void 0,onConfirm:eR})]})}e.s(["default",()=>em],99818)}]);