(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5945,e=>{"use strict";var a=e.i(52542),i=e.i(40418),l=e.i(44728),s=e.i(51200),t=e.i(72029),n=e.i(30243),r=e.i(99573),o=e.i(13107),d=e.i(20308),c=e.i(20650),m=e.i(81080),h=e.i(10201),b=e.i(79342),x=e.i(64625),u=e.i(89908),p=e.i(5850),y=e.i(40204),g=e.i(96173),j=e.i(15204),v=e.i(63959),C=e.i(98858),f=e.i(74940),N=e.i(17286),P=e.i(10273),E=e.i(70620),T=e.i(32308),w=e.i(79923),M=e.i(10148),S=e.i(57345),k=e.i(36393),I=e.i(72024),L=e.i(60001),_=e.i(60713),R=e.i(35771),G=e.i(14775);let K=(0,e.i(50974).default)("mouse-pointer-2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);var V=e.i(75979);function U({icon:e,title:i,desc:l,value:s,onChange:t,children:n}){return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-muted",children:e}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:i}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:l})]})]}),(0,a.jsxs)(h.Select,{value:s,onValueChange:t,children:[(0,a.jsx)(h.SelectTrigger,{className:"w-24",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(h.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),n]})}var B=e.i(84519);function A({label:e="æ¦‚çŽ‡",value:i,onChange:l,disabled:s=!1,className:t}){let n="inherit"===i?1:i;return(0,a.jsxs)("div",{className:`flex items-center gap-2 ${t} ${s?"opacity-50 pointer-events-none":""}`,children:[(0,a.jsx)(r.Label,{className:"text-xs w-16",children:e}),(0,a.jsx)(B.Slider,{value:[n],onValueChange:([e])=>l(e),min:0,max:1,step:.05,disabled:s,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(100*n),"%"]})]})}function H({icon:e,title:i,enabled:l,onEnabledChange:s,probability:t,onProbabilityChange:n,children:r}){return(0,a.jsxs)("div",{className:"rounded-lg border overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e,(0,a.jsx)("span",{className:"text-sm font-medium",children:i})]}),(0,a.jsxs)(h.Select,{value:l,onValueChange:s,children:[(0,a.jsx)(h.SelectTrigger,{className:"w-24 h-8",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(h.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===l&&(0,a.jsxs)("div",{className:"p-3 space-y-3 border-t",children:[(0,a.jsx)(A,{value:t,onChange:n}),r]})]})}var z=e.i(17171);function D({label:e,value:i,onChange:l,min:s,max:t,step:o,placeholder:d,className:c,containerClassName:m,description:h,...b}){return(0,a.jsxs)("div",{className:(0,z.cn)("space-y-1",m),children:[(0,a.jsx)(r.Label,{className:"text-xs",children:e}),(0,a.jsx)(n.Input,{type:"number",value:i,onChange:l,min:s,max:t,step:o,placeholder:d,className:(0,z.cn)("h-8",c),...b}),h&&(0,a.jsx)("p",{className:"text-[10px] text-muted-foreground",children:h})]})}function Q({label:e,value:i,models:l,onChange:s,placeholder:t="ä½¿ç”¨å…¨å±€é…ç½®",className:n}){return(0,a.jsxs)("div",{className:(0,z.cn)("space-y-1",n),children:[(0,a.jsx)(r.Label,{className:"text-xs",children:e}),(0,a.jsxs)(h.Select,{value:i||"__default__",onValueChange:e=>s("__default__"===e?"":e),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{placeholder:t})}),(0,a.jsxs)(h.SelectContent,{className:"max-h-[200px]",children:[(0,a.jsx)(h.SelectItem,{value:"__default__",children:t}),l.map(e=>(0,a.jsx)(h.SelectItem,{value:e,children:e},e))]})]})]})}var F=e.i(13795);function O({id:e}){let B=(0,l.useRouter)(),z="new"===e,[O,$]=(0,i.useState)(!z),[q,X]=(0,i.useState)(!1),[Z,J]=(0,i.useState)([]),[W,Y]=(0,i.useState)([]),[ee,ea]=(0,i.useState)([]),[ei,el]=(0,i.useState)(!1),[es,et]=(0,i.useState)(null),[en,er]=(0,i.useState)({name:"",baseUrl:"",apiKey:"",adapterType:"openai",models:"",enabled:!0,priority:0,modelsPath:"",chatPath:"",imageTransferMode:"auto",imageCompress:!0,imageQuality:85,imageMaxSize:4096}),[eo,ed]=(0,i.useState)({groupId:"",groupName:"",enabled:!0,presetId:"",systemPrompt:"",triggerMode:"default",customPrefix:"",chatModel:"",summaryModel:"",bymModel:"",imageGenModel:"",toolsEnabled:"inherit",imageGenEnabled:"inherit",summaryEnabled:"inherit",eventEnabled:"inherit",bymEnabled:"inherit",bymPresetId:"",bymPrompt:"",bymProbability:"inherit",bymTemperature:"inherit",bymMaxTokens:"inherit",bymReplyLength:"medium",bymUseEmoji:!0,proactiveChatEnabled:"inherit",proactiveChatProbability:"inherit",proactiveChatCooldown:"inherit",proactiveChatMaxDaily:"inherit",proactiveChatMinMessages:5,proactiveChatTimeStart:8,proactiveChatTimeEnd:23,welcomeEnabled:"inherit",welcomeMessage:"",welcomePrompt:"",welcomeProbability:"inherit",goodbyeEnabled:"inherit",goodbyePrompt:"",goodbyeProbability:"inherit",pokeEnabled:"inherit",pokeBack:!1,pokeProbability:"inherit",recallEnabled:"inherit",recallProbability:"inherit",banEnabled:"inherit",banProbability:"inherit",luckyKingEnabled:"inherit",luckyKingProbability:"inherit",honorEnabled:"inherit",honorProbability:"inherit",essenceEnabled:"inherit",essenceProbability:"inherit",adminEnabled:"inherit",adminProbability:"inherit",emojiThiefEnabled:"inherit",emojiThiefSeparateFolder:!0,emojiThiefMaxCount:500,emojiThiefStealRate:1,emojiThiefTriggerRate:.05,emojiThiefTriggerMode:"off",chatContextLength:20,chatStreamReply:!0,chatQuoteReply:!1,chatShowThinking:!0,listMode:"none",blacklist:[],whitelist:[],summaryPushEnabled:!1,summaryPushIntervalType:"day",summaryPushIntervalValue:1,summaryPushHour:20,summaryPushMessageCount:100,independentChannels:[],forbidGlobalModel:!1,dailyGroupLimit:0,dailyUserLimit:0,usageLimitMessage:"",knowledgeIds:[]});(0,i.useEffect)(()=>{ec()},[e]);let ec=async()=>{try{let[a,i,l]=await Promise.all([V.presetsApi.list(),V.channelsApi.list(),V.knowledgeApi.list()]);J(a?.data||[]),Y((l?.data||[]).map(e=>({id:e.id,name:e.name})));let s=new Set;if((i?.data||[]).forEach(e=>{Array.isArray(e.models)&&e.models.forEach(e=>s.add(e))}),ea(Array.from(s).sort()),!z){let a=await V.scopeApi.getGroups(),i=(a?.data||[]).find(a=>a.groupId===e);if(i){let e=i.settings||{};ed({groupId:i.groupId,groupName:i.groupName||"",enabled:!1!==i.enabled,presetId:i.presetId||"",systemPrompt:i.systemPrompt||"",triggerMode:e.triggerMode||"default",customPrefix:e.customPrefix||"",chatModel:e.chatModel||"",summaryModel:e.summaryModel||"",bymModel:e.bymModel||"",imageGenModel:e.imageGenModel||"",toolsEnabled:void 0===e.toolsEnabled?"inherit":e.toolsEnabled?"on":"off",imageGenEnabled:void 0===e.imageGenEnabled?"inherit":e.imageGenEnabled?"on":"off",summaryEnabled:void 0===e.summaryEnabled?"inherit":e.summaryEnabled?"on":"off",eventEnabled:void 0===e.eventEnabled?"inherit":e.eventEnabled?"on":"off",bymEnabled:void 0===e.bymEnabled?"inherit":e.bymEnabled?"on":"off",bymPresetId:e.bymPresetId||"",bymPrompt:e.bymPrompt||"",bymProbability:void 0===e.bymProbability||"inherit"===e.bymProbability?"inherit":Number(e.bymProbability),bymTemperature:void 0===e.bymTemperature||"inherit"===e.bymTemperature?"inherit":Number(e.bymTemperature),bymMaxTokens:void 0===e.bymMaxTokens||"inherit"===e.bymMaxTokens?"inherit":Number(e.bymMaxTokens),proactiveChatEnabled:void 0===e.proactiveChatEnabled?"inherit":e.proactiveChatEnabled?"on":"off",proactiveChatProbability:e.proactiveChatProbability??"inherit",proactiveChatCooldown:e.proactiveChatCooldown??"inherit",proactiveChatMaxDaily:e.proactiveChatMaxDaily??"inherit",welcomeEnabled:void 0===e.welcomeEnabled?"inherit":e.welcomeEnabled?"on":"off",welcomeMessage:e.welcomeMessage||"",welcomePrompt:e.welcomePrompt||"",welcomeProbability:e.welcomeProbability??"inherit",goodbyeEnabled:void 0===e.goodbyeEnabled?"inherit":e.goodbyeEnabled?"on":"off",goodbyePrompt:e.goodbyePrompt||"",goodbyeProbability:e.goodbyeProbability??"inherit",pokeEnabled:void 0===e.pokeEnabled?"inherit":e.pokeEnabled?"on":"off",pokeBack:e.pokeBack||!1,pokeProbability:e.pokeProbability??"inherit",recallEnabled:void 0===e.recallEnabled?"inherit":e.recallEnabled?"on":"off",recallProbability:e.recallProbability??"inherit",banEnabled:void 0===e.banEnabled?"inherit":e.banEnabled?"on":"off",banProbability:e.banProbability??"inherit",luckyKingEnabled:void 0===e.luckyKingEnabled?"inherit":e.luckyKingEnabled?"on":"off",luckyKingProbability:e.luckyKingProbability??"inherit",honorEnabled:void 0===e.honorEnabled?"inherit":e.honorEnabled?"on":"off",honorProbability:e.honorProbability??"inherit",essenceEnabled:void 0===e.essenceEnabled?"inherit":e.essenceEnabled?"on":"off",essenceProbability:e.essenceProbability??"inherit",adminEnabled:void 0===e.adminEnabled?"inherit":e.adminEnabled?"on":"off",adminProbability:e.adminProbability??"inherit",emojiThiefEnabled:void 0===e.emojiThiefEnabled?"inherit":e.emojiThiefEnabled?"on":"off",emojiThiefSeparateFolder:e.emojiThiefSeparateFolder??!0,emojiThiefMaxCount:e.emojiThiefMaxCount??500,emojiThiefStealRate:e.emojiThiefStealRate??1,emojiThiefTriggerRate:e.emojiThiefTriggerRate??.05,emojiThiefTriggerMode:e.emojiThiefTriggerMode||"off",bymReplyLength:e.bymReplyLength||"medium",bymUseEmoji:e.bymUseEmoji??!0,proactiveChatMinMessages:e.proactiveChatMinMessages??5,proactiveChatTimeStart:e.proactiveChatTimeStart??8,proactiveChatTimeEnd:e.proactiveChatTimeEnd??23,chatContextLength:e.chatContextLength??20,chatStreamReply:e.chatStreamReply??!0,chatQuoteReply:e.chatQuoteReply??!1,chatShowThinking:e.chatShowThinking??!0,listMode:e.listMode||"none",blacklist:e.blacklist||[],whitelist:e.whitelist||[],summaryPushEnabled:e.summaryPushEnabled??!1,summaryPushIntervalType:e.summaryPushIntervalType||"day",summaryPushIntervalValue:e.summaryPushIntervalValue??1,summaryPushHour:e.summaryPushHour??20,summaryPushMessageCount:e.summaryPushMessageCount??100,independentChannels:e.independentChannels||[],forbidGlobalModel:e.forbidGlobalModel||!1,dailyGroupLimit:e.usageLimit?.dailyGroupLimit||0,dailyUserLimit:e.usageLimit?.dailyUserLimit||0,usageLimitMessage:e.usageLimit?.limitMessage||"",knowledgeIds:i.knowledgeIds||[]})}}}catch(e){console.error("åŠ è½½æ•°æ®å¤±è´¥",e),b.toast.error("åŠ è½½æ•°æ®å¤±è´¥")}finally{$(!1)}},em=async()=>{if(!eo.groupId)return void b.toast.error("è¯·å¡«å†™ç¾¤å·");X(!0);try{await V.scopeApi.updateGroup(eo.groupId,{groupName:eo.groupName,presetId:eo.presetId||void 0,systemPrompt:eo.systemPrompt||void 0,enabled:eo.enabled,knowledgeIds:eo.knowledgeIds.length>0?eo.knowledgeIds:void 0,triggerMode:eo.triggerMode,customPrefix:eo.customPrefix||void 0,chatModel:eo.chatModel||void 0,summaryModel:eo.summaryModel||void 0,bymModel:eo.bymModel||void 0,imageGenModel:eo.imageGenModel||void 0,toolsEnabled:"inherit"===eo.toolsEnabled?void 0:"on"===eo.toolsEnabled,imageGenEnabled:"inherit"===eo.imageGenEnabled?void 0:"on"===eo.imageGenEnabled,summaryEnabled:"inherit"===eo.summaryEnabled?void 0:"on"===eo.summaryEnabled,eventEnabled:"inherit"===eo.eventEnabled?void 0:"on"===eo.eventEnabled,bymEnabled:"inherit"===eo.bymEnabled?void 0:"on"===eo.bymEnabled,bymPresetId:eo.bymPresetId||void 0,bymPrompt:eo.bymPrompt||void 0,bymProbability:"inherit"===eo.bymProbability?void 0:eo.bymProbability,bymTemperature:"inherit"===eo.bymTemperature?void 0:eo.bymTemperature,bymMaxTokens:"inherit"===eo.bymMaxTokens?void 0:eo.bymMaxTokens,proactiveChatEnabled:"inherit"===eo.proactiveChatEnabled?void 0:"on"===eo.proactiveChatEnabled,proactiveChatProbability:"inherit"===eo.proactiveChatProbability?void 0:eo.proactiveChatProbability,proactiveChatCooldown:"inherit"===eo.proactiveChatCooldown?void 0:eo.proactiveChatCooldown,proactiveChatMaxDaily:"inherit"===eo.proactiveChatMaxDaily?void 0:eo.proactiveChatMaxDaily,welcomeEnabled:"inherit"===eo.welcomeEnabled?void 0:"on"===eo.welcomeEnabled,welcomeMessage:eo.welcomeMessage||void 0,welcomePrompt:eo.welcomePrompt||void 0,welcomeProbability:"inherit"===eo.welcomeProbability?void 0:eo.welcomeProbability,goodbyeEnabled:"inherit"===eo.goodbyeEnabled?void 0:"on"===eo.goodbyeEnabled,goodbyePrompt:eo.goodbyePrompt||void 0,goodbyeProbability:"inherit"===eo.goodbyeProbability?void 0:eo.goodbyeProbability,pokeEnabled:"inherit"===eo.pokeEnabled?void 0:"on"===eo.pokeEnabled,pokeBack:eo.pokeBack,pokeProbability:"inherit"===eo.pokeProbability?void 0:eo.pokeProbability,recallEnabled:"inherit"===eo.recallEnabled?void 0:"on"===eo.recallEnabled,recallProbability:"inherit"===eo.recallProbability?void 0:eo.recallProbability,banEnabled:"inherit"===eo.banEnabled?void 0:"on"===eo.banEnabled,banProbability:"inherit"===eo.banProbability?void 0:eo.banProbability,luckyKingEnabled:"inherit"===eo.luckyKingEnabled?void 0:"on"===eo.luckyKingEnabled,luckyKingProbability:"inherit"===eo.luckyKingProbability?void 0:eo.luckyKingProbability,honorEnabled:"inherit"===eo.honorEnabled?void 0:"on"===eo.honorEnabled,honorProbability:"inherit"===eo.honorProbability?void 0:eo.honorProbability,essenceEnabled:"inherit"===eo.essenceEnabled?void 0:"on"===eo.essenceEnabled,essenceProbability:"inherit"===eo.essenceProbability?void 0:eo.essenceProbability,adminEnabled:"inherit"===eo.adminEnabled?void 0:"on"===eo.adminEnabled,adminProbability:"inherit"===eo.adminProbability?void 0:eo.adminProbability,emojiThiefEnabled:"inherit"===eo.emojiThiefEnabled?void 0:"on"===eo.emojiThiefEnabled,emojiThiefSeparateFolder:eo.emojiThiefSeparateFolder,emojiThiefMaxCount:eo.emojiThiefMaxCount,emojiThiefStealRate:eo.emojiThiefStealRate,emojiThiefTriggerRate:eo.emojiThiefTriggerRate,emojiThiefTriggerMode:eo.emojiThiefTriggerMode,bymReplyLength:eo.bymReplyLength,bymUseEmoji:eo.bymUseEmoji,proactiveChatMinMessages:eo.proactiveChatMinMessages,proactiveChatTimeStart:eo.proactiveChatTimeStart,proactiveChatTimeEnd:eo.proactiveChatTimeEnd,chatContextLength:eo.chatContextLength,chatStreamReply:eo.chatStreamReply,chatQuoteReply:eo.chatQuoteReply,chatShowThinking:eo.chatShowThinking,listMode:"none"!==eo.listMode?eo.listMode:void 0,blacklist:eo.blacklist.length>0?eo.blacklist:void 0,whitelist:eo.whitelist.length>0?eo.whitelist:void 0,summaryPushEnabled:eo.summaryPushEnabled,summaryPushIntervalType:eo.summaryPushIntervalType,summaryPushIntervalValue:eo.summaryPushIntervalValue,summaryPushHour:eo.summaryPushHour,summaryPushMessageCount:eo.summaryPushMessageCount,independentChannels:eo.independentChannels.length>0?eo.independentChannels:void 0,forbidGlobalModel:eo.forbidGlobalModel,usageLimit:{dailyGroupLimit:eo.dailyGroupLimit,dailyUserLimit:eo.dailyUserLimit,limitMessage:eo.usageLimitMessage||void 0}}),b.toast.success("ä¿å­˜æˆåŠŸ"),z&&B.push("/groups")}catch(e){console.error("ä¿å­˜å¤±è´¥",e),b.toast.error("ä¿å­˜å¤±è´¥")}finally{X(!1)}};return O?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(u.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,a.jsxs)("div",{className:"container max-w-4xl px-4 sm:px-6 py-4 sm:py-6 space-y-4 sm:space-y-6 flex-1 h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[(0,a.jsx)(t.Button,{variant:"ghost",size:"icon",className:"shrink-0",onClick:()=>B.push("/groups"),children:(0,a.jsx)(x.ArrowLeft,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h1",{className:"text-xl sm:text-2xl font-bold truncate",children:z?"æ·»åŠ ç¾¤ç»„":"ç¼–è¾‘ç¾¤ç»„"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:z?"é…ç½®æ–°ç¾¤ç»„çš„ä¸ªæ€§åŒ–è®¾ç½®":`ç¾¤å·: ${eo.groupId}`})]})]}),(0,a.jsxs)(t.Button,{onClick:em,disabled:q,size:"sm",className:"shrink-0",children:[q?(0,a.jsx)(u.Loader2,{className:"h-4 w-4 sm:mr-2 animate-spin"}):(0,a.jsx)(p.Save,{className:"h-4 w-4 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"ä¿å­˜"})]})]}),(0,a.jsxs)(m.Tabs,{defaultValue:"basic",className:"space-y-4",children:[(0,a.jsxs)(m.TabsList,{className:"grid w-full grid-cols-5 h-auto",children:[(0,a.jsxs)(m.TabsTrigger,{value:"basic",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:[(0,a.jsx)(y.Settings,{className:"h-4 w-4 sm:mr-1"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"åŸºç¡€"})]}),(0,a.jsxs)(m.TabsTrigger,{value:"features",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:[(0,a.jsx)(g.Zap,{className:"h-4 w-4 sm:mr-1"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"åŠŸèƒ½"})]}),(0,a.jsxs)(m.TabsTrigger,{value:"bym",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:[(0,a.jsx)(k.Smile,{className:"h-4 w-4 sm:mr-1"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"ä¼ªäºº"})]}),(0,a.jsxs)(m.TabsTrigger,{value:"channel",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:[(0,a.jsx)(I.Server,{className:"h-4 w-4 sm:mr-1"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"æ¸ é“"})]}),(0,a.jsxs)(m.TabsTrigger,{value:"advanced",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:[(0,a.jsx)(j.Sparkles,{className:"h-4 w-4 sm:mr-1"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"é«˜çº§"})]})]}),(0,a.jsxs)(m.TabsContent,{value:"basic",className:"space-y-4",children:[(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsxs)(s.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(T.Users,{className:"h-4 w-4"}),"åŸºæœ¬ä¿¡æ¯"]})}),(0,a.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ç¾¤å· *"}),(0,a.jsx)(n.Input,{value:eo.groupId,onChange:e=>ed({...eo,groupId:e.target.value}),placeholder:"è¾“å…¥ç¾¤å·",disabled:!z})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ç¾¤åç§°"}),(0,a.jsx)(n.Input,{value:eo.groupName,onChange:e=>ed({...eo,groupName:e.target.value}),placeholder:"ç¾¤åç§°ï¼ˆå¯é€‰ï¼‰"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(C.Power,{className:"h-4 w-4 text-green-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"å¯ç”¨æœ¬ç¾¤"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"å…³é—­åŽæœºå™¨äººå°†ä¸å“åº”æœ¬ç¾¤æ¶ˆæ¯"})]})]}),(0,a.jsx)(d.Switch,{checked:eo.enabled,onCheckedChange:e=>ed({...eo,enabled:e})})]})]})]}),(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsxs)(s.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(P.MessageSquare,{className:"h-4 w-4"}),"è§¦å‘è®¾ç½®"]})}),(0,a.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"è§¦å‘æ¨¡å¼"}),(0,a.jsxs)(h.Select,{value:eo.triggerMode,onValueChange:e=>ed({...eo,triggerMode:e}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"default",children:"é»˜è®¤ï¼ˆ@æˆ–å‰ç¼€ï¼‰"}),(0,a.jsx)(h.SelectItem,{value:"at",children:"ä»…@è§¦å‘"}),(0,a.jsx)(h.SelectItem,{value:"prefix",children:"ä»…å‰ç¼€è§¦å‘"}),(0,a.jsx)(h.SelectItem,{value:"all",children:"æ‰€æœ‰æ¶ˆæ¯è§¦å‘"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"è‡ªå®šä¹‰å‰ç¼€"}),(0,a.jsx)(n.Input,{value:eo.customPrefix,onChange:e=>ed({...eo,customPrefix:e.target.value}),placeholder:"ç•™ç©ºä½¿ç”¨å…¨å±€å‰ç¼€"})]})]})]}),(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsxs)(s.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(v.BookOpen,{className:"h-4 w-4"}),"äººè®¾ä¸Žé¢„è®¾"]})}),(0,a.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"é€‰æ‹©é¢„è®¾"}),(0,a.jsxs)(h.Select,{value:eo.presetId||"__none__",onValueChange:e=>ed({...eo,presetId:"__none__"===e?"":e}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{placeholder:"ä¸ä½¿ç”¨é¢„è®¾"})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"__none__",children:"ä¸ä½¿ç”¨é¢„è®¾"}),Z.map(e=>(0,a.jsx)(h.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)(Q,{label:"å¯¹è¯æ¨¡åž‹",value:eo.chatModel,models:ee,onChange:e=>ed({...eo,chatModel:e}),placeholder:"ä½¿ç”¨å…¨å±€"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ç³»ç»Ÿæç¤ºè¯"}),(0,a.jsx)(c.Textarea,{value:eo.systemPrompt,onChange:e=>ed({...eo,systemPrompt:e.target.value}),placeholder:"ç•™ç©ºä½¿ç”¨é¢„è®¾æˆ–å…¨å±€æç¤ºè¯",rows:3})]})]})]}),(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsxs)(s.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(P.MessageSquare,{className:"h-4 w-4"}),"èŠå¤©é…ç½®"]})}),(0,a.jsx)(s.CardContent,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,a.jsx)(D,{label:"ä¸Šä¸‹æ–‡é•¿åº¦",min:1,max:100,value:eo.chatContextLength,onChange:e=>ed({...eo,chatContextLength:parseInt(e.target.value)||20})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æµå¼å›žå¤"}),(0,a.jsx)(d.Switch,{checked:eo.chatStreamReply,onCheckedChange:e=>ed({...eo,chatStreamReply:e})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"å¼•ç”¨å›žå¤"}),(0,a.jsx)(d.Switch,{checked:eo.chatQuoteReply,onCheckedChange:e=>ed({...eo,chatQuoteReply:e})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æ˜¾ç¤ºæ€è€ƒ"}),(0,a.jsx)(d.Switch,{checked:eo.chatShowThinking,onCheckedChange:e=>ed({...eo,chatShowThinking:e})})]})]})})]})]}),(0,a.jsxs)(m.TabsContent,{value:"features",className:"space-y-4",children:[(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsx)(s.CardTitle,{className:"text-base",children:"åŠŸèƒ½å¼€å…³"})}),(0,a.jsxs)(s.CardContent,{className:"space-y-3",children:[(0,a.jsx)(U,{icon:(0,a.jsx)(g.Zap,{className:"h-4 w-4 text-yellow-500"}),title:"å·¥å…·è°ƒç”¨",desc:"å…è®¸AIè°ƒç”¨å¤–éƒ¨å·¥å…·",value:eo.toolsEnabled,onChange:e=>ed({...eo,toolsEnabled:e})}),(0,a.jsx)(U,{icon:(0,a.jsx)(N.Image,{className:"h-4 w-4 text-pink-500"}),title:"ç»˜å›¾åŠŸèƒ½",desc:"æ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾ç­‰",value:eo.imageGenEnabled,onChange:e=>ed({...eo,imageGenEnabled:e})}),"on"===eo.imageGenEnabled&&(0,a.jsx)("div",{className:"ml-12 p-3 rounded-lg bg-muted/50 space-y-2",children:(0,a.jsx)(Q,{label:"ç»˜å›¾æ¨¡åž‹",value:eo.imageGenModel,models:ee.filter(e=>e.includes("dall")||e.includes("flux")||e.includes("image")),onChange:e=>ed({...eo,imageGenModel:e}),placeholder:"ç»§æ‰¿å…¨å±€"})}),(0,a.jsx)(U,{icon:(0,a.jsx)(v.BookOpen,{className:"h-4 w-4 text-blue-500"}),title:"ç¾¤èŠæ€»ç»“",desc:"è‡ªåŠ¨æ€»ç»“ç¾¤èŠå†…å®¹",value:eo.summaryEnabled,onChange:e=>ed({...eo,summaryEnabled:e})}),"on"===eo.summaryEnabled&&(0,a.jsxs)("div",{className:"ml-12 p-3 rounded-lg bg-muted/50 space-y-3",children:[(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)(Q,{label:"æ€»ç»“æ¨¡åž‹",value:eo.summaryModel,models:ee,onChange:e=>ed({...eo,summaryModel:e}),placeholder:"ç»§æ‰¿å…¨å±€"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"å®šæ—¶æŽ¨é€"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"è‡ªåŠ¨å®šæ—¶æŽ¨é€ç¾¤èŠæ€»ç»“"})]}),(0,a.jsx)(d.Switch,{checked:eo.summaryPushEnabled,onCheckedChange:e=>ed({...eo,summaryPushEnabled:e})})]}),eo.summaryPushEnabled&&(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"é—´éš”ç±»åž‹"}),(0,a.jsxs)(h.Select,{value:eo.summaryPushIntervalType,onValueChange:e=>ed({...eo,summaryPushIntervalType:e}),children:[(0,a.jsx)(h.SelectTrigger,{className:"h-9",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"hour",children:"æ¯Xå°æ—¶"}),(0,a.jsx)(h.SelectItem,{value:"day",children:"æ¯Xå¤©"})]})]})]}),(0,a.jsx)(D,{label:"é—´éš”å€¼",min:1,value:eo.summaryPushIntervalValue,onChange:e=>ed({...eo,summaryPushIntervalValue:parseInt(e.target.value)||1})}),"day"===eo.summaryPushIntervalType&&(0,a.jsx)(D,{label:"æŽ¨é€æ—¶é—´(ç‚¹)",min:0,max:23,value:eo.summaryPushHour,onChange:e=>ed({...eo,summaryPushHour:parseInt(e.target.value)||20})}),(0,a.jsx)(D,{label:"æ¶ˆæ¯æ•°é‡",min:10,value:eo.summaryPushMessageCount,onChange:e=>ed({...eo,summaryPushMessageCount:parseInt(e.target.value)||100})})]})]}),(0,a.jsx)(U,{icon:(0,a.jsx)(j.Sparkles,{className:"h-4 w-4 text-purple-500"}),title:"äº‹ä»¶å“åº”",desc:"å…¥ç¾¤ã€é€€ç¾¤ã€æˆ³ä¸€æˆ³ç­‰ï¼ˆå¼€å¯åŽåœ¨ä¸‹æ–¹é…ç½®è¯¦æƒ…ï¼‰",value:eo.eventEnabled,onChange:e=>ed({...eo,eventEnabled:e})}),(0,a.jsx)(U,{icon:(0,a.jsx)(G.Palette,{className:"h-4 w-4 text-cyan-500"}),title:"è¡¨æƒ…åŒ…å°å·",desc:"è‡ªåŠ¨æ”¶é›†å’Œå‘é€è¡¨æƒ…åŒ…",value:eo.emojiThiefEnabled,onChange:e=>ed({...eo,emojiThiefEnabled:e})}),"on"===eo.emojiThiefEnabled&&(0,a.jsxs)("div",{className:"ml-12 p-4 rounded-lg bg-muted/30 border space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(r.Label,{className:"text-sm font-medium",children:"ç‹¬ç«‹å­˜å‚¨"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"æœ¬ç¾¤è¡¨æƒ…åŒ…ç‹¬ç«‹å­˜å‚¨ï¼Œä¸ä¸Žå…¶ä»–ç¾¤å…±äº«"})]}),(0,a.jsx)(d.Switch,{checked:eo.emojiThiefSeparateFolder,onCheckedChange:e=>ed({...eo,emojiThiefSeparateFolder:e})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(D,{label:"æœ€å¤§æ”¶é›†æ•°",min:10,max:5e3,value:eo.emojiThiefMaxCount,onChange:e=>ed({...eo,emojiThiefMaxCount:parseInt(e.target.value)||500})}),(0,a.jsx)("div",{className:"flex items-end h-full pb-1",children:(0,a.jsx)(A,{label:"æ”¶é›†æ¦‚çŽ‡",value:eo.emojiThiefStealRate,onChange:e=>ed({...eo,emojiThiefStealRate:e}),className:"w-full"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"éšæœºå‘å›¾æ¨¡å¼"}),(0,a.jsxs)(h.Select,{value:eo.emojiThiefTriggerMode,onValueChange:e=>ed({...eo,emojiThiefTriggerMode:e}),children:[(0,a.jsx)(h.SelectTrigger,{className:"h-9",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­è‡ªåŠ¨å‘é€"}),(0,a.jsx)(h.SelectItem,{value:"chat_follow",children:"å¯¹è¯è·Ÿéš"}),(0,a.jsx)(h.SelectItem,{value:"chat_random",children:"å¯¹è¯éšæœº"}),(0,a.jsx)(h.SelectItem,{value:"bym_follow",children:"ä¼ªäººè·Ÿéš"}),(0,a.jsx)(h.SelectItem,{value:"bym_random",children:"ä¼ªäººéšæœº"})]})]})]}),(0,a.jsx)("div",{className:"flex items-end h-full pb-1",children:(0,a.jsx)(A,{label:"å‘é€æ¦‚çŽ‡",value:eo.emojiThiefTriggerRate,onChange:e=>ed({...eo,emojiThiefTriggerRate:e}),disabled:"off"===eo.emojiThiefTriggerMode||"chat_follow"===eo.emojiThiefTriggerMode||"bym_follow"===eo.emojiThiefTriggerMode,className:"w-full"})})]}),(0,a.jsx)("p",{className:"text-[10px] text-muted-foreground bg-muted/50 p-2 rounded",children:"ðŸ’¡ è§¦å‘æ¨¡å¼100%å‘é€ï¼Œéšæœºæ¨¡å¼æŒ‰æ¦‚çŽ‡å‘é€ã€‚"})]})]})]}),"off"!==eo.eventEnabled&&(0,a.jsxs)(s.Card,{children:[(0,a.jsxs)(s.CardHeader,{children:[(0,a.jsxs)(s.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(j.Sparkles,{className:"h-4 w-4"}),"äº‹ä»¶é…ç½®"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"æ¯ä¸ªäº‹ä»¶å¯ç‹¬ç«‹é…ç½®å“åº”æ¦‚çŽ‡ï¼Œå¼€å¯åŽé»˜è®¤100%"})]}),(0,a.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,a.jsxs)(H,{icon:(0,a.jsx)(M.UserPlus,{className:"h-4 w-4 text-green-500"}),title:"å…¥ç¾¤æ¬¢è¿Ž",enabled:eo.welcomeEnabled,onEnabledChange:e=>{let a={welcomeEnabled:e};"on"===e&&"inherit"===eo.welcomeProbability&&(a.welcomeProbability=1),ed({...eo,...a})},probability:eo.welcomeProbability,onProbabilityChange:e=>ed({...eo,welcomeProbability:e}),children:[(0,a.jsx)(n.Input,{value:eo.welcomeMessage,onChange:e=>ed({...eo,welcomeMessage:e.target.value}),placeholder:"å›ºå®šæ¬¢è¿Žè¯­ï¼ˆç•™ç©ºä½¿ç”¨AIç”Ÿæˆï¼‰",className:"h-8 text-sm"}),(0,a.jsx)(c.Textarea,{value:eo.welcomePrompt,onChange:e=>ed({...eo,welcomePrompt:e.target.value}),placeholder:"AIæ¬¢è¿Žæç¤ºè¯",rows:2,className:"text-sm"})]}),(0,a.jsx)(H,{icon:(0,a.jsx)(S.UserMinus,{className:"h-4 w-4 text-red-500"}),title:"é€€ç¾¤å‘Šåˆ«",enabled:eo.goodbyeEnabled,onEnabledChange:e=>{let a={goodbyeEnabled:e};"on"===e&&"inherit"===eo.goodbyeProbability&&(a.goodbyeProbability=1),ed({...eo,...a})},probability:eo.goodbyeProbability,onProbabilityChange:e=>ed({...eo,goodbyeProbability:e}),children:(0,a.jsx)(c.Textarea,{value:eo.goodbyePrompt,onChange:e=>ed({...eo,goodbyePrompt:e.target.value}),placeholder:"AIå‘Šåˆ«æç¤ºè¯",rows:2,className:"text-sm"})}),(0,a.jsx)(H,{icon:(0,a.jsx)(K,{className:"h-4 w-4 text-orange-500"}),title:"æˆ³ä¸€æˆ³",enabled:eo.pokeEnabled,onEnabledChange:e=>{let a={pokeEnabled:e};"on"===e&&"inherit"===eo.pokeProbability&&(a.pokeProbability=1),ed({...eo,...a})},probability:eo.pokeProbability,onProbabilityChange:e=>ed({...eo,pokeProbability:e}),children:(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æˆ³å›žåŽ»"}),(0,a.jsx)(d.Switch,{checked:eo.pokeBack,onCheckedChange:e=>ed({...eo,pokeBack:e})})]})}),(0,a.jsx)(H,{icon:(0,a.jsx)("span",{className:"text-sm",children:"ðŸ”„"}),title:"æ’¤å›žå“åº”",enabled:eo.recallEnabled,onEnabledChange:e=>{let a={recallEnabled:e};"on"===e&&"inherit"===eo.recallProbability&&(a.recallProbability=1),ed({...eo,...a})},probability:eo.recallProbability,onProbabilityChange:e=>ed({...eo,recallProbability:e})}),(0,a.jsx)(H,{icon:(0,a.jsx)("span",{className:"text-sm",children:"ðŸ”‡"}),title:"ç¦è¨€å“åº”",enabled:eo.banEnabled,onEnabledChange:e=>{let a={banEnabled:e};"on"===e&&"inherit"===eo.banProbability&&(a.banProbability=1),ed({...eo,...a})},probability:eo.banProbability,onProbabilityChange:e=>ed({...eo,banProbability:e})}),(0,a.jsx)(H,{icon:(0,a.jsx)("span",{className:"text-sm",children:"ðŸ§§"}),title:"è¿æ°”çŽ‹å“åº”",enabled:eo.luckyKingEnabled,onEnabledChange:e=>{let a={luckyKingEnabled:e};"on"===e&&"inherit"===eo.luckyKingProbability&&(a.luckyKingProbability=1),ed({...eo,...a})},probability:eo.luckyKingProbability,onProbabilityChange:e=>ed({...eo,luckyKingProbability:e})}),(0,a.jsx)(H,{icon:(0,a.jsx)("span",{className:"text-sm",children:"ðŸ†"}),title:"è£èª‰å˜æ›´",enabled:eo.honorEnabled,onEnabledChange:e=>{let a={honorEnabled:e};"on"===e&&"inherit"===eo.honorProbability&&(a.honorProbability=1),ed({...eo,...a})},probability:eo.honorProbability,onProbabilityChange:e=>ed({...eo,honorProbability:e})}),(0,a.jsx)(H,{icon:(0,a.jsx)("span",{className:"text-sm",children:"â­"}),title:"ç²¾åŽæ¶ˆæ¯",enabled:eo.essenceEnabled,onEnabledChange:e=>{let a={essenceEnabled:e};"on"===e&&"inherit"===eo.essenceProbability&&(a.essenceProbability=1),ed({...eo,...a})},probability:eo.essenceProbability,onProbabilityChange:e=>ed({...eo,essenceProbability:e})}),(0,a.jsx)(H,{icon:(0,a.jsx)("span",{className:"text-sm",children:"ðŸ‘‘"}),title:"ç®¡ç†å‘˜å˜æ›´",enabled:eo.adminEnabled,onEnabledChange:e=>{let a={adminEnabled:e};"on"===e&&"inherit"===eo.adminProbability&&(a.adminProbability=1),ed({...eo,...a})},probability:eo.adminProbability,onProbabilityChange:e=>ed({...eo,adminProbability:e})})]})]})]}),(0,a.jsx)(m.TabsContent,{value:"bym",className:"space-y-4",children:(0,a.jsxs)(s.Card,{children:[(0,a.jsxs)(s.CardHeader,{children:[(0,a.jsxs)(s.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(k.Smile,{className:"h-4 w-4"}),"ä¼ªäººæ¨¡å¼"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"æ¨¡æ‹ŸçœŸäººèŠå¤©é£Žæ ¼ï¼Œéšæœºå‚ä¸Žç¾¤èŠ"})]}),(0,a.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,a.jsx)(U,{icon:(0,a.jsx)(k.Smile,{className:"h-4 w-4 text-orange-500"}),title:"å¯ç”¨ä¼ªäºº",desc:"å¼€å¯åŽæœºå™¨äººä¼šéšæœºå›žå¤ç¾¤æ¶ˆæ¯",value:eo.bymEnabled,onChange:e=>ed({...eo,bymEnabled:e})}),"off"!==eo.bymEnabled&&(0,a.jsxs)("div",{className:"space-y-4 ml-4 pl-4 border-l-2 border-muted",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ä¼ªäººé¢„è®¾"}),(0,a.jsxs)(h.Select,{value:eo.bymPresetId||"__none__",onValueChange:e=>ed({...eo,bymPresetId:"__none__"===e?"":e}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{placeholder:"ä¸ä½¿ç”¨é¢„è®¾"})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"__none__",children:"ä¸ä½¿ç”¨é¢„è®¾"}),Z.map(e=>(0,a.jsx)(h.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)(Q,{label:"ä¼ªäººæ¨¡åž‹",value:eo.bymModel,models:ee,onChange:e=>ed({...eo,bymModel:e}),placeholder:"ä½¿ç”¨å…¨å±€"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ä¼ªäººæç¤ºè¯"}),(0,a.jsx)(c.Textarea,{value:eo.bymPrompt,onChange:e=>ed({...eo,bymPrompt:e.target.value}),placeholder:"è‡ªå®šä¹‰ä¼ªäººäººè®¾ï¼ˆç•™ç©ºä½¿ç”¨é¢„è®¾æˆ–å…¨å±€ï¼‰",rows:2})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"å›žå¤æ¦‚çŽ‡"}),(0,a.jsx)(t.Button,{variant:"ghost",size:"sm",className:"h-4 text-[10px] px-1",onClick:()=>ed({...eo,bymProbability:"inherit"===eo.bymProbability?.02:"inherit"}),children:"inherit"===eo.bymProbability?"ç»§æ‰¿":"è‡ªå®šä¹‰"})]}),"inherit"!==eo.bymProbability&&(0,a.jsx)(A,{label:"",value:eo.bymProbability,onChange:e=>ed({...eo,bymProbability:e}),className:"pt-1"}),"inherit"===eo.bymProbability&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground h-8 flex items-center",children:"ä½¿ç”¨å…¨å±€è®¾ç½®"})]}),(0,a.jsx)(D,{label:"æ¸©åº¦",min:0,max:2,step:.1,value:"inherit"===eo.bymTemperature?"":eo.bymTemperature,onChange:e=>ed({...eo,bymTemperature:""===e.target.value?"inherit":Number(e.target.value)}),placeholder:"ç»§æ‰¿"}),(0,a.jsx)(D,{label:"æœ€å¤§Token",min:0,value:"inherit"===eo.bymMaxTokens?"":eo.bymMaxTokens,onChange:e=>ed({...eo,bymMaxTokens:""===e.target.value?"inherit":Number(e.target.value)}),placeholder:"ç»§æ‰¿"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"å›žå¤é•¿åº¦"}),(0,a.jsxs)(h.Select,{value:eo.bymReplyLength,onValueChange:e=>ed({...eo,bymReplyLength:e}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"short",children:"ç®€çŸ­"}),(0,a.jsx)(h.SelectItem,{value:"medium",children:"é€‚ä¸­"}),(0,a.jsx)(h.SelectItem,{value:"long",children:"è¯¦ç»†"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{className:"text-sm",children:"ä½¿ç”¨è¡¨æƒ…"}),(0,a.jsx)(d.Switch,{checked:eo.bymUseEmoji,onCheckedChange:e=>ed({...eo,bymUseEmoji:e})})]})]}),(0,a.jsx)(U,{icon:(0,a.jsx)(w.Clock,{className:"h-4 w-4 text-blue-500"}),title:"ä¸»åŠ¨å‘è¨€",desc:"æ ¹æ®ç¾¤èŠå†…å®¹ä¸»åŠ¨å‚ä¸Žè®¨è®º",value:eo.proactiveChatEnabled,onChange:e=>ed({...eo,proactiveChatEnabled:e})}),"off"!==eo.proactiveChatEnabled&&(0,a.jsxs)("div",{className:"space-y-3 ml-4 pl-4 border-l-2 border-muted",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"è§¦å‘æ¦‚çŽ‡"}),(0,a.jsx)(t.Button,{variant:"ghost",size:"sm",className:"h-6 text-xs px-2",onClick:()=>ed({...eo,proactiveChatProbability:"inherit"===eo.proactiveChatProbability?.05:"inherit"}),children:"inherit"===eo.proactiveChatProbability?"ç»§æ‰¿":"è‡ªå®šä¹‰"})]}),"inherit"!==eo.proactiveChatProbability&&(0,a.jsx)(A,{label:"",value:eo.proactiveChatProbability,onChange:e=>ed({...eo,proactiveChatProbability:e}),className:"pt-1"})]}),(0,a.jsx)(D,{label:"å†·å´æ—¶é—´(ç§’)",min:0,value:"inherit"===eo.proactiveChatCooldown?"":eo.proactiveChatCooldown,onChange:e=>ed({...eo,proactiveChatCooldown:""===e.target.value?"inherit":Number(e.target.value)}),placeholder:"ç»§æ‰¿"}),(0,a.jsx)(D,{label:"æ¯æ—¥ä¸Šé™",min:0,value:"inherit"===eo.proactiveChatMaxDaily?"":eo.proactiveChatMaxDaily,onChange:e=>ed({...eo,proactiveChatMaxDaily:""===e.target.value?"inherit":Number(e.target.value)}),placeholder:"ç»§æ‰¿"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 pt-2 border-t",children:[(0,a.jsx)(D,{label:"æœ€å°‘æ¶ˆæ¯æ•°",min:1,value:eo.proactiveChatMinMessages,onChange:e=>ed({...eo,proactiveChatMinMessages:parseInt(e.target.value)||5})}),(0,a.jsx)(D,{label:"å¼€å§‹æ—¶é—´",min:0,max:23,value:eo.proactiveChatTimeStart,onChange:e=>ed({...eo,proactiveChatTimeStart:parseInt(e.target.value)||8})}),(0,a.jsx)(D,{label:"ç»“æŸæ—¶é—´",min:0,max:23,value:eo.proactiveChatTimeEnd,onChange:e=>ed({...eo,proactiveChatTimeEnd:parseInt(e.target.value)||23})})]})]})]})]})}),(0,a.jsxs)(m.TabsContent,{value:"channel",className:"space-y-4",children:[(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(s.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(I.Server,{className:"h-4 w-4"}),"ç¾¤ç‹¬ç«‹æ¸ é“"]}),(0,a.jsxs)(t.Button,{size:"sm",onClick:()=>{et(null),er({name:`æ¸ é“${eo.independentChannels.length+1}`,baseUrl:"",apiKey:"",adapterType:"openai",models:"",enabled:!0,priority:eo.independentChannels.length,modelsPath:"",chatPath:"",imageTransferMode:"auto",imageCompress:!0,imageQuality:85,imageMaxSize:4096}),el(!0)},children:[(0,a.jsx)(_.Plus,{className:"h-4 w-4 mr-1"}),"æ·»åŠ æ¸ é“"]})]})}),(0,a.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"ä¸ºæœ¬ç¾¤é…ç½®ç‹¬ç«‹çš„APIæ¸ é“ï¼Œæ”¯æŒå¤šä¸ªæ¸ é“å’ŒèŽ·å–æ¨¡åž‹åˆ—è¡¨"}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-orange-500/10",children:(0,a.jsx)(I.Server,{className:"h-4 w-4 text-orange-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"å¼ºåˆ¶ä½¿ç”¨æœ¬ç¾¤æ¸ é“"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"å¼€å¯åŽæœ¬ç¾¤å°†å®Œå…¨éš”ç¦»å…¨å±€æ¨¡åž‹ï¼Œä»…ä½¿ç”¨ä¸‹æ–¹ç‹¬ç«‹é…ç½®"})]})]}),(0,a.jsx)(d.Switch,{checked:eo.forbidGlobalModel,onCheckedChange:e=>ed({...eo,forbidGlobalModel:e})})]}),0===eo.independentChannels.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground border rounded-lg border-dashed",children:[(0,a.jsx)(I.Server,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"æš‚æ— ç‹¬ç«‹æ¸ é“"}),(0,a.jsx)("p",{className:"text-xs",children:"ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ æ¸ é“"})]}):(0,a.jsx)("div",{className:"space-y-3",children:eo.independentChannels.map((e,i)=>(0,a.jsx)("div",{className:"p-4 rounded-lg border bg-card",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-medium",children:e.name}),(0,a.jsx)(o.Badge,{variant:e.enabled?"default":"secondary",children:e.enabled?"å¯ç”¨":"ç¦ç”¨"}),(0,a.jsx)(o.Badge,{variant:"outline",children:e.adapterType})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:e.baseUrl||"ä½¿ç”¨é»˜è®¤åœ°å€"}),e.models.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.models.slice(0,3).map(e=>(0,a.jsx)(o.Badge,{variant:"outline",className:"text-xs",children:e},e)),e.models.length>3&&(0,a.jsxs)(o.Badge,{variant:"outline",className:"text-xs",children:["+",e.models.length-3]})]})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(t.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{et(i),er({name:e.name,baseUrl:e.baseUrl,apiKey:e.apiKey,adapterType:e.adapterType,models:e.models.join(", "),enabled:e.enabled,priority:e.priority,modelsPath:e.modelsPath||"",chatPath:e.chatPath||"",imageTransferMode:e.imageConfig?.transferMode||"auto",imageCompress:e.imageConfig?.compress??!0,imageQuality:e.imageConfig?.quality??85,imageMaxSize:e.imageConfig?.maxSize??4096}),el(!0)},children:(0,a.jsx)(y.Settings,{className:"h-4 w-4"})}),(0,a.jsx)(t.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>{ed({...eo,independentChannels:eo.independentChannels.filter((e,a)=>a!==i)})},children:(0,a.jsx)(R.Trash2,{className:"h-4 w-4"})})]})]})},e.id))})]})]}),(0,a.jsx)(F.ChannelDialog,{open:ei,onOpenChange:el,channelForm:en,onChannelFormChange:er,isEditing:null!==es,onSave:()=>{if(!en.name)return void b.toast.error("è¯·å¡«å†™æ¸ é“åç§°");let e={id:null!==es?eo.independentChannels[es].id:`ch_${Date.now()}`,name:en.name,baseUrl:en.baseUrl,apiKey:en.apiKey,adapterType:en.adapterType,models:en.models.split(",").map(e=>e.trim()).filter(Boolean),enabled:en.enabled,priority:en.priority,modelsPath:en.modelsPath||void 0,chatPath:en.chatPath||void 0,imageConfig:{transferMode:en.imageTransferMode,compress:en.imageCompress,quality:en.imageQuality,maxSize:en.imageMaxSize}};if(null!==es){let a=[...eo.independentChannels];a[es]=e,ed({...eo,independentChannels:a})}else ed({...eo,independentChannels:[...eo.independentChannels,e]});el(!1),b.toast.success(null!==es?"æ¸ é“å·²æ›´æ–°":"æ¸ é“å·²æ·»åŠ ")},onFetchModels:async()=>{if(!en.apiKey)return void b.toast.error("è¯·å…ˆå¡«å†™ API Key");try{let e=await V.channelsApi.fetchModels({adapterType:en.adapterType,baseUrl:en.baseUrl||"",apiKey:en.apiKey}),a=e?.data?.models||e?.models||[];if(!Array.isArray(a)||!(a.length>0))return b.toast.error("æœªèŽ·å–åˆ°æ¨¡åž‹åˆ—è¡¨"),[];{let e=a.map(e=>"string"==typeof e?e:e?.id||e?.name).filter(Boolean);return b.toast.success(`èŽ·å–åˆ° ${e.length} ä¸ªæ¨¡åž‹`),e}}catch(e){return b.toast.error(e.response?.data?.message||"èŽ·å–æ¨¡åž‹å¤±è´¥"),[]}}}),(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsxs)(s.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(L.Gauge,{className:"h-4 w-4"}),"ä½¿ç”¨é™åˆ¶"]})}),(0,a.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"è®¾ç½®æœ¬ç¾¤æ¯æ—¥ä½¿ç”¨æ¬¡æ•°é™åˆ¶ï¼ˆ0è¡¨ç¤ºæ— é™åˆ¶ï¼‰"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ç¾¤æ¯æ—¥é™åˆ¶"}),(0,a.jsx)(n.Input,{type:"number",min:0,value:eo.dailyGroupLimit,onChange:e=>ed({...eo,dailyGroupLimit:parseInt(e.target.value)||0}),placeholder:"0 = æ— é™åˆ¶"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ç”¨æˆ·æ¯æ—¥é™åˆ¶"}),(0,a.jsx)(n.Input,{type:"number",min:0,value:eo.dailyUserLimit,onChange:e=>ed({...eo,dailyUserLimit:parseInt(e.target.value)||0}),placeholder:"0 = æ— é™åˆ¶"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"è¾¾åˆ°é™åˆ¶æ—¶çš„æç¤º"}),(0,a.jsx)(c.Textarea,{value:eo.usageLimitMessage,onChange:e=>ed({...eo,usageLimitMessage:e.target.value}),placeholder:"ä»Šæ—¥ä½¿ç”¨æ¬¡æ•°å·²è¾¾ä¸Šé™ï¼Œè¯·æ˜Žå¤©å†è¯•",rows:2})]})]})]})]}),(0,a.jsxs)(m.TabsContent,{value:"advanced",className:"space-y-4",children:[(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsxs)(s.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(E.Bot,{className:"h-4 w-4"}),"æ¨¡åž‹é…ç½®"]})}),(0,a.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"ä¸ºæœ¬ç¾¤é…ç½®å„åœºæ™¯ç‹¬ç«‹æ¨¡åž‹ï¼ˆç•™ç©ºä½¿ç”¨å…¨å±€é…ç½®ï¼‰"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)(Q,{label:"å¯¹è¯æ¨¡åž‹",value:eo.chatModel,models:ee,onChange:e=>ed({...eo,chatModel:e})}),(0,a.jsx)(Q,{label:"æ€»ç»“æ¨¡åž‹",value:eo.summaryModel,models:ee,onChange:e=>ed({...eo,summaryModel:e})}),(0,a.jsx)(Q,{label:"ä¼ªäººæ¨¡åž‹",value:eo.bymModel,models:ee,onChange:e=>ed({...eo,bymModel:e})}),(0,a.jsx)(Q,{label:"ç»˜å›¾æ¨¡åž‹",value:eo.imageGenModel,models:ee,onChange:e=>ed({...eo,imageGenModel:e})})]})]})]}),(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsxs)(s.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(v.BookOpen,{className:"h-4 w-4"}),"ç¾¤ç»„çŸ¥è¯†åº“"]})}),(0,a.jsxs)(s.CardContent,{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"ä¸ºæœ¬ç¾¤é…ç½®ä¸“å±žçŸ¥è¯†åº“"}),eo.knowledgeIds.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:eo.knowledgeIds.map(e=>{let i=W.find(a=>a.id===e);return(0,a.jsxs)(o.Badge,{variant:"secondary",className:"gap-1",children:[i?.name||e,(0,a.jsx)("button",{onClick:()=>ed({...eo,knowledgeIds:eo.knowledgeIds.filter(a=>a!==e)}),children:(0,a.jsx)(f.X,{className:"h-3 w-3"})})]},e)})}),(0,a.jsxs)(h.Select,{value:"",onValueChange:e=>e&&!eo.knowledgeIds.includes(e)&&ed({...eo,knowledgeIds:[...eo.knowledgeIds,e]}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{placeholder:"æ·»åŠ çŸ¥è¯†åº“..."})}),(0,a.jsx)(h.SelectContent,{children:W.filter(e=>!eo.knowledgeIds.includes(e.id)).map(e=>(0,a.jsx)(h.SelectItem,{value:e.id,children:e.name},e.id))})]})]})]})]})]})]})}e.s(["GroupEditor",()=>O],5945)}]);