(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73956,e=>{"use strict";var s=e.i(69287),a=e.i(71317),t=e.i(39079),i=e.i(64022),l=e.i(39124),n=e.i(92407),r=e.i(9102),c=e.i(51377),o=e.i(69895),d=e.i(10751),m=e.i(86463),h=e.i(47970),p=e.i(40050),x=e.i(26607),u=e.i(98509),g=e.i(79342),j=e.i(60713),y=e.i(35771),f=e.i(50788),v=e.i(89908),b=e.i(35670),N=e.i(97058),k=e.i(58489),w=e.i(61176),C=e.i(84518),K=e.i(96340),A=e.i(4084),I=e.i(62754),T=e.i(3190),S=e.i(60422),P=e.i(43939),M=e.i(59316),L=e.i(35819),B=e.i(74940),U=e.i(96173),G=e.i(86868),D=e.i(71355),z=e.i(47509),F=e.i(50974);let O=(0,F.default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var q=e.i(60381),V=e.i(85876),H=e.i(49165),$=e.i(39048);let E=[{value:"round-robin",label:"è½®è¯¢",desc:"æŒ‰é¡ºåºä¾æ¬¡ä½¿ç”¨"},{value:"random",label:"éšæœº",desc:"éšæœºé€‰æ‹©ä¸€ä¸ªKey"},{value:"weighted",label:"æƒé‡",desc:"æ ¹æ®æƒé‡éšæœºåˆ†é…"},{value:"least-used",label:"æœ€å°‘ä½¿ç”¨",desc:"ä¼˜å…ˆä½¿ç”¨è°ƒç”¨æ¬¡æ•°æœ€å°‘çš„"},{value:"failover",label:"æ•…éšœè½¬ç§»",desc:"æŒ‰é¡ºåºä½¿ç”¨ï¼Œå¤±è´¥ååˆ‡æ¢ä¸‹ä¸€ä¸ª"}];function R({apiKeys:e,strategy:o,onChange:h,showStats:x=!1}){let[u,f]=(0,a.useState)(!1),[v,b]=(0,a.useState)(null),[N,k]=(0,a.useState)({key:"",name:"",enabled:!0,weight:100}),[K,I]=(0,a.useState)({}),[T,S]=(0,a.useState)(""),[P,M]=(0,a.useState)(!1),L=s=>{void 0!==s&&e[s]?(b(s),k({...e[s]})):(b(null),k({key:"",name:`Key ${e.length+1}`,enabled:!0,weight:100})),f(!0)};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n.Label,{children:"è½®è¯¢ç­–ç•¥"}),(0,s.jsxs)(m.Select,{value:o,onValueChange:s=>h(e,s),children:[(0,s.jsx)(m.SelectTrigger,{children:(0,s.jsx)(m.SelectValue,{})}),(0,s.jsx)(m.SelectContent,{children:E.map(e=>(0,s.jsx)(m.SelectItem,{value:e.value,children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{children:e.label}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:e.desc})]})},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(n.Label,{children:["API Keys (",e.length,")"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>M(!0),children:"æ‰¹é‡å¯¼å…¥"}),(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>L(),children:[(0,s.jsx)(j.Plus,{className:"h-4 w-4 mr-1"}),"æ·»åŠ "]})]})]}),0===e.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground border rounded-lg border-dashed",children:'æš‚æ— API Keyï¼Œç‚¹å‡»"æ·»åŠ "æŒ‰é’®æ·»åŠ '}):(0,s.jsx)("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-1",children:e.map((a,l)=>{var n;return(0,s.jsx)(t.Card,{className:(0,$.cn)("transition-opacity",!a.enabled&&"opacity-50"),children:(0,s.jsx)(t.CardContent,{className:"p-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(O,{className:"h-4 w-4 text-muted-foreground cursor-grab"}),(0,s.jsx)(p.TooltipProvider,{children:(0,s.jsxs)(p.Tooltip,{children:[(0,s.jsx)(p.TooltipTrigger,{children:a.errorCount&&a.errorCount>=5?(0,s.jsx)(q.AlertCircle,{className:"h-4 w-4 text-destructive"}):a.enabled?(0,s.jsx)(A.CheckCircle,{className:"h-4 w-4 text-green-500"}):(0,s.jsx)("div",{className:"h-4 w-4 rounded-full border-2 border-muted-foreground"})}),(0,s.jsx)(p.TooltipContent,{children:a.errorCount&&a.errorCount>=5?`é”™è¯¯æ¬¡æ•°è¿‡å¤š (${a.errorCount})`:a.enabled?"å·²å¯ç”¨":"å·²ç¦ç”¨"})]})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-sm truncate",children:a.name}),"weighted"===o&&(0,s.jsxs)(c.Badge,{variant:"secondary",className:"text-xs",children:["æƒé‡: ",a.weight]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)("code",{className:"text-xs text-muted-foreground font-mono",children:K[l]?a.key:(n=a.key).length<=12?"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢":`${n.substring(0,8)}â€¢â€¢â€¢â€¢${n.slice(-4)}`}),(0,s.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>I(e=>({...e,[l]:!e[l]})),children:K[l]?(0,s.jsx)(C.EyeOff,{className:"h-3 w-3"}):(0,s.jsx)(w.Eye,{className:"h-3 w-3"})}),(0,s.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>{var e;return e=a.key,void(navigator.clipboard.writeText(e),g.toast.success("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"))},children:(0,s.jsx)(V.Copy,{className:"h-3 w-3"})})]}),x&&(0,s.jsxs)("div",{className:"flex gap-3 mt-1 text-xs text-muted-foreground",children:[void 0!==a.usageCount&&(0,s.jsxs)("span",{children:["è°ƒç”¨: ",a.usageCount]}),void 0!==a.errorCount&&a.errorCount>0&&(0,s.jsxs)("span",{className:"text-destructive",children:["é”™è¯¯: ",a.errorCount]}),a.lastUsed&&(0,s.jsxs)("span",{children:["æœ€åä½¿ç”¨: ",new Date(a.lastUsed).toLocaleString()]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[a.errorCount&&a.errorCount>0&&(0,s.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{let s;(s=[...e])[l]={...s[l],errorCount:0,lastError:void 0},h(s,o),g.toast.success("å·²é‡ç½®é”™è¯¯è®¡æ•°")},children:(0,s.jsx)(H.RotateCcw,{className:"h-4 w-4"})}),(0,s.jsx)(r.Switch,{checked:a.enabled,onCheckedChange:()=>{let s;(s=[...e])[l]={...s[l],enabled:!s[l].enabled},h(s,o)}}),(0,s.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>L(l),children:(0,s.jsx)(w.Eye,{className:"h-4 w-4"})}),(0,s.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>{h(e.filter((e,s)=>s!==l),o)},children:(0,s.jsx)(y.Trash2,{className:"h-4 w-4"})})]})]})})},l)})})]}),(0,s.jsx)(d.Dialog,{open:u,onOpenChange:f,children:(0,s.jsxs)(d.DialogContent,{children:[(0,s.jsxs)(d.DialogHeader,{children:[(0,s.jsx)(d.DialogTitle,{children:null!==v?"ç¼–è¾‘ API Key":"æ·»åŠ  API Key"}),(0,s.jsx)(d.DialogDescription,{children:"é…ç½®API Keyçš„åç§°ã€å¯†é’¥å’Œæƒé‡"})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n.Label,{htmlFor:"keyName",children:"åç§°"}),(0,s.jsx)(l.Input,{id:"keyName",value:N.name,onChange:e=>k({...N,name:e.target.value}),placeholder:"Key 1"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n.Label,{htmlFor:"keyValue",children:"API Key"}),(0,s.jsx)(l.Input,{id:"keyValue",type:"password",value:N.key,onChange:e=>k({...N,key:e.target.value}),placeholder:"sk-..."})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(n.Label,{children:"æƒé‡"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:N.weight})]}),(0,s.jsx)(z.Slider,{value:[N.weight],min:1,max:100,step:1,onValueChange:e=>k({...N,weight:e[0]})}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:'æƒé‡è¶Šé«˜ï¼Œåœ¨"æƒé‡"ç­–ç•¥ä¸‹è¢«é€‰ä¸­çš„æ¦‚ç‡è¶Šå¤§'})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.Label,{children:"å¯ç”¨"}),(0,s.jsx)(r.Switch,{checked:N.enabled,onCheckedChange:e=>k({...N,enabled:e})})]})]}),(0,s.jsxs)(d.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>f(!1),children:"å–æ¶ˆ"}),(0,s.jsx)(i.Button,{onClick:()=>{if(!N.key.trim())return void g.toast.error("è¯·è¾“å…¥API Key");let s=[...e];null!==v?s[v]=N:s.push(N),h(s,o),f(!1)},children:"ä¿å­˜"})]})]})}),(0,s.jsx)(d.Dialog,{open:P,onOpenChange:M,children:(0,s.jsxs)(d.DialogContent,{children:[(0,s.jsxs)(d.DialogHeader,{children:[(0,s.jsx)(d.DialogTitle,{children:"æ‰¹é‡å¯¼å…¥ API Keys"}),(0,s.jsx)(d.DialogDescription,{children:"æ¯è¡Œè¾“å…¥ä¸€ä¸ªAPI Key"})]}),(0,s.jsx)("textarea",{className:"w-full h-40 p-3 border rounded-md font-mono text-sm resize-none",value:T,onChange:e=>S(e.target.value),placeholder:"sk-key1... sk-key2... sk-key3..."}),(0,s.jsxs)(d.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>M(!1),children:"å–æ¶ˆ"}),(0,s.jsx)(i.Button,{onClick:()=>{let s=T.trim().split("\n").filter(Boolean);if(0===s.length)return void g.toast.error("è¯·è¾“å…¥API Keys");let a=new Set(e.map(e=>e.key.trim())),t=new Set,i=[],l=0;for(let e of s){let s=e.trim();if(s){if(a.has(s)||t.has(s)){l++;continue}t.add(s),i.push(s)}}if(0===i.length)return void g.toast.error("æ‰€æœ‰Keyéƒ½å·²å­˜åœ¨ï¼Œæ— éœ€å¯¼å…¥");let n=i.map((s,a)=>({key:s,name:`Key ${e.length+a+1}`,enabled:!0,weight:100}));h([...e,...n],o),M(!1),S(""),l>0?g.toast.success(`æˆåŠŸå¯¼å…¥ ${n.length} ä¸ªKeyï¼Œè·³è¿‡ ${l} ä¸ªé‡å¤`):g.toast.success(`æˆåŠŸå¯¼å…¥ ${n.length} ä¸ªKey`)},children:"å¯¼å…¥"})]})]})})]})}var _=e.i(722);let X=(0,F.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var J=e.i(26079),J=J,Q=e.i(80830),Y=e.i(32647),W=e.i(79923),Z=e.i(17020);function ee({open:e,onOpenChange:t,channelId:n,channelName:r,models:o}){let[m,p]=(0,a.useState)([]),[x,j]=(0,a.useState)(!1),[y,f]=(0,a.useState)(null),[b,N]=(0,a.useState)(new Map),[k,w]=(0,a.useState)(""),[C,K]=(0,a.useState)(1),[A,T]=(0,a.useState)("auto");(0,a.useEffect)(()=>{e&&o.length>0&&(p([...o]),N(new Map),K(1))},[e,o]);let S=o.filter(e=>e.toLowerCase().includes(k.toLowerCase())),P=Math.ceil(S.length/10),M=S.slice((C-1)*10,10*C),L=async e=>{f(e);try{let s=await u.channelsApi.testModel({channelId:n,model:e}),a=s?.data;N(s=>new Map(s).set(e,{model:e,success:a?.success??!1,elapsed:a?.elapsed??0,error:a?.error})),a?.success?g.toast.success(`${e} æµ‹è¯•æˆåŠŸ`):g.toast.error(`${e} æµ‹è¯•å¤±è´¥: ${a?.error||"æœªçŸ¥é”™è¯¯"}`)}catch(s){N(a=>new Map(a).set(e,{model:e,success:!1,elapsed:0,error:s.message})),g.toast.error(`${e} æµ‹è¯•å¤±è´¥: ${s.message}`)}finally{f(null)}},B=async()=>{if(0===m.length)return void g.toast.error("è¯·é€‰æ‹©è¦æµ‹è¯•çš„æ¨¡å‹");j(!0),N(new Map);try{let e=await u.channelsApi.batchTest({channelId:n,models:m,concurrency:3}),s=e?.data;if(s?.results){let e=new Map;s.results.forEach(s=>e.set(s.model,s)),N(e),g.toast.success(`æ‰¹é‡æµ‹è¯•å®Œæˆ: ${s.success||0}/${m.length} æˆåŠŸ`)}}catch(e){g.toast.error(`æ‰¹é‡æµ‹è¯•å¤±è´¥: ${e.message}`)}finally{j(!1)}};return(0,s.jsx)(d.Dialog,{open:e,onOpenChange:t,children:(0,s.jsxs)(d.DialogContent,{className:"sm:max-w-2xl max-h-[85vh] flex flex-col gap-0 p-0",children:[(0,s.jsx)(d.DialogHeader,{className:"px-6 py-4 border-b bg-muted/30",children:(0,s.jsxs)(d.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(Z.Play,{className:"h-5 w-5 text-primary"}),(0,s.jsxs)("span",{children:[r," æ¸ é“çš„æ¨¡å‹æµ‹è¯•"]}),(0,s.jsxs)(c.Badge,{variant:"secondary",className:"ml-2 font-normal",children:[o.length," ä¸ªæ¨¡å‹"]})]})}),(0,s.jsxs)("div",{className:"px-6 py-3 border-b bg-background flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(Q.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(l.Input,{placeholder:"æœç´¢æ¨¡å‹...",value:k,onChange:e=>{w(e.target.value),K(1)},className:"h-9 pl-9"})]}),(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{0===m.length?g.toast.error("æ²¡æœ‰é€‰ä¸­çš„æ¨¡å‹"):(navigator.clipboard.writeText(m.join(", ")),g.toast.success(`å·²å¤åˆ¶ ${m.length} ä¸ªæ¨¡å‹`))},className:"gap-1.5",children:[(0,s.jsx)(V.Copy,{className:"h-3.5 w-3.5"}),"å¤åˆ¶å·²é€‰"]}),(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{let e=Array.from(b.entries()).filter(([,e])=>e.success).map(([e])=>e);0===e.length?g.toast.error("æ²¡æœ‰æˆåŠŸçš„æ¨¡å‹"):(p(e),g.toast.success(`å·²é€‰æ‹© ${e.length} ä¸ªæˆåŠŸæ¨¡å‹`))},className:"gap-1.5",children:[(0,s.jsx)(Y.CheckCircle2,{className:"h-3.5 w-3.5"}),"é€‰æ‹©æˆåŠŸ"]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center px-6 py-2.5 border-b bg-muted/20 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:[(0,s.jsx)("div",{className:"w-10",children:(0,s.jsx)(_.Checkbox,{checked:m.length===S.length&&S.length>0,onCheckedChange:()=>{m.length===S.length?p([]):p([...S])}})}),(0,s.jsx)("div",{className:"flex-1",children:"æ¨¡å‹åç§°"}),(0,s.jsx)("div",{className:"w-24 text-center",children:"çŠ¶æ€"}),(0,s.jsx)("div",{className:"w-20 text-center",children:"æ“ä½œ"})]}),(0,s.jsx)(h.ScrollArea,{className:"h-[320px]",children:0===M.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-32 text-muted-foreground",children:"æš‚æ— æ¨¡å‹"}):M.map(e=>{let a=(e=>{if(y===e)return"æµ‹è¯•ä¸­";let s=b.get(e);return s?s.success?"æˆåŠŸ":"å¤±è´¥":"æœªå¼€å§‹"})(e),t=m.includes(e),l=b.get(e);return(0,s.jsxs)("div",{className:`flex items-center px-6 py-3 border-b transition-colors hover:bg-muted/40 ${t?"bg-primary/5":""}`,children:[(0,s.jsx)("div",{className:"w-10",children:(0,s.jsx)(_.Checkbox,{checked:t,onCheckedChange:()=>{p(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},disabled:x})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("span",{className:"font-mono text-sm truncate block",children:e}),l&&l.elapsed>0&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-0.5",children:[(0,s.jsx)(W.Clock,{className:"h-3 w-3"}),l.elapsed,"ms"]})]}),(0,s.jsxs)("div",{className:"w-24 text-center",children:["æˆåŠŸ"===a&&(0,s.jsxs)(c.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 dark:bg-green-950 dark:text-green-400 dark:border-green-800 gap-1",children:[(0,s.jsx)(Y.CheckCircle2,{className:"h-3 w-3"}),"æˆåŠŸ"]}),"å¤±è´¥"===a&&(0,s.jsxs)(c.Badge,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 dark:bg-red-950 dark:text-red-400 dark:border-red-800 gap-1",children:[(0,s.jsx)(I.XCircle,{className:"h-3 w-3"}),"å¤±è´¥"]}),"æµ‹è¯•ä¸­"===a&&(0,s.jsxs)(c.Badge,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-950 dark:text-blue-400 dark:border-blue-800 gap-1",children:[(0,s.jsx)(v.Loader2,{className:"h-3 w-3 animate-spin"}),"æµ‹è¯•ä¸­"]}),"æœªå¼€å§‹"===a&&(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"æœªå¼€å§‹"})]}),(0,s.jsx)("div",{className:"w-20 text-center",children:(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",className:"h-7 px-2 text-primary hover:text-primary",onClick:()=>L(e),disabled:x||y===e,children:y===e?(0,s.jsx)(v.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(Z.Play,{className:"h-3.5 w-3.5"}),"æµ‹è¯•"]})})})]},e)})})]}),(0,s.jsxs)("div",{className:"px-6 py-3 border-t bg-muted/20 flex items-center justify-between text-sm",children:[(0,s.jsxs)("span",{className:"text-muted-foreground",children:["æ˜¾ç¤ºç¬¬ ",(C-1)*10+1," æ¡-ç¬¬ ",Math.min(10*C,S.length)," æ¡, å…± ",S.length," æ¡"]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>K(e=>Math.max(1,e-1)),disabled:1===C,children:(0,s.jsx)(X,{className:"h-4 w-4"})}),Array.from({length:Math.min(5,P)},(e,a)=>{let t;return t=P<=5||C<=3?a+1:C>=P-2?P-4+a:C-2+a,(0,s.jsx)(i.Button,{variant:C===t?"default":"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>K(t),children:t},t)}),(0,s.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>K(e=>Math.min(P,e+1)),disabled:C===P||0===P,children:(0,s.jsx)(J.default,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)(d.DialogFooter,{className:"px-6 py-4 border-t bg-background gap-2 sm:gap-2",children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>t(!1),children:"å–æ¶ˆ"}),(0,s.jsx)(i.Button,{onClick:B,disabled:x||0===m.length,children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"æµ‹è¯•ä¸­..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.Play,{className:"h-4 w-4 mr-2"}),"æ‰¹é‡æµ‹è¯•",m.length,"ä¸ªæ¨¡å‹"]})})]})]})})}var es=e.i(74816),ea=e.i(42765);let et=[{name:"å†…ç½®å…è´¹API",icon:"ğŸ†“",presets:["free-glm","free-xiaomi","free-gemini","free-grok","free-api","free-gemini2"]},{name:"å›½é™…å‚å•†",icon:"ğŸŒ",presets:["openai","gemini","claude","grok","mistral","cohere","groq"]},{name:"å›½å†…å‚å•†",icon:"ğŸ‡¨ğŸ‡³",presets:["deepseek","zhipu","qwen","baichuan","minimax","moonshot","yi","doubao","spark","hunyuan","baidu"]},{name:"ä¸­è½¬æœåŠ¡",icon:"ğŸ”„",presets:["openrouter","siliconflow","together","fireworks","novita"]}],ei={"free-glm":{name:"å…è´¹GLM",adapterType:"openai",baseUrl:"https://glm.openel.top/",apiKey:"sk-3d2f9b84e7f510b1a08f7b3d6c9a6a7f17fbbad5624ea29f22d9c742bf39c863",models:"GLM-4.6-V-thinking, GLM-4.5, GLM-4.5-Air, GLM-4.5-Air-search, GLM-4.5-Air-thinking, GLM-4.5-Air-thinking-search, GLM-4.5-Search, GLM-4.5-Thinking, GLM-4.5-V, GLM-4.5-V-search, GLM-4.5-V-thinking, GLM-4.5-V-thinking-search, GLM-4.5-search, GLM-4.5-thinking, GLM-4.5-thinking-search, GLM-4.6, GLM-4.6-Search, GLM-4.6-Thinking, GLM-4.6-V, GLM-4.6-V-search, GLM-4.6-V-thinking-search, GLM-4.6-search, GLM-4.6-thinking, GLM-4.6-thinking-search, glm-4-air-250414, glm-4-flash",description:"å…è´¹æ™ºè°±GLM API"},"free-gemini":{name:"å…è´¹Gemini",adapterType:"openai",baseUrl:"https://business2api.openel.top/",apiKey:"",models:"gemini-2.5-flash, gemini-2.5-flash-image, gemini-2.5-flash-search, gemini-2.5-flash-video, gemini-2.5-pro, gemini-2.5-pro-image, gemini-2.5-pro-search, gemini-2.5-pro-video, gemini-3-pro, gemini-3-pro-image, gemini-3-pro-preview, gemini-3-pro-preview-image, gemini-3-pro-preview-search, gemini-3-pro-preview-video, gemini-3-pro-search, gemini-3-pro-video, gemini-2.5-flash-preview-latest, gemini-2.5-flash-preview-latest-image, gemini-2.5-flash-preview-latest-search, gemini-2.5-flash-preview-latest-video, gemini-3-flash-image, gemini-3-flash-preview, gemini-3-flash-preview-image, gemini-3-flash-preview-search, gemini-3-flash-preview-video, gemini-3-flash-search, gemini-3-flash-video",description:"å…è´¹Gemini APIï¼Œéœ€å…ˆè·å–Key",authUrl:"https://business2api.openel.top/auth"},"free-grok":{name:"å…è´¹Grok",adapterType:"openai",baseUrl:"https://api.x.ai/v1",apiKey:"",models:"grok-3-mini, grok-3",description:"å…è´¹Grok APIï¼ˆé™é¢ï¼‰"},"free-xiaomi":{name:"å…è´¹å°ç±³MiMo",adapterType:"openai",baseUrl:"https://xiaomi.openel.top/",apiKey:"sk-3d2f9b84e7f510b1a08f7b3d6c9a6a7f17fbbad5624ea29f22d9c742bf39c863",models:"mimo-v2-flash-studio, mimo-v2-flash-studio-thinking, mimo-v2-flash-studio-search, mimo-v2-flash-studio-thinking-search, mimo-v2-flash-studio-search-thinking, mimo-v2-flash, mimo-v2-flash-thinking, mimo-v2-flash-search, mimo-v2-flash-thinking-search, mimo-v2-flash-search-thinking",description:"å…è´¹å°ç±³MiMo API"},"free-api":{name:"å…è´¹å†…ç½®æ¥å£",adapterType:"openai",baseUrl:"https://ai.openel.top/",apiKey:"sk-LnATx3JUr565w2Kmme1r5om3WkO2YAsglOPaVael6UfgswXj",models:"",description:"å…è´¹å¤šæ¨¡å‹ API"},"free-gemini2":{name:"å…è´¹Gemini2",adapterType:"openai",baseUrl:"https://demo.openel.top/",apiKey:"sk-3d2f9b84e7f510b1a08f7b3d6c9a6a7f17fbbad5624ea29f22d9c742bf39c863",models:"",description:"å…è´¹Geminiå¯¹è¯æ¥å£"},openai:{name:"OpenAI",adapterType:"openai",baseUrl:"https://api.openai.com/v1",apiKey:"",models:"gpt-4o, gpt-4o-mini, gpt-4-turbo, gpt-4.1, gpt-4.1-mini, o1, o1-mini, o3-mini",description:"OpenAIå®˜æ–¹API"},gemini:{name:"Google Gemini",adapterType:"gemini",baseUrl:"https://generativelanguage.googleapis.com",apiKey:"",models:"gemini-2.5-flash, gemini-2.5-pro, gemini-2.0-flash, gemini-1.5-pro, gemini-1.5-flash",description:"Google Geminiå®˜æ–¹API"},claude:{name:"Anthropic Claude",adapterType:"claude",baseUrl:"https://api.anthropic.com",apiKey:"",models:"claude-sonnet-4-20250514, claude-3-5-sonnet-20241022, claude-3-5-haiku-20241022, claude-3-opus-20240229",description:"Anthropic Claudeå®˜æ–¹API"},grok:{name:"xAI Grok",adapterType:"openai",baseUrl:"https://api.x.ai/v1",apiKey:"",models:"grok-3, grok-3-mini, grok-2, grok-2-mini",description:"xAI Grokå®˜æ–¹API"},mistral:{name:"Mistral AI",adapterType:"openai",baseUrl:"https://api.mistral.ai/v1",apiKey:"",models:"mistral-large-latest, mistral-medium-latest, mistral-small-latest, codestral-latest",description:"Mistral AIå®˜æ–¹API"},cohere:{name:"Cohere",adapterType:"openai",baseUrl:"https://api.cohere.ai/v1",apiKey:"",models:"command-r-plus, command-r, command-light",description:"Cohereå®˜æ–¹API"},groq:{name:"Groq",adapterType:"openai",baseUrl:"https://api.groq.com/openai/v1",apiKey:"",models:"llama-3.3-70b-versatile, llama-3.1-8b-instant, mixtral-8x7b-32768, gemma2-9b-it",description:"Groqè¶…å¿«æ¨ç†API"},deepseek:{name:"DeepSeek",adapterType:"openai",baseUrl:"https://api.deepseek.com/v1",apiKey:"",models:"deepseek-chat, deepseek-reasoner, deepseek-coder",description:"DeepSeekå®˜æ–¹API"},zhipu:{name:"æ™ºè°±AI",adapterType:"openai",baseUrl:"https://open.bigmodel.cn/api/paas/v4",apiKey:"",models:"glm-4-plus, glm-4-flash, glm-4-long, glm-4-air, glm-4v-plus, cogview-3-plus",description:"æ™ºè°±AIå®˜æ–¹API"},qwen:{name:"é˜¿é‡Œé€šä¹‰åƒé—®",adapterType:"openai",baseUrl:"https://dashscope.aliyuncs.com/compatible-mode/v1",apiKey:"",models:"qwen-max, qwen-plus, qwen-turbo, qwen-long, qwen-vl-max, qwen-coder-turbo",description:"é˜¿é‡Œäº‘é€šä¹‰åƒé—®API"},baichuan:{name:"ç™¾å·æ™ºèƒ½",adapterType:"openai",baseUrl:"https://api.baichuan-ai.com/v1",apiKey:"",models:"Baichuan4, Baichuan3-Turbo, Baichuan3-Turbo-128k",description:"ç™¾å·æ™ºèƒ½å®˜æ–¹API"},minimax:{name:"MiniMax",adapterType:"openai",baseUrl:"https://api.minimax.chat/v1",apiKey:"",models:"abab6.5s-chat, abab6.5g-chat, abab5.5-chat",description:"MiniMaxå®˜æ–¹API"},moonshot:{name:"æœˆä¹‹æš—é¢Kimi",adapterType:"openai",baseUrl:"https://api.moonshot.cn/v1",apiKey:"",models:"moonshot-v1-128k, moonshot-v1-32k, moonshot-v1-8k",description:"Moonshot Kimiå®˜æ–¹API"},yi:{name:"é›¶ä¸€ä¸‡ç‰©",adapterType:"openai",baseUrl:"https://api.lingyiwanwu.com/v1",apiKey:"",models:"yi-lightning, yi-large, yi-medium, yi-vision",description:"é›¶ä¸€ä¸‡ç‰©å®˜æ–¹API"},doubao:{name:"å­—èŠ‚è±†åŒ…",adapterType:"openai",baseUrl:"https://ark.cn-beijing.volces.com/api/v3",apiKey:"",models:"doubao-pro-32k, doubao-lite-32k, doubao-pro-128k",description:"å­—èŠ‚è·³åŠ¨è±†åŒ…APIï¼ˆéœ€é…ç½®endpointï¼‰"},spark:{name:"è®¯é£æ˜Ÿç«",adapterType:"openai",baseUrl:"https://spark-api-open.xf-yun.com/v1",apiKey:"",models:"generalv3.5, generalv3, 4.0Ultra",description:"è®¯é£æ˜Ÿç«è®¤çŸ¥å¤§æ¨¡å‹API"},hunyuan:{name:"è…¾è®¯æ··å…ƒ",adapterType:"openai",baseUrl:"https://api.hunyuan.cloud.tencent.com/v1",apiKey:"",models:"hunyuan-pro, hunyuan-standard, hunyuan-lite",description:"è…¾è®¯æ··å…ƒå¤§æ¨¡å‹API"},baidu:{name:"ç™¾åº¦æ–‡å¿ƒ",adapterType:"openai",baseUrl:"https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop",apiKey:"",models:"ernie-4.0-8k, ernie-3.5-8k, ernie-speed-128k",description:"ç™¾åº¦æ–‡å¿ƒä¸€è¨€APIï¼ˆéœ€è·å–access_tokenï¼‰"},openrouter:{name:"OpenRouter",adapterType:"openai",baseUrl:"https://openrouter.ai/api/v1",apiKey:"",models:"openai/gpt-4o, anthropic/claude-3.5-sonnet, google/gemini-pro, meta-llama/llama-3.1-70b-instruct",description:"OpenRouterå¤šæ¨¡å‹èšåˆ"},siliconflow:{name:"ç¡…åŸºæµåŠ¨",adapterType:"openai",baseUrl:"https://api.siliconflow.cn/v1",apiKey:"",models:"deepseek-ai/DeepSeek-V3, Qwen/Qwen2.5-72B-Instruct, THUDM/glm-4-9b-chat",description:"ç¡…åŸºæµåŠ¨APIï¼ˆå›½å†…ä¸­è½¬ï¼‰"},together:{name:"Together AI",adapterType:"openai",baseUrl:"https://api.together.xyz/v1",apiKey:"",models:"meta-llama/Llama-3.3-70B-Instruct-Turbo, Qwen/Qwen2.5-72B-Instruct-Turbo, mistralai/Mixtral-8x22B-Instruct-v0.1",description:"Together AIå¼€æºæ¨¡å‹æ‰˜ç®¡"},fireworks:{name:"Fireworks AI",adapterType:"openai",baseUrl:"https://api.fireworks.ai/inference/v1",apiKey:"",models:"accounts/fireworks/models/llama-v3p1-70b-instruct, accounts/fireworks/models/mixtral-8x22b-instruct",description:"Fireworks AIå¿«é€Ÿæ¨ç†"},novita:{name:"Novita AI",adapterType:"openai",baseUrl:"https://api.novita.ai/v3/openai",apiKey:"",models:"meta-llama/llama-3.1-70b-instruct, mistralai/mistral-nemo-12b-instruct",description:"Novita AIå¤šæ¨¡å‹æœåŠ¡"}};function el(){let[e,F]=(0,a.useState)([]),[O,q]=(0,a.useState)(!0),[V,H]=(0,a.useState)(!1),[$,_]=(0,a.useState)(null),[X,J]=(0,a.useState)(!1),[Q,Y]=(0,a.useState)(null),[W,Z]=(0,a.useState)(!1),[el,en]=(0,a.useState)(!1),[er,ec]=(0,a.useState)(!1),[eo,ed]=(0,a.useState)([]),[em,eh]=(0,a.useState)([]),[ep,ex]=(0,a.useState)(""),[eu,eg]=(0,a.useState)(!1),[ej,ey]=(0,a.useState)(null),[ef,ev]=(0,a.useState)({name:"",adapterType:"openai",baseUrl:"",apiKey:"",apiKeys:[],strategy:"round-robin",useMultiKey:!1,models:"",enabled:!0,priority:0,customHeaders:{},headersTemplate:"",requestBodyTemplate:"",advanced:{streaming:{enabled:!1,chunkSize:1024},thinking:{enableReasoning:!1,defaultLevel:"medium",adaptThinking:!0,sendThinkingAsMessage:!1},llm:{temperature:.7,maxTokens:4e3,topP:1,frequencyPenalty:0,presencePenalty:0}},imageConfig:{transferMode:"auto",convertFormat:!0,targetFormat:"auto",compress:!0,quality:85,maxSize:4096,processAnimated:!0}}),[eb,eN]=(0,a.useState)(""),[ek,ew]=(0,a.useState)(""),[eC,eK]=(0,a.useState)(!1),[eA,eI]=(0,a.useState)(!1),eT=async()=>{try{let e=await u.channelsApi.list(!0);F(e?.data||[])}catch(e){g.toast.error("åŠ è½½æ¸ é“å¤±è´¥"),console.error(e)}finally{q(!1)}};(0,a.useEffect)(()=>{eT()},[]);let eS=(e,s)=>{let a={...e};if(s&&"object"==typeof s)for(let t in e)t in s&&void 0!==s[t]&&null!==s[t]&&("object"!=typeof s[t]||Array.isArray(s[t])||"object"!=typeof e[t]?a[t]=s[t]:a[t]=eS(e[t],s[t]));return a},eP={streaming:{enabled:!1,chunkSize:1024},thinking:{enableReasoning:!1,defaultLevel:"medium",adaptThinking:!0,sendThinkingAsMessage:!1},llm:{temperature:.7,maxTokens:4e3,topP:1,frequencyPenalty:0,presencePenalty:0}},eM={transferMode:"auto",convertFormat:!0,targetFormat:"auto",compress:!0,quality:85,maxSize:4096,processAnimated:!0},eL=()=>{ev({name:"",adapterType:"openai",baseUrl:"",apiKey:"",apiKeys:[],strategy:"round-robin",useMultiKey:!1,models:"",enabled:!0,priority:0,customHeaders:{},headersTemplate:"",requestBodyTemplate:"",advanced:{...eP},imageConfig:{...eM}}),_(null),eI(!1),eK(!1),eN(""),ew("")},eB=e=>{if(e){_(e);let s=e.apiKeys&&e.apiKeys.length>0;ev({name:e.name||"",adapterType:e.adapterType||"openai",baseUrl:e.baseUrl||"",apiKey:e.apiKey||"",apiKeys:e.apiKeys||[],strategy:e.strategy||"round-robin",useMultiKey:s,models:e.models?.join(", ")||"",enabled:!1!==e.enabled,priority:e.priority||0,customHeaders:e.customHeaders||{},headersTemplate:e.headersTemplate||"",requestBodyTemplate:e.requestBodyTemplate||"",advanced:eS({...eP},e.advanced||{}),imageConfig:eS({...eM},e.imageConfig||{})})}else eL();H(!0)},eU=async()=>{if(!ef.name)return void g.toast.error("è¯·å¡«å†™æ¸ é“åç§°");if(ef.useMultiKey){if(0===ef.apiKeys.length)return void g.toast.error("è¯·è‡³å°‘æ·»åŠ ä¸€ä¸ª API Key")}else if(!ef.apiKey)return void g.toast.error("è¯·å¡«å†™ API Key");J(!0);try{let e={...ef,apiKey:ef.useMultiKey?ef.apiKeys[0]?.key||"":ef.apiKey,apiKeys:ef.useMultiKey?ef.apiKeys:[],strategy:ef.useMultiKey?ef.strategy:"round-robin",models:ef.models.split(",").map(e=>e.trim()).filter(Boolean),customHeaders:ef.customHeaders,headersTemplate:ef.headersTemplate,requestBodyTemplate:ef.requestBodyTemplate,imageConfig:ef.imageConfig};$?(await u.channelsApi.update($.id,e),g.toast.success("æ¸ é“å·²æ›´æ–°")):(await u.channelsApi.create(e),g.toast.success("æ¸ é“å·²åˆ›å»º")),H(!1),eL(),eT()}catch(e){g.toast.error("ä¿å­˜å¤±è´¥"),console.error(e)}finally{J(!1)}},eG=async e=>{if(confirm("ç¡®å®šåˆ é™¤æ­¤æ¸ é“ï¼Ÿ"))try{await u.channelsApi.delete(e),g.toast.success("æ¸ é“å·²åˆ é™¤"),eT()}catch(e){g.toast.error("åˆ é™¤å¤±è´¥"),console.error(e)}},eD=async e=>{Y(e.id);try{let s=await u.channelsApi.test({id:e.id,adapterType:e.adapterType,baseUrl:e.baseUrl,apiKey:e.apiKey,models:e.models});s?.data?.success||s?.success?g.toast.success(s?.data?.message||s?.message||"è¿æ¥æˆåŠŸ"):g.toast.error(s?.data?.message||s?.message||"è¿æ¥å¤±è´¥"),eT()}catch(e){g.toast.error(e.response?.data?.message||"æµ‹è¯•å¤±è´¥")}finally{Y(null)}},ez=async()=>{if(!ef.apiKey)return void g.toast.error("è¯·å…ˆå¡«å†™ API Key");Z(!0);try{let e=await u.channelsApi.fetchModels({adapterType:ef.adapterType,baseUrl:ef.baseUrl||"",apiKey:ef.apiKey}),s=e?.data?.models||e?.models||[];if(Array.isArray(s)&&s.length>0){let e=s.map(e=>"string"==typeof e?e:e?.id||e?.name).filter(Boolean);ed(e);let a=ef.models.split(",").map(e=>e.trim()).filter(Boolean);eh(a.filter(s=>e.includes(s))),ec(!0),g.toast.success(`è·å–åˆ° ${e.length} ä¸ªæ¨¡å‹`)}else g.toast.error("æœªè·å–åˆ°æ¨¡å‹åˆ—è¡¨")}catch(e){g.toast.error(e.response?.data?.message||"è·å–æ¨¡å‹å¤±è´¥")}finally{Z(!1)}};return O?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(o.Skeleton,{className:"h-8 w-32"}),(0,s.jsx)(o.Skeleton,{className:"h-10 w-24"})]}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[void 0,void 0,void 0].map((e,a)=>(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(o.Skeleton,{className:"h-6 w-32"})}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)(o.Skeleton,{className:"h-20 w-full"})})]},a))})]}):(0,s.jsxs)(x.PageContainer,{children:[(0,s.jsx)(x.PageHeader,{title:"æ¸ é“ç®¡ç†",description:"ç®¡ç†APIæ¸ é“å’Œæ¨¡å‹é…ç½®",icon:b.Plug,actions:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async e=>{let s=e.target.files?.[0];if(s)try{let e=await s.text(),a=JSON.parse(e);if(!Array.isArray(a))return void g.toast.error("æ— æ•ˆçš„æ¸ é“æ–‡ä»¶æ ¼å¼");let t=0;for(let e of a)try{e.apiKey||(e.apiKey="PLEASE_FILL_YOUR_API_KEY"),await u.channelsApi.create(e),t++}catch(s){console.error("å¯¼å…¥æ¸ é“å¤±è´¥:",e.name,s)}g.toast.success(`æˆåŠŸå¯¼å…¥ ${t} ä¸ªæ¸ é“ï¼Œè¯·ç¼–è¾‘å¡«å†™ API Key`),eT()}catch(e){g.toast.error("å¯¼å…¥å¤±è´¥: "+e.message)}},e.click()},children:[(0,s.jsx)(M.Upload,{className:"mr-2 h-4 w-4"}),"å¯¼å…¥"]}),(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{let s=new Blob([JSON.stringify(e.map(e=>({name:e.name,adapterType:e.adapterType,baseUrl:e.baseUrl,apiKey:e.apiKey,apiKeys:e.apiKeys,strategy:e.strategy,models:e.models,priority:e.priority,enabled:e.enabled,customHeaders:e.customHeaders,advanced:e.advanced,imageConfig:e.imageConfig})),null,2)],{type:"application/json"}),a=URL.createObjectURL(s),t=document.createElement("a");t.href=a,t.download=`channels_${new Date().toISOString().slice(0,10)}.json`,t.click(),URL.revokeObjectURL(a),g.toast.success("å¯¼å‡ºæˆåŠŸï¼ˆå« API Keyï¼Œè¯·å¦¥å–„ä¿ç®¡ï¼‰")},disabled:0===e.length,children:[(0,s.jsx)(L.FileDown,{className:"mr-2 h-4 w-4"}),"å¯¼å‡º"]}),(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:eT,children:[(0,s.jsx)(N.RefreshCw,{className:"mr-2 h-4 w-4"}),"åˆ·æ–°"]}),(0,s.jsxs)(d.Dialog,{open:V,onOpenChange:H,children:[(0,s.jsx)(d.DialogTrigger,{asChild:!0,children:(0,s.jsxs)(i.Button,{size:"sm",onClick:()=>eB(),children:[(0,s.jsx)(j.Plus,{className:"mr-2 h-4 w-4"}),"æ·»åŠ æ¸ é“"]})}),(0,s.jsxs)(d.DialogContent,{className:"w-[95vw] max-w-lg",children:[(0,s.jsxs)(d.DialogHeader,{children:[(0,s.jsx)(d.DialogTitle,{children:$?"ç¼–è¾‘æ¸ é“":"æ·»åŠ æ¸ é“"}),(0,s.jsx)(d.DialogDescription,{children:"é…ç½®APIæ¸ é“ä¿¡æ¯"})]}),(0,s.jsx)(h.ScrollArea,{className:"max-h-[55vh] sm:max-h-[60vh]",children:(0,s.jsxs)("div",{className:"space-y-4 p-1",children:[!$&&(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n.Label,{children:"å¿«é€Ÿé¢„è®¾"}),(0,s.jsxs)(m.Select,{onValueChange:e=>{let a=ei[e];if(!a)return;ev({...ef,name:a.name,adapterType:a.adapterType,baseUrl:a.baseUrl,apiKey:a.apiKey,models:a.models});let t={"free-api":{type:"success",message:"ä½œè€…å†…ç½®å…è´¹API,ä½¿ç”¨å‰è¯·æ‰‹åŠ¨ç‚¹å‡»è·å–æ¨¡å‹æ›´æ–°æ¨¡å‹åˆ—è¡¨"},"free-glm":{type:"success",message:"å…è´¹GLM"},"free-xiaomi":{type:"success",message:"å…è´¹å°ç±³MiMo"},"free-gemini2":{type:"success",message:"å…è´¹Geminiå¯¹è¯API"},"free-gemini":{type:"info",message:"å…è´¹Gemini - éœ€æ‰‹åŠ¨è·å–API Key",url:a.authUrl},"free-grok":{type:"info",message:"å…è´¹Grok - éœ€åœ¨ x.ai è·å–API Key"},openai:{type:"info",message:"OpenAI - è¯·å¡«å…¥API Keyï¼ˆsk-xxxï¼‰ï¼Œå¯åœ¨ platform.openai.com è·å–"},gemini:{type:"info",message:"Gemini - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ aistudio.google.com è·å–"},claude:{type:"info",message:"Claude - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ console.anthropic.com è·å–"},grok:{type:"info",message:"Grok - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ console.x.ai è·å–"},mistral:{type:"info",message:"Mistral AI - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ console.mistral.ai è·å–"},groq:{type:"info",message:"Groq - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ console.groq.com å…è´¹è·å–"},deepseek:{type:"info",message:"DeepSeek - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ platform.deepseek.com è·å–"},zhipu:{type:"info",message:"æ™ºè°±AI - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ open.bigmodel.cn è·å–"},qwen:{type:"info",message:"é€šä¹‰åƒé—® - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ dashscope.console.aliyun.com è·å–"},moonshot:{type:"info",message:"Kimi - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ platform.moonshot.cn è·å–"},minimax:{type:"info",message:"MiniMax - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ platform.minimaxi.com è·å–"},yi:{type:"info",message:"é›¶ä¸€ä¸‡ç‰© - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ platform.lingyiwanwu.com è·å–"},baichuan:{type:"info",message:"ç™¾å·æ™ºèƒ½ - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ platform.baichuan-ai.com è·å–"},doubao:{type:"info",message:"è±†åŒ… - éœ€é…ç½®endpoint_idï¼Œå¯åœ¨ console.volcengine.com è·å–"},spark:{type:"info",message:"è®¯é£æ˜Ÿç« - è¯·å¡«å…¥APIKey:APISecretæ ¼å¼ï¼Œå¯åœ¨ xinghuo.xfyun.cn è·å–"},openrouter:{type:"info",message:"OpenRouter - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ openrouter.ai è·å–"},siliconflow:{type:"info",message:"ç¡…åŸºæµåŠ¨ - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ cloud.siliconflow.cn è·å–"},together:{type:"info",message:"Together AI - è¯·å¡«å…¥API Keyï¼Œå¯åœ¨ api.together.xyz è·å–"}}[e];t?t.url?g.toast.info((0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{children:(0,s.jsx)("strong",{children:a.name})}),(0,s.jsx)("p",{className:"text-xs",children:t.message}),(0,s.jsxs)("p",{className:"text-xs",children:["è®¿é—® ",(0,s.jsx)("a",{href:t.url,target:"_blank",rel:"noopener",className:"underline text-blue-500",children:t.url})]})]}),{duration:8e3}):"success"===t.type?g.toast.success(t.message):g.toast.info(t.message,{duration:5e3}):g.toast.success(`å·²å¡«å…… ${a.name} é…ç½®ï¼Œè¯·å¡«å…¥API Key`)},children:[(0,s.jsx)(m.SelectTrigger,{children:(0,s.jsx)(m.SelectValue,{placeholder:"é€‰æ‹©é¢„è®¾å¿«é€Ÿé…ç½®..."})}),(0,s.jsx)(m.SelectContent,{className:"max-h-[400px]",children:et.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground bg-muted/50 sticky top-0",children:[e.icon," ",e.name]}),e.presets.map(e=>{let a=ei[e];return a?(0,s.jsx)(m.SelectItem,{value:e,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:a.name}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground truncate max-w-[200px]",children:["- ",a.description]})]})},e):null})]},e.name))})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n.Label,{htmlFor:"name",children:"æ¸ é“åç§°"}),(0,s.jsx)(l.Input,{id:"name",value:ef.name,onChange:e=>ev({...ef,name:e.target.value}),placeholder:"æˆ‘çš„æ¸ é“"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n.Label,{htmlFor:"adapterType",children:"é€‚é…å™¨ç±»å‹"}),(0,s.jsxs)(m.Select,{value:ef.adapterType,onValueChange:e=>ev({...ef,adapterType:e}),children:[(0,s.jsx)(m.SelectTrigger,{children:(0,s.jsx)(m.SelectValue,{})}),(0,s.jsxs)(m.SelectContent,{children:[(0,s.jsx)(m.SelectItem,{value:"openai",children:"OpenAI"}),(0,s.jsx)(m.SelectItem,{value:"gemini",children:"Gemini"}),(0,s.jsx)(m.SelectItem,{value:"claude",children:"Claude"})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n.Label,{htmlFor:"baseUrl",children:"Base URL"}),(0,s.jsx)(l.Input,{id:"baseUrl",value:ef.baseUrl,onChange:e=>ev({...ef,baseUrl:e.target.value}),placeholder:"ç•™ç©ºä½¿ç”¨SDKé»˜è®¤åœ°å€"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["ç•™ç©ºä½¿ç”¨å®˜æ–¹åœ°å€ã€‚è‡ªå®šä¹‰æ—¶éœ€å¡«å†™å®Œæ•´è·¯å¾„ï¼Œå¦‚ ",(0,s.jsx)("code",{className:"bg-muted px-1 rounded",children:"https://api.example.com/v1"})]}),ef.baseUrl&&(0,s.jsxs)("p",{className:"text-xs text-blue-500 dark:text-blue-400 font-mono truncate",children:["â†’ ",((e,s)=>{if(!e)return"ï¼ˆç•™ç©ºä½¿ç”¨SDKé»˜è®¤åœ°å€ï¼‰";let a=e.replace(/\/+$/,"");switch(s){case"openai":default:return`${a}/chat/completions`;case"claude":return`${a}/messages`;case"gemini":return`${a}/v1beta/models/{model}:generateContent`}})(ef.baseUrl,ef.adapterType)]})]})]}),(0,s.jsxs)("div",{className:"grid gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(n.Label,{className:"flex items-center gap-2",children:["API Key",(0,s.jsx)(p.TooltipProvider,{children:(0,s.jsxs)(p.Tooltip,{children:[(0,s.jsx)(p.TooltipTrigger,{asChild:!0,children:(0,s.jsx)(D.Info,{className:"h-3.5 w-3.5 text-muted-foreground cursor-help"})}),(0,s.jsxs)(p.TooltipContent,{side:"right",className:"max-w-[300px]",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"å¤š API Key åŠŸèƒ½"}),(0,s.jsx)("p",{className:"text-xs",children:"å¯ç”¨åå¯é…ç½®å¤šä¸ª API Keyï¼Œæ”¯æŒè½®è¯¢ã€éšæœºã€æƒé‡ç­‰ç­–ç•¥è‡ªåŠ¨åˆ‡æ¢ï¼Œç”¨äºè´Ÿè½½å‡è¡¡å’Œæ•…éšœè½¬ç§»ã€‚"})]})]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Label,{htmlFor:"useMultiKey",className:"text-xs text-muted-foreground",children:"å¤šKeyæ¨¡å¼"}),(0,s.jsx)(r.Switch,{id:"useMultiKey",checked:ef.useMultiKey,onCheckedChange:e=>{e&&ef.apiKey&&0===ef.apiKeys.length?ev({...ef,useMultiKey:!0,apiKeys:[{key:ef.apiKey,name:"Key 1",enabled:!0,weight:100}]}):ev({...ef,useMultiKey:e})}})]})]}),!ef.useMultiKey&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(l.Input,{id:"apiKey",type:el?"text":"password",value:ef.apiKey,onChange:e=>ev({...ef,apiKey:e.target.value}),placeholder:"sk-...",className:"flex-1"}),(0,s.jsx)(i.Button,{type:"button",variant:"outline",size:"icon",onClick:()=>en(!el),children:el?(0,s.jsx)(C.EyeOff,{className:"h-4 w-4"}):(0,s.jsx)(w.Eye,{className:"h-4 w-4"})})]}),ef.useMultiKey&&(0,s.jsxs)("div",{className:"space-y-3 p-3 border rounded-lg bg-muted/30",children:[(0,s.jsxs)("div",{className:"flex items-start gap-2 p-2 bg-blue-50 dark:bg-blue-950/30 rounded text-xs text-blue-700 dark:text-blue-300",children:[(0,s.jsx)(D.Info,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"å¤š API Key æ¨¡å¼è¯´æ˜"}),(0,s.jsxs)("ul",{className:"mt-1 space-y-0.5 text-blue-600 dark:text-blue-400",children:[(0,s.jsxs)("li",{children:["â€¢ ",(0,s.jsx)("strong",{children:"è½®è¯¢"}),"ï¼šæŒ‰é¡ºåºä¾æ¬¡ä½¿ç”¨æ¯ä¸ªKey"]}),(0,s.jsxs)("li",{children:["â€¢ ",(0,s.jsx)("strong",{children:"éšæœº"}),"ï¼šæ¯æ¬¡éšæœºé€‰æ‹©ä¸€ä¸ªKey"]}),(0,s.jsxs)("li",{children:["â€¢ ",(0,s.jsx)("strong",{children:"æƒé‡"}),"ï¼šæ ¹æ®æƒé‡å€¼éšæœºåˆ†é…ï¼ˆæƒé‡è¶Šé«˜ä½¿ç”¨æ¦‚ç‡è¶Šå¤§ï¼‰"]}),(0,s.jsxs)("li",{children:["â€¢ ",(0,s.jsx)("strong",{children:"æœ€å°‘ä½¿ç”¨"}),"ï¼šä¼˜å…ˆä½¿ç”¨è°ƒç”¨æ¬¡æ•°æœ€å°‘çš„Key"]}),(0,s.jsxs)("li",{children:["â€¢ ",(0,s.jsx)("strong",{children:"æ•…éšœè½¬ç§»"}),"ï¼šæŒ‰é¡ºåºä½¿ç”¨ï¼Œå¤±è´¥åè‡ªåŠ¨åˆ‡æ¢ä¸‹ä¸€ä¸ª"]})]})]})]}),(0,s.jsx)(R,{apiKeys:ef.apiKeys,strategy:ef.strategy,onChange:(e,s)=>ev({...ef,apiKeys:e,strategy:s}),showStats:!!$})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.Label,{children:"æ¨¡å‹åˆ—è¡¨"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(i.Button,{type:"button",variant:"outline",size:"sm",onClick:ez,disabled:W,children:[W?(0,s.jsx)(v.Loader2,{className:"mr-2 h-3 w-3 animate-spin"}):(0,s.jsx)(k.Download,{className:"mr-2 h-3 w-3"}),"è·å–æ¨¡å‹"]}),eo.length>0&&(0,s.jsxs)(i.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{eh(ef.models.split(",").map(e=>e.trim()).filter(Boolean)),ec(!0)},children:[(0,s.jsx)(P.Settings2,{className:"mr-2 h-3 w-3"}),"é€‰æ‹©æ¨¡å‹"]})]})]}),ef.models&&(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5 p-2 border rounded-lg bg-muted/30 max-h-[120px] overflow-y-auto",children:ef.models.split(",").map(e=>e.trim()).filter(Boolean).map(e=>(0,s.jsxs)(c.Badge,{variant:"secondary",className:"gap-1 pr-1 text-xs font-normal",children:[(0,s.jsx)("span",{className:"max-w-[150px] truncate",children:e}),(0,s.jsx)("button",{type:"button",onClick:()=>{let s=ef.models.split(",").map(e=>e.trim()).filter(s=>s&&s!==e);ev({...ef,models:s.join(", ")})},className:"ml-1 rounded-full hover:bg-muted-foreground/20 p-0.5",children:(0,s.jsx)(B.X,{className:"h-3 w-3"})})]},e))}),!ef.models&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground p-2 border rounded-lg bg-muted/30",children:'ç‚¹å‡»"è·å–æ¨¡å‹"è‡ªåŠ¨è·å–å¯ç”¨æ¨¡å‹ï¼Œæˆ–"é€‰æ‹©æ¨¡å‹"ä»åˆ—è¡¨ä¸­é€‰æ‹©'}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(l.Input,{value:ep,onChange:e=>ex(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&ep.trim()){e.preventDefault();let s=ep.split(",").map(e=>e.trim()).filter(Boolean),a=ef.models.split(",").map(e=>e.trim()).filter(Boolean),t=s.filter(e=>!a.includes(e));t.length>0&&ev({...ef,models:[...a,...t].join(", ")}),ex("")}},placeholder:"è¾“å…¥æ¨¡å‹åç§°ï¼Œå¤šä¸ªç”¨é€—å·åˆ†éš”...",className:"flex-1"}),(0,s.jsxs)(i.Button,{type:"button",variant:"outline",size:"sm",disabled:!ep.trim(),onClick:()=>{let e=ep.split(",").map(e=>e.trim()).filter(Boolean);if(0===e.length)return;let s=ef.models.split(",").map(e=>e.trim()).filter(Boolean),a=e.filter(e=>!s.includes(e));a.length>0&&ev({...ef,models:[...s,...a].join(", ")}),ex("")},children:[(0,s.jsx)(j.Plus,{className:"h-4 w-4 mr-1"}),"æ·»åŠ "]})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n.Label,{htmlFor:"priority",children:"ä¼˜å…ˆçº§"}),(0,s.jsx)(l.Input,{id:"priority",type:"number",value:ef.priority,onChange:e=>ev({...ef,priority:parseInt(e.target.value)||0})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.Label,{children:"å¯ç”¨æ¸ é“"}),(0,s.jsx)(r.Switch,{checked:ef.enabled,onCheckedChange:e=>ev({...ef,enabled:e})})]}),(0,s.jsxs)(es.Collapsible,{open:eA,onOpenChange:eI,children:[(0,s.jsx)(es.CollapsibleTrigger,{asChild:!0,children:(0,s.jsxs)(i.Button,{variant:"ghost",className:"w-full justify-between px-0",children:[(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(P.Settings2,{className:"h-4 w-4"}),"é«˜çº§è®¾ç½®"]}),eA?(0,s.jsx)(S.ChevronUp,{className:"h-4 w-4"}):(0,s.jsx)(T.ChevronDown,{className:"h-4 w-4"})]})}),(0,s.jsxs)(es.CollapsibleContent,{className:"space-y-4 pt-4",children:[(0,s.jsxs)("div",{className:"space-y-3 p-3 border rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-sm",children:"æµå¼è¾“å‡º"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"å¯ç”¨æµå¼è¾“å‡º"}),(0,s.jsx)(r.Switch,{checked:ef.advanced.streaming.enabled,onCheckedChange:e=>ev({...ef,advanced:{...ef.advanced,streaming:{...ef.advanced.streaming,enabled:e}}})})]})]}),(0,s.jsxs)("div",{className:"space-y-3 p-3 border rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-sm",children:"æ€è€ƒæ§åˆ¶"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"å¯ç”¨æ¨ç†æ¨¡å¼"}),(0,s.jsx)(r.Switch,{checked:ef.advanced.thinking.enableReasoning,onCheckedChange:e=>ev({...ef,advanced:{...ef.advanced,thinking:{...ef.advanced.thinking,enableReasoning:e}}})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"é»˜è®¤æ€è€ƒçº§åˆ«"}),(0,s.jsxs)(m.Select,{value:ef.advanced.thinking.defaultLevel,onValueChange:e=>ev({...ef,advanced:{...ef.advanced,thinking:{...ef.advanced.thinking,defaultLevel:e}}}),children:[(0,s.jsx)(m.SelectTrigger,{children:(0,s.jsx)(m.SelectValue,{})}),(0,s.jsxs)(m.SelectContent,{children:[(0,s.jsx)(m.SelectItem,{value:"low",children:"ä½ (Low)"}),(0,s.jsx)(m.SelectItem,{value:"medium",children:"ä¸­ (Medium)"}),(0,s.jsx)(m.SelectItem,{value:"high",children:"é«˜ (High)"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"è‡ªé€‚åº”æ€è€ƒ"}),(0,s.jsx)(r.Switch,{checked:ef.advanced.thinking.adaptThinking,onCheckedChange:e=>ev({...ef,advanced:{...ef.advanced,thinking:{...ef.advanced.thinking,adaptThinking:e}}})})]})]}),(0,s.jsxs)("div",{className:"space-y-3 p-3 border rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-sm",children:"å›¾ç‰‡å¤„ç†"}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"å›¾ç‰‡ä¼ é€’æ–¹å¼"}),(0,s.jsxs)(m.Select,{value:ef.imageConfig.transferMode,onValueChange:e=>ev({...ef,imageConfig:{...ef.imageConfig,transferMode:e}}),children:[(0,s.jsx)(m.SelectTrigger,{children:(0,s.jsx)(m.SelectValue,{})}),(0,s.jsxs)(m.SelectContent,{children:[(0,s.jsx)(m.SelectItem,{value:"auto",children:"è‡ªåŠ¨æ£€æµ‹"}),(0,s.jsx)(m.SelectItem,{value:"base64",children:"Base64 ç¼–ç "}),(0,s.jsx)(m.SelectItem,{value:"url",children:"URL é“¾æ¥"})]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"è‡ªåŠ¨æ£€æµ‹ä¼šæ ¹æ®APIç±»å‹è‡ªåŠ¨é€‰æ‹©æœ€ä½³æ–¹å¼"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"è½¬æ¢å›¾ç‰‡æ ¼å¼"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"å°†GIF/WebPè½¬ä¸ºPNG/JPG"})]}),(0,s.jsx)(r.Switch,{checked:ef.imageConfig.convertFormat,onCheckedChange:e=>ev({...ef,imageConfig:{...ef.imageConfig,convertFormat:e}})})]}),ef.imageConfig.convertFormat&&(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"ç›®æ ‡æ ¼å¼"}),(0,s.jsxs)(m.Select,{value:ef.imageConfig.targetFormat,onValueChange:e=>ev({...ef,imageConfig:{...ef.imageConfig,targetFormat:e}}),children:[(0,s.jsx)(m.SelectTrigger,{children:(0,s.jsx)(m.SelectValue,{})}),(0,s.jsxs)(m.SelectContent,{children:[(0,s.jsx)(m.SelectItem,{value:"auto",children:"è‡ªåŠ¨é€‰æ‹©"}),(0,s.jsx)(m.SelectItem,{value:"png",children:"PNG (æ— æŸ)"}),(0,s.jsx)(m.SelectItem,{value:"jpeg",children:"JPEG (æœ‰æŸ)"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"å‹ç¼©å›¾ç‰‡"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"å‹ç¼©å¤§å›¾ä»¥å‡å°‘ä¼ è¾“å¤§å°"})]}),(0,s.jsx)(r.Switch,{checked:ef.imageConfig.compress,onCheckedChange:e=>ev({...ef,imageConfig:{...ef.imageConfig,compress:e}})})]}),ef.imageConfig.compress&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)(n.Label,{children:"å‹ç¼©è´¨é‡"}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:[ef.imageConfig.quality,"%"]})]}),(0,s.jsx)(z.Slider,{value:[ef.imageConfig.quality],min:10,max:100,step:5,onValueChange:e=>ev({...ef,imageConfig:{...ef.imageConfig,quality:e[0]}})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"æœ€å¤§å°ºå¯¸ (åƒç´ )"}),(0,s.jsx)(l.Input,{type:"number",value:ef.imageConfig.maxSize,onChange:e=>ev({...ef,imageConfig:{...ef.imageConfig,maxSize:parseInt(e.target.value)||4096}})}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"è¶…è¿‡æ­¤å°ºå¯¸çš„å›¾ç‰‡ä¼šè¢«ç¼©æ”¾"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"å¤„ç†åŠ¨å›¾"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"å°†GIFåŠ¨å›¾è½¬ä¸ºé™æ€å›¾"})]}),(0,s.jsx)(r.Switch,{checked:ef.imageConfig.processAnimated,onCheckedChange:e=>ev({...ef,imageConfig:{...ef.imageConfig,processAnimated:e}})})]})]}),(0,s.jsxs)("div",{className:"space-y-3 p-3 border rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-sm",children:"LLM å‚æ•°"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)(n.Label,{children:"Temperature"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:ef.advanced.llm.temperature})]}),(0,s.jsx)(z.Slider,{value:[ef.advanced.llm.temperature],min:0,max:2,step:.1,onValueChange:e=>ev({...ef,advanced:{...ef.advanced,llm:{...ef.advanced.llm,temperature:e[0]}}})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"Max Tokens"}),(0,s.jsx)(l.Input,{type:"number",value:ef.advanced.llm.maxTokens,onChange:e=>ev({...ef,advanced:{...ef.advanced,llm:{...ef.advanced.llm,maxTokens:parseInt(e.target.value)||4e3}}})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)(n.Label,{children:"Top P"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:ef.advanced.llm.topP})]}),(0,s.jsx)(z.Slider,{value:[ef.advanced.llm.topP],min:0,max:1,step:.1,onValueChange:e=>ev({...ef,advanced:{...ef.advanced,llm:{...ef.advanced.llm,topP:e[0]}}})})]})]}),(0,s.jsxs)("div",{className:"space-y-3 p-3 border rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-sm",children:"è‡ªå®šä¹‰è¯·æ±‚å¤´"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"æ”¯æŒè¦†å†™ X-Forwarded-Forã€Authorizationã€User-Agent ç­‰è¯·æ±‚å¤´"}),Object.keys(ef.customHeaders).length>0&&(0,s.jsx)("div",{className:"space-y-2",children:Object.entries(ef.customHeaders).map(([e,a])=>(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded",children:[(0,s.jsx)("code",{className:"text-xs font-mono flex-1 truncate",children:e}),(0,s.jsx)("code",{className:"text-xs font-mono flex-1 truncate text-muted-foreground",children:a.length>30?a.substring(0,30)+"...":a}),(0,s.jsx)(i.Button,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-destructive hover:text-destructive",onClick:()=>{let s={...ef.customHeaders};delete s[e],ev({...ef,customHeaders:s})},children:(0,s.jsx)(B.X,{className:"h-3 w-3"})})]},e))}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(l.Input,{placeholder:"Headeråç§° (å¦‚ X-Forwarded-For)",value:eb,onChange:e=>eN(e.target.value),className:"flex-1 text-xs"}),(0,s.jsx)(l.Input,{placeholder:"Headerå€¼",value:ek,onChange:e=>ew(e.target.value),className:"flex-1 text-xs"}),(0,s.jsx)(i.Button,{type:"button",variant:"outline",size:"sm",disabled:!eb.trim()||!ek.trim(),onClick:()=>{eb.trim()&&ek.trim()&&(ev({...ef,customHeaders:{...ef.customHeaders,[eb.trim()]:ek.trim()}}),eN(""),ew(""))},children:(0,s.jsx)(j.Plus,{className:"h-4 w-4"})})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:["X-Forwarded-For","Authorization","User-Agent","X-Real-IP"].map(e=>!ef.customHeaders[e]&&(0,s.jsxs)(c.Badge,{variant:"outline",className:"text-xs cursor-pointer hover:bg-muted",onClick:()=>eN(e),children:["+ ",e]},e))})]}),(0,s.jsxs)("div",{className:"space-y-3 p-3 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{className:"font-medium text-sm",children:"JSONæ¨¡æ¿ï¼ˆé«˜çº§ï¼‰"}),(0,s.jsx)(r.Switch,{checked:eC,onCheckedChange:eK})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"ä½¿ç”¨JSONæ ¼å¼å®šä¹‰è¯·æ±‚å¤´ï¼Œæ”¯æŒå ä½ç¬¦"}),eC&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"p-2 bg-muted/50 rounded text-xs",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"å¯ç”¨å ä½ç¬¦ï¼š"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-1 text-muted-foreground",children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("code",{className:"text-primary",children:"{{API_KEY}}"})," APIå¯†é’¥"]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("code",{className:"text-primary",children:"{{MODEL}}"})," æ¨¡å‹åç§°"]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("code",{className:"text-primary",children:"{{USER_AGENT}}"})," éšæœºUA"]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("code",{className:"text-primary",children:"{{XFF}}"})," éšæœºIP"]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("code",{className:"text-primary",children:"{{RANDOM_IP}}"})," éšæœºIP"]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("code",{className:"text-primary",children:"{{TIMESTAMP}}"})," æ—¶é—´æˆ³"]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("code",{className:"text-primary",children:"{{UUID}}"})," éšæœºUUID"]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("code",{className:"text-primary",children:"{{NONCE}}"})," éšæœºä¸²"]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"è¯·æ±‚å¤´æ¨¡æ¿ (JSON)"}),(0,s.jsx)("textarea",{className:"w-full h-24 p-2 text-xs font-mono border rounded bg-background resize-y",placeholder:`{
  "User-Agent": "{{USER_AGENT}}",
  "X-Forwarded-For": "{{XFF}}"
}`,value:ef.headersTemplate,onChange:e=>ev({...ef,headersTemplate:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{className:"text-sm",children:"è¯·æ±‚ä½“æ‰©å±• (JSON)"}),(0,s.jsx)("textarea",{className:"w-full h-24 p-2 text-xs font-mono border rounded bg-background resize-y",placeholder:`{
  "extra_headers": {
    "custom-key": "value"
  }
}`,value:ef.requestBodyTemplate,onChange:e=>ev({...ef,requestBodyTemplate:e.target.value})})]})]})]})]})]})]})}),(0,s.jsxs)(d.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>H(!1),children:"å–æ¶ˆ"}),(0,s.jsxs)(i.Button,{onClick:eU,disabled:X,children:[X&&(0,s.jsx)(v.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"ä¿å­˜"]})]})]})]})]})}),0===e.length?(0,s.jsx)(t.Card,{children:(0,s.jsxs)(t.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(b.Plug,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"æš‚æ— æ¸ é“é…ç½®"}),(0,s.jsxs)(i.Button,{className:"mt-4",onClick:()=>eB(),children:[(0,s.jsx)(j.Plus,{className:"mr-2 h-4 w-4"}),"æ·»åŠ ç¬¬ä¸€ä¸ªæ¸ é“"]})]})}):(0,s.jsx)("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2 xl:grid-cols-3",children:e.map(e=>(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{className:"pb-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(t.CardTitle,{className:"text-base",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.Badge,{variant:"outline",className:"text-xs",children:(e.adapterType||"openai").toUpperCase()}),e.enabled?(0,s.jsx)(c.Badge,{className:"bg-green-100 text-green-700 hover:bg-green-100 text-xs",children:"å¯ç”¨"}):(0,s.jsx)(c.Badge,{variant:"secondary",className:"text-xs",children:"ç¦ç”¨"})]})]}),(0,s.jsx)(t.CardDescription,{className:"font-mono text-xs truncate",children:e.baseUrl})]}),(0,s.jsxs)(t.CardContent,{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["active"===e.status?(0,s.jsxs)(c.Badge,{variant:"outline",className:"text-green-600 border-green-200 text-xs",children:[(0,s.jsx)(A.CheckCircle,{className:"h-3 w-3 mr-1"}),"æ­£å¸¸"]}):"error"===e.status?(0,s.jsxs)(c.Badge,{variant:"destructive",className:"text-xs",children:[(0,s.jsx)(I.XCircle,{className:"h-3 w-3 mr-1"}),"å¼‚å¸¸"]}):(0,s.jsx)(c.Badge,{variant:"secondary",className:"text-xs",children:"æœªæµ‹è¯•"}),e.apiKeys&&e.apiKeys.length>0&&(0,s.jsx)(p.TooltipProvider,{children:(0,s.jsxs)(p.Tooltip,{children:[(0,s.jsx)(p.TooltipTrigger,{asChild:!0,children:(0,s.jsxs)(c.Badge,{variant:"outline",className:"text-xs cursor-help",children:[(0,s.jsx)(G.Key,{className:"h-3 w-3 mr-1"}),e.apiKeys.filter(e=>!1!==e.enabled).length,"/",e.apiKeys.length]})}),(0,s.jsxs)(p.TooltipContent,{children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"å¤š API Key æ¨¡å¼"}),(0,s.jsxs)("p",{className:"text-xs",children:["ç­–ç•¥: ",E.find(s=>s.value===e.strategy)?.label||e.strategy]}),(0,s.jsxs)("p",{className:"text-xs",children:["å¯ç”¨: ",e.apiKeys.filter(e=>!1!==e.enabled).length," / æ€»æ•°: ",e.apiKeys.length]})]})]})}),e.stats?.totalCalls?(0,s.jsx)(p.TooltipProvider,{children:(0,s.jsxs)(p.Tooltip,{children:[(0,s.jsx)(p.TooltipTrigger,{asChild:!0,children:(0,s.jsxs)(c.Badge,{variant:"outline",className:"text-xs cursor-help",children:[(0,s.jsx)(U.Zap,{className:"h-3 w-3 mr-1"}),e.stats.totalCalls,"æ¬¡"]})}),(0,s.jsx)(p.TooltipContent,{children:(0,s.jsxs)("p",{children:["æˆåŠŸç‡: ",e.stats.successCalls&&e.stats.totalCalls?Math.round(e.stats.successCalls/e.stats.totalCalls*100):0,"%"]})})]})}):null]}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["ä¼˜å…ˆçº§: ",e.priority||0]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["æ¨¡å‹ (",e.models?.length||0,")"]})}),e.models&&e.models.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-1 max-h-[80px] overflow-y-auto",children:e.models.map(e=>(0,s.jsx)(c.Badge,{variant:"secondary",className:"text-xs font-normal",children:e.length>20?e.slice(0,20)+"...":e},e))}):(0,s.jsx)("p",{className:"text-xs text-muted-foreground italic",children:"æœªé…ç½®æ¨¡å‹"})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",className:"rounded-r-none border-r-0",onClick:()=>eD(e),disabled:Q===e.id||!e.models?.length,children:[Q===e.id?(0,s.jsx)(v.Loader2,{className:"mr-1.5 h-3.5 w-3.5 animate-spin"}):(0,s.jsx)(f.TestTube,{className:"mr-1.5 h-3.5 w-3.5"}),"æµ‹è¯•"]}),(0,s.jsx)(i.Button,{variant:"outline",size:"sm",className:"rounded-l-none px-1.5",onClick:()=>{ey(e),eg(!0)},disabled:!e.models?.length,children:(0,s.jsx)(T.ChevronDown,{className:"h-3.5 w-3.5"})})]}),(0,s.jsx)(i.Button,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>eB(e),children:"ç¼–è¾‘"}),(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>eG(e.id),children:(0,s.jsx)(y.Trash2,{className:"h-4 w-4"})})]})]})]},e.id))}),(0,s.jsx)(d.Dialog,{open:er,onOpenChange:ec,children:(0,s.jsxs)(d.DialogContent,{className:"w-[95vw] max-w-2xl max-h-[90vh] sm:max-h-[80vh] flex flex-col",children:[(0,s.jsxs)(d.DialogHeader,{className:"flex-shrink-0",children:[(0,s.jsxs)(d.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(K.List,{className:"h-5 w-5"}),"é€‰æ‹©æ¨¡å‹"]}),(0,s.jsx)(d.DialogDescription,{children:"ä»åˆ—è¡¨ä¸­é€‰æ‹©éœ€è¦ä½¿ç”¨çš„æ¨¡å‹"})]}),(0,s.jsx)("div",{className:"flex-1 overflow-hidden min-h-0",children:(0,s.jsx)(ea.ModelSelector,{value:em,allModels:eo,onChange:eh})}),(0,s.jsxs)(d.DialogFooter,{className:"flex-shrink-0 pt-4 border-t mt-2 gap-2 sm:gap-0",children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>ec(!1),className:"flex-1 sm:flex-none",children:"å–æ¶ˆ"}),(0,s.jsxs)(i.Button,{onClick:()=>{ev({...ef,models:em.join(", ")}),ec(!1)},className:"flex-1 sm:flex-none",children:["ç¡®è®¤é€‰æ‹© (",em.length,")"]})]})]})}),ej&&(0,s.jsx)(ee,{open:eu,onOpenChange:eg,channelId:ej.id,channelName:ej.name,models:ej.models||[]})]})}e.s(["default",()=>el],73956)}]);