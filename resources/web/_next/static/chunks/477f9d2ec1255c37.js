(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5945,e=>{"use strict";var a=e.i(52542),s=e.i(40418),l=e.i(44728),i=e.i(51200),t=e.i(72029),n=e.i(30243),r=e.i(99573),d=e.i(13107),c=e.i(20308),o=e.i(20650),m=e.i(81080),h=e.i(10201),x=e.i(79342),b=e.i(64625),u=e.i(89908),j=e.i(5850),p=e.i(40204),g=e.i(96173),y=e.i(15204),v=e.i(63959),N=e.i(98858),f=e.i(74940),C=e.i(17286),S=e.i(10273),P=e.i(70620),w=e.i(32308),T=e.i(79923),E=e.i(10148),I=e.i(57345),M=e.i(36393),k=e.i(72024),L=e.i(60001),_=e.i(60713),V=e.i(35771),R=e.i(97058),K=e.i(61176),G=e.i(84518),B=e.i(14775);let U=(0,e.i(50974).default)("mouse-pointer-2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);var A=e.i(75979),D=e.i(94518),H=e.i(47686),z=e.i(34358),Q=e.i(84519);function O({id:e}){let O=(0,l.useRouter)(),$="new"===e,[X,Z]=(0,s.useState)(!$),[J,W]=(0,s.useState)(!1),[Y,ee]=(0,s.useState)([]),[ea,es]=(0,s.useState)([]),[el,ei]=(0,s.useState)([]),[et,en]=(0,s.useState)(!1),[er,ed]=(0,s.useState)(null),[ec,eo]=(0,s.useState)({name:"",baseUrl:"",apiKey:"",adapterType:"openai",models:"",enabled:!0,priority:0,modelsPath:"",chatPath:"",imageTransferMode:"auto",imageCompress:!0,imageQuality:85,imageMaxSize:4096}),[em,eh]=(0,s.useState)(!1),[ex,eb]=(0,s.useState)(!1),[eu,ej]=(0,s.useState)(!1),[ep,eg]=(0,s.useState)([]),[ey,ev]=(0,s.useState)([]),[eN,ef]=(0,s.useState)({groupId:"",groupName:"",enabled:!0,presetId:"",systemPrompt:"",triggerMode:"default",customPrefix:"",chatModel:"",summaryModel:"",bymModel:"",imageGenModel:"",toolsEnabled:"inherit",imageGenEnabled:"inherit",summaryEnabled:"inherit",eventEnabled:"inherit",bymEnabled:"inherit",bymPresetId:"",bymPrompt:"",bymProbability:"inherit",bymTemperature:"inherit",bymMaxTokens:"inherit",bymReplyLength:"medium",bymUseEmoji:!0,proactiveChatEnabled:"inherit",proactiveChatProbability:"inherit",proactiveChatCooldown:"inherit",proactiveChatMaxDaily:"inherit",proactiveChatMinMessages:5,proactiveChatTimeStart:8,proactiveChatTimeEnd:23,welcomeEnabled:"inherit",welcomeMessage:"",welcomePrompt:"",welcomeProbability:"inherit",goodbyeEnabled:"inherit",goodbyePrompt:"",goodbyeProbability:"inherit",pokeEnabled:"inherit",pokeBack:!1,pokeProbability:"inherit",recallEnabled:"inherit",recallProbability:"inherit",banEnabled:"inherit",banProbability:"inherit",luckyKingEnabled:"inherit",luckyKingProbability:"inherit",honorEnabled:"inherit",honorProbability:"inherit",essenceEnabled:"inherit",essenceProbability:"inherit",adminEnabled:"inherit",adminProbability:"inherit",emojiThiefEnabled:"inherit",emojiThiefSeparateFolder:!0,emojiThiefMaxCount:500,emojiThiefStealRate:1,emojiThiefTriggerRate:.05,emojiThiefTriggerMode:"off",chatContextLength:20,chatStreamReply:!0,chatQuoteReply:!1,chatShowThinking:!0,listMode:"none",blacklist:[],whitelist:[],summaryPushEnabled:!1,summaryPushIntervalType:"day",summaryPushIntervalValue:1,summaryPushHour:20,summaryPushMessageCount:100,independentChannels:[],forbidGlobalModel:!1,dailyGroupLimit:0,dailyUserLimit:0,usageLimitMessage:"",knowledgeIds:[]});(0,s.useEffect)(()=>{eC()},[e]);let eC=async()=>{try{let[a,s,l]=await Promise.all([A.presetsApi.list(),A.channelsApi.list(),A.knowledgeApi.list()]);ee(a?.data||[]),es((l?.data||[]).map(e=>({id:e.id,name:e.name})));let i=new Set;if((s?.data||[]).forEach(e=>{Array.isArray(e.models)&&e.models.forEach(e=>i.add(e))}),ei(Array.from(i).sort()),!$){let a=await A.scopeApi.getGroups(),s=(a?.data||[]).find(a=>a.groupId===e);if(s){let e=s.settings||{};ef({groupId:s.groupId,groupName:s.groupName||"",enabled:!1!==s.enabled,presetId:s.presetId||"",systemPrompt:s.systemPrompt||"",triggerMode:e.triggerMode||"default",customPrefix:e.customPrefix||"",chatModel:e.chatModel||"",summaryModel:e.summaryModel||"",bymModel:e.bymModel||"",imageGenModel:e.imageGenModel||"",toolsEnabled:void 0===e.toolsEnabled?"inherit":e.toolsEnabled?"on":"off",imageGenEnabled:void 0===e.imageGenEnabled?"inherit":e.imageGenEnabled?"on":"off",summaryEnabled:void 0===e.summaryEnabled?"inherit":e.summaryEnabled?"on":"off",eventEnabled:void 0===e.eventEnabled?"inherit":e.eventEnabled?"on":"off",bymEnabled:void 0===e.bymEnabled?"inherit":e.bymEnabled?"on":"off",bymPresetId:e.bymPresetId||"",bymPrompt:e.bymPrompt||"",bymProbability:e.bymProbability??"inherit",bymTemperature:e.bymTemperature??"inherit",bymMaxTokens:e.bymMaxTokens??"inherit",proactiveChatEnabled:void 0===e.proactiveChatEnabled?"inherit":e.proactiveChatEnabled?"on":"off",proactiveChatProbability:e.proactiveChatProbability??"inherit",proactiveChatCooldown:e.proactiveChatCooldown??"inherit",proactiveChatMaxDaily:e.proactiveChatMaxDaily??"inherit",welcomeEnabled:void 0===e.welcomeEnabled?"inherit":e.welcomeEnabled?"on":"off",welcomeMessage:e.welcomeMessage||"",welcomePrompt:e.welcomePrompt||"",welcomeProbability:e.welcomeProbability??"inherit",goodbyeEnabled:void 0===e.goodbyeEnabled?"inherit":e.goodbyeEnabled?"on":"off",goodbyePrompt:e.goodbyePrompt||"",goodbyeProbability:e.goodbyeProbability??"inherit",pokeEnabled:void 0===e.pokeEnabled?"inherit":e.pokeEnabled?"on":"off",pokeBack:e.pokeBack||!1,pokeProbability:e.pokeProbability??"inherit",recallEnabled:void 0===e.recallEnabled?"inherit":e.recallEnabled?"on":"off",recallProbability:e.recallProbability??"inherit",banEnabled:void 0===e.banEnabled?"inherit":e.banEnabled?"on":"off",banProbability:e.banProbability??"inherit",luckyKingEnabled:void 0===e.luckyKingEnabled?"inherit":e.luckyKingEnabled?"on":"off",luckyKingProbability:e.luckyKingProbability??"inherit",honorEnabled:void 0===e.honorEnabled?"inherit":e.honorEnabled?"on":"off",honorProbability:e.honorProbability??"inherit",essenceEnabled:void 0===e.essenceEnabled?"inherit":e.essenceEnabled?"on":"off",essenceProbability:e.essenceProbability??"inherit",adminEnabled:void 0===e.adminEnabled?"inherit":e.adminEnabled?"on":"off",adminProbability:e.adminProbability??"inherit",emojiThiefEnabled:void 0===e.emojiThiefEnabled?"inherit":e.emojiThiefEnabled?"on":"off",emojiThiefSeparateFolder:e.emojiThiefSeparateFolder??!0,emojiThiefMaxCount:e.emojiThiefMaxCount??500,emojiThiefStealRate:e.emojiThiefStealRate??1,emojiThiefTriggerRate:e.emojiThiefTriggerRate??.05,emojiThiefTriggerMode:e.emojiThiefTriggerMode||"off",bymReplyLength:e.bymReplyLength||"medium",bymUseEmoji:e.bymUseEmoji??!0,proactiveChatMinMessages:e.proactiveChatMinMessages??5,proactiveChatTimeStart:e.proactiveChatTimeStart??8,proactiveChatTimeEnd:e.proactiveChatTimeEnd??23,chatContextLength:e.chatContextLength??20,chatStreamReply:e.chatStreamReply??!0,chatQuoteReply:e.chatQuoteReply??!1,chatShowThinking:e.chatShowThinking??!0,listMode:e.listMode||"none",blacklist:e.blacklist||[],whitelist:e.whitelist||[],summaryPushEnabled:e.summaryPushEnabled??!1,summaryPushIntervalType:e.summaryPushIntervalType||"day",summaryPushIntervalValue:e.summaryPushIntervalValue??1,summaryPushHour:e.summaryPushHour??20,summaryPushMessageCount:e.summaryPushMessageCount??100,independentChannels:e.independentChannels||[],forbidGlobalModel:e.forbidGlobalModel||!1,dailyGroupLimit:e.usageLimit?.dailyGroupLimit||0,dailyUserLimit:e.usageLimit?.dailyUserLimit||0,usageLimitMessage:e.usageLimit?.limitMessage||"",knowledgeIds:s.knowledgeIds||[]})}}}catch(e){console.error("åŠ è½½æ•°æ®å¤±è´¥",e),x.toast.error("åŠ è½½æ•°æ®å¤±è´¥")}finally{Z(!1)}},eS=async()=>{if(!eN.groupId)return void x.toast.error("è¯·å¡«å†™ç¾¤å·");W(!0);try{await A.scopeApi.updateGroup(eN.groupId,{groupName:eN.groupName,presetId:eN.presetId||void 0,systemPrompt:eN.systemPrompt||void 0,enabled:eN.enabled,knowledgeIds:eN.knowledgeIds.length>0?eN.knowledgeIds:void 0,triggerMode:eN.triggerMode,customPrefix:eN.customPrefix||void 0,chatModel:eN.chatModel||void 0,summaryModel:eN.summaryModel||void 0,bymModel:eN.bymModel||void 0,imageGenModel:eN.imageGenModel||void 0,toolsEnabled:"inherit"===eN.toolsEnabled?void 0:"on"===eN.toolsEnabled,imageGenEnabled:"inherit"===eN.imageGenEnabled?void 0:"on"===eN.imageGenEnabled,summaryEnabled:"inherit"===eN.summaryEnabled?void 0:"on"===eN.summaryEnabled,eventEnabled:"inherit"===eN.eventEnabled?void 0:"on"===eN.eventEnabled,bymEnabled:"inherit"===eN.bymEnabled?void 0:"on"===eN.bymEnabled,bymPresetId:eN.bymPresetId||void 0,bymPrompt:eN.bymPrompt||void 0,bymProbability:"inherit"===eN.bymProbability?void 0:eN.bymProbability,bymTemperature:"inherit"===eN.bymTemperature?void 0:eN.bymTemperature,bymMaxTokens:"inherit"===eN.bymMaxTokens?void 0:eN.bymMaxTokens,proactiveChatEnabled:"inherit"===eN.proactiveChatEnabled?void 0:"on"===eN.proactiveChatEnabled,proactiveChatProbability:"inherit"===eN.proactiveChatProbability?void 0:eN.proactiveChatProbability,proactiveChatCooldown:"inherit"===eN.proactiveChatCooldown?void 0:eN.proactiveChatCooldown,proactiveChatMaxDaily:"inherit"===eN.proactiveChatMaxDaily?void 0:eN.proactiveChatMaxDaily,welcomeEnabled:"inherit"===eN.welcomeEnabled?void 0:"on"===eN.welcomeEnabled,welcomeMessage:eN.welcomeMessage||void 0,welcomePrompt:eN.welcomePrompt||void 0,welcomeProbability:"inherit"===eN.welcomeProbability?void 0:eN.welcomeProbability,goodbyeEnabled:"inherit"===eN.goodbyeEnabled?void 0:"on"===eN.goodbyeEnabled,goodbyePrompt:eN.goodbyePrompt||void 0,goodbyeProbability:"inherit"===eN.goodbyeProbability?void 0:eN.goodbyeProbability,pokeEnabled:"inherit"===eN.pokeEnabled?void 0:"on"===eN.pokeEnabled,pokeBack:eN.pokeBack,pokeProbability:"inherit"===eN.pokeProbability?void 0:eN.pokeProbability,recallEnabled:"inherit"===eN.recallEnabled?void 0:"on"===eN.recallEnabled,recallProbability:"inherit"===eN.recallProbability?void 0:eN.recallProbability,banEnabled:"inherit"===eN.banEnabled?void 0:"on"===eN.banEnabled,banProbability:"inherit"===eN.banProbability?void 0:eN.banProbability,luckyKingEnabled:"inherit"===eN.luckyKingEnabled?void 0:"on"===eN.luckyKingEnabled,luckyKingProbability:"inherit"===eN.luckyKingProbability?void 0:eN.luckyKingProbability,honorEnabled:"inherit"===eN.honorEnabled?void 0:"on"===eN.honorEnabled,honorProbability:"inherit"===eN.honorProbability?void 0:eN.honorProbability,essenceEnabled:"inherit"===eN.essenceEnabled?void 0:"on"===eN.essenceEnabled,essenceProbability:"inherit"===eN.essenceProbability?void 0:eN.essenceProbability,adminEnabled:"inherit"===eN.adminEnabled?void 0:"on"===eN.adminEnabled,adminProbability:"inherit"===eN.adminProbability?void 0:eN.adminProbability,emojiThiefEnabled:"inherit"===eN.emojiThiefEnabled?void 0:"on"===eN.emojiThiefEnabled,emojiThiefSeparateFolder:eN.emojiThiefSeparateFolder,emojiThiefMaxCount:eN.emojiThiefMaxCount,emojiThiefStealRate:eN.emojiThiefStealRate,emojiThiefTriggerRate:eN.emojiThiefTriggerRate,emojiThiefTriggerMode:eN.emojiThiefTriggerMode,bymReplyLength:eN.bymReplyLength,bymUseEmoji:eN.bymUseEmoji,proactiveChatMinMessages:eN.proactiveChatMinMessages,proactiveChatTimeStart:eN.proactiveChatTimeStart,proactiveChatTimeEnd:eN.proactiveChatTimeEnd,chatContextLength:eN.chatContextLength,chatStreamReply:eN.chatStreamReply,chatQuoteReply:eN.chatQuoteReply,chatShowThinking:eN.chatShowThinking,listMode:"none"!==eN.listMode?eN.listMode:void 0,blacklist:eN.blacklist.length>0?eN.blacklist:void 0,whitelist:eN.whitelist.length>0?eN.whitelist:void 0,summaryPushEnabled:eN.summaryPushEnabled,summaryPushIntervalType:eN.summaryPushIntervalType,summaryPushIntervalValue:eN.summaryPushIntervalValue,summaryPushHour:eN.summaryPushHour,summaryPushMessageCount:eN.summaryPushMessageCount,independentChannels:eN.independentChannels.length>0?eN.independentChannels:void 0,forbidGlobalModel:eN.forbidGlobalModel,usageLimit:{dailyGroupLimit:eN.dailyGroupLimit,dailyUserLimit:eN.dailyUserLimit,limitMessage:eN.usageLimitMessage||void 0}}),x.toast.success("ä¿å­˜æˆåŠŸ"),$&&O.push("/groups")}catch(e){console.error("ä¿å­˜å¤±è´¥",e),x.toast.error("ä¿å­˜å¤±è´¥")}finally{W(!1)}};return X?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(u.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,a.jsxs)("div",{className:"container max-w-4xl px-4 sm:px-6 py-4 sm:py-6 space-y-4 sm:space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[(0,a.jsx)(t.Button,{variant:"ghost",size:"icon",className:"shrink-0",onClick:()=>O.push("/groups"),children:(0,a.jsx)(b.ArrowLeft,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h1",{className:"text-xl sm:text-2xl font-bold truncate",children:$?"æ·»åŠ ç¾¤ç»„":"ç¼–è¾‘ç¾¤ç»„"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:$?"é…ç½®æ–°ç¾¤ç»„çš„ä¸ªæ€§åŒ–è®¾ç½®":`ç¾¤å·: ${eN.groupId}`})]})]}),(0,a.jsxs)(t.Button,{onClick:eS,disabled:J,size:"sm",className:"shrink-0",children:[J?(0,a.jsx)(u.Loader2,{className:"h-4 w-4 sm:mr-2 animate-spin"}):(0,a.jsx)(j.Save,{className:"h-4 w-4 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"ä¿å­˜"})]})]}),(0,a.jsxs)(m.Tabs,{defaultValue:"basic",className:"space-y-4",children:[(0,a.jsxs)(m.TabsList,{className:"grid w-full grid-cols-5 h-auto",children:[(0,a.jsxs)(m.TabsTrigger,{value:"basic",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:[(0,a.jsx)(p.Settings,{className:"h-4 w-4 sm:mr-1"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"åŸºç¡€"})]}),(0,a.jsxs)(m.TabsTrigger,{value:"features",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:[(0,a.jsx)(g.Zap,{className:"h-4 w-4 sm:mr-1"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"åŠŸèƒ½"})]}),(0,a.jsxs)(m.TabsTrigger,{value:"bym",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:[(0,a.jsx)(M.Smile,{className:"h-4 w-4 sm:mr-1"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"ä¼ªäºº"})]}),(0,a.jsxs)(m.TabsTrigger,{value:"channel",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:[(0,a.jsx)(k.Server,{className:"h-4 w-4 sm:mr-1"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"æ¸ é“"})]}),(0,a.jsxs)(m.TabsTrigger,{value:"advanced",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:[(0,a.jsx)(y.Sparkles,{className:"h-4 w-4 sm:mr-1"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"é«˜çº§"})]})]}),(0,a.jsxs)(m.TabsContent,{value:"basic",className:"space-y-4",children:[(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(w.Users,{className:"h-4 w-4"}),"åŸºæœ¬ä¿¡æ¯"]})}),(0,a.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ç¾¤å· *"}),(0,a.jsx)(n.Input,{value:eN.groupId,onChange:e=>ef({...eN,groupId:e.target.value}),placeholder:"è¾“å…¥ç¾¤å·",disabled:!$})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ç¾¤åç§°"}),(0,a.jsx)(n.Input,{value:eN.groupName,onChange:e=>ef({...eN,groupName:e.target.value}),placeholder:"ç¾¤åç§°ï¼ˆå¯é€‰ï¼‰"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(N.Power,{className:"h-4 w-4 text-green-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"å¯ç”¨æœ¬ç¾¤"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"å…³é—­åŽæœºå™¨äººå°†ä¸å“åº”æœ¬ç¾¤æ¶ˆæ¯"})]})]}),(0,a.jsx)(c.Switch,{checked:eN.enabled,onCheckedChange:e=>ef({...eN,enabled:e})})]})]})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(S.MessageSquare,{className:"h-4 w-4"}),"è§¦å‘è®¾ç½®"]})}),(0,a.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"è§¦å‘æ¨¡å¼"}),(0,a.jsxs)(h.Select,{value:eN.triggerMode,onValueChange:e=>ef({...eN,triggerMode:e}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"default",children:"é»˜è®¤ï¼ˆ@æˆ–å‰ç¼€ï¼‰"}),(0,a.jsx)(h.SelectItem,{value:"at",children:"ä»…@è§¦å‘"}),(0,a.jsx)(h.SelectItem,{value:"prefix",children:"ä»…å‰ç¼€è§¦å‘"}),(0,a.jsx)(h.SelectItem,{value:"all",children:"æ‰€æœ‰æ¶ˆæ¯è§¦å‘"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"è‡ªå®šä¹‰å‰ç¼€"}),(0,a.jsx)(n.Input,{value:eN.customPrefix,onChange:e=>ef({...eN,customPrefix:e.target.value}),placeholder:"ç•™ç©ºä½¿ç”¨å…¨å±€å‰ç¼€"})]})]})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(v.BookOpen,{className:"h-4 w-4"}),"äººè®¾ä¸Žé¢„è®¾"]})}),(0,a.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"é€‰æ‹©é¢„è®¾"}),(0,a.jsxs)(h.Select,{value:eN.presetId||"__none__",onValueChange:e=>ef({...eN,presetId:"__none__"===e?"":e}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{placeholder:"ä¸ä½¿ç”¨é¢„è®¾"})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"__none__",children:"ä¸ä½¿ç”¨é¢„è®¾"}),Y.map(e=>(0,a.jsx)(h.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"å¯¹è¯æ¨¡åž‹"}),(0,a.jsxs)(h.Select,{value:eN.chatModel||"__default__",onValueChange:e=>ef({...eN,chatModel:"__default__"===e?"":e}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{placeholder:"ä½¿ç”¨å…¨å±€"})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"__default__",children:"ä½¿ç”¨å…¨å±€"}),el.map(e=>(0,a.jsx)(h.SelectItem,{value:e,children:e},e))]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ç³»ç»Ÿæç¤ºè¯"}),(0,a.jsx)(o.Textarea,{value:eN.systemPrompt,onChange:e=>ef({...eN,systemPrompt:e.target.value}),placeholder:"ç•™ç©ºä½¿ç”¨é¢„è®¾æˆ–å…¨å±€æç¤ºè¯",rows:3})]})]})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(S.MessageSquare,{className:"h-4 w-4"}),"èŠå¤©é…ç½®"]})}),(0,a.jsx)(i.CardContent,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"ä¸Šä¸‹æ–‡é•¿åº¦"}),(0,a.jsx)(n.Input,{type:"number",min:1,max:100,value:eN.chatContextLength,onChange:e=>ef({...eN,chatContextLength:parseInt(e.target.value)||20})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æµå¼å›žå¤"}),(0,a.jsx)(c.Switch,{checked:eN.chatStreamReply,onCheckedChange:e=>ef({...eN,chatStreamReply:e})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"å¼•ç”¨å›žå¤"}),(0,a.jsx)(c.Switch,{checked:eN.chatQuoteReply,onCheckedChange:e=>ef({...eN,chatQuoteReply:e})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æ˜¾ç¤ºæ€è€ƒ"}),(0,a.jsx)(c.Switch,{checked:eN.chatShowThinking,onCheckedChange:e=>ef({...eN,chatShowThinking:e})})]})]})})]})]}),(0,a.jsxs)(m.TabsContent,{value:"features",className:"space-y-4",children:[(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsx)(i.CardTitle,{className:"text-base",children:"åŠŸèƒ½å¼€å…³"})}),(0,a.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,a.jsx)(F,{icon:(0,a.jsx)(g.Zap,{className:"h-4 w-4 text-yellow-500"}),title:"å·¥å…·è°ƒç”¨",desc:"å…è®¸AIè°ƒç”¨å¤–éƒ¨å·¥å…·",value:eN.toolsEnabled,onChange:e=>ef({...eN,toolsEnabled:e})}),(0,a.jsx)(F,{icon:(0,a.jsx)(C.Image,{className:"h-4 w-4 text-pink-500"}),title:"ç»˜å›¾åŠŸèƒ½",desc:"æ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾ç­‰",value:eN.imageGenEnabled,onChange:e=>ef({...eN,imageGenEnabled:e})}),"on"===eN.imageGenEnabled&&(0,a.jsxs)("div",{className:"ml-12 p-3 rounded-lg bg-muted/50 space-y-2",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"ç»˜å›¾æ¨¡åž‹"}),(0,a.jsxs)(h.Select,{value:eN.imageGenModel||"__default__",onValueChange:e=>ef({...eN,imageGenModel:"__default__"===e?"":e}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{placeholder:"ç»§æ‰¿å…¨å±€"})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"__default__",children:"ç»§æ‰¿å…¨å±€"}),el.filter(e=>e.includes("dall")||e.includes("flux")||e.includes("image")).map(e=>(0,a.jsx)(h.SelectItem,{value:e,children:e},e))]})]})]}),(0,a.jsx)(F,{icon:(0,a.jsx)(v.BookOpen,{className:"h-4 w-4 text-blue-500"}),title:"ç¾¤èŠæ€»ç»“",desc:"è‡ªåŠ¨æ€»ç»“ç¾¤èŠå†…å®¹",value:eN.summaryEnabled,onChange:e=>ef({...eN,summaryEnabled:e})}),"on"===eN.summaryEnabled&&(0,a.jsxs)("div",{className:"ml-12 p-3 rounded-lg bg-muted/50 space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æ€»ç»“æ¨¡åž‹"}),(0,a.jsxs)(h.Select,{value:eN.summaryModel||"__default__",onValueChange:e=>ef({...eN,summaryModel:"__default__"===e?"":e}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{placeholder:"ç»§æ‰¿å…¨å±€"})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"__default__",children:"ç»§æ‰¿å…¨å±€"}),el.map(e=>(0,a.jsx)(h.SelectItem,{value:e,children:e},e))]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"å®šæ—¶æŽ¨é€"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"è‡ªåŠ¨å®šæ—¶æŽ¨é€ç¾¤èŠæ€»ç»“"})]}),(0,a.jsx)(c.Switch,{checked:eN.summaryPushEnabled,onCheckedChange:e=>ef({...eN,summaryPushEnabled:e})})]}),eN.summaryPushEnabled&&(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"é—´éš”ç±»åž‹"}),(0,a.jsxs)(h.Select,{value:eN.summaryPushIntervalType,onValueChange:e=>ef({...eN,summaryPushIntervalType:e}),children:[(0,a.jsx)(h.SelectTrigger,{className:"h-9",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"hour",children:"æ¯Xå°æ—¶"}),(0,a.jsx)(h.SelectItem,{value:"day",children:"æ¯Xå¤©"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"é—´éš”å€¼"}),(0,a.jsx)(n.Input,{type:"number",min:1,value:eN.summaryPushIntervalValue,onChange:e=>ef({...eN,summaryPushIntervalValue:parseInt(e.target.value)||1})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"day"===eN.summaryPushIntervalType?"æŽ¨é€æ—¶é—´(ç‚¹)":"æ¶ˆæ¯æ•°é‡"}),(0,a.jsx)(n.Input,{type:"number",min:10*("day"!==eN.summaryPushIntervalType),max:"day"===eN.summaryPushIntervalType?23:void 0,value:"day"===eN.summaryPushIntervalType?eN.summaryPushHour:eN.summaryPushMessageCount,onChange:e=>{"day"===eN.summaryPushIntervalType?ef({...eN,summaryPushHour:parseInt(e.target.value)||20}):ef({...eN,summaryPushMessageCount:parseInt(e.target.value)||100})}})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æ¶ˆæ¯æ•°é‡"}),(0,a.jsx)(n.Input,{type:"number",min:10,value:eN.summaryPushMessageCount,onChange:e=>ef({...eN,summaryPushMessageCount:parseInt(e.target.value)||100})})]})]})]}),(0,a.jsx)(F,{icon:(0,a.jsx)(y.Sparkles,{className:"h-4 w-4 text-purple-500"}),title:"äº‹ä»¶å“åº”",desc:"å…¥ç¾¤ã€é€€ç¾¤ã€æˆ³ä¸€æˆ³ç­‰ï¼ˆå¼€å¯åŽåœ¨ä¸‹æ–¹é…ç½®è¯¦æƒ…ï¼‰",value:eN.eventEnabled,onChange:e=>ef({...eN,eventEnabled:e})}),(0,a.jsx)(F,{icon:(0,a.jsx)(B.Palette,{className:"h-4 w-4 text-cyan-500"}),title:"è¡¨æƒ…åŒ…å°å·",desc:"è‡ªåŠ¨æ”¶é›†å’Œå‘é€è¡¨æƒ…åŒ…",value:eN.emojiThiefEnabled,onChange:e=>ef({...eN,emojiThiefEnabled:e})}),"on"===eN.emojiThiefEnabled&&(0,a.jsxs)("div",{className:"ml-12 p-3 rounded-lg bg-muted/50 space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æœ€å¤§æ”¶é›†æ•°"}),(0,a.jsx)(n.Input,{type:"number",min:0,value:eN.emojiThiefMaxCount,onChange:e=>ef({...eN,emojiThiefMaxCount:parseInt(e.target.value)||500})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æ”¶é›†æ¦‚çŽ‡ (%)"}),(0,a.jsx)(n.Input,{type:"number",min:0,max:100,value:Math.round(100*eN.emojiThiefStealRate),onChange:e=>ef({...eN,emojiThiefStealRate:(parseInt(e.target.value)||100)/100})})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"éšæœºå‘å›¾æ¨¡å¼"}),(0,a.jsxs)(h.Select,{value:eN.emojiThiefTriggerMode,onValueChange:e=>ef({...eN,emojiThiefTriggerMode:e}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"}),(0,a.jsx)(h.SelectItem,{value:"chat_follow",children:"å¯¹è¯è·Ÿéš"}),(0,a.jsx)(h.SelectItem,{value:"chat_random",children:"å¯¹è¯éšæœº"}),(0,a.jsx)(h.SelectItem,{value:"bym_follow",children:"ä¼ªäººè·Ÿéš"}),(0,a.jsx)(h.SelectItem,{value:"bym_random",children:"ä¼ªäººéšæœº"})]})]})]}),"off"!==eN.emojiThiefTriggerMode&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"å‘é€æ¦‚çŽ‡ (%)"}),(0,a.jsx)(n.Input,{type:"number",min:0,max:100,value:Math.round(100*eN.emojiThiefTriggerRate),onChange:e=>ef({...eN,emojiThiefTriggerRate:(parseInt(e.target.value)||5)/100})})]})]})]})]}),"off"!==eN.eventEnabled&&(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsxs)(i.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(y.Sparkles,{className:"h-4 w-4"}),"äº‹ä»¶é…ç½®"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"æ¯ä¸ªäº‹ä»¶å¯ç‹¬ç«‹é…ç½®å“åº”æ¦‚çŽ‡ï¼Œå¼€å¯åŽé»˜è®¤100%"})]}),(0,a.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"rounded-lg border overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(E.UserPlus,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"å…¥ç¾¤æ¬¢è¿Ž"})]}),(0,a.jsxs)(h.Select,{value:eN.welcomeEnabled,onValueChange:e=>{let a={welcomeEnabled:e};"on"===e&&"inherit"===eN.welcomeProbability&&(a.welcomeProbability=1),ef({...eN,...a})},children:[(0,a.jsx)(h.SelectTrigger,{className:"w-24 h-8",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(h.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===eN.welcomeEnabled&&(0,a.jsxs)("div",{className:"p-3 space-y-3 border-t",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"å“åº”æ¦‚çŽ‡"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground font-medium",children:[Math.round(("inherit"===eN.welcomeProbability?1:eN.welcomeProbability)*100),"%"]})]}),(0,a.jsx)(Q.Slider,{value:["inherit"===eN.welcomeProbability?1:eN.welcomeProbability],onValueChange:([e])=>ef({...eN,welcomeProbability:e}),min:0,max:1,step:.05})]}),(0,a.jsx)(n.Input,{value:eN.welcomeMessage,onChange:e=>ef({...eN,welcomeMessage:e.target.value}),placeholder:"å›ºå®šæ¬¢è¿Žè¯­ï¼ˆç•™ç©ºä½¿ç”¨AIç”Ÿæˆï¼‰",className:"h-8 text-sm"}),(0,a.jsx)(o.Textarea,{value:eN.welcomePrompt,onChange:e=>ef({...eN,welcomePrompt:e.target.value}),placeholder:"AIæ¬¢è¿Žæç¤ºè¯",rows:2,className:"text-sm"})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(I.UserMinus,{className:"h-4 w-4 text-red-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"é€€ç¾¤å‘Šåˆ«"})]}),(0,a.jsxs)(h.Select,{value:eN.goodbyeEnabled,onValueChange:e=>{let a={goodbyeEnabled:e};"on"===e&&"inherit"===eN.goodbyeProbability&&(a.goodbyeProbability=1),ef({...eN,...a})},children:[(0,a.jsx)(h.SelectTrigger,{className:"w-24 h-8",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(h.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===eN.goodbyeEnabled&&(0,a.jsxs)("div",{className:"p-3 space-y-3 border-t",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"å“åº”æ¦‚çŽ‡"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground font-medium",children:[Math.round(("inherit"===eN.goodbyeProbability?1:eN.goodbyeProbability)*100),"%"]})]}),(0,a.jsx)(Q.Slider,{value:["inherit"===eN.goodbyeProbability?1:eN.goodbyeProbability],onValueChange:([e])=>ef({...eN,goodbyeProbability:e}),min:0,max:1,step:.05})]}),(0,a.jsx)(o.Textarea,{value:eN.goodbyePrompt,onChange:e=>ef({...eN,goodbyePrompt:e.target.value}),placeholder:"AIå‘Šåˆ«æç¤ºè¯",rows:2,className:"text-sm"})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(U,{className:"h-4 w-4 text-orange-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"æˆ³ä¸€æˆ³"})]}),(0,a.jsxs)(h.Select,{value:eN.pokeEnabled,onValueChange:e=>{let a={pokeEnabled:e};"on"===e&&"inherit"===eN.pokeProbability&&(a.pokeProbability=1),ef({...eN,...a})},children:[(0,a.jsx)(h.SelectTrigger,{className:"w-24 h-8",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(h.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===eN.pokeEnabled&&(0,a.jsxs)("div",{className:"p-3 space-y-3 border-t",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"å“åº”æ¦‚çŽ‡"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground font-medium",children:[Math.round(("inherit"===eN.pokeProbability?1:eN.pokeProbability)*100),"%"]})]}),(0,a.jsx)(Q.Slider,{value:["inherit"===eN.pokeProbability?1:eN.pokeProbability],onValueChange:([e])=>ef({...eN,pokeProbability:e}),min:0,max:1,step:.05})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æˆ³å›žåŽ»"}),(0,a.jsx)(c.Switch,{checked:eN.pokeBack,onCheckedChange:e=>ef({...eN,pokeBack:e})})]})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"ðŸ”„"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"æ’¤å›žå“åº”"})]}),(0,a.jsxs)(h.Select,{value:eN.recallEnabled,onValueChange:e=>{let a={recallEnabled:e};"on"===e&&"inherit"===eN.recallProbability&&(a.recallProbability=1),ef({...eN,...a})},children:[(0,a.jsx)(h.SelectTrigger,{className:"w-24 h-8",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(h.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===eN.recallEnabled&&(0,a.jsx)("div",{className:"p-3 space-y-2 border-t",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.Label,{className:"text-xs w-16",children:"æ¦‚çŽ‡"}),(0,a.jsx)(Q.Slider,{value:["inherit"===eN.recallProbability?1:eN.recallProbability],onValueChange:([e])=>ef({...eN,recallProbability:e}),min:0,max:1,step:.05,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(("inherit"===eN.recallProbability?1:eN.recallProbability)*100),"%"]})]})})]}),(0,a.jsxs)("div",{className:"rounded-lg border overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"ðŸ”‡"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"ç¦è¨€å“åº”"})]}),(0,a.jsxs)(h.Select,{value:eN.banEnabled,onValueChange:e=>{let a={banEnabled:e};"on"===e&&"inherit"===eN.banProbability&&(a.banProbability=1),ef({...eN,...a})},children:[(0,a.jsx)(h.SelectTrigger,{className:"w-24 h-8",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(h.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===eN.banEnabled&&(0,a.jsx)("div",{className:"p-3 space-y-2 border-t",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.Label,{className:"text-xs w-16",children:"æ¦‚çŽ‡"}),(0,a.jsx)(Q.Slider,{value:["inherit"===eN.banProbability?1:eN.banProbability],onValueChange:([e])=>ef({...eN,banProbability:e}),min:0,max:1,step:.05,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(("inherit"===eN.banProbability?1:eN.banProbability)*100),"%"]})]})})]}),(0,a.jsxs)("div",{className:"rounded-lg border overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"ðŸ§§"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"è¿æ°”çŽ‹å“åº”"})]}),(0,a.jsxs)(h.Select,{value:eN.luckyKingEnabled,onValueChange:e=>{let a={luckyKingEnabled:e};"on"===e&&"inherit"===eN.luckyKingProbability&&(a.luckyKingProbability=1),ef({...eN,...a})},children:[(0,a.jsx)(h.SelectTrigger,{className:"w-24 h-8",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(h.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===eN.luckyKingEnabled&&(0,a.jsx)("div",{className:"p-3 space-y-2 border-t",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.Label,{className:"text-xs w-16",children:"æ¦‚çŽ‡"}),(0,a.jsx)(Q.Slider,{value:["inherit"===eN.luckyKingProbability?1:eN.luckyKingProbability],onValueChange:([e])=>ef({...eN,luckyKingProbability:e}),min:0,max:1,step:.05,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(("inherit"===eN.luckyKingProbability?1:eN.luckyKingProbability)*100),"%"]})]})})]}),(0,a.jsxs)("div",{className:"rounded-lg border overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"ðŸ†"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"è£èª‰å˜æ›´"})]}),(0,a.jsxs)(h.Select,{value:eN.honorEnabled,onValueChange:e=>{let a={honorEnabled:e};"on"===e&&"inherit"===eN.honorProbability&&(a.honorProbability=1),ef({...eN,...a})},children:[(0,a.jsx)(h.SelectTrigger,{className:"w-24 h-8",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(h.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===eN.honorEnabled&&(0,a.jsx)("div",{className:"p-3 space-y-2 border-t",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.Label,{className:"text-xs w-16",children:"æ¦‚çŽ‡"}),(0,a.jsx)(Q.Slider,{value:["inherit"===eN.honorProbability?1:eN.honorProbability],onValueChange:([e])=>ef({...eN,honorProbability:e}),min:0,max:1,step:.05,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(("inherit"===eN.honorProbability?1:eN.honorProbability)*100),"%"]})]})})]}),(0,a.jsxs)("div",{className:"rounded-lg border overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"â­"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"ç²¾åŽæ¶ˆæ¯"})]}),(0,a.jsxs)(h.Select,{value:eN.essenceEnabled,onValueChange:e=>{let a={essenceEnabled:e};"on"===e&&"inherit"===eN.essenceProbability&&(a.essenceProbability=1),ef({...eN,...a})},children:[(0,a.jsx)(h.SelectTrigger,{className:"w-24 h-8",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(h.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===eN.essenceEnabled&&(0,a.jsx)("div",{className:"p-3 space-y-2 border-t",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.Label,{className:"text-xs w-16",children:"æ¦‚çŽ‡"}),(0,a.jsx)(Q.Slider,{value:["inherit"===eN.essenceProbability?1:eN.essenceProbability],onValueChange:([e])=>ef({...eN,essenceProbability:e}),min:0,max:1,step:.05,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(("inherit"===eN.essenceProbability?1:eN.essenceProbability)*100),"%"]})]})})]}),(0,a.jsxs)("div",{className:"rounded-lg border overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"ðŸ‘‘"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"ç®¡ç†å‘˜å˜æ›´"})]}),(0,a.jsxs)(h.Select,{value:eN.adminEnabled,onValueChange:e=>{let a={adminEnabled:e};"on"===e&&"inherit"===eN.adminProbability&&(a.adminProbability=1),ef({...eN,...a})},children:[(0,a.jsx)(h.SelectTrigger,{className:"w-24 h-8",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(h.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===eN.adminEnabled&&(0,a.jsx)("div",{className:"p-3 space-y-2 border-t",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.Label,{className:"text-xs w-16",children:"æ¦‚çŽ‡"}),(0,a.jsx)(Q.Slider,{value:["inherit"===eN.adminProbability?1:eN.adminProbability],onValueChange:([e])=>ef({...eN,adminProbability:e}),min:0,max:1,step:.05,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(("inherit"===eN.adminProbability?1:eN.adminProbability)*100),"%"]})]})})]})]})]})]}),(0,a.jsx)(m.TabsContent,{value:"bym",className:"space-y-4",children:(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsxs)(i.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(M.Smile,{className:"h-4 w-4"}),"ä¼ªäººæ¨¡å¼"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"æ¨¡æ‹ŸçœŸäººèŠå¤©é£Žæ ¼ï¼Œéšæœºå‚ä¸Žç¾¤èŠ"})]}),(0,a.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-muted",children:(0,a.jsx)(M.Smile,{className:"h-4 w-4 text-orange-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"å¯ç”¨ä¼ªäºº"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"å¼€å¯åŽæœºå™¨äººä¼šéšæœºå›žå¤ç¾¤æ¶ˆæ¯"})]})]}),(0,a.jsxs)(h.Select,{value:eN.bymEnabled,onValueChange:e=>ef({...eN,bymEnabled:e}),children:[(0,a.jsx)(h.SelectTrigger,{className:"w-24",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(h.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"off"!==eN.bymEnabled&&(0,a.jsxs)("div",{className:"space-y-4 ml-4 pl-4 border-l-2 border-muted",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ä¼ªäººé¢„è®¾"}),(0,a.jsxs)(h.Select,{value:eN.bymPresetId||"__none__",onValueChange:e=>ef({...eN,bymPresetId:"__none__"===e?"":e}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{placeholder:"ä¸ä½¿ç”¨é¢„è®¾"})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"__none__",children:"ä¸ä½¿ç”¨é¢„è®¾"}),Y.map(e=>(0,a.jsx)(h.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ä¼ªäººæ¨¡åž‹"}),(0,a.jsxs)(h.Select,{value:eN.bymModel||"__default__",onValueChange:e=>ef({...eN,bymModel:"__default__"===e?"":e}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{placeholder:"ä½¿ç”¨å…¨å±€"})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"__default__",children:"ä½¿ç”¨å…¨å±€"}),el.map(e=>(0,a.jsx)(h.SelectItem,{value:e,children:e},e))]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ä¼ªäººæç¤ºè¯"}),(0,a.jsx)(o.Textarea,{value:eN.bymPrompt,onChange:e=>ef({...eN,bymPrompt:e.target.value}),placeholder:"è‡ªå®šä¹‰ä¼ªäººäººè®¾ï¼ˆç•™ç©ºä½¿ç”¨é¢„è®¾æˆ–å…¨å±€ï¼‰",rows:2})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"å›žå¤æ¦‚çŽ‡(%)"}),(0,a.jsx)(n.Input,{type:"number",min:0,max:100,value:"inherit"===eN.bymProbability?"":Math.round(100*eN.bymProbability),onChange:e=>ef({...eN,bymProbability:""===e.target.value?"inherit":Number(e.target.value)/100}),placeholder:"ç»§æ‰¿"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æ¸©åº¦"}),(0,a.jsx)(n.Input,{type:"number",min:0,max:2,step:.1,value:"inherit"===eN.bymTemperature?"":eN.bymTemperature,onChange:e=>ef({...eN,bymTemperature:""===e.target.value?"inherit":Number(e.target.value)}),placeholder:"ç»§æ‰¿"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æœ€å¤§Token"}),(0,a.jsx)(n.Input,{type:"number",min:0,value:"inherit"===eN.bymMaxTokens?"":eN.bymMaxTokens,onChange:e=>ef({...eN,bymMaxTokens:""===e.target.value?"inherit":Number(e.target.value)}),placeholder:"ç»§æ‰¿"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"å›žå¤é•¿åº¦"}),(0,a.jsxs)(h.Select,{value:eN.bymReplyLength,onValueChange:e=>ef({...eN,bymReplyLength:e}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"short",children:"ç®€çŸ­"}),(0,a.jsx)(h.SelectItem,{value:"medium",children:"é€‚ä¸­"}),(0,a.jsx)(h.SelectItem,{value:"long",children:"è¯¦ç»†"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{className:"text-sm",children:"ä½¿ç”¨è¡¨æƒ…"}),(0,a.jsx)(c.Switch,{checked:eN.bymUseEmoji,onCheckedChange:e=>ef({...eN,bymUseEmoji:e})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-muted",children:(0,a.jsx)(T.Clock,{className:"h-4 w-4 text-blue-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"ä¸»åŠ¨å‘è¨€"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"æ ¹æ®ç¾¤èŠå†…å®¹ä¸»åŠ¨å‚ä¸Žè®¨è®º"})]})]}),(0,a.jsxs)(h.Select,{value:eN.proactiveChatEnabled,onValueChange:e=>ef({...eN,proactiveChatEnabled:e}),children:[(0,a.jsx)(h.SelectTrigger,{className:"w-24",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(h.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"off"!==eN.proactiveChatEnabled&&(0,a.jsxs)("div",{className:"space-y-3 ml-4 pl-4 border-l-2 border-muted",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"è§¦å‘æ¦‚çŽ‡ (%)"}),(0,a.jsx)(n.Input,{type:"number",min:0,max:100,value:"inherit"===eN.proactiveChatProbability?"":Math.round(100*eN.proactiveChatProbability),onChange:e=>ef({...eN,proactiveChatProbability:""===e.target.value?"inherit":Number(e.target.value)/100}),placeholder:"ç»§æ‰¿"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"å†·å´æ—¶é—´(ç§’)"}),(0,a.jsx)(n.Input,{type:"number",min:0,value:"inherit"===eN.proactiveChatCooldown?"":eN.proactiveChatCooldown,onChange:e=>ef({...eN,proactiveChatCooldown:""===e.target.value?"inherit":Number(e.target.value)}),placeholder:"ç»§æ‰¿"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æ¯æ—¥ä¸Šé™"}),(0,a.jsx)(n.Input,{type:"number",min:0,value:"inherit"===eN.proactiveChatMaxDaily?"":eN.proactiveChatMaxDaily,onChange:e=>ef({...eN,proactiveChatMaxDaily:""===e.target.value?"inherit":Number(e.target.value)}),placeholder:"ç»§æ‰¿"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 pt-2 border-t",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æœ€å°‘æ¶ˆæ¯æ•°"}),(0,a.jsx)(n.Input,{type:"number",min:1,value:eN.proactiveChatMinMessages,onChange:e=>ef({...eN,proactiveChatMinMessages:parseInt(e.target.value)||5})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"å¼€å§‹æ—¶é—´"}),(0,a.jsx)(n.Input,{type:"number",min:0,max:23,value:eN.proactiveChatTimeStart,onChange:e=>ef({...eN,proactiveChatTimeStart:parseInt(e.target.value)||8})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"ç»“æŸæ—¶é—´"}),(0,a.jsx)(n.Input,{type:"number",min:0,max:23,value:eN.proactiveChatTimeEnd,onChange:e=>ef({...eN,proactiveChatTimeEnd:parseInt(e.target.value)||23})})]})]})]})]})]})}),(0,a.jsxs)(m.TabsContent,{value:"channel",className:"space-y-4",children:[(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(i.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(k.Server,{className:"h-4 w-4"}),"ç¾¤ç‹¬ç«‹æ¸ é“"]}),(0,a.jsxs)(t.Button,{size:"sm",onClick:()=>{ed(null),eo({name:`æ¸ é“${eN.independentChannels.length+1}`,baseUrl:"",apiKey:"",adapterType:"openai",models:"",enabled:!0,priority:eN.independentChannels.length,modelsPath:"",chatPath:"",imageTransferMode:"auto",imageCompress:!0,imageQuality:85,imageMaxSize:4096}),eh(!1),en(!0)},children:[(0,a.jsx)(_.Plus,{className:"h-4 w-4 mr-1"}),"æ·»åŠ æ¸ é“"]})]})}),(0,a.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"ä¸ºæœ¬ç¾¤é…ç½®ç‹¬ç«‹çš„APIæ¸ é“ï¼Œæ”¯æŒå¤šä¸ªæ¸ é“å’ŒèŽ·å–æ¨¡åž‹åˆ—è¡¨"}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.Server,{className:"h-4 w-4 text-orange-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"ç¦ç”¨å…¨å±€æ¸ é“"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"å¼€å¯åŽæœ¬ç¾¤åªä½¿ç”¨ç‹¬ç«‹æ¸ é“"})]})]}),(0,a.jsx)(c.Switch,{checked:eN.forbidGlobalModel,onCheckedChange:e=>ef({...eN,forbidGlobalModel:e})})]}),0===eN.independentChannels.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground border rounded-lg border-dashed",children:[(0,a.jsx)(k.Server,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"æš‚æ— ç‹¬ç«‹æ¸ é“"}),(0,a.jsx)("p",{className:"text-xs",children:"ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ æ¸ é“"})]}):(0,a.jsx)("div",{className:"space-y-3",children:eN.independentChannels.map((e,s)=>(0,a.jsx)("div",{className:"p-4 rounded-lg border bg-card",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-medium",children:e.name}),(0,a.jsx)(d.Badge,{variant:e.enabled?"default":"secondary",children:e.enabled?"å¯ç”¨":"ç¦ç”¨"}),(0,a.jsx)(d.Badge,{variant:"outline",children:e.adapterType})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:e.baseUrl||"ä½¿ç”¨é»˜è®¤åœ°å€"}),e.models.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.models.slice(0,3).map(e=>(0,a.jsx)(d.Badge,{variant:"outline",className:"text-xs",children:e},e)),e.models.length>3&&(0,a.jsxs)(d.Badge,{variant:"outline",className:"text-xs",children:["+",e.models.length-3]})]})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(t.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{ed(s),eo({name:e.name,baseUrl:e.baseUrl,apiKey:e.apiKey,adapterType:e.adapterType,models:e.models.join(", "),enabled:e.enabled,priority:e.priority,modelsPath:e.modelsPath||"",chatPath:e.chatPath||"",imageTransferMode:e.imageConfig?.transferMode||"auto",imageCompress:e.imageConfig?.compress??!0,imageQuality:e.imageConfig?.quality??85,imageMaxSize:e.imageConfig?.maxSize??4096}),eh(!1),en(!0)},children:(0,a.jsx)(p.Settings,{className:"h-4 w-4"})}),(0,a.jsx)(t.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>{ef({...eN,independentChannels:eN.independentChannels.filter((e,a)=>a!==s)})},children:(0,a.jsx)(V.Trash2,{className:"h-4 w-4"})})]})]})},e.id))})]})]}),(0,a.jsx)(D.Dialog,{open:et,onOpenChange:en,children:(0,a.jsxs)(D.DialogContent,{className:"max-w-lg",children:[(0,a.jsx)(D.DialogHeader,{children:(0,a.jsx)(D.DialogTitle,{children:null!==er?"ç¼–è¾‘æ¸ é“":"æ·»åŠ æ¸ é“"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"æ¸ é“åç§°"}),(0,a.jsx)(n.Input,{value:ec.name,onChange:e=>eo({...ec,name:e.target.value}),placeholder:"æ¸ é“åç§°"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"é€‚é…å™¨ç±»åž‹"}),(0,a.jsxs)(h.Select,{value:ec.adapterType,onValueChange:e=>eo({...ec,adapterType:e}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"openai",children:"OpenAI"}),(0,a.jsx)(h.SelectItem,{value:"azure",children:"Azure"}),(0,a.jsx)(h.SelectItem,{value:"claude",children:"Claude"}),(0,a.jsx)(h.SelectItem,{value:"gemini",children:"Gemini"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"API åœ°å€"}),(0,a.jsx)(n.Input,{value:ec.baseUrl,onChange:e=>eo({...ec,baseUrl:e.target.value}),placeholder:"https://api.openai.com/v1ï¼ˆç•™ç©ºä½¿ç”¨é»˜è®¤ï¼‰"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"API Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.Input,{type:em?"text":"password",value:ec.apiKey,onChange:e=>eo({...ec,apiKey:e.target.value}),placeholder:"sk-...",className:"flex-1"}),(0,a.jsx)(t.Button,{type:"button",variant:"outline",size:"icon",onClick:()=>eh(!em),children:em?(0,a.jsx)(G.EyeOff,{className:"h-4 w-4"}):(0,a.jsx)(K.Eye,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{children:"æ¨¡åž‹åˆ—è¡¨"}),(0,a.jsxs)(t.Button,{type:"button",variant:"outline",size:"sm",disabled:!ec.apiKey||ex,onClick:async()=>{if(!ec.apiKey)return void x.toast.error("è¯·å…ˆå¡«å†™ API Key");eb(!0);try{let e=await A.channelsApi.fetchModels({adapterType:ec.adapterType,baseUrl:ec.baseUrl||"",apiKey:ec.apiKey}),a=e?.data?.models||e?.models||[];if(Array.isArray(a)&&a.length>0){let e=a.map(e=>"string"==typeof e?e:e?.id||e?.name).filter(Boolean);eg(e);let s=ec.models.split(",").map(e=>e.trim()).filter(Boolean);ev(s.filter(a=>e.includes(a))),ej(!0),x.toast.success(`èŽ·å–åˆ° ${e.length} ä¸ªæ¨¡åž‹`)}else x.toast.error("æœªèŽ·å–åˆ°æ¨¡åž‹åˆ—è¡¨")}catch(e){x.toast.error(e.response?.data?.message||"èŽ·å–æ¨¡åž‹å¤±è´¥")}finally{eb(!1)}},children:[ex?(0,a.jsx)(u.Loader2,{className:"h-4 w-4 mr-1 animate-spin"}):(0,a.jsx)(R.RefreshCw,{className:"h-4 w-4 mr-1"}),"èŽ·å–æ¨¡åž‹"]})]}),(0,a.jsx)(o.Textarea,{value:ec.models,onChange:e=>eo({...ec,models:e.target.value}),placeholder:"æ¨¡åž‹åç§°ï¼Œç”¨é€—å·åˆ†éš”ï¼Œå¦‚ï¼šgpt-4, gpt-3.5-turbo",rows:3})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{children:"å¯ç”¨æ¸ é“"}),(0,a.jsx)(c.Switch,{checked:ec.enabled,onCheckedChange:e=>eo({...ec,enabled:e})})]}),(0,a.jsxs)("div",{className:"space-y-3 p-3 rounded-lg border bg-muted/30",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"é«˜çº§é…ç½®"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"æ¨¡åž‹åˆ—è¡¨è·¯å¾„"}),(0,a.jsx)(n.Input,{value:ec.modelsPath,onChange:e=>eo({...ec,modelsPath:e.target.value}),placeholder:"/models",className:"h-8 text-xs"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"å¯¹è¯æŽ¥å£è·¯å¾„"}),(0,a.jsx)(n.Input,{value:ec.chatPath,onChange:e=>eo({...ec,chatPath:e.target.value}),placeholder:"/chat/completions",className:"h-8 text-xs"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"å›¾ç‰‡ä¼ é€’æ–¹å¼"}),(0,a.jsxs)(h.Select,{value:ec.imageTransferMode,onValueChange:e=>eo({...ec,imageTransferMode:e}),children:[(0,a.jsx)(h.SelectTrigger,{className:"h-8",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"auto",children:"è‡ªåŠ¨æ£€æµ‹"}),(0,a.jsx)(h.SelectItem,{value:"base64",children:"Base64ç¼–ç "}),(0,a.jsx)(h.SelectItem,{value:"url",children:"URLé“¾æŽ¥"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:"åŽ‹ç¼©å›¾ç‰‡"}),(0,a.jsx)(c.Switch,{checked:ec.imageCompress,onCheckedChange:e=>eo({...ec,imageCompress:e})})]})]})]}),(0,a.jsxs)(D.DialogFooter,{children:[(0,a.jsx)(t.Button,{variant:"outline",onClick:()=>en(!1),children:"å–æ¶ˆ"}),(0,a.jsx)(t.Button,{onClick:()=>{if(!ec.name)return void x.toast.error("è¯·å¡«å†™æ¸ é“åç§°");let e={id:null!==er?eN.independentChannels[er].id:`ch_${Date.now()}`,name:ec.name,baseUrl:ec.baseUrl,apiKey:ec.apiKey,adapterType:ec.adapterType,models:ec.models.split(",").map(e=>e.trim()).filter(Boolean),enabled:ec.enabled,priority:ec.priority,modelsPath:ec.modelsPath||void 0,chatPath:ec.chatPath||void 0,imageConfig:{transferMode:ec.imageTransferMode,compress:ec.imageCompress,quality:ec.imageQuality,maxSize:ec.imageMaxSize}};if(null!==er){let a=[...eN.independentChannels];a[er]=e,ef({...eN,independentChannels:a})}else ef({...eN,independentChannels:[...eN.independentChannels,e]});en(!1),x.toast.success(null!==er?"æ¸ é“å·²æ›´æ–°":"æ¸ é“å·²æ·»åŠ ")},children:null!==er?"æ›´æ–°":"æ·»åŠ "})]})]})}),(0,a.jsx)(D.Dialog,{open:eu,onOpenChange:ej,children:(0,a.jsxs)(D.DialogContent,{className:"max-w-md",children:[(0,a.jsx)(D.DialogHeader,{children:(0,a.jsx)(D.DialogTitle,{children:"é€‰æ‹©æ¨¡åž‹"})}),(0,a.jsx)(H.ScrollArea,{className:"h-[300px] pr-4",children:(0,a.jsx)("div",{className:"space-y-2",children:ep.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(z.Checkbox,{id:e,checked:ey.includes(e),onCheckedChange:a=>{a?ev([...ey,e]):ev(ey.filter(a=>a!==e))}}),(0,a.jsx)("label",{htmlFor:e,className:"text-sm cursor-pointer flex-1",children:e})]},e))})}),(0,a.jsxs)(D.DialogFooter,{children:[(0,a.jsx)(t.Button,{variant:"outline",onClick:()=>ev(ep),children:"å…¨é€‰"}),(0,a.jsx)(t.Button,{variant:"outline",onClick:()=>ev([]),children:"æ¸…ç©º"}),(0,a.jsxs)(t.Button,{onClick:()=>{eo({...ec,models:ey.join(", ")}),ej(!1)},children:["ç¡®è®¤ (",ey.length,")"]})]})]})}),(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(L.Gauge,{className:"h-4 w-4"}),"ä½¿ç”¨é™åˆ¶"]})}),(0,a.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"è®¾ç½®æœ¬ç¾¤æ¯æ—¥ä½¿ç”¨æ¬¡æ•°é™åˆ¶ï¼ˆ0è¡¨ç¤ºæ— é™åˆ¶ï¼‰"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ç¾¤æ¯æ—¥é™åˆ¶"}),(0,a.jsx)(n.Input,{type:"number",min:0,value:eN.dailyGroupLimit,onChange:e=>ef({...eN,dailyGroupLimit:parseInt(e.target.value)||0}),placeholder:"0 = æ— é™åˆ¶"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"ç”¨æˆ·æ¯æ—¥é™åˆ¶"}),(0,a.jsx)(n.Input,{type:"number",min:0,value:eN.dailyUserLimit,onChange:e=>ef({...eN,dailyUserLimit:parseInt(e.target.value)||0}),placeholder:"0 = æ— é™åˆ¶"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{children:"è¾¾åˆ°é™åˆ¶æ—¶çš„æç¤º"}),(0,a.jsx)(o.Textarea,{value:eN.usageLimitMessage,onChange:e=>ef({...eN,usageLimitMessage:e.target.value}),placeholder:"ä»Šæ—¥ä½¿ç”¨æ¬¡æ•°å·²è¾¾ä¸Šé™ï¼Œè¯·æ˜Žå¤©å†è¯•",rows:2})]})]})]})]}),(0,a.jsxs)(m.TabsContent,{value:"advanced",className:"space-y-4",children:[(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(P.Bot,{className:"h-4 w-4"}),"æ¨¡åž‹é…ç½®"]})}),(0,a.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"ä¸ºæœ¬ç¾¤é…ç½®å„åœºæ™¯ç‹¬ç«‹æ¨¡åž‹ï¼ˆç•™ç©ºä½¿ç”¨å…¨å±€é…ç½®ï¼‰"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)(q,{label:"å¯¹è¯æ¨¡åž‹",value:eN.chatModel,models:el,onChange:e=>ef({...eN,chatModel:e})}),(0,a.jsx)(q,{label:"æ€»ç»“æ¨¡åž‹",value:eN.summaryModel,models:el,onChange:e=>ef({...eN,summaryModel:e})}),(0,a.jsx)(q,{label:"ä¼ªäººæ¨¡åž‹",value:eN.bymModel,models:el,onChange:e=>ef({...eN,bymModel:e})}),(0,a.jsx)(q,{label:"ç»˜å›¾æ¨¡åž‹",value:eN.imageGenModel,models:el,onChange:e=>ef({...eN,imageGenModel:e})})]})]})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(v.BookOpen,{className:"h-4 w-4"}),"ç¾¤ç»„çŸ¥è¯†åº“"]})}),(0,a.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"ä¸ºæœ¬ç¾¤é…ç½®ä¸“å±žçŸ¥è¯†åº“"}),eN.knowledgeIds.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:eN.knowledgeIds.map(e=>{let s=ea.find(a=>a.id===e);return(0,a.jsxs)(d.Badge,{variant:"secondary",className:"gap-1",children:[s?.name||e,(0,a.jsx)("button",{onClick:()=>ef({...eN,knowledgeIds:eN.knowledgeIds.filter(a=>a!==e)}),children:(0,a.jsx)(f.X,{className:"h-3 w-3"})})]},e)})}),(0,a.jsxs)(h.Select,{value:"",onValueChange:e=>e&&!eN.knowledgeIds.includes(e)&&ef({...eN,knowledgeIds:[...eN.knowledgeIds,e]}),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{placeholder:"æ·»åŠ çŸ¥è¯†åº“..."})}),(0,a.jsx)(h.SelectContent,{children:ea.filter(e=>!eN.knowledgeIds.includes(e.id)).map(e=>(0,a.jsx)(h.SelectItem,{value:e.id,children:e.name},e.id))})]})]})]})]})]})]})}function F({icon:e,title:s,desc:l,value:i,onChange:t}){return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-muted",children:e}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:s}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:l})]})]}),(0,a.jsxs)(h.Select,{value:i,onValueChange:t,children:[(0,a.jsx)(h.SelectTrigger,{className:"w-24",children:(0,a.jsx)(h.SelectValue,{})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(h.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(h.SelectItem,{value:"off",children:"å…³é—­"})]})]})]})}function q({label:e,value:s,models:l,onChange:i}){return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(r.Label,{className:"text-xs",children:e}),(0,a.jsxs)(h.Select,{value:s||"__default__",onValueChange:e=>i("__default__"===e?"":e),children:[(0,a.jsx)(h.SelectTrigger,{children:(0,a.jsx)(h.SelectValue,{placeholder:"ä½¿ç”¨å…¨å±€é…ç½®"})}),(0,a.jsxs)(h.SelectContent,{className:"max-h-[200px]",children:[(0,a.jsx)(h.SelectItem,{value:"__default__",children:"ä½¿ç”¨å…¨å±€é…ç½®"}),l.map(e=>(0,a.jsx)(h.SelectItem,{value:e,children:e},e))]})]})]})}e.s(["GroupEditor",()=>O],5945)}]);