(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6189,e=>{"use strict";var a=e.i(18050),s=e.i(71645),i=e.i(70065),t=e.i(67881),l=e.i(23750),n=e.i(10708),r=e.i(94179),d=e.i(19036),o=e.i(84762),c=e.i(90382),m=e.i(62870),h=e.i(30374),x=e.i(46696),b=e.i(63209),u=e.i(31278),p=e.i(39616),g=e.i(39312),j=e.i(83086),y=e.i(10980),v=e.i(16715),N=e.i(81203),f=e.i(37727),C=e.i(73708),w=e.i(86311),k=e.i(30731),S=e.i(47780),T=e.i(31245),P=e.i(61911),E=e.i(3116),M=e.i(99181),I=e.i(79002),L=e.i(17801),_=e.i(55711),B=e.i(97960),G=e.i(18393),z=e.i(27612),U=e.i(7233),R=e.i(92163),K=e.i(47163),V=e.i(26569),A=e.i(42437);function D({value:e,onChange:s,className:i}){return(0,a.jsxs)(m.Select,{value:e,onValueChange:s,children:[(0,a.jsx)(m.SelectTrigger,{className:(0,K.cn)("w-24",i),children:(0,a.jsx)(m.SelectValue,{})}),(0,a.jsxs)(m.SelectContent,{children:[(0,a.jsx)(m.SelectItem,{value:"inherit",children:"继承"}),(0,a.jsx)(m.SelectItem,{value:"on",children:"开启"}),(0,a.jsx)(m.SelectItem,{value:"off",children:"关闭"})]})]})}function Q({icon:e,title:s,desc:i,value:t,onChange:l,children:n}){return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-muted shrink-0",children:e}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:s}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:i})]})]}),(0,a.jsx)(D,{value:t,onChange:l})]}),n&&"off"!==t&&(0,a.jsx)("div",{className:"ml-4 pl-4 border-l-2 border-muted space-y-3",children:n})]})}function q({label:e,value:s,models:i,onChange:t}){return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:e}),(0,a.jsxs)(m.Select,{value:s||"__default__",onValueChange:e=>t("__default__"===e?"":e),children:[(0,a.jsx)(m.SelectTrigger,{children:(0,a.jsx)(m.SelectValue,{placeholder:"继承全局"})}),(0,a.jsxs)(m.SelectContent,{children:[(0,a.jsx)(m.SelectItem,{value:"__default__",children:"继承全局"}),i.map(e=>(0,a.jsx)(m.SelectItem,{value:e,children:e},e))]})]})]})}function F({value:e,onChange:s,label:i="响应概率"}){let t="inherit"===e?1:e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:i}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),(0,a.jsx)(c.Slider,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05})]})}function O(){let e=(0,V.useIsMobile)(),[c,O]=(0,s.useState)(!0),[H,$]=(0,s.useState)(!1),[X,J]=(0,s.useState)(""),[Z,W]=(0,s.useState)(""),[Y,ee]=(0,s.useState)("basic"),[ea,es]=(0,s.useState)(!1),[ei,et]=(0,s.useState)(""),[el,en]=(0,s.useState)(!1),[er,ed]=(0,s.useState)([]),[eo,ec]=(0,s.useState)([]),[em,eh]=(0,s.useState)([]),[ex,eb]=(0,s.useState)({total:0,images:[]}),[eu,ep]=(0,s.useState)({groupId:"",groupName:"",presetId:"__default__",systemPrompt:"",enabled:!0,triggerMode:"default",customPrefix:"",toolsEnabled:"inherit",imageGenEnabled:"inherit",imageGenModel:"",imageGenSize:"1024x1024",imageGenQuality:"standard",imageGenDailyLimit:0,summaryEnabled:"inherit",summaryModel:"",eventEnabled:"inherit",emojiThiefEnabled:"inherit",emojiThiefSeparateFolder:!0,emojiThiefMaxCount:500,emojiThiefStealRate:1,emojiThiefTriggerRate:.05,emojiThiefTriggerMode:"off",bymEnabled:"inherit",bymPresetId:"__default__",bymPrompt:"",bymProbability:"inherit",bymModel:"",bymTemperature:"inherit",bymMaxTokens:"inherit",bymReplyLength:"medium",bymUseEmoji:!0,gameProbability:"inherit",gameEnableTools:"inherit",gameTemperature:"inherit",gameMaxTokens:"inherit",gameModel:"",proactiveChatEnabled:"inherit",proactiveChatProbability:"inherit",proactiveChatCooldown:"inherit",proactiveChatMaxDaily:"inherit",proactiveChatMinMessages:5,proactiveChatTimeStart:8,proactiveChatTimeEnd:23,chatEnabled:!0,chatContextLength:20,chatStreamReply:!0,chatQuoteReply:!1,chatShowThinking:!0,chatModel:"",listMode:"none",blacklist:[],whitelist:[],summaryPushEnabled:!1,summaryPushIntervalType:"day",summaryPushIntervalValue:1,summaryPushHour:20,summaryPushMessageCount:100,welcomeEnabled:"inherit",welcomeMessage:"",welcomePrompt:"",welcomeProbability:"inherit",goodbyeEnabled:"inherit",goodbyePrompt:"",goodbyeProbability:"inherit",pokeEnabled:"inherit",pokeBack:!1,pokeProbability:"inherit",recallEnabled:"inherit",recallProbability:"inherit",banEnabled:"inherit",banProbability:"inherit",luckyKingEnabled:"inherit",luckyKingProbability:"inherit",honorEnabled:"inherit",honorProbability:"inherit",essenceEnabled:"inherit",essenceProbability:"inherit",adminEnabled:"inherit",adminProbability:"inherit",knowledgeIds:[],independentChannelEnabled:!1,independentBaseUrl:"",independentApiKey:"",independentAdapterType:"openai",independentChannels:[],dailyGroupLimit:0,dailyUserLimit:0,usageLimitMessage:""}),[eg,ej]=(0,s.useState)(!1),[ey,ev]=(0,s.useState)(null),[eN,ef]=(0,s.useState)({name:"",baseUrl:"",apiKey:"",adapterType:"openai",models:"",enabled:!0,priority:0,modelsPath:"",chatPath:"",imageTransferMode:"auto",imageCompress:!0,imageQuality:85,imageMaxSize:4096}),[eC,ew]=(0,s.useState)(null),ek=()=>localStorage.getItem("group_admin_token")||"",eS=(0,s.useCallback)(async e=>{O(!0);try{let a=await fetch("/chatai/api/group-admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e.toUpperCase()})}),s=await a.json();0===s.code?(localStorage.setItem("group_admin_token",s.data.token),x.toast.success("登录成功"),eT(s.data.token)):(x.toast.error(s.message||"登录码无效或已过期"),es(!0),O(!1))}catch{x.toast.error("登录失败，请检查网络"),es(!0),O(!1)}},[]),eT=(0,s.useCallback)(async e=>{try{let a=await fetch("/chatai/api/group-admin/config",{headers:{Authorization:`Bearer ${e||ek()}`}});if(!a.ok){if(401===a.status){localStorage.removeItem("group_admin_token"),es(!0),O(!1);return}throw Error("加载配置失败")}let s=await a.json();if(0===s.code){let e=s.data;J(e.groupId),ed(e.presets||[]);let a=new Set;e.channels?.forEach(e=>{e.models?.forEach(e=>a.add(e))}),ec(Array.from(a).sort()),e.knowledgeBases&&eh(e.knowledgeBases),e.emojiStats&&eb(e.emojiStats),ep(a=>({...a,groupId:e.groupId,groupName:e.groupName||"",presetId:e.presetId||"__default__",systemPrompt:e.systemPrompt||"",enabled:!1!==e.enabled,triggerMode:e.triggerMode||"default",customPrefix:e.customPrefix||"",toolsEnabled:void 0===e.toolsEnabled?"inherit":e.toolsEnabled?"on":"off",imageGenEnabled:void 0===e.imageGenEnabled?"inherit":e.imageGenEnabled?"on":"off",imageGenModel:e.models?.image||"",summaryEnabled:void 0===e.summaryEnabled?"inherit":e.summaryEnabled?"on":"off",summaryModel:e.models?.summary||"",eventEnabled:void 0===e.eventHandler?"inherit":e.eventHandler?"on":"off",emojiThiefEnabled:e.emojiThief?.enabled===void 0?"inherit":e.emojiThief.enabled?"on":"off",emojiThiefSeparateFolder:e.emojiThief?.independent??!0,emojiThiefMaxCount:e.emojiThief?.maxCount??500,emojiThiefStealRate:(e.emojiThief?.probability??100)/100,emojiThiefTriggerRate:(e.emojiThief?.triggerRate??5)/100,emojiThiefTriggerMode:e.emojiThief?.triggerMode||"off",bymEnabled:e.bym?.enabled===void 0?"inherit":e.bym.enabled?"on":"off",bymPresetId:e.bym?.presetId||"__default__",bymPrompt:e.bym?.prompt||"",bymProbability:e.bym?.probability??"inherit",bymModel:e.bym?.modelId||"",bymTemperature:e.bym?.temperature??"inherit",bymMaxTokens:e.bym?.maxTokens??"inherit",bymReplyLength:e.bym?.style?.replyLength||"medium",bymUseEmoji:e.bym?.style?.useEmoji??!0,gameProbability:e.game?.probability??"inherit",gameEnableTools:e.game?.enableTools===void 0?"inherit":e.game.enableTools?"on":"off",gameTemperature:e.game?.temperature??"inherit",gameMaxTokens:e.game?.maxTokens??"inherit",gameModel:e.models?.game||"",proactiveChatEnabled:e.bym?.proactive?.enabled===void 0?"inherit":e.bym.proactive.enabled?"on":"off",proactiveChatProbability:e.bym?.proactive?.probability??"inherit",proactiveChatCooldown:e.bym?.proactive?.cooldown??"inherit",proactiveChatMaxDaily:e.bym?.proactive?.maxDaily??"inherit",proactiveChatMinMessages:e.bym?.proactive?.minMessages??5,proactiveChatTimeStart:e.bym?.proactive?.timeRange?.start??8,proactiveChatTimeEnd:e.bym?.proactive?.timeRange?.end??23,chatEnabled:e.chat?.enabled??!0,chatContextLength:e.chat?.contextLength??20,chatStreamReply:e.chat?.streamReply??!0,chatQuoteReply:e.chat?.quoteReply??!1,chatShowThinking:e.chat?.showThinking??!0,chatModel:e.models?.chat||"",listMode:e.listMode||"none",blacklist:e.blacklist||[],whitelist:e.whitelist||[],summaryPushEnabled:e.summary?.push?.enabled||!1,summaryPushIntervalType:e.summary?.push?.intervalType||"day",summaryPushIntervalValue:e.summary?.push?.intervalValue||1,summaryPushHour:e.summary?.push?.pushHour??20,summaryPushMessageCount:e.summary?.push?.messageCount||100,welcomeEnabled:e.events?.welcome?.enabled===void 0?"inherit":e.events.welcome.enabled?"on":"off",welcomeMessage:e.events?.welcome?.message||"",welcomePrompt:e.events?.welcome?.prompt||"",welcomeProbability:e.events?.welcome?.probability??"inherit",goodbyeEnabled:e.events?.goodbye?.enabled===void 0?"inherit":e.events.goodbye.enabled?"on":"off",goodbyePrompt:e.events?.goodbye?.prompt||"",goodbyeProbability:e.events?.goodbye?.probability??"inherit",pokeEnabled:e.events?.poke?.enabled===void 0?"inherit":e.events.poke.enabled?"on":"off",pokeBack:e.events?.poke?.pokeBack||!1,pokeProbability:e.events?.poke?.probability??"inherit",recallEnabled:e.events?.recall?.enabled===void 0?"inherit":e.events.recall.enabled?"on":"off",recallProbability:e.events?.recall?.probability??"inherit",banEnabled:e.events?.ban?.enabled===void 0?"inherit":e.events.ban.enabled?"on":"off",banProbability:e.events?.ban?.probability??"inherit",luckyKingEnabled:e.events?.luckyKing?.enabled===void 0?"inherit":e.events.luckyKing.enabled?"on":"off",luckyKingProbability:e.events?.luckyKing?.probability??"inherit",honorEnabled:e.events?.honor?.enabled===void 0?"inherit":e.events.honor.enabled?"on":"off",honorProbability:e.events?.honor?.probability??"inherit",essenceEnabled:e.events?.essence?.enabled===void 0?"inherit":e.events.essence.enabled?"on":"off",essenceProbability:e.events?.essence?.probability??"inherit",adminEnabled:e.events?.admin?.enabled===void 0?"inherit":e.events.admin.enabled?"on":"off",adminProbability:e.events?.admin?.probability??"inherit",knowledgeIds:e.knowledgeIds||[],imageGenSize:e.imageGen?.size||"1024x1024",imageGenQuality:e.imageGen?.quality||"standard",imageGenDailyLimit:e.imageGen?.maxDailyLimit??0,independentChannelEnabled:e.independentChannel?.hasChannel||!1,independentBaseUrl:e.independentChannel?.baseUrl||"",independentApiKey:e.independentChannel?.apiKey||"",independentAdapterType:e.independentChannel?.adapterType||"openai",independentChannels:e.independentChannel?.channels||[],dailyGroupLimit:e.usageLimit?.dailyGroupLimit||0,dailyUserLimit:e.usageLimit?.dailyUserLimit||0,usageLimitMessage:e.usageLimit?.limitMessage||""}))}}catch(e){W(e.message)}finally{O(!1)}},[]);(0,s.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("code");if(e){window.history.replaceState({},"","/chatai/group-admin"),eS(e);return}let a=localStorage.getItem("group_admin_token");if(!a){es(!0),O(!1);return}eT(a)},[eS,eT]);let eP=async()=>{if(!ei.trim())return void x.toast.error("请输入登录码");en(!0);try{let e=await fetch("/chatai/api/group-admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:ei.trim().toUpperCase()})}),a=await e.json();0===a.code?(localStorage.setItem("group_admin_token",a.data.token),es(!1),et(""),x.toast.success("登录成功"),eT(a.data.token)):x.toast.error(a.message||"登录失败")}catch{x.toast.error("登录失败")}finally{en(!1)}},eE=async()=>{$(!0);try{let e=await fetch("/chatai/api/group-admin/config",{method:"PUT",headers:{Authorization:`Bearer ${ek()}`,"Content-Type":"application/json"},body:JSON.stringify({groupName:eu.groupName,systemPrompt:eu.systemPrompt||null,presetId:"__default__"===eu.presetId?"":eu.presetId,enabled:eu.enabled,triggerMode:eu.triggerMode,customPrefix:eu.customPrefix||void 0,toolsEnabled:"inherit"===eu.toolsEnabled?void 0:"on"===eu.toolsEnabled,imageGenEnabled:"inherit"===eu.imageGenEnabled?void 0:"on"===eu.imageGenEnabled,summaryEnabled:"inherit"===eu.summaryEnabled?void 0:"on"===eu.summaryEnabled,eventHandler:"inherit"===eu.eventEnabled?void 0:"on"===eu.eventEnabled,emojiThief:{enabled:"inherit"===eu.emojiThiefEnabled?void 0:"on"===eu.emojiThiefEnabled,independent:eu.emojiThiefSeparateFolder,maxCount:eu.emojiThiefMaxCount,probability:Math.round(100*eu.emojiThiefStealRate),triggerRate:Math.round(100*eu.emojiThiefTriggerRate),triggerMode:eu.emojiThiefTriggerMode},bym:{enabled:"inherit"===eu.bymEnabled?void 0:"on"===eu.bymEnabled,presetId:"__default__"===eu.bymPresetId?void 0:eu.bymPresetId,prompt:eu.bymPrompt||void 0,probability:"inherit"===eu.bymProbability?void 0:eu.bymProbability,modelId:eu.bymModel||void 0,temperature:"inherit"===eu.bymTemperature?void 0:eu.bymTemperature,maxTokens:"inherit"===eu.bymMaxTokens?void 0:eu.bymMaxTokens,proactive:{enabled:"inherit"===eu.proactiveChatEnabled?void 0:"on"===eu.proactiveChatEnabled,probability:"inherit"===eu.proactiveChatProbability?void 0:eu.proactiveChatProbability,cooldown:"inherit"===eu.proactiveChatCooldown?void 0:eu.proactiveChatCooldown,maxDaily:"inherit"===eu.proactiveChatMaxDaily?void 0:eu.proactiveChatMaxDaily,minMessages:eu.proactiveChatMinMessages,timeRange:{start:eu.proactiveChatTimeStart,end:eu.proactiveChatTimeEnd}},style:{replyLength:eu.bymReplyLength,useEmoji:eu.bymUseEmoji}},chat:{enabled:eu.chatEnabled,contextLength:eu.chatContextLength,streamReply:eu.chatStreamReply,quoteReply:eu.chatQuoteReply,showThinking:eu.chatShowThinking},imageGen:{enabled:"inherit"===eu.imageGenEnabled?void 0:"on"===eu.imageGenEnabled,modelId:eu.imageGenModel||void 0,size:eu.imageGenSize,quality:eu.imageGenQuality,maxDailyLimit:eu.imageGenDailyLimit},game:{probability:"inherit"===eu.gameProbability?void 0:eu.gameProbability,enableTools:"inherit"===eu.gameEnableTools?void 0:"on"===eu.gameEnableTools,temperature:"inherit"===eu.gameTemperature?void 0:eu.gameTemperature,maxTokens:"inherit"===eu.gameMaxTokens?void 0:eu.gameMaxTokens},models:{chat:eu.chatModel||void 0,summary:eu.summaryModel||void 0,game:eu.gameModel||void 0},listMode:eu.listMode,blacklist:eu.blacklist,whitelist:eu.whitelist,summary:{enabled:"inherit"===eu.summaryEnabled?void 0:"on"===eu.summaryEnabled,modelId:eu.summaryModel||void 0,push:{enabled:eu.summaryPushEnabled,intervalType:eu.summaryPushIntervalType,intervalValue:eu.summaryPushIntervalValue,pushHour:eu.summaryPushHour,messageCount:eu.summaryPushMessageCount}},events:{enabled:"inherit"===eu.eventEnabled?void 0:"on"===eu.eventEnabled,welcome:{enabled:"inherit"===eu.welcomeEnabled?void 0:"on"===eu.welcomeEnabled,message:eu.welcomeMessage||void 0,prompt:eu.welcomePrompt||void 0,probability:"inherit"===eu.welcomeProbability?void 0:eu.welcomeProbability},goodbye:{enabled:"inherit"===eu.goodbyeEnabled?void 0:"on"===eu.goodbyeEnabled,prompt:eu.goodbyePrompt||void 0,probability:"inherit"===eu.goodbyeProbability?void 0:eu.goodbyeProbability},poke:{enabled:"inherit"===eu.pokeEnabled?void 0:"on"===eu.pokeEnabled,pokeBack:eu.pokeBack,probability:"inherit"===eu.pokeProbability?void 0:eu.pokeProbability},recall:{enabled:"inherit"===eu.recallEnabled?void 0:"on"===eu.recallEnabled,probability:"inherit"===eu.recallProbability?void 0:eu.recallProbability},ban:{enabled:"inherit"===eu.banEnabled?void 0:"on"===eu.banEnabled,probability:"inherit"===eu.banProbability?void 0:eu.banProbability},luckyKing:{enabled:"inherit"===eu.luckyKingEnabled?void 0:"on"===eu.luckyKingEnabled,probability:"inherit"===eu.luckyKingProbability?void 0:eu.luckyKingProbability},honor:{enabled:"inherit"===eu.honorEnabled?void 0:"on"===eu.honorEnabled,probability:"inherit"===eu.honorProbability?void 0:eu.honorProbability},essence:{enabled:"inherit"===eu.essenceEnabled?void 0:"on"===eu.essenceEnabled,probability:"inherit"===eu.essenceProbability?void 0:eu.essenceProbability},admin:{enabled:"inherit"===eu.adminEnabled?void 0:"on"===eu.adminEnabled,probability:"inherit"===eu.adminProbability?void 0:eu.adminProbability}},independentChannel:{baseUrl:eu.independentBaseUrl||void 0,apiKey:eu.independentApiKey||void 0,adapterType:eu.independentAdapterType,channels:eu.independentChannels.length>0?eu.independentChannels:void 0},usageLimit:{dailyGroupLimit:eu.dailyGroupLimit,dailyUserLimit:eu.dailyUserLimit,limitMessage:eu.usageLimitMessage||void 0},knowledgeIds:eu.knowledgeIds.length>0?eu.knowledgeIds:void 0})});if(!e.ok){if(401===e.status)return void W("认证已过期");throw Error("保存失败")}let a=await e.json();if(0===a.code)x.toast.success("配置已保存");else throw Error(a.message||"保存失败")}catch(e){x.toast.error(e.message)}finally{$(!1)}},eM=async e=>{if(confirm("确定要删除这个表情吗？"))try{(await fetch(`/chatai/api/group-admin/emoji/delete?file=${encodeURIComponent(e)}`,{method:"DELETE",headers:{Authorization:`Bearer ${ek()}`}})).ok&&(x.toast.success("已删除"),eb({...ex,total:ex.total-1,images:ex.images.filter(a=>a.name!==e)}))}catch{x.toast.error("删除失败")}},eI=async()=>{if(confirm("确定要清空所有表情吗？"))try{(await fetch("/chatai/api/group-admin/emoji/clear",{method:"DELETE",headers:{Authorization:`Bearer ${ek()}`}})).ok&&(x.toast.success("已清空"),eb({total:0,images:[]}))}catch{x.toast.error("清空失败")}},eL=[{id:"basic",label:"基础设置",mobileLabel:"基础",icon:(0,a.jsx)(p.Settings,{className:"h-4 w-4"})},{id:"features",label:"功能开关",mobileLabel:"功能",icon:(0,a.jsx)(g.Zap,{className:"h-4 w-4"})},{id:"bym",label:"伪人模式",mobileLabel:"伪人",icon:(0,a.jsx)(j.Sparkles,{className:"h-4 w-4"})},{id:"game",label:"游戏模式",mobileLabel:"游戏",icon:(0,a.jsx)(R.Gamepad2,{className:"h-4 w-4"})},{id:"channel",label:"对话设置",mobileLabel:"对话",icon:(0,a.jsx)(w.MessageSquare,{className:"h-4 w-4"})},{id:"advanced",label:"高级配置",mobileLabel:"高级",icon:(0,a.jsx)(y.BookOpen,{className:"h-4 w-4"})}];return c?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(u.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):ea?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-background via-orange-50/30 dark:via-orange-950/10 to-muted",children:(0,a.jsxs)("div",{className:"w-full max-w-md space-y-4",children:[(0,a.jsx)(i.Card,{className:"border-orange-200/50 dark:border-orange-900/30",children:(0,a.jsxs)(i.CardContent,{className:"p-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(P.Users,{className:"h-8 w-8 text-orange-600 dark:text-orange-400"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"群管理面板"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"专属于群管理员的配置入口"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(l.Input,{value:ei,onChange:e=>et(e.target.value.toUpperCase()),onKeyDown:e=>"Enter"===e.key&&eP(),placeholder:"输入6位登录码",maxLength:6,className:"text-center text-xl tracking-wider font-mono h-12 border-orange-200 dark:border-orange-900/50 focus-visible:ring-orange-500",autoFocus:!0}),(0,a.jsxs)(t.Button,{className:"w-full h-11 bg-orange-600 hover:bg-orange-700",onClick:eP,disabled:el,children:[el&&(0,a.jsx)(u.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"登录管理面板"]})]})]})}),(0,a.jsx)(i.Card,{className:"bg-muted/50",children:(0,a.jsxs)(i.CardContent,{className:"p-4 space-y-3",children:[(0,a.jsxs)("h3",{className:"font-medium text-sm flex items-center gap-2",children:[(0,a.jsx)(w.MessageSquare,{className:"h-4 w-4 text-orange-600"}),"如何获取登录码？"]}),(0,a.jsxs)("ol",{className:"text-xs text-muted-foreground space-y-2 list-decimal list-inside",children:[(0,a.jsxs)("li",{children:["确保您是目标群的 ",(0,a.jsx)("strong",{children:"管理员"})," 或 ",(0,a.jsx)("strong",{children:"群主"})]}),(0,a.jsxs)("li",{children:["在群内发送命令"," ",(0,a.jsx)("code",{className:"bg-background px-1.5 py-0.5 rounded border",children:"#群管理面板"})]}),(0,a.jsx)("li",{children:"Bot 将私聊发送登录码或直接链接"}),(0,a.jsxs)("li",{children:["登录码有效期为 ",(0,a.jsx)("strong",{children:"5分钟"}),"，请尽快使用"]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-card p-2.5 rounded-lg border",children:[(0,a.jsx)(p.Settings,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"设置群专属人设"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-card p-2.5 rounded-lg border",children:[(0,a.jsx)(g.Zap,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"管理功能开关"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-card p-2.5 rounded-lg border",children:[(0,a.jsx)(T.Bot,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"配置伪人模式"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-card p-2.5 rounded-lg border",children:[(0,a.jsx)(G.Server,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"独立渠道配置"})]})]})]})}):Z?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,a.jsx)(i.Card,{className:"w-full max-w-sm",children:(0,a.jsxs)(i.CardContent,{className:"pt-6 text-center",children:[(0,a.jsx)(b.AlertCircle,{className:"h-12 w-12 text-destructive mx-auto"}),(0,a.jsx)("h2",{className:"mt-4 text-xl font-semibold",children:Z}),(0,a.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"请在群内发送 #群管理面板 重新获取登录码"})]})})}):(0,a.jsxs)("div",{className:"flex flex-col h-screen bg-background",children:[(0,a.jsx)("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur border-b shrink-0",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-14",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h1",{className:"font-semibold truncate",children:eu.groupName||`群 ${X}`}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground font-mono",children:["#",X]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(t.Button,{variant:"ghost",size:"icon",onClick:()=>eT(),disabled:H,className:"h-9 w-9",children:(0,a.jsx)(v.RefreshCw,{className:"h-4 w-4"})}),(0,a.jsxs)(t.Button,{onClick:eE,disabled:H,size:"sm",className:"h-9",children:[H?(0,a.jsx)(u.Loader2,{className:"h-4 w-4 mr-1.5 animate-spin"}):null,(0,a.jsx)("span",{className:"hidden sm:inline",children:"保存"}),(0,a.jsx)("span",{className:"sm:hidden",children:"存"})]}),(0,a.jsx)(t.Button,{variant:"ghost",size:"sm",onClick:()=>{localStorage.removeItem("group_admin_token"),es(!0),J(""),x.toast.success("已退出登录")},className:"h-9",children:"退出"})]})]})})}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 pb-20 sm:pb-4",children:[(0,a.jsxs)("div",{className:(0,K.cn)(!e&&"flex gap-6"),children:[!e&&(0,a.jsx)("nav",{className:"w-48 shrink-0",children:(0,a.jsx)("div",{className:"sticky top-20 space-y-1",children:eL.map(e=>(0,a.jsxs)("button",{onClick:()=>ee(e.id),className:(0,K.cn)("w-full flex items-center gap-2.5 px-3 py-2.5 rounded-lg text-sm font-medium whitespace-nowrap transition-all",Y===e.id?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:[e.icon,e.label]},e.id))})}),(0,a.jsx)("div",{className:(0,K.cn)(!e&&"flex-1 min-w-0"),children:(0,a.jsx)(i.Card,{children:(0,a.jsxs)(i.CardContent,{className:(0,K.cn)(e?"p-4":"p-6"),children:["basic"===Y&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"群号"}),(0,a.jsx)(l.Input,{value:eu.groupId,disabled:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"群名称"}),(0,a.jsx)(l.Input,{value:eu.groupName,onChange:e=>ep({...eu,groupName:e.target.value}),placeholder:"可选"})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"使用预设"}),(0,a.jsxs)(m.Select,{value:eu.presetId,onValueChange:e=>ep({...eu,presetId:e}),children:[(0,a.jsx)(m.SelectTrigger,{children:(0,a.jsx)(m.SelectValue,{placeholder:"选择预设"})}),(0,a.jsxs)(m.SelectContent,{children:[(0,a.jsx)(m.SelectItem,{value:"__default__",children:"使用默认预设"}),er.map(e=>(0,a.jsx)(m.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"触发模式"}),(0,a.jsxs)(m.Select,{value:eu.triggerMode,onValueChange:e=>ep({...eu,triggerMode:e}),children:[(0,a.jsx)(m.SelectTrigger,{children:(0,a.jsx)(m.SelectValue,{})}),(0,a.jsxs)(m.SelectContent,{children:[(0,a.jsx)(m.SelectItem,{value:"default",children:"默认"}),(0,a.jsx)(m.SelectItem,{value:"at",children:"仅@触发"}),(0,a.jsx)(m.SelectItem,{value:"prefix",children:"仅前缀触发"}),(0,a.jsx)(m.SelectItem,{value:"all",children:"全部消息"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"自定义前缀"}),(0,a.jsx)(l.Input,{value:eu.customPrefix,onChange:e=>ep({...eu,customPrefix:e.target.value}),placeholder:"留空使用全局前缀"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"独立人设"}),(0,a.jsx)(o.Textarea,{value:eu.systemPrompt,onChange:e=>ep({...eu,systemPrompt:e.target.value}),placeholder:"不填写则使用预设配置...",rows:3,className:"font-mono text-sm"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["支持变量: ","{{user_name}}"," ","{{group_name}}"," ","{{date}}"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(N.Power,{className:"h-4 w-4"}),(0,a.jsx)(n.Label,{children:"启用AI响应"})]}),(0,a.jsx)(d.Switch,{checked:eu.enabled,onCheckedChange:e=>ep({...eu,enabled:e})})]})]}),"features"===Y&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"群管理员也可通过命令控制这些功能"}),(0,a.jsx)(Q,{icon:(0,a.jsx)(g.Zap,{className:"h-4 w-4"}),title:"工具调用",desc:"搜索、代码执行等",value:eu.toolsEnabled,onChange:e=>ep({...eu,toolsEnabled:e})}),(0,a.jsxs)(Q,{icon:(0,a.jsx)(C.Image,{className:"h-4 w-4"}),title:"绘图功能",desc:"文生图、图生图",value:eu.imageGenEnabled,onChange:e=>ep({...eu,imageGenEnabled:e}),children:[(0,a.jsx)(q,{label:"绘图模型",value:eu.imageGenModel,models:eo,onChange:e=>ep({...eu,imageGenModel:e})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"图片尺寸"}),(0,a.jsxs)(m.Select,{value:eu.imageGenSize,onValueChange:e=>ep({...eu,imageGenSize:e}),children:[(0,a.jsx)(m.SelectTrigger,{children:(0,a.jsx)(m.SelectValue,{})}),(0,a.jsxs)(m.SelectContent,{children:[(0,a.jsx)(m.SelectItem,{value:"1024x1024",children:"1024x1024"}),(0,a.jsx)(m.SelectItem,{value:"1792x1024",children:"1792x1024"}),(0,a.jsx)(m.SelectItem,{value:"1024x1792",children:"1024x1792"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"每日限额"}),(0,a.jsx)(l.Input,{type:"number",min:0,value:eu.imageGenDailyLimit,onChange:e=>ep({...eu,imageGenDailyLimit:parseInt(e.target.value)||0})})]})]})]}),(0,a.jsx)(Q,{icon:(0,a.jsx)(w.MessageSquare,{className:"h-4 w-4"}),title:"群聊总结",desc:"AI生成群聊总结",value:eu.summaryEnabled,onChange:e=>ep({...eu,summaryEnabled:e}),children:(0,a.jsx)(q,{label:"总结模型",value:eu.summaryModel,models:eo,onChange:e=>ep({...eu,summaryModel:e})})}),(0,a.jsxs)(Q,{icon:(0,a.jsx)(k.PartyPopper,{className:"h-4 w-4"}),title:"事件处理",desc:"入群欢迎、退群提醒",value:eu.eventEnabled,onChange:e=>ep({...eu,eventEnabled:e}),children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(I.UserPlus,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)(n.Label,{className:"text-sm",children:"入群欢迎"})]}),(0,a.jsx)(D,{value:eu.welcomeEnabled,onChange:e=>ep({...eu,welcomeEnabled:e})})]}),"on"===eu.welcomeEnabled&&(0,a.jsxs)("div",{className:"pl-6 space-y-2",children:[(0,a.jsx)(F,{value:eu.welcomeProbability,onChange:e=>ep({...eu,welcomeProbability:e})}),(0,a.jsx)(o.Textarea,{value:eu.welcomeMessage,onChange:e=>ep({...eu,welcomeMessage:e.target.value}),placeholder:"固定欢迎语（留空用AI）",rows:2,className:"text-sm"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(L.UserMinus,{className:"h-4 w-4 text-red-500"}),(0,a.jsx)(n.Label,{className:"text-sm",children:"退群提醒"})]}),(0,a.jsx)(D,{value:eu.goodbyeEnabled,onChange:e=>ep({...eu,goodbyeEnabled:e})})]}),"on"===eu.goodbyeEnabled&&(0,a.jsx)("div",{className:"pl-6 space-y-2",children:(0,a.jsx)(F,{value:eu.goodbyeProbability,onChange:e=>ep({...eu,goodbyeProbability:e})})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(M.Hand,{className:"h-4 w-4 text-blue-500"}),(0,a.jsx)(n.Label,{className:"text-sm",children:"戳一戳"})]}),(0,a.jsx)(D,{value:eu.pokeEnabled,onChange:e=>ep({...eu,pokeEnabled:e})})]}),"on"===eu.pokeEnabled&&(0,a.jsxs)("div",{className:"pl-6 space-y-2",children:[(0,a.jsx)(F,{value:eu.pokeProbability,onChange:e=>ep({...eu,pokeProbability:e})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Switch,{checked:eu.pokeBack,onCheckedChange:e=>ep({...eu,pokeBack:e})}),(0,a.jsx)(n.Label,{className:"text-xs",children:"戳回去"})]})]})]})]}),(0,a.jsxs)(Q,{icon:(0,a.jsx)(S.Palette,{className:"h-4 w-4 text-pink-500"}),title:"表情小偷",desc:"收集并发送表情包",value:eu.emojiThiefEnabled,onChange:e=>ep({...eu,emojiThiefEnabled:e}),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.Label,{className:"text-sm font-medium",children:"独立存储"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"本群表情不与其他群共享"})]}),(0,a.jsx)(d.Switch,{checked:eu.emojiThiefSeparateFolder,onCheckedChange:e=>ep({...eu,emojiThiefSeparateFolder:e})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"最大数量"}),(0,a.jsx)(l.Input,{type:"number",value:eu.emojiThiefMaxCount,onChange:e=>ep({...eu,emojiThiefMaxCount:parseInt(e.target.value)||500})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"收集概率(%)"}),(0,a.jsx)(l.Input,{type:"number",value:Math.round(100*eu.emojiThiefStealRate),onChange:e=>ep({...eu,emojiThiefStealRate:parseInt(e.target.value)/100})})]})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg border bg-card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(B.Smile,{className:"h-4 w-4 text-yellow-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"表情库"}),(0,a.jsxs)(r.Badge,{variant:"secondary",className:"text-[10px]",children:[ex.total," 张"]})]}),(0,a.jsxs)(t.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs text-destructive",onClick:eI,children:[(0,a.jsx)(z.Trash2,{className:"h-3 w-3 mr-1"})," 清空"]})]}),ex.images.length>0?(0,a.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2 max-h-36 overflow-y-auto",children:ex.images.slice(0,12).map((e,s)=>(0,a.jsx)("div",{className:"relative aspect-square rounded border bg-muted/50 overflow-hidden cursor-pointer",onClick:()=>ew(e),children:(0,a.jsx)("img",{src:e.url,alt:e.name,className:"w-full h-full object-cover"})},s))}):(0,a.jsx)("div",{className:"text-center py-4 text-xs text-muted-foreground",children:"暂无表情"})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-muted",children:(0,a.jsx)(P.Users,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"用户权限"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"黑白名单"})]})]}),(0,a.jsxs)(m.Select,{value:eu.listMode,onValueChange:e=>ep({...eu,listMode:e}),children:[(0,a.jsx)(m.SelectTrigger,{className:"w-28",children:(0,a.jsx)(m.SelectValue,{})}),(0,a.jsxs)(m.SelectContent,{children:[(0,a.jsx)(m.SelectItem,{value:"none",children:"不启用"}),(0,a.jsx)(m.SelectItem,{value:"blacklist",children:"黑名单"}),(0,a.jsx)(m.SelectItem,{value:"whitelist",children:"白名单"})]})]})]}),"none"!==eu.listMode&&(0,a.jsx)(o.Textarea,{className:"mt-2 font-mono",placeholder:"每行一个QQ号",value:("blacklist"===eu.listMode?eu.blacklist:eu.whitelist).join("\n"),onChange:e=>{let a=e.target.value.split("\n").filter(Boolean);ep({...eu,["blacklist"===eu.listMode?"blacklist":"whitelist"]:a})}})]}),(0,a.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-muted",children:(0,a.jsx)(E.Clock,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"定时总结推送"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"定期推送群聊总结"})]})]}),(0,a.jsx)(d.Switch,{checked:eu.summaryPushEnabled,onCheckedChange:e=>ep({...eu,summaryPushEnabled:e})})]}),eu.summaryPushEnabled&&(0,a.jsx)("div",{className:"ml-4 pl-4 border-l-2 border-muted space-y-3 mt-3",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"间隔类型"}),(0,a.jsxs)(m.Select,{value:eu.summaryPushIntervalType,onValueChange:e=>ep({...eu,summaryPushIntervalType:e}),children:[(0,a.jsx)(m.SelectTrigger,{children:(0,a.jsx)(m.SelectValue,{})}),(0,a.jsxs)(m.SelectContent,{children:[(0,a.jsx)(m.SelectItem,{value:"day",children:"按天"}),(0,a.jsx)(m.SelectItem,{value:"hour",children:"按小时"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"间隔值"}),(0,a.jsx)(l.Input,{type:"number",min:1,value:eu.summaryPushIntervalValue,onChange:e=>ep({...eu,summaryPushIntervalValue:parseInt(e.target.value)||1})})]})]})})]})]}),"bym"===Y&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(Q,{icon:(0,a.jsx)(j.Sparkles,{className:"h-4 w-4 text-purple-500"}),title:"伪人模式",desc:"随机回复，模拟真人聊天",value:eu.bymEnabled,onChange:e=>ep({...eu,bymEnabled:e}),children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"伪人人设"}),(0,a.jsxs)(m.Select,{value:eu.bymPresetId,onValueChange:e=>ep({...eu,bymPresetId:e}),children:[(0,a.jsx)(m.SelectTrigger,{children:(0,a.jsx)(m.SelectValue,{})}),(0,a.jsxs)(m.SelectContent,{children:[(0,a.jsx)(m.SelectItem,{value:"__default__",children:"使用默认预设"}),(0,a.jsx)(m.SelectItem,{value:"__custom__",children:"自定义提示词"}),er.map(e=>(0,a.jsx)(m.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),"__custom__"===eu.bymPresetId&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"自定义提示词"}),(0,a.jsx)(o.Textarea,{value:eu.bymPrompt,onChange:e=>ep({...eu,bymPrompt:e.target.value}),placeholder:"你是一个真实的群友...",rows:3,className:"font-mono text-sm"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-sm",children:"触发概率"}),"inherit"===eu.bymProbability?(0,a.jsx)(t.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>ep({...eu,bymProbability:.02}),children:"继承全局"}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Input,{type:"number",min:0,max:100,className:"w-20",value:Math.round(100*eu.bymProbability),onChange:e=>ep({...eu,bymProbability:parseInt(e.target.value)/100})}),(0,a.jsx)("span",{className:"text-sm",children:"%"}),(0,a.jsx)(t.Button,{variant:"ghost",size:"sm",onClick:()=>ep({...eu,bymProbability:"inherit"}),children:(0,a.jsx)(f.X,{className:"h-3 w-3"})})]})]}),(0,a.jsx)(q,{label:"伪人模型",value:eu.bymModel,models:eo,onChange:e=>ep({...eu,bymModel:e})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-sm",children:"温度"}),"inherit"===eu.bymTemperature?(0,a.jsx)(t.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>ep({...eu,bymTemperature:.9}),children:"继承全局"}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Input,{type:"number",min:0,max:2,step:.1,value:eu.bymTemperature,onChange:e=>ep({...eu,bymTemperature:parseFloat(e.target.value)})}),(0,a.jsx)(t.Button,{variant:"ghost",size:"sm",onClick:()=>ep({...eu,bymTemperature:"inherit"}),children:(0,a.jsx)(f.X,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-sm",children:"最大Token"}),"inherit"===eu.bymMaxTokens?(0,a.jsx)(t.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>ep({...eu,bymMaxTokens:100}),children:"继承全局"}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Input,{type:"number",min:10,max:2e3,value:eu.bymMaxTokens,onChange:e=>ep({...eu,bymMaxTokens:parseInt(e.target.value)})}),(0,a.jsx)(t.Button,{variant:"ghost",size:"sm",onClick:()=>ep({...eu,bymMaxTokens:"inherit"}),children:(0,a.jsx)(f.X,{className:"h-3 w-3"})})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.MessageSquare,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)(n.Label,{className:"font-medium",children:"主动发言"})]}),(0,a.jsx)(D,{value:eu.proactiveChatEnabled,onChange:e=>ep({...eu,proactiveChatEnabled:e})})]}),"off"!==eu.proactiveChatEnabled&&(0,a.jsxs)("div",{className:"space-y-3 ml-4 pl-4 border-l-2 border-muted",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"触发概率"}),(0,a.jsxs)(m.Select,{value:"inherit"===eu.proactiveChatProbability?"inherit":String(eu.proactiveChatProbability),onValueChange:e=>ep({...eu,proactiveChatProbability:"inherit"===e?"inherit":parseFloat(e)}),children:[(0,a.jsx)(m.SelectTrigger,{children:(0,a.jsx)(m.SelectValue,{})}),(0,a.jsxs)(m.SelectContent,{children:[(0,a.jsx)(m.SelectItem,{value:"inherit",children:"继承"}),(0,a.jsx)(m.SelectItem,{value:"0.02",children:"2%"}),(0,a.jsx)(m.SelectItem,{value:"0.05",children:"5%"}),(0,a.jsx)(m.SelectItem,{value:"0.1",children:"10%"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"冷却(分钟)"}),(0,a.jsxs)(m.Select,{value:"inherit"===eu.proactiveChatCooldown?"inherit":String(eu.proactiveChatCooldown),onValueChange:e=>ep({...eu,proactiveChatCooldown:"inherit"===e?"inherit":parseInt(e)}),children:[(0,a.jsx)(m.SelectTrigger,{children:(0,a.jsx)(m.SelectValue,{})}),(0,a.jsxs)(m.SelectContent,{children:[(0,a.jsx)(m.SelectItem,{value:"inherit",children:"继承"}),(0,a.jsx)(m.SelectItem,{value:"5",children:"5分钟"}),(0,a.jsx)(m.SelectItem,{value:"10",children:"10分钟"}),(0,a.jsx)(m.SelectItem,{value:"30",children:"30分钟"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"活跃时段开始"}),(0,a.jsx)(l.Input,{type:"number",min:0,max:23,value:eu.proactiveChatTimeStart,onChange:e=>ep({...eu,proactiveChatTimeStart:parseInt(e.target.value)||8})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"活跃时段结束"}),(0,a.jsx)(l.Input,{type:"number",min:0,max:23,value:eu.proactiveChatTimeEnd,onChange:e=>ep({...eu,proactiveChatTimeEnd:parseInt(e.target.value)||23})})]})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(B.Smile,{className:"h-4 w-4 text-yellow-500"}),(0,a.jsx)(n.Label,{className:"font-medium",children:"回复风格"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"回复长度"}),(0,a.jsxs)(m.Select,{value:eu.bymReplyLength,onValueChange:e=>ep({...eu,bymReplyLength:e}),children:[(0,a.jsx)(m.SelectTrigger,{children:(0,a.jsx)(m.SelectValue,{})}),(0,a.jsxs)(m.SelectContent,{children:[(0,a.jsx)(m.SelectItem,{value:"short",children:"简短"}),(0,a.jsx)(m.SelectItem,{value:"medium",children:"适中"}),(0,a.jsx)(m.SelectItem,{value:"long",children:"详细"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-5",children:[(0,a.jsx)(d.Switch,{checked:eu.bymUseEmoji,onCheckedChange:e=>ep({...eu,bymUseEmoji:e})}),(0,a.jsx)(n.Label,{className:"text-sm",children:"使用表情"})]})]})]})]})}),"game"===Y&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"p-4 rounded-lg border bg-card space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(R.Gamepad2,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)(n.Label,{className:"text-base font-medium",children:"游戏模式配置"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Galgame等互动游戏的群组独立配置"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-sm",children:"触发概率"}),"inherit"===eu.gameProbability?(0,a.jsx)(t.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>ep({...eu,gameProbability:.3}),children:"继承全局"}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Input,{type:"number",min:0,max:100,className:"w-20",value:Math.round(100*eu.gameProbability),onChange:e=>ep({...eu,gameProbability:parseInt(e.target.value)/100})}),(0,a.jsx)("span",{className:"text-sm",children:"%"}),(0,a.jsx)(t.Button,{variant:"ghost",size:"sm",onClick:()=>ep({...eu,gameProbability:"inherit"}),children:(0,a.jsx)(f.X,{className:"h-3 w-3"})})]})]}),(0,a.jsx)(q,{label:"游戏模型",value:eu.gameModel,models:eo,onChange:e=>ep({...eu,gameModel:e})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-sm",children:"温度"}),"inherit"===eu.gameTemperature?(0,a.jsx)(t.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>ep({...eu,gameTemperature:.8}),children:"继承全局"}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Input,{type:"number",min:0,max:2,step:.1,value:eu.gameTemperature,onChange:e=>ep({...eu,gameTemperature:parseFloat(e.target.value)})}),(0,a.jsx)(t.Button,{variant:"ghost",size:"sm",onClick:()=>ep({...eu,gameTemperature:"inherit"}),children:(0,a.jsx)(f.X,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-sm",children:"最大Token"}),"inherit"===eu.gameMaxTokens?(0,a.jsx)(t.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>ep({...eu,gameMaxTokens:1e3}),children:"继承全局"}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Input,{type:"number",min:100,max:8e3,value:eu.gameMaxTokens,onChange:e=>ep({...eu,gameMaxTokens:parseInt(e.target.value)})}),(0,a.jsx)(t.Button,{variant:"ghost",size:"sm",onClick:()=>ep({...eu,gameMaxTokens:"inherit"}),children:(0,a.jsx)(f.X,{className:"h-3 w-3"})})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.Label,{className:"text-sm",children:"启用工具"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"允许游戏模式使用MCP工具"})]}),(0,a.jsx)(D,{value:eu.gameEnableTools,onChange:e=>ep({...eu,gameEnableTools:e})})]})]})}),"channel"===Y&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.MessageSquare,{className:"h-4 w-4 text-blue-500"}),(0,a.jsx)(n.Label,{className:"text-base font-medium",children:"聊天配置"})]}),(0,a.jsxs)("div",{className:"space-y-3 p-3 rounded-lg border bg-card",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"上下文长度"}),(0,a.jsx)(l.Input,{type:"number",min:1,max:100,value:eu.chatContextLength,onChange:e=>ep({...eu,chatContextLength:parseInt(e.target.value)||20})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-5",children:[(0,a.jsx)(d.Switch,{checked:eu.chatEnabled,onCheckedChange:e=>ep({...eu,chatEnabled:e})}),(0,a.jsx)(n.Label,{className:"text-sm",children:"启用对话"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Switch,{checked:eu.chatStreamReply,onCheckedChange:e=>ep({...eu,chatStreamReply:e})}),(0,a.jsx)(n.Label,{className:"text-xs",children:"流式回复"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Switch,{checked:eu.chatQuoteReply,onCheckedChange:e=>ep({...eu,chatQuoteReply:e})}),(0,a.jsx)(n.Label,{className:"text-xs",children:"引用回复"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Switch,{checked:eu.chatShowThinking,onCheckedChange:e=>ep({...eu,chatShowThinking:e})}),(0,a.jsx)(n.Label,{className:"text-xs",children:"显示思考"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4 border-t pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(E.Clock,{className:"h-4 w-4 text-amber-500"}),(0,a.jsx)(n.Label,{className:"text-base font-medium",children:"使用限制"})]}),(0,a.jsxs)("div",{className:"space-y-3 p-3 rounded-lg border bg-card",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"群每日限额"}),(0,a.jsx)(l.Input,{type:"number",min:0,value:eu.dailyGroupLimit,onChange:e=>ep({...eu,dailyGroupLimit:parseInt(e.target.value)||0}),placeholder:"0 = 不限制"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"用户每日限额"}),(0,a.jsx)(l.Input,{type:"number",min:0,value:eu.dailyUserLimit,onChange:e=>ep({...eu,dailyUserLimit:parseInt(e.target.value)||0}),placeholder:"0 = 不限制"})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"超限提示消息"}),(0,a.jsx)(l.Input,{value:eu.usageLimitMessage,onChange:e=>ep({...eu,usageLimitMessage:e.target.value}),placeholder:"留空使用默认提示"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4 border-t pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(G.Server,{className:"h-4 w-4 text-purple-500"}),(0,a.jsx)(n.Label,{className:"text-base font-medium",children:"群独立渠道"})]}),(0,a.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:()=>{ev(null),ef({name:"",baseUrl:"",apiKey:"",adapterType:"openai",models:"",enabled:!0,priority:0,modelsPath:"",chatPath:"",imageTransferMode:"auto",imageCompress:!0,imageQuality:85,imageMaxSize:4096}),ej(!0)},children:[(0,a.jsx)(U.Plus,{className:"h-4 w-4 mr-2"}),"添加渠道"]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"配置本群专用的API渠道"}),0===eu.independentChannels.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground border rounded-lg border-dashed",children:[(0,a.jsx)(G.Server,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"暂无独立渠道"})]}):(0,a.jsx)("div",{className:"space-y-3",children:eu.independentChannels.map((e,s)=>(0,a.jsx)("div",{className:"p-4 rounded-lg border bg-card",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("h4",{className:"font-medium",children:e.name}),(0,a.jsx)(r.Badge,{variant:e.enabled?"default":"secondary",children:e.enabled?"启用":"禁用"}),(0,a.jsx)(r.Badge,{variant:"outline",children:e.adapterType})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:e.baseUrl||"使用默认地址"}),(0,a.jsxs)("div",{className:"flex gap-1 mt-2 flex-wrap",children:[e.models.slice(0,3).map(e=>(0,a.jsx)(r.Badge,{variant:"secondary",className:"text-xs",children:e},e)),e.models.length>3&&(0,a.jsxs)(r.Badge,{variant:"secondary",className:"text-xs",children:["+",e.models.length-3]})]})]}),(0,a.jsxs)("div",{className:"flex gap-1 shrink-0",children:[(0,a.jsx)(t.Button,{variant:"ghost",size:"icon",onClick:()=>{ev(s),ef({name:e.name,baseUrl:e.baseUrl,apiKey:e.apiKey,adapterType:e.adapterType,models:e.models.join(","),enabled:e.enabled,priority:e.priority,modelsPath:e.modelsPath||"",chatPath:e.chatPath||"",imageTransferMode:e.imageConfig?.transferMode||"auto",imageCompress:e.imageConfig?.compress??!0,imageQuality:e.imageConfig?.quality??85,imageMaxSize:e.imageConfig?.maxSize??4096}),ej(!0)},children:(0,a.jsx)(p.Settings,{className:"h-4 w-4"})}),(0,a.jsx)(t.Button,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>{if(confirm("确定要删除这个渠道吗？")){let e=[...eu.independentChannels];e.splice(s,1),ep({...eu,independentChannels:e})}},children:(0,a.jsx)(z.Trash2,{className:"h-4 w-4"})})]})]})},e.id))})]})]}),"advanced"===Y&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.Bot,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(n.Label,{children:"模型配置"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"为本群配置独立模型（留空使用全局）"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsx)(q,{label:"对话模型",value:eu.chatModel,models:eo,onChange:e=>ep({...eu,chatModel:e})}),(0,a.jsx)(q,{label:"总结模型",value:eu.summaryModel,models:eo,onChange:e=>ep({...eu,summaryModel:e})}),(0,a.jsx)(q,{label:"伪人模型",value:eu.bymModel,models:eo,onChange:e=>ep({...eu,bymModel:e})}),(0,a.jsx)(q,{label:"绘图模型",value:eu.imageGenModel,models:eo,onChange:e=>ep({...eu,imageGenModel:e})})]})]}),em.length>0&&(0,a.jsxs)("div",{className:"space-y-3 border-t pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(_.Brain,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(n.Label,{children:"知识库"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"为本群关联知识库"}),(0,a.jsx)("div",{className:"space-y-2",children:em.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded border bg-card",children:[(0,a.jsx)(d.Switch,{checked:eu.knowledgeIds.includes(e.id),onCheckedChange:a=>{a?ep({...eu,knowledgeIds:[...eu.knowledgeIds,e.id]}):ep({...eu,knowledgeIds:eu.knowledgeIds.filter(a=>a!==e.id)})}}),(0,a.jsx)("span",{className:"text-sm",children:e.name})]},e.id))})]}),(0,a.jsx)("div",{className:"border-t pt-4 mt-4",children:(0,a.jsx)("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/20",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(b.AlertCircle,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:"权限说明"}),(0,a.jsx)("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:"群管理面板仅支持配置本群独立渠道，不能修改以下设置："}),(0,a.jsxs)("ul",{className:"text-xs text-amber-800 dark:text-amber-200 list-disc list-inside space-y-0.5 ml-1",children:[(0,a.jsx)("li",{children:"禁用全局模型（仅主管理面板可配置）"}),(0,a.jsx)("li",{children:"其他高级系统配置"})]})]})]})})})]})]})})})]}),(0,a.jsxs)("div",{className:"mt-6 text-center text-xs text-muted-foreground",children:["ChatGPT Plugin 群管理面板 · 群 ",X]})]})}),e&&(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-background border-t",children:(0,a.jsx)("div",{className:"grid grid-cols-6 h-14",children:eL.map(e=>(0,a.jsxs)("button",{onClick:()=>ee(e.id),className:(0,K.cn)("flex flex-col items-center justify-center gap-0.5 transition-colors",Y===e.id?"text-primary":"text-muted-foreground"),children:[e.icon,(0,a.jsx)("span",{className:"text-[10px] font-medium",children:e.mobileLabel})]},e.id))})}),(0,a.jsx)(h.Dialog,{open:!!eC,onOpenChange:e=>!e&&ew(null),children:(0,a.jsx)(h.DialogContent,{className:"max-w-sm p-0 overflow-hidden bg-transparent border-none",children:eC&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:eC.url,alt:eC.name,className:"w-full h-auto rounded-lg shadow-2xl"}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-4",children:[(0,a.jsxs)(t.Button,{variant:"secondary",size:"sm",onClick:()=>eM(eC.name),children:[(0,a.jsx)(z.Trash2,{className:"h-4 w-4 mr-1"})," 删除"]}),(0,a.jsx)(t.Button,{variant:"secondary",size:"sm",onClick:()=>ew(null),children:"关闭"})]})]})})}),(0,a.jsx)(A.ChannelDialog,{open:eg,onOpenChange:ej,channelForm:eN,onChannelFormChange:ef,isEditing:null!==ey,authToken:ek(),onSave:()=>{if(!eN.name||!eN.baseUrl||!eN.apiKey)return void x.toast.error("请填写必要信息");let e={id:null!==ey?eu.independentChannels[ey].id:Math.random().toString(36).substring(7),name:eN.name,baseUrl:eN.baseUrl,apiKey:eN.apiKey,adapterType:eN.adapterType,models:eN.models.split(",").map(e=>e.trim()).filter(Boolean),enabled:eN.enabled,priority:eN.priority,modelsPath:eN.modelsPath||void 0,chatPath:eN.chatPath||void 0,imageConfig:{transferMode:eN.imageTransferMode,compress:eN.imageCompress,quality:eN.imageQuality,maxSize:eN.imageMaxSize}},a=[...eu.independentChannels];null!==ey?a[ey]=e:a.push(e),ep({...eu,independentChannels:a}),ej(!1),x.toast.success(null!==ey?"渠道已更新":"渠道已添加")},onFetchModels:async()=>{if(!eN.baseUrl||!eN.apiKey)return x.toast.error("请先填写 Base URL 和 API Key"),[];try{let e=await fetch("/chatai/api/admin/models/fetch",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ek()}`},body:JSON.stringify({baseUrl:eN.baseUrl,apiKey:eN.apiKey,adapterType:eN.adapterType})}),a=await e.json();if(0===a.code)return x.toast.success(`获取到 ${a.data.length} 个模型`),a.data;return x.toast.error(a.message||"获取失败"),[]}catch{return x.toast.error("获取失败"),[]}}})]})}e.s(["default",()=>O])}]);