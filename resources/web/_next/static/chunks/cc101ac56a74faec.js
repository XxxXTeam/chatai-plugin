(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39079,e=>{"use strict";var t=e.i(69287),r=e.i(39048);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm transition-all duration-200","hover:shadow-md dark:border-border/50 dark:shadow-none dark:hover:border-border",e),...a})}function s({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function c({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>n,"CardDescription",()=>i,"CardHeader",()=>s,"CardTitle",()=>c])},89908,e=>{"use strict";var t=e.i(79333);e.s(["Loader2",()=>t.default])},82786,(e,t,r)=>{t.exports=e.r(3747)},4084,e=>{"use strict";let t=(0,e.i(50974).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],4084)},62754,e=>{"use strict";let t=(0,e.i(50974).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],62754)},18066,e=>{"use strict";var t=e.i(69287),r=e.i(71317),a=e.i(82786),s=e.i(39079),c=e.i(89908),i=e.i(4084),n=e.i(62754),d=e.i(98509),o=e.i(79342);function l(){let e=(0,a.useRouter)(),l=(0,a.useSearchParams)(),[u,m]=(0,r.useState)("loading"),[x,h]=(0,r.useState)("正在验证登录凭证...");return(0,r.useEffect)(()=>{let t=l.get("token"),r=localStorage.getItem("chatai_token");if(r)try{let t=r.split(".");if(3===t.length){let r=JSON.parse(atob(t[1]));if(1e3*r.exp>Date.now()){m("success"),h("已登录，正在跳转..."),e.push("/");return}}}catch{localStorage.removeItem("chatai_token")}if(!t){m("error"),h("无效的登录链接");return}(async()=>{try{let r=await d.authApi.verifyToken(t);if(r?.success||r?.data?.token){let t=r?.data?.token;localStorage.setItem("chatai_token",t),m("success"),h("登录成功，正在跳转..."),o.toast.success("登录成功"),setTimeout(()=>{e.push("/")},10)}else throw Error(r?.message||"验证失败")}catch(e){console.error("Token验证失败:",e),m("error"),h(e?.response?.data?.message||e?.message||"登录凭证无效或已过期"),o.toast.error("登录失败")}})()},[l,e]),(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:(0,t.jsxs)(s.Card,{className:"w-full max-w-md",children:[(0,t.jsxs)(s.CardHeader,{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex justify-center mb-4",children:["loading"===u&&(0,t.jsx)(c.Loader2,{className:"h-12 w-12 text-primary animate-spin"}),"success"===u&&(0,t.jsx)(i.CheckCircle,{className:"h-12 w-12 text-green-500"}),"error"===u&&(0,t.jsx)(n.XCircle,{className:"h-12 w-12 text-destructive"})]}),(0,t.jsx)(s.CardTitle,{className:"text-xl",children:x})]}),"error"===u&&(0,t.jsx)(s.CardContent,{className:"text-center",children:(0,t.jsx)("button",{onClick:()=>e.push("/login"),className:"text-primary hover:underline",children:"返回登录页面"})})]})})}function u(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:(0,t.jsx)(s.Card,{className:"w-full max-w-md",children:(0,t.jsxs)(s.CardHeader,{className:"text-center",children:[(0,t.jsx)("div",{className:"flex justify-center mb-4",children:(0,t.jsx)(c.Loader2,{className:"h-12 w-12 text-primary animate-spin"})}),(0,t.jsx)(s.CardTitle,{className:"text-xl",children:"正在加载..."})]})})}),children:(0,t.jsx)(l,{})})}e.s(["default",()=>u])}]);