(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,22188,e=>{"use strict";var s=e.i(52542),l=e.i(40418),a=e.i(51200),t=e.i(72029),r=e.i(30243),n=e.i(99573),i=e.i(13107),d=e.i(20308),c=e.i(20650),o=e.i(81080),h=e.i(94518),x=e.i(10201),u=e.i(46048),m=e.i(60381),j=e.i(50974);let p=(0,j.default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),g=(0,j.default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);var b=e.i(83567),v=e.i(89908),y=e.i(60713),I=e.i(97058),N=e.i(5850),f=e.i(35771),C=e.i(32308),T=e.i(88233),S=e.i(29720),w=e.i(75979),P=e.i(79342);let _=[{value:"group",label:"ç¾¤èŠäººæ ¼ (group)",description:"ç‰¹å®šç¾¤ç»„çš„äººæ ¼è®¾å®š"},{value:"group_user",label:"ç¾¤å†…ç”¨æˆ·äººæ ¼ (group_user)",description:"ç‰¹å®šç¾¤å†…ç‰¹å®šç”¨æˆ·çš„äººæ ¼"},{value:"private",label:"ç§èŠäººæ ¼ (private)",description:"ç”¨æˆ·åœ¨ç§èŠåœºæ™¯çš„äººæ ¼"},{value:"user",label:"ç”¨æˆ·å…¨å±€äººæ ¼ (user)",description:"ç”¨æˆ·åœ¨æ‰€æœ‰åœºæ™¯çš„äººæ ¼"},{value:"default",label:"é»˜è®¤é¢„è®¾ (default)",description:"ç³»ç»Ÿé»˜è®¤é¢„è®¾"}];function D(){let[e,j]=(0,l.useState)(!0),[D,E]=(0,l.useState)([]),[k,B]=(0,l.useState)([]),[H,A]=(0,l.useState)([]),[L,V]=(0,l.useState)([]),[G,R]=(0,l.useState)([]),[U,$]=(0,l.useState)({priority:["group","group_user","private","user","default"],useIndependent:!0}),[z,M]=(0,l.useState)(!1),[O,Q]=(0,l.useState)(!1),[F,q]=(0,l.useState)(!1),[K,J]=(0,l.useState)(!1),[W,X]=(0,l.useState)(!1),[Y,Z]=(0,l.useState)(!1),[ee,es]=(0,l.useState)({userId:"",systemPrompt:"",presetId:""}),[el,ea]=(0,l.useState)({groupId:"",systemPrompt:"",presetId:"",bymEnabled:"inherit",imageGenEnabled:"inherit",summaryEnabled:"inherit",eventEnabled:"inherit",customPrefix:"",triggerMode:"default"}),[et,er]=(0,l.useState)({groupId:"",userId:"",systemPrompt:"",presetId:""}),[en,ei]=(0,l.useState)({userId:"",systemPrompt:"",presetId:""}),[ed,ec]=(0,l.useState)(""),[,eo]=(0,l.useState)(!1),eh=ed?D.filter(e=>e.userId?.includes(ed)||e.systemPrompt?.includes(ed)):D,ex=ed?k.filter(e=>e.groupId?.includes(ed)||e.systemPrompt?.includes(ed)):k,eu=ed?H.filter(e=>e.groupId?.includes(ed)||e.userId?.includes(ed)||e.systemPrompt?.includes(ed)):H,em=ed?L.filter(e=>e.userId?.includes(ed)||e.systemPrompt?.includes(ed)):L,ej=async()=>{j(!0);try{let[e,s,l,a,t,r]=await Promise.all([w.scopeApi.getUsers().catch(()=>({data:[]})),w.scopeApi.getGroups().catch(()=>({data:[]})),w.scopeApi.getGroupUsers().catch(()=>({data:[]})),w.scopeApi.getPrivates().catch(()=>({data:[]})),w.presetsApi.list().catch(()=>({data:[]})),w.scopeApi.getPersonalityConfig().catch(()=>({data:null}))]);E(e?.data||[]),B(s?.data||[]),A(l?.data||[]),V(a?.data||[]),R(t?.data||[]);let n=r?.data;n&&$({priority:n.priority||["group","group_user","user","default"],useIndependent:!1!==n.useIndependent})}catch(e){P.toast.error("åŠ è½½æ•°æ®å¤±è´¥"),console.error(e)}finally{j(!1)}};(0,l.useEffect)(()=>{ej()},[]);let ep=async()=>{M(!0);try{await w.scopeApi.updatePersonalityConfig(U),P.toast.success("ä¼˜å…ˆçº§é…ç½®å·²ä¿å­˜")}catch(e){P.toast.error("ä¿å­˜å¤±è´¥")}finally{M(!1)}},eg=(e,s)=>{let l=[...U.priority],a=e+s;a<0||a>=l.length||([l[e],l[a]]=[l[a],l[e]],$({...U,priority:l}))},eb=U.priority.map(e=>{let s=_.find(s=>s.value===e);return s?s.label:e}).join(" > "),ev=e=>{e?(Z(!0),es({userId:e.userId||"",systemPrompt:e.systemPrompt||"",presetId:e.presetId||""})):(Z(!1),es({userId:"",systemPrompt:"",presetId:""})),Q(!0)},ey=async()=>{if(!ee.userId)return void P.toast.warning("è¯·è¾“å…¥ç”¨æˆ·ID");try{await w.scopeApi.updateUser(ee.userId,{systemPrompt:ee.systemPrompt,presetId:ee.presetId}),P.toast.success("ä¿å­˜æˆåŠŸ"),Q(!1),ej()}catch(e){P.toast.error("ä¿å­˜å¤±è´¥")}},eI=async e=>{try{await w.scopeApi.deleteUser(e),P.toast.success("åˆ é™¤æˆåŠŸ"),ej()}catch(e){P.toast.error("åˆ é™¤å¤±è´¥")}},eN=e=>{if(e){Z(!0);let s=e.settings||{};ea({groupId:e.groupId||"",systemPrompt:e.systemPrompt||"",presetId:e.presetId||"",bymEnabled:void 0===s.bymEnabled?"inherit":s.bymEnabled?"on":"off",imageGenEnabled:void 0===s.imageGenEnabled?"inherit":s.imageGenEnabled?"on":"off",summaryEnabled:void 0===s.summaryEnabled?"inherit":s.summaryEnabled?"on":"off",eventEnabled:void 0===s.eventEnabled?"inherit":s.eventEnabled?"on":"off",customPrefix:s.customPrefix||"",triggerMode:s.triggerMode||"default"})}else Z(!1),ea({groupId:"",systemPrompt:"",presetId:"",bymEnabled:"inherit",imageGenEnabled:"inherit",summaryEnabled:"inherit",eventEnabled:"inherit",customPrefix:"",triggerMode:"default"});q(!0)},ef=async()=>{if(!el.groupId)return void P.toast.warning("è¯·è¾“å…¥ç¾¤ç»„ID");try{await w.scopeApi.updateGroup(el.groupId,{systemPrompt:el.systemPrompt,presetId:el.presetId,bymEnabled:"inherit"===el.bymEnabled?void 0:"on"===el.bymEnabled,imageGenEnabled:"inherit"===el.imageGenEnabled?void 0:"on"===el.imageGenEnabled,summaryEnabled:"inherit"===el.summaryEnabled?void 0:"on"===el.summaryEnabled,eventEnabled:"inherit"===el.eventEnabled?void 0:"on"===el.eventEnabled,customPrefix:el.customPrefix||void 0,triggerMode:el.triggerMode}),P.toast.success("ä¿å­˜æˆåŠŸ"),q(!1),ej()}catch(e){P.toast.error("ä¿å­˜å¤±è´¥")}},eC=async e=>{try{await w.scopeApi.deleteGroup(e),P.toast.success("åˆ é™¤æˆåŠŸ"),ej()}catch(e){P.toast.error("åˆ é™¤å¤±è´¥")}},eT=e=>{e?(Z(!0),er({groupId:e.groupId||"",userId:e.userId||"",systemPrompt:e.systemPrompt||"",presetId:e.presetId||""})):(Z(!1),er({groupId:"",userId:"",systemPrompt:"",presetId:""})),J(!0)},eS=async()=>{if(!et.groupId||!et.userId)return void P.toast.warning("è¯·è¾“å…¥ç¾¤ç»„IDå’Œç”¨æˆ·ID");try{await w.scopeApi.updateGroupUser(et.groupId,et.userId,{systemPrompt:et.systemPrompt,presetId:et.presetId}),P.toast.success("ä¿å­˜æˆåŠŸ"),J(!1),ej()}catch(e){P.toast.error("ä¿å­˜å¤±è´¥")}},ew=async(e,s)=>{try{await w.scopeApi.deleteGroupUser(e,s),P.toast.success("åˆ é™¤æˆåŠŸ"),ej()}catch(e){P.toast.error("åˆ é™¤å¤±è´¥")}},eP=e=>{e?(Z(!0),ei({userId:e.userId||"",systemPrompt:e.systemPrompt||"",presetId:e.presetId||""})):(Z(!1),ei({userId:"",systemPrompt:"",presetId:""})),X(!0)},e_=async()=>{if(!en.userId)return void P.toast.warning("è¯·è¾“å…¥ç”¨æˆ·ID");try{await w.scopeApi.updatePrivate(en.userId,{systemPrompt:en.systemPrompt,presetId:en.presetId}),P.toast.success("ä¿å­˜æˆåŠŸ"),X(!1),ej()}catch(e){P.toast.error("ä¿å­˜å¤±è´¥")}},eD=async e=>{try{await w.scopeApi.deletePrivate(e),P.toast.success("åˆ é™¤æˆåŠŸ"),ej()}catch(e){P.toast.error("åˆ é™¤å¤±è´¥")}},eE=D.length+k.length+H.length+L.length;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(a.Card,{children:[(0,s.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(a.CardTitle,{children:"äººæ ¼ä¼˜å…ˆçº§é…ç½®"}),(0,s.jsx)(a.CardDescription,{children:"é…ç½®ä¸åŒä½œç”¨åŸŸäººæ ¼çš„ä¼˜å…ˆçº§é¡ºåº"})]}),(0,s.jsxs)(t.Button,{onClick:ep,disabled:z,children:[z&&(0,s.jsx)(v.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,s.jsx)(N.Save,{className:"mr-2 h-4 w-4"}),"ä¿å­˜é…ç½®"]})]}),(0,s.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg flex items-start gap-2",children:[(0,s.jsx)(m.AlertCircle,{className:"h-4 w-4 text-blue-600 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:["å½“å¤šä¸ªä½œç”¨åŸŸéƒ½è®¾ç½®äº†äººæ ¼æ—¶ï¼ŒæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§é€‰æ‹©ç¬¬ä¸€ä¸ªæœ‰æ•ˆçš„äººæ ¼ã€‚",(0,s.jsx)("br",{}),"å½“å‰ä¼˜å…ˆçº§: ",(0,s.jsx)("strong",{children:eb})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Label,{children:"å¯ç”¨ç‹¬ç«‹äººæ ¼"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"å¼€å¯åŽï¼Œæ‰¾åˆ°çš„äººæ ¼å°†å®Œå…¨æ›¿æ¢é»˜è®¤é¢„è®¾ï¼Œè€Œä¸æ˜¯æ‹¼æŽ¥"})]}),(0,s.jsx)(d.Switch,{checked:U.useIndependent,onCheckedChange:e=>$({...U,useIndependent:e})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"ä¼˜å…ˆçº§é¡ºåºï¼ˆä»Žé«˜åˆ°ä½Žï¼‰"}),(0,s.jsx)("div",{className:"space-y-2",children:U.priority.map((e,l)=>{let a=_.find(s=>s.value===e);return(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg",children:[(0,s.jsx)("div",{className:"w-7 h-7 flex items-center justify-center bg-primary text-primary-foreground rounded-full font-bold text-sm",children:l+1}),(0,s.jsx)(i.Badge,{variant:"default"===e?"secondary":"default",className:"text-sm",children:a?.label||e}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)(t.Button,{variant:"ghost",size:"icon",disabled:0===l,onClick:()=>eg(l,-1),children:(0,s.jsx)(g,{className:"h-4 w-4"})}),(0,s.jsx)(t.Button,{variant:"ghost",size:"icon",disabled:l===U.priority.length-1,onClick:()=>eg(l,1),children:(0,s.jsx)(p,{className:"h-4 w-4"})})]}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground ml-auto",children:a?.description})]},e)})})]})]})]}),(0,s.jsxs)(a.Card,{children:[(0,s.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(a.CardTitle,{children:"äººæ ¼è®¾å®šç®¡ç†"}),(0,s.jsx)(a.CardDescription,{children:"ç®¡ç†ç”¨æˆ·ã€ç¾¤ç»„ã€ç¾¤å†…ç”¨æˆ·çš„ç‹¬ç«‹äººæ ¼"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.Input,{placeholder:"æœç´¢ ID æˆ– Prompt...",value:ed,onChange:e=>ec(e.target.value),className:"w-48"}),(0,s.jsxs)(i.Badge,{variant:"outline",children:["å…± ",eE," æ¡"]}),(0,s.jsxs)(t.Button,{variant:"outline",onClick:ej,disabled:e,children:[(0,s.jsx)(I.RefreshCw,{className:`mr-2 h-4 w-4 ${e?"animate-spin":""}`}),"åˆ·æ–°"]})]})]}),(0,s.jsx)(a.CardContent,{children:(0,s.jsxs)(o.Tabs,{defaultValue:"user",children:[(0,s.jsxs)(o.TabsList,{className:"mb-4",children:[(0,s.jsxs)(o.TabsTrigger,{value:"user",className:"gap-2",children:[(0,s.jsx)(S.User,{className:"h-4 w-4"}),"ç”¨æˆ·äººæ ¼ (",eh.length,ed&&D.length!==eh.length?`/${D.length}`:"",")"]}),(0,s.jsxs)(o.TabsTrigger,{value:"group",className:"gap-2",children:[(0,s.jsx)(T.UsersRound,{className:"h-4 w-4"}),"ç¾¤ç»„äººæ ¼ (",ex.length,ed&&k.length!==ex.length?`/${k.length}`:"",")"]}),(0,s.jsxs)(o.TabsTrigger,{value:"groupUser",className:"gap-2",children:[(0,s.jsx)(C.Users,{className:"h-4 w-4"}),"ç¾¤å†…ç”¨æˆ·äººæ ¼ (",eu.length,ed&&H.length!==eu.length?`/${H.length}`:"",")"]}),(0,s.jsxs)(o.TabsTrigger,{value:"private",className:"gap-2",children:[(0,s.jsx)(S.User,{className:"h-4 w-4"}),"ç§èŠäººæ ¼ (",em.length,ed&&L.length!==em.length?`/${L.length}`:"",")"]})]}),(0,s.jsx)(o.TabsContent,{value:"user",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(t.Button,{onClick:()=>ev(),children:[(0,s.jsx)(y.Plus,{className:"mr-2 h-4 w-4"}),"æ·»åŠ ç”¨æˆ·äººæ ¼"]}),(0,s.jsxs)(u.Table,{children:[(0,s.jsx)(u.TableHeader,{children:(0,s.jsxs)(u.TableRow,{children:[(0,s.jsx)(u.TableHead,{children:"ç”¨æˆ·ID"}),(0,s.jsx)(u.TableHead,{children:"è‡ªå®šä¹‰Prompt"}),(0,s.jsx)(u.TableHead,{children:"é¢„è®¾"}),(0,s.jsx)(u.TableHead,{children:"æ›´æ–°æ—¶é—´"}),(0,s.jsx)(u.TableHead,{className:"text-right",children:"æ“ä½œ"})]})}),(0,s.jsx)(u.TableBody,{children:0===eh.length?(0,s.jsx)(u.TableRow,{children:(0,s.jsx)(u.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:ed?"æ²¡æœ‰åŒ¹é…çš„ç”¨æˆ·äººæ ¼è®¾å®š":"æš‚æ— ç”¨æˆ·äººæ ¼è®¾å®š"})}):eh.map(e=>(0,s.jsxs)(u.TableRow,{children:[(0,s.jsx)(u.TableCell,{className:"font-medium",children:e.userId}),(0,s.jsx)(u.TableCell,{className:"max-w-[200px] truncate",children:e.systemPrompt||"-"}),(0,s.jsx)(u.TableCell,{children:e.presetId||"-"}),(0,s.jsx)(u.TableCell,{children:e.updatedAt?new Date(e.updatedAt).toLocaleString():"-"}),(0,s.jsx)(u.TableCell,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,s.jsx)(t.Button,{variant:"ghost",size:"icon",onClick:()=>ev(e),children:(0,s.jsx)(b.Edit,{className:"h-4 w-4"})}),(0,s.jsx)(t.Button,{variant:"ghost",size:"icon",onClick:()=>eI(e.userId),children:(0,s.jsx)(f.Trash2,{className:"h-4 w-4 text-destructive"})})]})})]},e.userId))})]})]})}),(0,s.jsx)(o.TabsContent,{value:"group",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(t.Button,{onClick:()=>eN(),children:[(0,s.jsx)(y.Plus,{className:"mr-2 h-4 w-4"}),"æ·»åŠ ç¾¤ç»„äººæ ¼"]}),(0,s.jsxs)(u.Table,{children:[(0,s.jsx)(u.TableHeader,{children:(0,s.jsxs)(u.TableRow,{children:[(0,s.jsx)(u.TableHead,{children:"ç¾¤ç»„ID"}),(0,s.jsx)(u.TableHead,{children:"è‡ªå®šä¹‰Prompt"}),(0,s.jsx)(u.TableHead,{children:"é¢„è®¾"}),(0,s.jsx)(u.TableHead,{children:"æ›´æ–°æ—¶é—´"}),(0,s.jsx)(u.TableHead,{className:"text-right",children:"æ“ä½œ"})]})}),(0,s.jsx)(u.TableBody,{children:0===ex.length?(0,s.jsx)(u.TableRow,{children:(0,s.jsx)(u.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:ed?"æ²¡æœ‰åŒ¹é…çš„ç¾¤ç»„äººæ ¼è®¾å®š":"æš‚æ— ç¾¤ç»„äººæ ¼è®¾å®š"})}):ex.map(e=>(0,s.jsxs)(u.TableRow,{children:[(0,s.jsx)(u.TableCell,{className:"font-medium",children:e.groupId}),(0,s.jsx)(u.TableCell,{className:"max-w-[200px] truncate",children:e.systemPrompt||"-"}),(0,s.jsx)(u.TableCell,{children:e.presetId||"-"}),(0,s.jsx)(u.TableCell,{children:e.updatedAt?new Date(e.updatedAt).toLocaleString():"-"}),(0,s.jsx)(u.TableCell,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,s.jsx)(t.Button,{variant:"ghost",size:"icon",onClick:()=>eN(e),children:(0,s.jsx)(b.Edit,{className:"h-4 w-4"})}),(0,s.jsx)(t.Button,{variant:"ghost",size:"icon",onClick:()=>eC(e.groupId),children:(0,s.jsx)(f.Trash2,{className:"h-4 w-4 text-destructive"})})]})})]},e.groupId))})]})]})}),(0,s.jsx)(o.TabsContent,{value:"groupUser",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(t.Button,{onClick:()=>eT(),children:[(0,s.jsx)(y.Plus,{className:"mr-2 h-4 w-4"}),"æ·»åŠ ç¾¤å†…ç”¨æˆ·äººæ ¼"]}),(0,s.jsxs)(u.Table,{children:[(0,s.jsx)(u.TableHeader,{children:(0,s.jsxs)(u.TableRow,{children:[(0,s.jsx)(u.TableHead,{children:"ç¾¤ç»„ID"}),(0,s.jsx)(u.TableHead,{children:"ç”¨æˆ·ID"}),(0,s.jsx)(u.TableHead,{children:"è‡ªå®šä¹‰Prompt"}),(0,s.jsx)(u.TableHead,{children:"é¢„è®¾"}),(0,s.jsx)(u.TableHead,{className:"text-right",children:"æ“ä½œ"})]})}),(0,s.jsx)(u.TableBody,{children:0===eu.length?(0,s.jsx)(u.TableRow,{children:(0,s.jsx)(u.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:ed?"æ²¡æœ‰åŒ¹é…çš„ç¾¤å†…ç”¨æˆ·äººæ ¼è®¾å®š":"æš‚æ— ç¾¤å†…ç”¨æˆ·äººæ ¼è®¾å®š"})}):eu.map(e=>(0,s.jsxs)(u.TableRow,{children:[(0,s.jsx)(u.TableCell,{className:"font-medium",children:e.groupId}),(0,s.jsx)(u.TableCell,{children:e.userId}),(0,s.jsx)(u.TableCell,{className:"max-w-[200px] truncate",children:e.systemPrompt||"-"}),(0,s.jsx)(u.TableCell,{children:e.presetId||"-"}),(0,s.jsx)(u.TableCell,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,s.jsx)(t.Button,{variant:"ghost",size:"icon",onClick:()=>eT(e),children:(0,s.jsx)(b.Edit,{className:"h-4 w-4"})}),(0,s.jsx)(t.Button,{variant:"ghost",size:"icon",onClick:()=>ew(e.groupId,e.userId),children:(0,s.jsx)(f.Trash2,{className:"h-4 w-4 text-destructive"})})]})})]},`${e.groupId}-${e.userId}`))})]})]})}),(0,s.jsx)(o.TabsContent,{value:"private",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(t.Button,{onClick:()=>eP(),children:[(0,s.jsx)(y.Plus,{className:"mr-2 h-4 w-4"}),"æ·»åŠ ç§èŠäººæ ¼"]}),(0,s.jsxs)(u.Table,{children:[(0,s.jsx)(u.TableHeader,{children:(0,s.jsxs)(u.TableRow,{children:[(0,s.jsx)(u.TableHead,{children:"ç”¨æˆ·ID"}),(0,s.jsx)(u.TableHead,{children:"è‡ªå®šä¹‰Prompt"}),(0,s.jsx)(u.TableHead,{children:"é¢„è®¾"}),(0,s.jsx)(u.TableHead,{children:"æ›´æ–°æ—¶é—´"}),(0,s.jsx)(u.TableHead,{className:"text-right",children:"æ“ä½œ"})]})}),(0,s.jsx)(u.TableBody,{children:0===em.length?(0,s.jsx)(u.TableRow,{children:(0,s.jsx)(u.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:ed?"æ²¡æœ‰åŒ¹é…çš„ç§èŠäººæ ¼è®¾å®š":"æš‚æ— ç§èŠäººæ ¼è®¾å®š"})}):em.map(e=>(0,s.jsxs)(u.TableRow,{children:[(0,s.jsx)(u.TableCell,{className:"font-medium",children:e.userId}),(0,s.jsx)(u.TableCell,{className:"max-w-[200px] truncate",children:e.systemPrompt||"-"}),(0,s.jsx)(u.TableCell,{children:e.presetId||"-"}),(0,s.jsx)(u.TableCell,{children:e.updatedAt?new Date(e.updatedAt).toLocaleString():"-"}),(0,s.jsx)(u.TableCell,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,s.jsx)(t.Button,{variant:"ghost",size:"icon",onClick:()=>eP(e),children:(0,s.jsx)(b.Edit,{className:"h-4 w-4"})}),(0,s.jsx)(t.Button,{variant:"ghost",size:"icon",onClick:()=>eD(e.userId),children:(0,s.jsx)(f.Trash2,{className:"h-4 w-4 text-destructive"})})]})})]},e.userId))})]})]})})]})})]}),(0,s.jsx)(h.Dialog,{open:O,onOpenChange:Q,children:(0,s.jsxs)(h.DialogContent,{children:[(0,s.jsxs)(h.DialogHeader,{children:[(0,s.jsx)(h.DialogTitle,{children:Y?"ç¼–è¾‘ç”¨æˆ·äººæ ¼":"æ·»åŠ ç”¨æˆ·äººæ ¼"}),(0,s.jsx)(h.DialogDescription,{children:"ä¸ºç‰¹å®šç”¨æˆ·è®¾ç½®ç‹¬ç«‹çš„äººæ ¼"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"ç”¨æˆ·ID *"}),(0,s.jsx)(r.Input,{value:ee.userId,onChange:e=>es({...ee,userId:e.target.value}),placeholder:"QQå·",disabled:Y})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"è‡ªå®šä¹‰Prompt"}),(0,s.jsx)(c.Textarea,{value:ee.systemPrompt,onChange:e=>es({...ee,systemPrompt:e.target.value}),placeholder:"ä¸ºè¯¥ç”¨æˆ·è®¾ç½®ä¸“å±žçš„ç³»ç»Ÿæç¤ºè¯...ç•™ç©ºè¡¨ç¤ºä½¿ç”¨ç©ºäººè®¾ï¼ˆæ— ç³»ç»Ÿæç¤ºè¯ï¼‰",rows:6}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["æ”¯æŒå˜é‡: ","{{user_name}}"," ","{{user_id}}"," ","{{group_name}}"," ","{{date}}"," ","{{time}}"," ","ç­‰",(0,s.jsx)("br",{}),"æ”¯æŒè¡¨è¾¾å¼: ","${e.user_id}"," ","${e.group?.name}"," (eä¸ºeventå¯¹è±¡)"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"ä½¿ç”¨é¢„è®¾"}),(0,s.jsxs)(x.Select,{value:ee.presetId||"__none__",onValueChange:e=>es({...ee,presetId:"__none__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"é€‰æ‹©é¢„è®¾ï¼ˆå¯é€‰ï¼‰"})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"__none__",children:"ä¸ä½¿ç”¨é¢„è®¾"}),G.map(e=>(0,s.jsx)(x.SelectItem,{value:e.id,children:e.name||e.id},e.id))]})]})]})]}),(0,s.jsxs)(h.DialogFooter,{children:[(0,s.jsx)(t.Button,{variant:"outline",onClick:()=>Q(!1),children:"å–æ¶ˆ"}),(0,s.jsx)(t.Button,{onClick:ey,children:"ä¿å­˜"})]})]})}),(0,s.jsx)(h.Dialog,{open:F,onOpenChange:q,children:(0,s.jsxs)(h.DialogContent,{children:[(0,s.jsxs)(h.DialogHeader,{children:[(0,s.jsx)(h.DialogTitle,{children:Y?"ç¼–è¾‘ç¾¤ç»„äººæ ¼":"æ·»åŠ ç¾¤ç»„äººæ ¼"}),(0,s.jsx)(h.DialogDescription,{children:"ä¸ºç‰¹å®šç¾¤ç»„è®¾ç½®ç‹¬ç«‹çš„äººæ ¼"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"ç¾¤ç»„ID *"}),(0,s.jsx)(r.Input,{value:el.groupId,onChange:e=>ea({...el,groupId:e.target.value}),placeholder:"ç¾¤å·",disabled:Y})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"è‡ªå®šä¹‰Prompt"}),(0,s.jsx)(c.Textarea,{value:el.systemPrompt,onChange:e=>ea({...el,systemPrompt:e.target.value}),placeholder:"ä¸ºè¯¥ç¾¤ç»„è®¾ç½®ä¸“å±žçš„ç³»ç»Ÿæç¤ºè¯...ç•™ç©ºè¡¨ç¤ºä½¿ç”¨ç©ºäººè®¾",rows:6}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["æ”¯æŒå˜é‡: ","{{user_name}}"," ","{{group_name}}"," ","{{date}}"," ","{{time}}"," ç­‰",(0,s.jsx)("br",{}),"æ”¯æŒè¡¨è¾¾å¼: ","${e.user_id}"," ","${e.group?.name}"," (eä¸ºeventå¯¹è±¡)"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"ä½¿ç”¨é¢„è®¾"}),(0,s.jsxs)(x.Select,{value:el.presetId||"__none__",onValueChange:e=>ea({...el,presetId:"__none__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"é€‰æ‹©é¢„è®¾ï¼ˆå¯é€‰ï¼‰"})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"__none__",children:"ä¸ä½¿ç”¨é¢„è®¾"}),G.map(e=>(0,s.jsx)(x.SelectItem,{value:e.id,children:e.name||e.id},e.id))]})]})]}),(0,s.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,s.jsx)(n.Label,{className:"text-base font-medium",children:"ç¾¤ç»„åŠŸèƒ½å¼€å…³"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:"ç¾¤ç®¡ç†å‘˜å¯é€šè¿‡å‘½ä»¤æˆ–æ­¤å¤„æŽ§åˆ¶æœ¬ç¾¤åŠŸèƒ½"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm",children:"ðŸŽ­ ä¼ªäººæ¨¡å¼"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"éšæœºå›žå¤æ¶ˆæ¯ï¼Œæ¨¡æ‹ŸçœŸäººèŠå¤©"})]}),(0,s.jsxs)(x.Select,{value:el.bymEnabled,onValueChange:e=>ea({...el,bymEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-32",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"ç»§æ‰¿å…¨å±€"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"å¼€å¯"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm",children:"ðŸŽ¨ ç»˜å›¾åŠŸèƒ½"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"æ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾ã€è§†é¢‘ç”Ÿæˆç­‰"})]}),(0,s.jsxs)(x.Select,{value:el.imageGenEnabled,onValueChange:e=>ea({...el,imageGenEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-32",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"ç»§æ‰¿å…¨å±€"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"å¼€å¯"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm",children:"ðŸ“Š ç¾¤èŠæ€»ç»“"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"å…è®¸ä½¿ç”¨ç¾¤èŠæ€»ç»“åŠŸèƒ½"})]}),(0,s.jsxs)(x.Select,{value:el.summaryEnabled,onValueChange:e=>ea({...el,summaryEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-32",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"ç»§æ‰¿å…¨å±€"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"å¼€å¯"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm",children:"ðŸ“¢ äº‹ä»¶å¤„ç†"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"å…¥ç¾¤æ¬¢è¿Žã€é€€ç¾¤æé†’ç­‰"})]}),(0,s.jsxs)(x.Select,{value:el.eventEnabled,onValueChange:e=>ea({...el,eventEnabled:e}),children:[(0,s.jsx)(x.SelectTrigger,{className:"w-32",children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"inherit",children:"ç»§æ‰¿å…¨å±€"}),(0,s.jsx)(x.SelectItem,{value:"on",children:"å¼€å¯"}),(0,s.jsx)(x.SelectItem,{value:"off",children:"å…³é—­"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"è§¦å‘æ¨¡å¼"}),(0,s.jsxs)(x.Select,{value:el.triggerMode,onValueChange:e=>ea({...el,triggerMode:e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"default",children:"é»˜è®¤"}),(0,s.jsx)(x.SelectItem,{value:"at",children:"ä»…@è§¦å‘"}),(0,s.jsx)(x.SelectItem,{value:"prefix",children:"ä»…å‰ç¼€è§¦å‘"}),(0,s.jsx)(x.SelectItem,{value:"all",children:"å…¨éƒ¨æ¶ˆæ¯"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"è‡ªå®šä¹‰å‰ç¼€"}),(0,s.jsx)(r.Input,{value:el.customPrefix,onChange:e=>ea({...el,customPrefix:e.target.value}),placeholder:"ç•™ç©ºä½¿ç”¨å…¨å±€"})]})]})]}),(0,s.jsxs)(h.DialogFooter,{children:[(0,s.jsx)(t.Button,{variant:"outline",onClick:()=>q(!1),children:"å–æ¶ˆ"}),(0,s.jsx)(t.Button,{onClick:ef,children:"ä¿å­˜"})]})]})}),(0,s.jsx)(h.Dialog,{open:K,onOpenChange:J,children:(0,s.jsxs)(h.DialogContent,{children:[(0,s.jsxs)(h.DialogHeader,{children:[(0,s.jsx)(h.DialogTitle,{children:Y?"ç¼–è¾‘ç¾¤å†…ç”¨æˆ·äººæ ¼":"æ·»åŠ ç¾¤å†…ç”¨æˆ·äººæ ¼"}),(0,s.jsx)(h.DialogDescription,{children:"ä¸ºç‰¹å®šç¾¤å†…çš„ç‰¹å®šç”¨æˆ·è®¾ç½®ç‹¬ç«‹çš„äººæ ¼"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"ç¾¤ç»„ID *"}),(0,s.jsx)(r.Input,{value:et.groupId,onChange:e=>er({...et,groupId:e.target.value}),placeholder:"ç¾¤å·",disabled:Y})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"ç”¨æˆ·ID *"}),(0,s.jsx)(r.Input,{value:et.userId,onChange:e=>er({...et,userId:e.target.value}),placeholder:"QQå·",disabled:Y})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"è‡ªå®šä¹‰Prompt"}),(0,s.jsx)(c.Textarea,{value:et.systemPrompt,onChange:e=>er({...et,systemPrompt:e.target.value}),placeholder:"ä¸ºè¯¥ç¾¤å†…çš„ç‰¹å®šç”¨æˆ·è®¾ç½®ä¸“å±žçš„ç³»ç»Ÿæç¤ºè¯...ç•™ç©ºè¡¨ç¤ºä½¿ç”¨ç©ºäººè®¾",rows:6}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["æ”¯æŒå˜é‡: ","{{user_name}}"," ","{{group_name}}"," ","{{date}}"," ç­‰ | è¡¨è¾¾å¼:"," ","${e.user_id}"," (eä¸ºevent)"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"ä½¿ç”¨é¢„è®¾"}),(0,s.jsxs)(x.Select,{value:et.presetId||"__none__",onValueChange:e=>er({...et,presetId:"__none__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"é€‰æ‹©é¢„è®¾ï¼ˆå¯é€‰ï¼‰"})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"__none__",children:"ä¸ä½¿ç”¨é¢„è®¾"}),G.map(e=>(0,s.jsx)(x.SelectItem,{value:e.id,children:e.name||e.id},e.id))]})]})]})]}),(0,s.jsxs)(h.DialogFooter,{children:[(0,s.jsx)(t.Button,{variant:"outline",onClick:()=>J(!1),children:"å–æ¶ˆ"}),(0,s.jsx)(t.Button,{onClick:eS,children:"ä¿å­˜"})]})]})}),(0,s.jsx)(h.Dialog,{open:W,onOpenChange:X,children:(0,s.jsxs)(h.DialogContent,{children:[(0,s.jsxs)(h.DialogHeader,{children:[(0,s.jsx)(h.DialogTitle,{children:Y?"ç¼–è¾‘ç§èŠäººæ ¼":"æ·»åŠ ç§èŠäººæ ¼"}),(0,s.jsx)(h.DialogDescription,{children:"ä¸ºç‰¹å®šç”¨æˆ·åœ¨ç§èŠåœºæ™¯è®¾ç½®ç‹¬ç«‹çš„äººæ ¼"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"ç”¨æˆ·ID *"}),(0,s.jsx)(r.Input,{value:en.userId,onChange:e=>ei({...en,userId:e.target.value}),placeholder:"QQå·",disabled:Y})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"è‡ªå®šä¹‰Prompt"}),(0,s.jsx)(c.Textarea,{value:en.systemPrompt,onChange:e=>ei({...en,systemPrompt:e.target.value}),placeholder:"ä¸ºè¯¥ç”¨æˆ·åœ¨ç§èŠåœºæ™¯è®¾ç½®ä¸“å±žçš„ç³»ç»Ÿæç¤ºè¯...ç•™ç©ºè¡¨ç¤ºä½¿ç”¨ç©ºäººè®¾",rows:6}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["æ”¯æŒå˜é‡: ","{{user_name}}"," ","{{user_id}}"," ","{{date}}"," ","{{time}}"," ç­‰ | è¡¨è¾¾å¼:"," ","${e.user_id}"," (eä¸ºevent)"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{children:"ä½¿ç”¨é¢„è®¾"}),(0,s.jsxs)(x.Select,{value:en.presetId||"__none__",onValueChange:e=>ei({...en,presetId:"__none__"===e?"":e}),children:[(0,s.jsx)(x.SelectTrigger,{children:(0,s.jsx)(x.SelectValue,{placeholder:"é€‰æ‹©é¢„è®¾ï¼ˆå¯é€‰ï¼‰"})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"__none__",children:"ä¸ä½¿ç”¨é¢„è®¾"}),G.map(e=>(0,s.jsx)(x.SelectItem,{value:e.id,children:e.name||e.id},e.id))]})]})]})]}),(0,s.jsxs)(h.DialogFooter,{children:[(0,s.jsx)(t.Button,{variant:"outline",onClick:()=>X(!1),children:"å–æ¶ˆ"}),(0,s.jsx)(t.Button,{onClick:e_,children:"ä¿å­˜"})]})]})})]})}e.s(["default",()=>D],22188)}]);