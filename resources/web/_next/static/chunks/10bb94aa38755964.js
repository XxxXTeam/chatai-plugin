(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9256,e=>{"use strict";var t=e.i(33169),s=e.i(73609),r=e.i(8422),a=e.i(60844),i=e.i(17171),n=e.i(37249),l=e.i(40204),o=e.i(10273),d=e.i(32308),c=e.i(35670),m=e.i(70620),h=e.i(83949),p=e.i(17969),u=e.i(14775),x=e.i(88233),g=e.i(3190),f=e.i(50974);let b=(0,f.default)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var j=e.i(64775),y=e.i(63959),v=e.i(63532),w=e.i(13089),k=e.i(90907),N=e.i(29144),C=e.i(94701),S=e.i(82018),I=e.i(68466),A=e.i(72024),T=e.i(23359),P=e.i(82251);let M=e=>{let t,s=new Set,r=(e,r)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),s.forEach(s=>s(t,e))}},a=()=>t,i={setState:r,getState:a,getInitialState:()=>n,subscribe:e=>(s.add(e),()=>s.delete(e))},n=t=e(r,a,i);return i},B=e=>{let t=e?M(e):M,s=e=>(function(e,t=e=>e){let s=a.default.useSyncExternalStore(e.subscribe,a.default.useCallback(()=>t(e.getState()),[e,t]),a.default.useCallback(()=>t(e.getInitialState()),[e,t]));return a.default.useDebugValue(s),s})(t,e);return Object.assign(s,t),s},D=e=>e?B(e):B,U=e=>t=>{try{let s=e(t);if(s instanceof Promise)return s;return{then:e=>U(e)(s),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>U(t)(e)}}},z=(e,t)=>(s,r,a)=>{let i,n={storage:function(e,t){let s;try{s=e()}catch(e){return}return{getItem:e=>{var t;let r=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=s.getItem(e))?t:null;return a instanceof Promise?a.then(r):r(a)},setItem:(e,t)=>s.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>s.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},l=!1,o=new Set,d=new Set,c=n.storage;if(!c)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),s(...e)},r,a);let m=()=>{let e=n.partialize({...r()});return c.setItem(n.name,{state:e,version:n.version})},h=a.setState;a.setState=(e,t)=>(h(e,t),m());let p=e((...e)=>(s(...e),m()),r,a);a.getInitialState=()=>p;let u=()=>{var e,t;if(!c)return;l=!1,o.forEach(e=>{var t;return e(null!=(t=r())?t:p)});let a=(null==(t=n.onRehydrateStorage)?void 0:t.call(n,null!=(e=r())?e:p))||void 0;return U(c.getItem.bind(c))(n.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===n.version)return[!1,e.state];else{if(n.migrate){let t=n.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[a,l]=e;if(s(i=n.merge(l,null!=(t=r())?t:p),!0),a)return m()}).then(()=>{null==a||a(i,void 0),i=r(),l=!0,d.forEach(e=>e(i))}).catch(e=>{null==a||a(void 0,e)})};return a.persist={setOptions:e=>{n={...n,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>u(),hasHydrated:()=>l,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},n.skipHydration||u(),i||p},L=D()(z(e=>({token:null,isAuthenticated:!1,setToken:t=>e({token:t,isAuthenticated:!!t}),logout:()=>{localStorage.removeItem("chatai_token"),document.cookie="auth_token=; path=/chatai; expires=Thu, 01 Jan 1970 00:00:00 GMT",e({token:null,isAuthenticated:!1})}}),{name:"chatai-auth"}));D()((e,t)=>({config:null,loading:!1,lastFetched:null,setConfig:t=>e({config:t,lastFetched:Date.now()}),setLoading:t=>e({loading:t}),isStale:(e=6e4)=>{let{lastFetched:s}=t();return!s||Date.now()-s>e}}));let K=D()(z(e=>({sidebarOpen:!1,sidebarCollapsed:!1,theme:"system",setSidebarOpen:t=>e({sidebarOpen:t}),toggleSidebar:()=>e(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarCollapsed:t=>e({sidebarCollapsed:t}),setTheme:t=>e({theme:t})}),{name:"chatai-ui",partialize:e=>({sidebarCollapsed:e.sidebarCollapsed,theme:e.theme})}));D()(e=>({notifications:[],addNotification:t=>{let s=`${Date.now()}-${Math.random().toString(36).slice(2,9)}`;e(e=>({notifications:[...e.notifications,{...t,id:s}]})),0!==t.duration&&setTimeout(()=>{e(e=>({notifications:e.notifications.filter(e=>e.id!==s)}))},t.duration||5e3)},removeNotification:t=>e(e=>({notifications:e.notifications.filter(e=>e.id!==t)})),clearNotifications:()=>e({notifications:[]})}));let O={path:"/",label:"ä»ªè¡¨ç›˜",icon:"LayoutDashboard",closable:!1},E=D()(z((e,t)=>({tabs:[O],activeTab:"/",addTab:s=>{let{tabs:r}=t();if(r.some(e=>e.path===s.path))return void e({activeTab:s.path});let a=[...r,s];if(a.length>10){let e=t().activeTab,r=a.findIndex(t=>t.closable&&t.path!==e&&t.path!==s.path);-1!==r&&a.splice(r,1)}e({tabs:a,activeTab:s.path})},removeTab:s=>{let{tabs:r,activeTab:a}=t(),i=r.find(e=>e.path===s);if(!i||!i.closable)return;let n=r.filter(e=>e.path!==s);if(a===s){let t=r.findIndex(e=>e.path===s),a=r[t+1]||r[t-1]||n[0];e({tabs:n,activeTab:a?.path||"/"})}else e({tabs:n})},setActiveTab:t=>e({activeTab:t}),clearOtherTabs:s=>{let{tabs:r}=t();e({tabs:r.filter(e=>!e.closable||e.path===s),activeTab:s})},clearTabs:()=>e({tabs:[O],activeTab:"/"})}),{name:"chatai-tabs",partialize:e=>({tabs:e.tabs})}));var R=e.i(47686),W=e.i(25466),$=e.i(83277);let q=[{id:"overview",label:"ä»ªè¡¨ç›˜",icon:"LayoutDashboard",items:[{href:"/",label:"ä»ªè¡¨ç›˜",icon:"LayoutDashboard"}]},{id:"config",label:"é…ç½®ä¸­å¿ƒ",icon:"Settings",tourId:"config",items:[{href:"/settings",label:"åŸºç¡€è®¾ç½®",icon:"Settings",tourId:"settings"},{href:"/settings/system",label:"ç³»ç»Ÿé…ç½®",icon:"Server"},{href:"/settings/context",label:"ä¸Šä¸‹æ–‡é…ç½®",icon:"FileText"},{href:"/channels",label:"æ¸ é“ç®¡ç†",icon:"Plug",tourId:"channels"},{href:"/presets",label:"é¢„è®¾ç®¡ç†",icon:"Palette",tourId:"presets"},{href:"/scope",label:"äººè®¾ç®¡ç†",icon:"UserCog"},{href:"/settings/proxy",label:"ä»£ç†è®¾ç½®",icon:"Globe"},{href:"/settings/links",label:"ç™»å½•é“¾æŽ¥",icon:"Link"}]},{id:"ai",label:"AIæ‰©å±•",icon:"Cpu",tourId:"ai",items:[{href:"/tools",label:"å·¥å…·é…ç½®",icon:"Wrench"},{href:"/mcp",label:"MCPæœåŠ¡",icon:"Bot"},{href:"/imagegen",label:"ç»˜å›¾é¢„è®¾",icon:"Wand2"},{href:"/knowledge",label:"çŸ¥è¯†åº“",icon:"BookOpen"},{href:"/memory",label:"è®°å¿†ç®¡ç†",icon:"Brain"},{href:"/game",label:"Galgame",icon:"Gamepad2"}]},{id:"data",label:"æ•°æ®è®°å½•",icon:"Database",tourId:"data",items:[{href:"/stats",label:"ä½¿ç”¨ç»Ÿè®¡",icon:"BarChart3"},{href:"/history/usage",label:"è°ƒç”¨ç»Ÿè®¡",icon:"Activity"},{href:"/conversations",label:"å¯¹è¯åŽ†å²",icon:"MessageSquare"},{href:"/history",label:"å·¥å…·è°ƒç”¨",icon:"History"}]},{id:"users",label:"ç”¨æˆ·ç®¡ç†",icon:"Users",tourId:"users",items:[{href:"/users",label:"ç”¨æˆ·ç®¡ç†",icon:"Users"},{href:"/groups",label:"ç¾¤ç»„ç®¡ç†",icon:"UsersRound",tourId:"groups"}]}],H=new Map;for(let e of q)for(let t of e.items)H.set(t.href,t);let F={LayoutDashboard:n.LayoutDashboard,Settings:l.Settings,MessageSquare:o.MessageSquare,Users:d.Users,Plug:c.Plug,Bot:m.Bot,Wrench:h.Wrench,History:p.History,Palette:u.Palette,UsersRound:x.UsersRound,UserCog:b,Brain:j.Brain,BookOpen:y.BookOpen,Cpu:v.Cpu,Database:w.Database,BarChart3:k.BarChart3,Wand2:N.Wand2,Globe:C.Globe,Activity:S.Activity,FileText:I.FileText,Server:A.Server,Link:T.Link,Gamepad2:P.Gamepad2};function G(e){return F[e]||I.FileText}let _=q.map(e=>({id:e.id,label:e.label,icon:G(e.icon),tourId:e.tourId,items:e.items.map(e=>({href:e.href,label:e.label,icon:G(e.icon),tourId:e.tourId}))}));function V(e,t,s){return t===e||!s.some(s=>s.href!==e&&s.href.startsWith(e+"/")&&(t===s.href||t.startsWith(s.href+"/")))&&"/"!==e&&t.startsWith(e+"/")}function X(e,t){return e.items.some(s=>V(s.href,t,e.items))}function J({group:e,pathname:r,onNavClick:a,isOpen:n,onToggle:l}){let o=X(e,r),d=e.icon;if(1===e.items.length){let n=e.items[0],l=r===n.href,o=n.icon||d;return(0,t.jsxs)(s.default,{href:n.href,className:(0,i.cn)("flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 relative overflow-hidden group/item",l?"text-primary-foreground shadow-lg shadow-primary/25":"text-muted-foreground hover:text-foreground hover:bg-accent/50 hover:shadow-sm"),onClick:a,children:[l&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary to-primary/80 opacity-100 transition-opacity"}),(0,t.jsx)("div",{className:(0,i.cn)("flex h-8 w-8 items-center justify-center rounded-lg transition-all duration-300 relative z-10",l?"bg-white/20 text-white":"bg-muted/50 group-hover/item:bg-background group-hover/item:scale-110"),children:(0,t.jsx)(o,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"relative z-10",children:n.label})]})}return(0,t.jsxs)($.Collapsible,{open:n,onOpenChange:l,children:[(0,t.jsx)($.CollapsibleTrigger,{className:"w-full group/trigger",children:(0,t.jsxs)("div",{className:(0,i.cn)("flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 w-full relative overflow-hidden",o?"text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent/40"),...e.tourId?{"data-tour":e.tourId}:{},children:[o&&(0,t.jsx)("div",{className:"absolute inset-0 bg-primary/5 opacity-100 transition-opacity"}),(0,t.jsx)("div",{className:(0,i.cn)("flex h-8 w-8 items-center justify-center rounded-lg transition-all duration-300 relative z-10",o?"bg-primary/10 text-primary shadow-sm":"bg-muted/50 group-hover/trigger:bg-background group-hover/trigger:scale-110"),children:(0,t.jsx)(d,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"flex-1 text-left relative z-10",children:e.label}),(0,t.jsx)(g.ChevronDown,{className:(0,i.cn)("h-4 w-4 transition-transform duration-300 text-muted-foreground/70 group-hover/trigger:text-foreground relative z-10",n&&"rotate-180")})]})}),(0,t.jsx)($.CollapsibleContent,{className:"mt-1 ml-6 pl-3 border-l-2 border-border/40 space-y-0.5",children:e.items.map(n=>{let l=V(n.href,r,e.items),o=n.icon;return(0,t.jsxs)(s.default,{href:n.href,className:(0,i.cn)("flex items-center gap-2.5 px-3 py-2 rounded-lg text-sm transition-all duration-150",l?"bg-primary text-primary-foreground font-medium shadow-sm":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),onClick:a,...n.tourId?{"data-tour":n.tourId}:{},children:[o&&(0,t.jsx)(o,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:n.label})]},n.href)})})]})}function Q({pathname:e,onNavClick:s}){let[r,i]=(0,a.useState)(()=>{let t=new Set;return _.forEach(s=>{X(s,e)&&t.add(s.id)}),t});return(0,t.jsx)("nav",{className:"p-4 space-y-2",children:_.map(a=>(0,t.jsx)(J,{group:a,pathname:e,onNavClick:s,isOpen:r.has(a.id),onToggle:()=>{var e;return e=a.id,void i(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})}},a.id))})}function Y(){let e=(0,r.usePathname)(),{sidebarOpen:a,setSidebarOpen:i}=K();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("aside",{className:"hidden lg:block w-64 glass-sidebar h-screen sticky top-0 transition-all duration-300","data-tour":"sidebar",children:[(0,t.jsx)("div",{className:"flex h-16 items-center px-6 border-b border-border/40 backdrop-blur-md bg-background/20",children:(0,t.jsxs)(s.default,{href:"/",className:"flex items-center gap-3 group",children:[(0,t.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-primary/80 shadow-lg shadow-primary/20 group-hover:shadow-primary/40 group-hover:scale-110 transition-all duration-300",children:(0,t.jsx)(m.Bot,{className:"h-5 w-5 text-primary-foreground"})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-bold text-lg leading-tight tracking-tight",children:"ChatAI"}),(0,t.jsx)("span",{className:"text-[10px] text-muted-foreground leading-tight uppercase tracking-wider font-semibold",children:"Assistant"})]})]})}),(0,t.jsx)(R.ScrollArea,{className:"h-[calc(100vh-4rem)]",children:(0,t.jsx)(Q,{pathname:e})})]}),(0,t.jsx)(W.Sheet,{open:a,onOpenChange:i,children:(0,t.jsxs)(W.SheetContent,{side:"left",className:"w-72 p-0 glass-sidebar border-r-0",children:[(0,t.jsxs)(W.SheetHeader,{className:"h-16 flex flex-row items-center px-6 border-b border-border/40 bg-background/20",children:[(0,t.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-primary/80 shadow-md mr-3",children:(0,t.jsx)(m.Bot,{className:"h-5 w-5 text-primary-foreground"})}),(0,t.jsx)(W.SheetTitle,{className:"font-bold text-lg",children:"ChatAI"})]}),(0,t.jsx)(R.ScrollArea,{className:"h-[calc(100vh-4rem)]",children:(0,t.jsx)(Q,{pathname:e,onNavClick:()=>i(!1)})})]})})]})}let Z=(0,f.default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),ee=(0,f.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var et=e.i(29720),es=e.i(80830),er=e.i(10024),ea=e.i(72029),ei=e.i(51078);let en=(0,f.default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),el=(0,f.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var eo=e.i(38910);function ed(){let{setTheme:e}=(0,eo.useTheme)();return(0,t.jsxs)(ei.DropdownMenu,{children:[(0,t.jsx)(ei.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(ea.Button,{variant:"ghost",size:"icon",children:[(0,t.jsx)(el,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,t.jsx)(en,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,t.jsx)("span",{className:"sr-only",children:"åˆ‡æ¢ä¸»é¢˜"})]})}),(0,t.jsxs)(ei.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(ei.DropdownMenuItem,{onClick:()=>e("light"),children:"æµ…è‰²"}),(0,t.jsx)(ei.DropdownMenuItem,{onClick:()=>e("dark"),children:"æ·±è‰²"}),(0,t.jsx)(ei.DropdownMenuItem,{onClick:()=>e("system"),children:"è·Ÿéšç³»ç»Ÿ"})]})]})}e.i(10464);var ec=e.i(91132),em=e.i(92865),eh=e.i(51200),ep=e.i(13107),eu=e.i(75979),ex=e.i(93932),eg=e.i(81529),ef=e.i(74940),eb=e.i(15204),ej=e.i(32647);let ey=(0,f.default)("mouse-pointer-click",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]),ev="chatai_tour_",ew="chatai_tour_session_";function ek(e){try{return localStorage.getItem(e)}catch{return null}}function eN(e,t){try{sessionStorage.setItem(e,t)}catch{}}function eC({steps:e,tourId:s,onComplete:r,onSkip:n,forceShow:l=!1}){let[o,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(0),[h,p]=(0,a.useState)(null),[u,x]=(0,a.useState)(null),[g,f]=(0,a.useState)(!1),b=(0,a.useRef)(null),j=(0,a.useRef)(null),y=(0,a.useRef)(!1),v=`${ev}${s}`,w=`${ew}${s}`;(0,a.useEffect)(()=>{if(y.current)return;y.current=!0;let e=requestAnimationFrame(()=>{(f(!0),l)?d(!0):"initialized"!==function(e){try{return sessionStorage.getItem(e)}catch{return null}}(w)&&(eN(w,"initialized"),eu.configApi.getTourStatus(s).then(e=>{let t=e?.data;t?.completed||t?.skipped?localStorage.setItem(v,t.completed?"completed":"skipped"):setTimeout(()=>{d(!0)},300)}).catch(()=>{let e=ek(v);"completed"!==e&&"skipped"!==e&&setTimeout(()=>{d(!0)},300)}))});return()=>cancelAnimationFrame(e)},[l,v,w,s]);let k=(0,a.useCallback)(()=>{if(!o||c>=e.length)return;let t=e[c],s=document.querySelector(t.target);if(!s)return void console.warn(`Tour target not found: ${t.target}`);let r=s.getBoundingClientRect(),a=t.spotlightPadding??8,i=window.scrollY,n=window.scrollX;p({top:r.top+i-a,left:r.left+n-a,width:r.width+2*a,height:r.height+2*a});let l=window.innerWidth,d=window.innerHeight,m=t.placement||"auto",h=0,u=0;if("auto"===m){let e=r.top,t=d-r.bottom,s=l-r.right;m=t>=192?"bottom":e>=192?"top":s>=332?"right":"left"}switch(m){case"top":h=r.top+i-180-12,u=r.left+n+r.width/2-160;break;case"bottom":h=r.bottom+i+12,u=r.left+n+r.width/2-160;break;case"left":h=r.top+i+r.height/2-90,u=r.left+n-320-12;break;case"right":h=r.top+i+r.height/2-90,u=r.right+n+12}u=Math.max(16,Math.min(u,l-320-16)),x({top:h=Math.max(16+i,h),left:u,placement:m});let g=r.top,f=r.bottom;(g<100||f>d-100)&&s.scrollIntoView({behavior:"smooth",block:"center"})},[o,c,e]);(0,a.useEffect)(()=>{if(!o)return;let t=requestAnimationFrame(()=>k()),s=()=>k(),r=()=>k();window.addEventListener("resize",s),window.addEventListener("scroll",r,!0);let a=e[c],i=document.querySelector(a?.target||"");return i&&(j.current=new ResizeObserver(k),j.current.observe(i)),()=>{cancelAnimationFrame(t),window.removeEventListener("resize",s),window.removeEventListener("scroll",r,!0),j.current?.disconnect()}},[o,c,e,k]),(0,a.useEffect)(()=>{if(!o||c>=e.length)return;let t=e[c];t.onBeforeShow?.();let s=setTimeout(()=>t.onAfterShow?.(),100);return()=>clearTimeout(s)},[o,c,e]);let N=()=>{localStorage.setItem(v,"skipped"),d(!1),eu.configApi.skipTour(s).catch(()=>{}),n?.()};if(!g||!o||0===e.length)return null;let C=e[c],S=(c+1)/e.length*100,I="u">typeof document?Math.max(document.documentElement.scrollHeight,window.innerHeight):"100vh",A="u">typeof document?Math.max(document.documentElement.scrollWidth,window.innerWidth):"100vw";return(0,em.createPortal)((0,t.jsxs)("div",{className:"fixed inset-0 z-[9999] pointer-events-none","aria-modal":"true",role:"dialog",children:[h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"absolute left-0 right-0 top-0 bg-background/60 backdrop-blur-md pointer-events-auto",style:{height:h.top}}),(0,t.jsx)("div",{className:"absolute left-0 right-0 bg-background/60 backdrop-blur-md pointer-events-auto",style:{top:h.top+h.height,height:`calc(${"number"==typeof I?I+"px":I} - ${h.top+h.height}px)`}}),(0,t.jsx)("div",{className:"absolute left-0 bg-background/60 backdrop-blur-md pointer-events-auto",style:{top:h.top,height:h.height,width:h.left}}),(0,t.jsx)("div",{className:"absolute bg-background/60 backdrop-blur-md pointer-events-auto",style:{top:h.top,left:h.left+h.width,height:h.height,width:`calc(${"number"==typeof A?A+"px":A} - ${h.left+h.width}px)`}})]}):(0,t.jsx)("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-md pointer-events-auto"}),h&&(0,t.jsx)("div",{className:"absolute rounded-lg ring-2 ring-primary/80 shadow-lg shadow-primary/20 pointer-events-none",style:{top:h.top,left:h.left,width:h.width,height:h.height}}),u&&(0,t.jsxs)("div",{ref:b,className:"absolute z-10 animate-in fade-in-0 zoom-in-95 duration-200 pointer-events-auto",style:{top:u.top,left:u.left,width:320},children:[(0,t.jsx)(eh.Card,{className:"shadow-2xl border-primary/20 bg-card/95 backdrop-blur-sm",children:(0,t.jsxs)(eh.CardContent,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"p-1.5 rounded-lg bg-primary/10",children:(0,t.jsx)(eb.Sparkles,{className:"h-4 w-4 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-sm",children:C.title}),(0,t.jsxs)(ep.Badge,{variant:"secondary",className:"text-[10px] mt-0.5",children:[c+1," / ",e.length]})]})]}),(0,t.jsx)(ea.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 -mr-1 -mt-1",onClick:N,children:(0,t.jsx)(ef.X,{className:"h-3.5 w-3.5"})})]}),(0,t.jsx)("div",{className:"h-1 bg-muted rounded-full mb-3 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${S}%`}})}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4 leading-relaxed whitespace-pre-line",children:C.description}),!C.disableInteraction&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-primary mb-3",children:[(0,t.jsx)(ey,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{children:"ç‚¹å‡»é«˜äº®åŒºåŸŸå¯è¿›è¡Œæ“ä½œ"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(ea.Button,{variant:"ghost",size:"sm",onClick:N,className:"text-muted-foreground hover:text-foreground",children:"è·³è¿‡å¼•å¯¼"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[c>0&&(0,t.jsxs)(ea.Button,{variant:"outline",size:"sm",onClick:()=>{c>0&&m(c-1)},children:[(0,t.jsx)(eg.ChevronLeft,{className:"h-4 w-4 mr-1"}),"ä¸Šä¸€æ­¥"]}),(0,t.jsx)(ea.Button,{size:"sm",onClick:()=>{c<e.length-1?m(c+1):(localStorage.setItem(v,"completed"),d(!1),eu.configApi.completeTour(s).catch(()=>{}),r?.())},children:c===e.length-1?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ej.CheckCircle2,{className:"h-4 w-4 mr-1"}),"å®Œæˆ"]}):(0,t.jsxs)(t.Fragment,{children:["ä¸‹ä¸€æ­¥",(0,t.jsx)(ex.ChevronRight,{className:"h-4 w-4 ml-1"})]})})]})]})]})}),(0,t.jsx)("div",{className:(0,i.cn)("absolute w-3 h-3 bg-card border rotate-45","top"===u.placement&&"bottom-[-6px] left-1/2 -translate-x-1/2 border-t-0 border-l-0","bottom"===u.placement&&"top-[-6px] left-1/2 -translate-x-1/2 border-b-0 border-r-0","left"===u.placement&&"right-[-6px] top-1/2 -translate-y-1/2 border-l-0 border-b-0","right"===u.placement&&"left-[-6px] top-1/2 -translate-y-1/2 border-r-0 border-t-0")})]})]}),document.body)}var eS=e.i(80919),eI=e.i(19367);let eA="dashboard-main",eT=[{target:'[data-tour="sidebar"]',title:"ðŸ‘‹ æ¬¢è¿Žä½¿ç”¨ ChatAI",description:"è®©æˆ‘ä»¬ä¸€æ­¥æ­¥å®Œæˆåˆå§‹é…ç½®ï¼Œåªéœ€å‡ åˆ†é’Ÿå³å¯å¼€å§‹ä½¿ç”¨ AI èŠå¤©åŠŸèƒ½ã€‚",placement:"right",spotlightPadding:4},{target:'[data-tour="config"]',title:"ç¬¬ 1 æ­¥ï¼šé…ç½®æ¸ é“",description:"é¦–å…ˆéœ€è¦é…ç½® AI æœåŠ¡æ¸ é“ã€‚\n\nç‚¹å‡»å±•å¼€ã€Œé…ç½®ä¸­å¿ƒã€ï¼Œç„¶åŽè¿›å…¥ã€Œæ¸ é“ç®¡ç†ã€æ·»åŠ  API æ¸ é“ï¼ˆå¦‚ OpenAIã€DeepSeek ç­‰ï¼‰ã€‚\n\nè¿™æ˜¯ä½¿ç”¨æ’ä»¶çš„åŸºç¡€ï¼Œæ²¡æœ‰æ¸ é“æ— æ³•è°ƒç”¨ AIã€‚",placement:"right",spotlightPadding:6},{target:'[data-tour="config"]',title:"ç¬¬ 2 æ­¥ï¼šè®¾ç½®é»˜è®¤æ¨¡åž‹",description:"é…ç½®å¥½æ¸ é“åŽï¼Œè¿›å…¥ã€ŒåŸºç¡€è®¾ç½®ã€ï¼š\n\n1. ç‚¹å‡»ã€ŒèŽ·å–æ¨¡åž‹ã€æŒ‰é’®æ‹‰å–å¯ç”¨æ¨¡åž‹\n2. é€‰æ‹©ä¸€ä¸ªé»˜è®¤æ¨¡åž‹ï¼ˆå¦‚ gpt-4oï¼‰\n3. è®¾ç½®è§¦å‘å‰ç¼€ï¼ˆé»˜è®¤ #aiï¼‰",placement:"right",spotlightPadding:6},{target:'[data-tour="config"]',title:"ç¬¬ 3 æ­¥ï¼šé€‰æ‹©é¢„è®¾äººæ ¼",description:"è¿›å…¥ã€Œé¢„è®¾ç®¡ç†ã€é€‰æ‹©æˆ–åˆ›å»º AI äººæ ¼ï¼š\n\nâ€¢ å¯ä»¥ä½¿ç”¨å†…ç½®é¢„è®¾å¿«é€Ÿå¼€å§‹\nâ€¢ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ AI çš„æ€§æ ¼å’Œå›žå¤é£Žæ ¼\nâ€¢ é¢„è®¾å†³å®šäº† AI çš„è¡¨çŽ°æ–¹å¼",placement:"right",spotlightPadding:6},{target:'[data-tour="ai"]',title:"ç¬¬ 4 æ­¥ï¼šé…ç½®å·¥å…·ï¼ˆå¯é€‰ï¼‰",description:"å±•å¼€ã€ŒAIæ‰©å±•ã€è¿›å…¥ã€Œå·¥å…·é…ç½®ã€ï¼š\n\nâ€¢ å¯ç”¨éœ€è¦çš„å·¥å…·ï¼ˆå¦‚è”ç½‘æœç´¢ã€å¤©æ°”æŸ¥è¯¢ç­‰ï¼‰\nâ€¢ ç¦ç”¨ä¸éœ€è¦çš„å·¥å…·ä»¥æå‡å“åº”é€Ÿåº¦\nâ€¢ å·¥å…·è®© AI èƒ½æ‰§è¡Œæ›´å¤šä»»åŠ¡",placement:"right",spotlightPadding:6},{target:'[data-tour="users"]',title:"ç¬¬ 5 æ­¥ï¼šç¾¤ç»„è®¾ç½®ï¼ˆå¯é€‰ï¼‰",description:"å±•å¼€ã€Œç”¨æˆ·ç®¡ç†ã€è¿›å…¥ã€Œç¾¤ç»„ç®¡ç†ã€ï¼š\n\nâ€¢ ä¸ºç‰¹å®šç¾¤ç»„è®¾ç½®ç‹¬ç«‹é…ç½®\nâ€¢ å¯ä»¥ä¸ºä¸åŒç¾¤è®¾ç½®ä¸åŒçš„ AI äººæ ¼\nâ€¢ ç®¡ç†ç¾¤ç»„åŠŸèƒ½å¼€å…³å’Œæƒé™",placement:"right",spotlightPadding:6},{target:'[data-tour="header-user"]',title:"ðŸŽ‰ é…ç½®å®Œæˆï¼",description:"æ­å–œï¼åŸºç¡€é…ç½®å·²å®Œæˆã€‚\n\nçŽ°åœ¨å¯ä»¥åœ¨ QQ ä¸­ @æœºå™¨äºº æˆ–å‘é€è§¦å‘å‰ç¼€å¼€å§‹èŠå¤©äº†ã€‚\n\nç‚¹å‡» ? å›¾æ ‡å¯éšæ—¶é‡æ–°æŸ¥çœ‹æ­¤å¼•å¯¼ã€‚",placement:"bottom",spotlightPadding:8}];function eP({forceShow:e=!1}){return(0,t.jsx)(eC,{tourId:eA,steps:eT,forceShow:e,onComplete:()=>{}})}function eM(){let{resetTour:e,isCompleted:s}=function(e){let[t,s]=(0,a.useState)(!0),r=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{r.current||(r.current=!0,eu.configApi.getTourStatus(e).then(e=>{let t=e?.data;s(t?.completed||t?.skipped||!1)}).catch(()=>{let t=ek(`${ev}${e}`);s("completed"===t||"skipped"===t)}))},[e]),{isCompleted:t,resetTour:(0,a.useCallback)(()=>{localStorage.removeItem(`${ev}${e}`),sessionStorage.removeItem(`${ew}${e}`),s(!1),eu.configApi.resetTour(e).catch(()=>{})},[e]),completeTour:(0,a.useCallback)(()=>{localStorage.setItem(`${ev}${e}`,"completed"),eN(`${ew}${e}`,"initialized"),s(!0),eu.configApi.completeTour(e).catch(()=>{})},[e])}}(eA);return s?(0,t.jsx)(eI.TooltipProvider,{children:(0,t.jsxs)(eI.Tooltip,{children:[(0,t.jsx)(eI.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(ea.Button,{variant:"ghost",size:"icon",onClick:e,className:"h-8 w-8",children:(0,t.jsx)(eS.HelpCircle,{className:"h-4 w-4"})})}),(0,t.jsx)(eI.TooltipContent,{children:(0,t.jsx)("p",{children:"é‡æ–°å¼€å§‹å¼•å¯¼"})})]})}):null}function eB({title:e="ChatAi ç®¡ç†é¢æ¿",onSearchClick:s}){let{toggleSidebar:a}=K(),{logout:n}=L(),l=(0,r.useRouter)(),{isMobile:o,isDesktop:d}=(0,ec.useResponsive)();return(0,t.jsxs)("header",{className:(0,i.cn)("glass-panel flex items-center gap-2 sm:gap-4 px-3 sm:px-4 md:px-6 transition-all duration-300",o?"h-12":"h-16"),children:[!d&&(0,t.jsx)(ea.Button,{variant:"ghost",size:"icon",onClick:a,className:"h-9 w-9 flex-shrink-0","aria-label":"æ‰“å¼€èœå•",children:(0,t.jsx)(Z,{className:"h-5 w-5"})}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsx)("h1",{className:(0,i.cn)("font-semibold tracking-tight text-foreground/80 truncate",o?"text-base":"text-lg md:text-xl"),children:e})}),s&&!o&&(0,t.jsxs)(ea.Button,{variant:"outline",size:"sm",onClick:s,className:"hidden sm:flex items-center gap-2 h-9 px-3 text-muted-foreground hover:text-foreground bg-background/50 border-border/50",children:[(0,t.jsx)(es.Search,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm hidden md:inline",children:"æœç´¢åŠŸèƒ½..."}),(0,t.jsxs)("kbd",{className:"ml-2 pointer-events-none hidden lg:inline-flex h-5 select-none items-center gap-1 rounded border border-border/50 bg-muted/50 px-1.5 font-mono text-[10px] font-medium text-muted-foreground",children:[(0,t.jsx)(er.Command,{className:"h-3 w-3"}),"K"]})]}),s&&o&&(0,t.jsx)(ea.Button,{variant:"ghost",size:"icon",onClick:s,className:"h-9 w-9 flex-shrink-0","aria-label":"æœç´¢",children:(0,t.jsx)(es.Search,{className:"h-5 w-5"})}),(0,t.jsx)(eM,{}),(0,t.jsx)(ed,{}),(0,t.jsxs)(ei.DropdownMenu,{children:[(0,t.jsx)(ei.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(ea.Button,{variant:"ghost",size:"icon",className:(0,i.cn)("rounded-full overflow-hidden border border-primary/20 hover:border-primary/50 transition-colors flex-shrink-0",o?"w-8 h-8":"w-9 h-9"),"aria-label":"ç”¨æˆ·èœå•","data-tour":"header-user",children:(0,t.jsx)("div",{className:"w-full h-full bg-gradient-to-tr from-primary/20 to-secondary/20 flex items-center justify-center",children:(0,t.jsx)(et.User,{className:(0,i.cn)("text-primary",o?"h-3.5 w-3.5":"h-4 w-4")})})})}),(0,t.jsxs)(ei.DropdownMenuContent,{align:"end",className:"glass-card border-border/50 min-w-[160px]",children:[(0,t.jsxs)(ei.DropdownMenuItem,{disabled:!0,className:"font-medium",children:[(0,t.jsx)(et.User,{className:"mr-2 h-4 w-4"}),"ç®¡ç†å‘˜"]}),(0,t.jsx)(ei.DropdownMenuSeparator,{className:"bg-border/50"}),(0,t.jsxs)(ei.DropdownMenuItem,{onClick:()=>{n(),l.push("/login")},className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[(0,t.jsx)(ee,{className:"mr-2 h-4 w-4"}),"é€€å‡ºç™»å½•"]})]})]})]})}var eD=e.i(64516);let eU=[{href:"/",label:"é¦–é¡µ",icon:n.LayoutDashboard,matchPaths:["/"]},{href:"/channels",label:"æ¸ é“",icon:m.Bot,matchPaths:["/channels"]},{href:"/tools",label:"å·¥å…·",icon:h.Wrench,matchPaths:["/tools","/mcp"]},{href:"/stats",label:"ç»Ÿè®¡",icon:k.BarChart3,matchPaths:["/stats","/history","/conversations"]}];function ez(){let e=(0,r.usePathname)(),{toggleSidebar:a}=K(),{isMobile:n,mounted:l}=(0,ec.useResponsive)();return l&&n?(0,t.jsx)("nav",{className:"mobile-nav",role:"navigation","aria-label":"åº•éƒ¨å¯¼èˆª",children:(0,t.jsxs)("div",{className:"flex items-center justify-around px-1 py-0.5",children:[eU.map(r=>{let a=r.matchPaths?r.matchPaths.some(t=>"/"===t?"/"===e:e.startsWith(t)):e===r.href||e.startsWith(r.href+"/"),n=r.icon;return(0,t.jsxs)(s.default,{href:r.href,className:(0,i.cn)("mobile-nav-item flex-1 touch-feedback",a&&"active"),"aria-current":a?"page":void 0,children:[(0,t.jsx)("div",{className:(0,i.cn)("p-1.5 rounded-xl transition-all duration-200",a?"bg-primary/10 scale-105":"hover:bg-muted/50"),children:(0,t.jsx)(n,{className:(0,i.cn)("h-[18px] w-[18px] transition-colors",a?"text-primary":"text-muted-foreground")})}),(0,t.jsx)("span",{className:(0,i.cn)("text-[9px] font-medium transition-colors",a?"text-primary":"text-muted-foreground"),children:r.label})]},r.href)}),(0,t.jsxs)("button",{onClick:a,className:"mobile-nav-item flex-1 touch-feedback","aria-label":"æ‰“å¼€èœå•",children:[(0,t.jsx)("div",{className:"p-1.5 rounded-xl hover:bg-muted/50 transition-all duration-200",children:(0,t.jsx)(eD.MoreHorizontal,{className:"h-[18px] w-[18px] text-muted-foreground"})}),(0,t.jsx)("span",{className:"text-[9px] font-medium text-muted-foreground",children:"æ›´å¤š"})]})]})}):null}var eL=e.i(35771);function eK(){let e=(0,r.usePathname)(),s=(0,r.useRouter)(),{tabs:n,addTab:l,removeTab:o,setActiveTab:d,clearOtherTabs:c,clearTabs:m}=E(),{isMobile:h,mounted:p}=(0,ec.useResponsive)(),u=(0,a.useRef)(null),x=(0,a.useRef)(null),g=(0,a.useRef)(""),f=e||"/";(0,a.useEffect)(()=>{if(!p||!e||e===g.current)return;g.current=e;let t=function(e){if(H.has(e))return H.get(e);for(let[t,s]of H)if("/"!==t&&e.startsWith(t+"/"))return s}(e);if(t)l({path:e,label:t.label,icon:t.icon,closable:"/"!==e});else if("/"!==e){let t=e.split("/").filter(Boolean),s=t[t.length-1]||e;l({path:e,label:s,closable:!0})}d(e)},[e,p]),(0,a.useEffect)(()=>{p&&x.current&&x.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},[f,p]);let b=(0,a.useCallback)(t=>{t!==e&&s.push(t)},[e,s]),j=(0,a.useCallback)(e=>{let t=n.findIndex(t=>t.path===e),r=e===f;if(o(e),r){let r=n.filter(t=>t.path!==e),a=r[Math.min(t,r.length-1)]||r[0];a&&s.push(a.path)}},[n,f,o,s]);return!p||h&&n.length<=1?null:(0,t.jsxs)("div",{className:(0,i.cn)("flex items-center border-b border-border/40 bg-background/80 backdrop-blur-sm",h?"h-9":"h-10"),children:[(0,t.jsx)("div",{ref:u,className:"flex-1 flex items-center overflow-x-auto scrollbar-none",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:n.map(e=>{let s=e.path===f;return(0,t.jsxs)("div",{ref:s?x:void 0,role:"tab","aria-selected":s,className:(0,i.cn)("group relative flex items-center gap-1.5 shrink-0 cursor-pointer transition-all duration-150 select-none",h?"px-3 h-9 text-[11px]":"px-3.5 h-10 text-xs",s?"text-foreground bg-background":"text-muted-foreground hover:text-foreground hover:bg-muted/40"),onClick:()=>b(e.path),children:[s&&(0,t.jsx)("div",{className:"absolute bottom-0 left-1 right-1 h-0.5 bg-primary rounded-full"}),(0,t.jsx)("span",{className:(0,i.cn)("truncate font-medium",h?"max-w-[80px]":"max-w-[120px]"),children:e.label}),e.closable&&!h&&(0,t.jsx)("button",{className:(0,i.cn)("ml-0.5 p-0.5 rounded-sm transition-all","opacity-0 group-hover:opacity-100",s&&"opacity-60","hover:bg-muted-foreground/20 hover:opacity-100"),onClick:t=>{t.stopPropagation(),j(e.path)},"aria-label":`å…³é—­ ${e.label}`,children:(0,t.jsx)(ef.X,{className:"h-3 w-3"})}),e.closable&&h&&s&&(0,t.jsx)("button",{className:"ml-0.5 p-0.5 rounded-sm opacity-60",onClick:t=>{t.stopPropagation(),j(e.path)},children:(0,t.jsx)(ef.X,{className:"h-2.5 w-2.5"})}),!s&&(0,t.jsx)("div",{className:"absolute right-0 top-2 bottom-2 w-px bg-border/30"})]},e.path)})}),n.length>1&&!h&&(0,t.jsxs)(ei.DropdownMenu,{children:[(0,t.jsx)(ei.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)("button",{className:"flex items-center justify-center h-10 w-9 shrink-0 border-l border-border/30 text-muted-foreground hover:text-foreground hover:bg-muted/40 transition-colors",children:(0,t.jsx)(eD.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(ei.DropdownMenuContent,{align:"end",className:"min-w-[140px]",children:[(0,t.jsxs)(ei.DropdownMenuItem,{onClick:()=>c(f),children:[(0,t.jsx)(ef.X,{className:"mr-2 h-3.5 w-3.5"}),"å…³é—­å…¶ä»–"]}),(0,t.jsxs)(ei.DropdownMenuItem,{onClick:m,className:"text-destructive focus:text-destructive",children:[(0,t.jsx)(eL.Trash2,{className:"mr-2 h-3.5 w-3.5"}),"å…³é—­æ‰€æœ‰"]})]})]})]})}var eO=e.i(94518),eE=e.i(30243),eR=e.i(99573),eW=e.i(20650),e$=e.i(10201),eq=e.i(84068),eH=e.i(81080),eF=e.i(16195),eG=e.i(79342),e_=e.i(89908),eV=e.i(96173),eX=e.i(48352),eJ=e.i(71355);let eQ=(0,f.default)("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),eY={"free-glm":{name:"å…è´¹GLM",adapterType:"openai",baseUrl:"https://glm.openel.top/",apiKey:"sk-3d2f9b84e7f510b1a08f7b3d6c9a6a7f17fbbad5624ea29f22d9c742bf39c863",models:"GLM-4.5, GLM-4.5-thinking, GLM-4.6, GLM-4.6-thinking",description:"å…è´¹æ™ºè°±GLM APIï¼Œæ— éœ€æ³¨å†Œ"},"free-xiaomi":{name:"å…è´¹å°ç±³MiMo",adapterType:"openai",baseUrl:"https://xiaomi.openel.top/",apiKey:"sk-3d2f9b84e7f510b1a08f7b3d6c9a6a7f17fbbad5624ea29f22d9c742bf39c863",models:"mimo-v2-flash, mimo-v2-flash-thinking",description:"å…è´¹å°ç±³MiMo APIï¼Œæ— éœ€æ³¨å†Œ"},"free-api":{name:"å…è´¹å¤šæ¨¡åž‹",adapterType:"openai",baseUrl:"https://ai.openel.top/",apiKey:"sk-LnATx3JUr565w2Kmme1r5om3WkO2YAsglOPaVael6UfgswXj",models:"",description:"å…è´¹å¤šæ¨¡åž‹APIï¼Œæ”¯æŒå¤šç§æ¨¡åž‹"},openai:{name:"OpenAI",adapterType:"openai",baseUrl:"https://api.openai.com/v1",apiKey:"",models:"gpt-4o, gpt-4o-mini, o1, o1-mini",description:"OpenAIå®˜æ–¹APIï¼Œéœ€è¦API Key"},deepseek:{name:"DeepSeek",adapterType:"openai",baseUrl:"https://api.deepseek.com/v1",apiKey:"",models:"deepseek-chat, deepseek-reasoner",description:"DeepSeekå®˜æ–¹APIï¼Œæ€§ä»·æ¯”é«˜"},siliconflow:{name:"ç¡…åŸºæµåŠ¨",adapterType:"openai",baseUrl:"https://api.siliconflow.cn/v1",apiKey:"",models:"deepseek-ai/DeepSeek-V3, Qwen/Qwen2.5-72B-Instruct",description:"å›½å†…ä¸­è½¬ï¼Œæ”¯æŒå¤šæ¨¡åž‹"},zhipu:{name:"æ™ºè°±AI",adapterType:"openai",baseUrl:"https://open.bigmodel.cn/api/paas/v4",apiKey:"",models:"glm-4.5, glm-4.5-air, glm-4.6, glm-4.7",description:"æ™ºè°±AIå®˜æ–¹API"},"free-zhipu":{name:"å…è´¹æ™ºè°±è§†é¢‘",adapterType:"openai",baseUrl:"https://open.bigmodel.cn/api/paas/v4",apiKey:"a1eef00f6bce4a10a7de83936fce6492.0wDYtwPnWukoPxWj",models:"glm-4.5, glm-4.5-air, glm-4.6, glm-4.7, glm-4.1v-thinking-flash",description:"å…è´¹æ™ºè°±APIï¼Œæ”¯æŒè§†é¢‘åˆ†æž"}},eZ=[{id:"welcome",title:"æ¬¢è¿Ž",icon:eb.Sparkles,description:"äº†è§£ ChatAI",required:!1},{id:"channel",title:"é…ç½®æ¸ é“",icon:c.Plug,description:"è¿žæŽ¥ AI æœåŠ¡",required:!0},{id:"model",title:"é€‰æ‹©æ¨¡åž‹",icon:m.Bot,description:"è®¾ç½®é»˜è®¤æ¨¡åž‹",required:!0},{id:"preset",title:"AIäººæ ¼",icon:et.User,description:"é€‰æ‹©é¢„è®¾äººæ ¼",required:!1},{id:"trigger",title:"è§¦å‘è®¾ç½®",icon:o.MessageSquare,description:"é…ç½®è§¦å‘æ–¹å¼",required:!1},{id:"complete",title:"å®Œæˆ",icon:ej.CheckCircle2,description:"å¼€å§‹ä½¿ç”¨",required:!1}],e0=[{id:"assistant",name:"æ™ºèƒ½åŠ©æ‰‹",description:"é€šç”¨AIåŠ©æ‰‹ï¼Œæ“…é•¿è§£ç­”é—®é¢˜ã€æä¾›å»ºè®®",icon:m.Bot,color:"blue"},{id:"catgirl",name:"çŒ«å¨˜",description:"å¯çˆ±çš„çŒ«å¨˜è§’è‰²ï¼Œæ´»æ³¼ä¿çš®çš„å¯¹è¯é£Žæ ¼",icon:eb.Sparkles,color:"pink"},{id:"custom",name:"è‡ªå®šä¹‰äººæ ¼",description:"è‡ªå·±ç¼–å†™ç³»ç»Ÿæç¤ºè¯ï¼Œæ‰“é€ ä¸“å±žAI",icon:N.Wand2,color:"purple"}];function e1({onComplete:e,forceShow:s=!1}){let[r,n]=(0,a.useState)(!1),[l,d]=(0,a.useState)(0),[h,p]=(0,a.useState)(!0),[u,x]=(0,a.useState)(!1),[g,f]=(0,a.useState)(""),[b,j]=(0,a.useState)({name:"",adapterType:"openai",baseUrl:"",apiKey:"",models:""}),[y,v]=(0,a.useState)(""),[w,k]=(0,a.useState)(["#chat"]),[N,C]=(0,a.useState)([]),[S,I]=(0,a.useState)(!1),[A,T]=(0,a.useState)(!1),[P,M]=(0,a.useState)("idle"),[B,D]=(0,a.useState)(""),[U,z]=(0,a.useState)([]),[L,K]=(0,a.useState)("builtin"),[O,E]=(0,a.useState)("assistant"),[W,$]=(0,a.useState)(""),[q,H]=(0,a.useState)(""),[F,G]=(0,a.useState)(!1),_=(0,a.useCallback)(async()=>{try{let e=await eu.configApi.getInitStatus(),t=e?.data,r=t?.initCompleted===!0;(s||!r)&&(n(!0),V())}catch(e){console.error("[SetupWizard] æ£€æŸ¥åˆå§‹åŒ–çŠ¶æ€å¤±è´¥:",e),s&&(n(!0),V())}finally{p(!1)}},[s]),V=async()=>{G(!0);try{let e=await eu.presetsApi.list(),t=Array.isArray(e)?e:e?.data||[];z(t)}catch(e){console.error("Failed to fetch presets:",e)}finally{G(!1)}};(0,a.useEffect)(()=>{_()},[_]);let X=e=>{f(e);let t=eY[e];if(t){j({name:t.name,adapterType:t.adapterType,baseUrl:t.baseUrl,apiKey:t.apiKey,models:t.models});let e=t.models.split(",").map(e=>e.trim()).filter(Boolean);e.length>0&&(v(e[0]),C(e))}},J=async()=>{if(!b.baseUrl)return void eG.toast.error("è¯·å…ˆé€‰æ‹©æˆ–å¡«å†™æ¸ é“");if(!b.apiKey&&!b.baseUrl.includes("openel"))return void eG.toast.error("è¯·å…ˆå¡«å†™API Key");T(!0),M("idle"),D("");try{let e=await eu.channelsApi.test({adapterType:b.adapterType,baseUrl:b.baseUrl,apiKey:b.apiKey});e?.success?(M("success"),eG.toast.success("è¿žæŽ¥æµ‹è¯•æˆåŠŸ")):(M("error"),D(e?.error||"è¿žæŽ¥å¤±è´¥"),eG.toast.error(e?.error||"è¿žæŽ¥æµ‹è¯•å¤±è´¥"))}catch(t){M("error");let e=t instanceof Error?t.message:"è¿žæŽ¥æµ‹è¯•å¤±è´¥";D(e),eG.toast.error(e)}finally{T(!1)}},Q=async()=>{if(!b.apiKey&&!b.baseUrl.includes("openel"))return void eG.toast.error("è¯·å…ˆå¡«å†™API Key");I(!0);try{let e=await eu.channelsApi.fetchModels({adapterType:b.adapterType,baseUrl:b.baseUrl,apiKey:b.apiKey}),t=e?.data?.models||e?.models||[];t.length>0?(C(t),!y&&t.length>0&&v(t[0]),M("success"),eG.toast.success(`èŽ·å–åˆ° ${t.length} ä¸ªæ¨¡åž‹`)):eG.toast.error("æœªèŽ·å–åˆ°æ¨¡åž‹åˆ—è¡¨ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥æ¨¡åž‹åç§°")}catch(e){console.error("Failed to fetch models:",e),eG.toast.error("èŽ·å–æ¨¡åž‹å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥æ¨¡åž‹åç§°")}finally{I(!1)}},Y=async()=>{x(!0);try{b.baseUrl&&(b.apiKey||b.baseUrl.includes("openel"))&&await eu.channelsApi.create({name:b.name||"é»˜è®¤æ¸ é“",adapterType:b.adapterType,baseUrl:b.baseUrl,apiKey:b.apiKey,models:b.models.split(",").map(e=>e.trim()).filter(Boolean),enabled:!0,priority:0}),"builtin"===L&&"custom"===O&&q.trim()?await eu.presetsApi.create({name:"è‡ªå®šä¹‰äººæ ¼",systemPrompt:q.trim(),isDefault:!0}):"existing"===L&&W&&await eu.presetsApi.setDefault(W);let t={llm:{defaultModel:y},trigger:{prefixes:w}};"existing"===L&&W&&(t.presets={defaultPresetId:W}),await eu.configApi.update(t),await eu.configApi.completeInit(),eG.toast.success("é…ç½®å®Œæˆï¼ä¸‹æ¬¡è¿›å…¥å°†ä¸å†æ˜¾ç¤ºå¼•å¯¼å‘å¯¼"),n(!1),e?.()}catch(e){console.error("[SetupWizard] ä¿å­˜é…ç½®å¤±è´¥:",e),eG.toast.error("ä¿å­˜é…ç½®å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{x(!1)}},Z=async()=>{try{await eu.configApi.completeInit(),eG.toast.info("å·²è·³è¿‡å¼•å¯¼ï¼Œå¯é€šè¿‡è®¾ç½®é‡æ–°æ‰“å¼€"),n(!1),e?.()}catch(e){console.error("[SetupWizard] è·³è¿‡å¼•å¯¼å¤±è´¥:",e),n(!1)}},ee=(l+1)/eZ.length*100;return h?null:(0,t.jsx)(eO.Dialog,{open:r,onOpenChange:n,children:(0,t.jsxs)(eO.DialogContent,{className:"max-w-2xl h-[600px] flex flex-col",children:[(0,t.jsxs)(eO.DialogHeader,{className:"pb-2 shrink-0",children:[(0,t.jsxs)(eO.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(eQ,{className:"h-5 w-5 text-primary"}),"ChatAI åˆå§‹é…ç½®å‘å¯¼"]}),(0,t.jsx)(eO.DialogDescription,{className:"sr-only",children:"é…ç½®æ‚¨çš„ AI èŠå¤©æ’ä»¶"})]}),(0,t.jsx)("div",{className:"flex items-center justify-center gap-1 py-2 shrink-0",children:eZ.map((e,s)=>{let r=e.icon,a=s<l,n=s===l;return(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:(0,i.cn)("flex items-center justify-center w-8 h-8 rounded-full transition-all",a&&"bg-primary text-primary-foreground",n&&"bg-primary/20 text-primary ring-2 ring-primary",!a&&!n&&"bg-muted text-muted-foreground"),title:e.title,children:a?(0,t.jsx)(ej.CheckCircle2,{className:"h-4 w-4"}):(0,t.jsx)(r,{className:"h-4 w-4"})}),s<eZ.length-1&&(0,t.jsx)("div",{className:(0,i.cn)("w-6 h-0.5 mx-1",s<l?"bg-primary":"bg-muted")})]},e.id)})}),(0,t.jsxs)("div",{className:"text-center text-sm text-muted-foreground pb-2 shrink-0",children:[(0,t.jsx)("span",{className:"font-medium text-foreground",children:eZ[l].title}),(0,t.jsx)("span",{className:"mx-2",children:"Â·"}),(0,t.jsx)("span",{children:eZ[l].description})]}),(0,t.jsx)(eq.Progress,{value:ee,className:"h-1 shrink-0"}),(0,t.jsxs)(R.ScrollArea,{className:"flex-1 min-h-0 overflow-y-auto pr-4",children:[0===l&&(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto bg-primary/10 rounded-full flex items-center justify-center",children:(0,t.jsx)(eb.Sparkles,{className:"h-8 w-8 text-primary"})}),(0,t.jsx)("h3",{className:"text-xl font-semibold",children:"æ¬¢è¿Žä½¿ç”¨ ChatAI Plugin"}),(0,t.jsx)("p",{className:"text-muted-foreground max-w-md mx-auto",children:"è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ AI èŠå¤©æ’ä»¶ï¼Œæ”¯æŒå¤šç§å¤§è¯­è¨€æ¨¡åž‹ã€å·¥å…·è°ƒç”¨ã€é•¿æœŸè®°å¿†ç­‰é«˜çº§åŠŸèƒ½ã€‚"})]}),(0,t.jsxs)("div",{className:"grid gap-3 mt-6",children:[(0,t.jsx)(eh.Card,{className:"border-primary/20",children:(0,t.jsxs)(eh.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)(c.Plug,{className:"h-5 w-5 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"é…ç½® API æ¸ é“"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"è¿žæŽ¥åˆ° AI æœåŠ¡æä¾›å•†"})]})]})}),(0,t.jsx)(eh.Card,{className:"border-primary/20",children:(0,t.jsxs)(eh.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)(m.Bot,{className:"h-5 w-5 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"é€‰æ‹©é»˜è®¤æ¨¡åž‹"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"è®¾ç½® AI å¯¹è¯ä½¿ç”¨çš„æ¨¡åž‹"})]})]})}),(0,t.jsx)(eh.Card,{className:"border-primary/20",children:(0,t.jsxs)(eh.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)(et.User,{className:"h-5 w-5 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"é€‰æ‹© AI äººæ ¼"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"è®¾ç½® AI çš„æ€§æ ¼å’Œå›žå¤é£Žæ ¼"})]})]})}),(0,t.jsx)(eh.Card,{className:"border-primary/20",children:(0,t.jsxs)(eh.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)(o.MessageSquare,{className:"h-5 w-5 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"é…ç½®è§¦å‘æ–¹å¼"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"è®¾ç½®å¦‚ä½•è§¦å‘ AI å›žå¤"})]})]})})]}),(0,t.jsxs)(eF.Alert,{className:"mt-4",children:[(0,t.jsx)(eJ.Info,{className:"h-4 w-4"}),(0,t.jsx)(eF.AlertDescription,{children:"æ‚¨å¯ä»¥éšæ—¶è·³è¿‡æ­¤å‘å¯¼ï¼Œç¨åŽåœ¨è®¾ç½®é¡µé¢è¿›è¡Œé…ç½®ã€‚"})]})]}),1===l&&(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(eR.Label,{children:"å¿«é€Ÿé€‰æ‹©é¢„è®¾"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"é€‰æ‹©ä¸€ä¸ªé¢„è®¾å¿«é€Ÿé…ç½®ï¼Œæˆ–æ‰‹åŠ¨å¡«å†™"})]}),(0,t.jsxs)(eH.Tabs,{defaultValue:"free",className:"w-full",children:[(0,t.jsxs)(eH.TabsList,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(eH.TabsTrigger,{value:"free",children:"å…è´¹æ¸ é“"}),(0,t.jsx)(eH.TabsTrigger,{value:"paid",children:"ä»˜è´¹æ¸ é“"})]}),(0,t.jsx)(eH.TabsContent,{value:"free",className:"space-y-2 mt-2",children:["free-glm","free-xiaomi","free-api","free-zhipu"].map(e=>(0,t.jsx)(eh.Card,{className:`cursor-pointer transition-all ${g===e?"border-primary ring-1 ring-primary":"hover:border-primary/50"}`,onClick:()=>X(e),children:(0,t.jsxs)(eh.CardContent,{className:"p-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[eY[e].name,(0,t.jsx)(ep.Badge,{variant:"secondary",className:"text-xs",children:"å…è´¹"})]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:eY[e].description})]}),g===e&&(0,t.jsx)(ej.CheckCircle2,{className:"h-5 w-5 text-primary"})]})},e))}),(0,t.jsx)(eH.TabsContent,{value:"paid",className:"space-y-2 mt-2",children:["openai","deepseek","siliconflow"].map(e=>(0,t.jsx)(eh.Card,{className:`cursor-pointer transition-all ${g===e?"border-primary ring-1 ring-primary":"hover:border-primary/50"}`,onClick:()=>X(e),children:(0,t.jsxs)(eh.CardContent,{className:"p-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:eY[e].name}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:eY[e].description})]}),g===e&&(0,t.jsx)(ej.CheckCircle2,{className:"h-5 w-5 text-primary"})]})},e))})]}),g&&!eY[g].apiKey&&(0,t.jsxs)("div",{className:"space-y-3 pt-4 border-t",children:[(0,t.jsx)(eR.Label,{htmlFor:"apiKey",children:"API Key *"}),(0,t.jsx)(eE.Input,{id:"apiKey",type:"password",placeholder:"è¯·è¾“å…¥æ‚¨çš„ API Key",value:b.apiKey,onChange:e=>j({...b,apiKey:e.target.value})}),eY[g].authUrl&&(0,t.jsx)(ea.Button,{variant:"link",size:"sm",className:"p-0 h-auto",asChild:!0,children:(0,t.jsxs)("a",{href:eY[g].authUrl,target:"_blank",rel:"noopener",children:["èŽ·å– API Key ",(0,t.jsx)(eX.ExternalLink,{className:"h-3 w-3 ml-1"})]})})]}),g&&(0,t.jsxs)("div",{className:"space-y-3 pt-4 border-t",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ea.Button,{variant:"outline",size:"sm",onClick:J,disabled:A||!b.baseUrl,children:A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e_.Loader2,{className:"h-4 w-4 animate-spin mr-2"}),"æµ‹è¯•ä¸­..."]}):"æµ‹è¯•è¿žæŽ¥"}),"success"===P&&(0,t.jsxs)("span",{className:"flex items-center gap-1 text-sm text-green-600",children:[(0,t.jsx)(ej.CheckCircle2,{className:"h-4 w-4"}),"è¿žæŽ¥æˆåŠŸ"]}),"error"===P&&(0,t.jsxs)("span",{className:"text-sm text-red-600",children:["è¿žæŽ¥å¤±è´¥: ",B]})]}),"idle"===P&&b.baseUrl&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"å»ºè®®åœ¨ç»§ç»­å‰æµ‹è¯•è¿žæŽ¥ï¼Œç¡®ä¿ API é…ç½®æ­£ç¡®"})]})]}),2===l&&(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(eR.Label,{children:"é€‰æ‹©é»˜è®¤æ¨¡åž‹"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"é€‰æ‹©ä¸€ä¸ªæ¨¡åž‹ä½œä¸ºé»˜è®¤å¯¹è¯æ¨¡åž‹"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(e$.Select,{value:y,onValueChange:v,children:[(0,t.jsx)(e$.SelectTrigger,{className:"flex-1",children:(0,t.jsx)(e$.SelectValue,{placeholder:"é€‰æ‹©æ¨¡åž‹"})}),(0,t.jsx)(e$.SelectContent,{children:N.map(e=>(0,t.jsx)(e$.SelectItem,{value:e,children:e},e))})]}),(0,t.jsx)(ea.Button,{variant:"outline",onClick:Q,disabled:S,children:S?(0,t.jsx)(e_.Loader2,{className:"h-4 w-4 animate-spin"}):"èŽ·å–æ¨¡åž‹"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(eR.Label,{children:"æˆ–æ‰‹åŠ¨è¾“å…¥æ¨¡åž‹åç§°"}),(0,t.jsx)(eE.Input,{placeholder:"ä¾‹å¦‚: gpt-4o, deepseek-chat",value:y,onChange:e=>v(e.target.value)})]}),N.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(eR.Label,{children:"å¯ç”¨æ¨¡åž‹"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[N.slice(0,10).map(e=>(0,t.jsx)(ep.Badge,{variant:e===y?"default":"outline",className:"cursor-pointer",onClick:()=>v(e),children:e},e)),N.length>10&&(0,t.jsxs)(ep.Badge,{variant:"secondary",children:["+",N.length-10," æ›´å¤š"]})]})]})]}),3===l&&(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(eR.Label,{children:"é€‰æ‹© AI äººæ ¼"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"ä¸ºæ‚¨çš„ AI é€‰æ‹©ä¸€ä¸ªäººæ ¼é¢„è®¾ï¼Œå†³å®šå®ƒçš„å›žå¤é£Žæ ¼"})]}),(0,t.jsx)("div",{className:"space-y-3",children:e0.map(e=>{let s=e.icon,r="builtin"===L&&O===e.id;return(0,t.jsx)(eh.Card,{className:(0,i.cn)("cursor-pointer transition-all",r?"border-primary ring-1 ring-primary":"hover:border-primary/50"),onClick:()=>{K("builtin"),E(e.id)},children:(0,t.jsxs)(eh.CardContent,{className:"p-4 flex items-center gap-4",children:[(0,t.jsx)("div",{className:(0,i.cn)("p-3 rounded-xl",{blue:"bg-blue-500/10 text-blue-600 dark:text-blue-400",pink:"bg-pink-500/10 text-pink-600 dark:text-pink-400",purple:"bg-purple-500/10 text-purple-600 dark:text-purple-400"}[e.color]),children:(0,t.jsx)(s,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.description})]}),r&&(0,t.jsx)(ej.CheckCircle2,{className:"h-5 w-5 text-primary shrink-0"})]})},e.id)})}),U.length>0&&(0,t.jsxs)("div",{className:"space-y-2 pt-4 border-t",children:[(0,t.jsx)(eR.Label,{className:"text-sm",children:"æˆ–é€‰æ‹©å·²æœ‰é¢„è®¾"}),(0,t.jsxs)(e$.Select,{value:"existing"===L?W:"",onValueChange:e=>{K("existing"),$(e)},children:[(0,t.jsx)(e$.SelectTrigger,{children:(0,t.jsx)(e$.SelectValue,{placeholder:"é€‰æ‹©å·²æœ‰é¢„è®¾"})}),(0,t.jsx)(e$.SelectContent,{children:U.map(e=>(0,t.jsx)(e$.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),"builtin"===L&&"custom"===O&&(0,t.jsxs)("div",{className:"space-y-2 pt-4 border-t",children:[(0,t.jsx)(eR.Label,{children:"è‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯"}),(0,t.jsx)(eW.Textarea,{value:q,onChange:e=>H(e.target.value),placeholder:"è¾“å…¥æ‚¨å¸Œæœ› AI éµå¾ªçš„äººæ ¼è®¾å®š...",rows:4,className:"font-mono text-sm"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"æç¤ºï¼šæè¿° AI çš„æ€§æ ¼ç‰¹ç‚¹ã€è¯´è¯é£Žæ ¼ã€çŸ¥è¯†èƒŒæ™¯ç­‰"})]}),F&&(0,t.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,t.jsx)(e_.Loader2,{className:"h-5 w-5 animate-spin text-muted-foreground"})})]}),4===l&&(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(eR.Label,{children:"è§¦å‘å‰ç¼€"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"è®¾ç½®è§¦å‘ AI å›žå¤çš„æ¶ˆæ¯å‰ç¼€"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[w.map((e,s)=>(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(eE.Input,{value:e,onChange:e=>{let t=[...w];t[s]=e.target.value,k(t)},placeholder:"è¾“å…¥å‰ç¼€"}),w.length>1&&(0,t.jsx)(ea.Button,{variant:"outline",size:"icon",onClick:()=>{k(w.filter((e,t)=>t!==s))},children:"Ã—"})]},s)),(0,t.jsx)(ea.Button,{variant:"outline",size:"sm",onClick:()=>k([...w,""]),children:"æ·»åŠ å‰ç¼€"})]}),(0,t.jsxs)(eF.Alert,{children:[(0,t.jsx)(eV.Zap,{className:"h-4 w-4"}),(0,t.jsxs)(eF.AlertDescription,{children:[(0,t.jsx)("strong",{children:"ä½¿ç”¨ç¤ºä¾‹ï¼š"}),'å‘é€ "',w[0]||"#chat",' ä½ å¥½" å³å¯è§¦å‘ AI å›žå¤ã€‚ æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ @æœºå™¨äºº æ¥è§¦å‘å›žå¤ã€‚']})]})]}),5===l&&(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto bg-green-500/10 rounded-full flex items-center justify-center",children:(0,t.jsx)(ej.CheckCircle2,{className:"h-8 w-8 text-green-500"})}),(0,t.jsx)("h3",{className:"text-xl font-semibold",children:"é…ç½®å®Œæˆ"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"æ‚¨å·²å®ŒæˆåŸºç¡€é…ç½®ï¼ŒçŽ°åœ¨å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ï¼"})]}),(0,t.jsxs)(eh.Card,{children:[(0,t.jsx)(eh.CardHeader,{children:(0,t.jsx)(eh.CardTitle,{className:"text-base",children:"é…ç½®æ‘˜è¦"})}),(0,t.jsxs)(eh.CardContent,{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(c.Plug,{className:"h-4 w-4"})," æ¸ é“"]}),(0,t.jsx)(ep.Badge,{variant:"outline",children:b.name||"æœªé…ç½®"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(m.Bot,{className:"h-4 w-4"})," é»˜è®¤æ¨¡åž‹"]}),(0,t.jsx)(ep.Badge,{variant:"outline",children:y||"æœªè®¾ç½®"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(et.User,{className:"h-4 w-4"})," AIäººæ ¼"]}),(0,t.jsx)(ep.Badge,{variant:"outline",children:"existing"===L?U.find(e=>e.id===W)?.name||"å·²é€‰é¢„è®¾":e0.find(e=>e.id===O)?.name||"æ™ºèƒ½åŠ©æ‰‹"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(o.MessageSquare,{className:"h-4 w-4"})," è§¦å‘å‰ç¼€"]}),(0,t.jsx)(ep.Badge,{variant:"outline",children:w.filter(Boolean).join(", ")||"æœªè®¾ç½®"})]})]})]}),(0,t.jsxs)(eF.Alert,{children:[(0,t.jsx)(eJ.Info,{className:"h-4 w-4"}),(0,t.jsx)(eF.AlertDescription,{children:"æ‚¨å¯ä»¥éšæ—¶åœ¨ã€Œæ¸ é“ç®¡ç†ã€å’Œã€Œç³»ç»Ÿè®¾ç½®ã€é¡µé¢ä¿®æ”¹è¿™äº›é…ç½®ã€‚"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-4 border-t shrink-0",children:[(0,t.jsxs)("div",{children:[0===l&&(0,t.jsx)(ea.Button,{variant:"ghost",onClick:Z,children:"è·³è¿‡å‘å¯¼"}),l>0&&(0,t.jsxs)(ea.Button,{variant:"outline",onClick:()=>{l>0&&d(l-1)},children:[(0,t.jsx)(eg.ChevronLeft,{className:"h-4 w-4 mr-1"}),"ä¸Šä¸€æ­¥"]})]}),(0,t.jsx)("div",{children:l<eZ.length-1?(0,t.jsxs)(ea.Button,{onClick:()=>{let e=(()=>{switch(l){case 1:if(!b.baseUrl)return{valid:!1,message:"è¯·é€‰æ‹©ä¸€ä¸ªæ¸ é“é¢„è®¾"};if(!b.apiKey&&!b.baseUrl.includes("openel"))return{valid:!1,message:"è¯·å¡«å†™API Key"};return{valid:!0};case 2:if(!y)return{valid:!1,message:"è¯·é€‰æ‹©æˆ–è¾“å…¥é»˜è®¤æ¨¡åž‹"};return{valid:!0};default:return{valid:!0}}})();e.valid?l<eZ.length-1&&d(l+1):eG.toast.error(e.message||"è¯·å®Œæˆå¿…å¡«é¡¹")},children:["ä¸‹ä¸€æ­¥",(0,t.jsx)(ex.ChevronRight,{className:"h-4 w-4 ml-1"})]}):(0,t.jsxs)(ea.Button,{onClick:Y,disabled:u,children:[u?(0,t.jsx)(e_.Loader2,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(eQ,{className:"h-4 w-4 mr-2"}),"å¼€å§‹ä½¿ç”¨"]})})]})]})})}var e2=e.i(43322),e4=e.i(60713),e5=e.i(17286),e3=e.i(44697),e6=e.i(77759),e9=e.i(79923),e8=e.i(10148),e7=e.i(48832);let te=[{id:"dashboard",label:"ä»ªè¡¨ç›˜",description:"æŸ¥çœ‹ç³»ç»Ÿæ¦‚è§ˆå’Œç»Ÿè®¡æ•°æ®",icon:n.LayoutDashboard,href:"/",keywords:["é¦–é¡µ","home","overview"],group:"ä»ªè¡¨ç›˜"},{id:"settings",label:"åŸºç¡€è®¾ç½®",description:"é…ç½®åŸºæœ¬ç³»ç»Ÿå‚æ•°",icon:l.Settings,href:"/settings",keywords:["é…ç½®","config","setting"],group:"é…ç½®ä¸­å¿ƒ"},{id:"settings-trigger",label:"è§¦å‘é…ç½®",description:"é…ç½®AIè§¦å‘æ–¹å¼å’Œå‰ç¼€",icon:eV.Zap,href:"/settings?tab=trigger",keywords:["è§¦å‘","trigger","å‰ç¼€","prefix","@"],group:"é…ç½®ä¸­å¿ƒ / åŸºç¡€è®¾ç½®"},{id:"settings-basic",label:"åŸºç¡€åŠŸèƒ½",description:"å‘½ä»¤å‰ç¼€ã€è°ƒè¯•æ¨¡å¼ç­‰",icon:l.Settings,href:"/settings?tab=basic",keywords:["å‘½ä»¤","debug","è°ƒè¯•"],group:"é…ç½®ä¸­å¿ƒ / åŸºç¡€è®¾ç½®"},{id:"settings-llm",label:"æ¨¡åž‹é…ç½®",description:"é…ç½®é»˜è®¤æ¨¡åž‹å’Œå¤‡é€‰æ¨¡åž‹",icon:m.Bot,href:"/settings?tab=llm",keywords:["æ¨¡åž‹","model","llm","ai"],group:"é…ç½®ä¸­å¿ƒ / åŸºç¡€è®¾ç½®"},{id:"settings-bym",label:"ä¼ªäººé…ç½®",description:"é…ç½®ä¼ªäººæ¨¡å¼å‚æ•°",icon:eb.Sparkles,href:"/settings?tab=bym",keywords:["ä¼ªäºº","bym","æ¨¡æ‹Ÿ","éšæœºå›žå¤"],group:"é…ç½®ä¸­å¿ƒ / åŸºç¡€è®¾ç½®"},{id:"settings-proactive",label:"ä¸»åŠ¨æ¶ˆæ¯",description:"é…ç½®ä¸»åŠ¨æ¶ˆæ¯/æŽ¨é€é¢‘çŽ‡ä¸Žå†…å®¹",icon:eb.Sparkles,href:"/settings?tab=proactive",keywords:["ä¸»åŠ¨","æŽ¨é€","ä¸»åŠ¨æ¶ˆæ¯","proactive"],group:"é…ç½®ä¸­å¿ƒ / åŸºç¡€è®¾ç½®"},{id:"settings-tools",label:"å·¥å…·è°ƒç”¨é…ç½®",description:"å·¥å…·æ‰§è¡Œå’Œæ˜¾ç¤ºè®¾ç½®",icon:h.Wrench,href:"/settings?tab=tools",keywords:["å·¥å…·","tool","function"],group:"é…ç½®ä¸­å¿ƒ / åŸºç¡€è®¾ç½®"},{id:"settings-thinking",label:"æ€è€ƒé“¾é…ç½®",description:"æ€è€ƒè¿‡ç¨‹æ˜¾ç¤ºè®¾ç½®",icon:j.Brain,href:"/settings?tab=thinking",keywords:["æ€è€ƒ","thinking","chain"],group:"é…ç½®ä¸­å¿ƒ / åŸºç¡€è®¾ç½®"},{id:"settings-features",label:"é«˜çº§åŠŸèƒ½",description:"ç¾¤èŠæ€»ç»“ã€ç”¨æˆ·ç”»åƒç­‰",icon:eb.Sparkles,href:"/settings?tab=features",keywords:["é«˜çº§","åŠŸèƒ½","feature","æ€»ç»“","ç”»åƒ"],group:"é…ç½®ä¸­å¿ƒ / åŸºç¡€è®¾ç½®"},{id:"settings-admin",label:"ç®¡ç†ä¸Žå®‰å…¨",description:"æ•æ„Ÿæ“ä½œã€ç™»å½•æé†’ç­‰ç®¡ç†é…ç½®",icon:e7.Shield,href:"/settings?tab=admin",keywords:["ç®¡ç†","å®‰å…¨","æ•æ„Ÿ","login","admin"],group:"é…ç½®ä¸­å¿ƒ / åŸºç¡€è®¾ç½®"},{id:"system",label:"ç³»ç»Ÿé…ç½®",description:"é«˜çº§ç³»ç»Ÿé…ç½®é€‰é¡¹",icon:A.Server,href:"/settings/system",keywords:["ç³»ç»Ÿ","system"],group:"é…ç½®ä¸­å¿ƒ"},{id:"context",label:"ä¸Šä¸‹æ–‡é…ç½®",description:"å¯¹è¯ä¸Šä¸‹æ–‡ç›¸å…³è®¾ç½®",icon:I.FileText,href:"/settings/context",keywords:["ä¸Šä¸‹æ–‡","context"],group:"é…ç½®ä¸­å¿ƒ"},{id:"channels",label:"æ¸ é“ç®¡ç†",description:"ç®¡ç†AIæœåŠ¡æ¸ é“",icon:c.Plug,href:"/channels",keywords:["æ¸ é“","channel","api"],group:"é…ç½®ä¸­å¿ƒ"},{id:"channels-add",label:"æ·»åŠ æ¸ é“",description:"æ·»åŠ æ–°çš„AIæœåŠ¡æ¸ é“",icon:e4.Plus,href:"/channels?action=add",keywords:["æ·»åŠ ","æ–°å»º","add","channel"],group:"é…ç½®ä¸­å¿ƒ / æ¸ é“ç®¡ç†",action:"add"},{id:"presets",label:"é¢„è®¾ç®¡ç†",description:"ç®¡ç†AIé¢„è®¾é…ç½®",icon:u.Palette,href:"/presets",keywords:["é¢„è®¾","preset","æ¨¡æ¿"],group:"é…ç½®ä¸­å¿ƒ"},{id:"presets-add",label:"æ·»åŠ é¢„è®¾",description:"åˆ›å»ºæ–°çš„AIé¢„è®¾",icon:e4.Plus,href:"/presets?action=add",keywords:["æ·»åŠ ","æ–°å»º","add","preset"],group:"é…ç½®ä¸­å¿ƒ / é¢„è®¾ç®¡ç†",action:"add"},{id:"scope",label:"äººè®¾ç®¡ç†",description:"ç®¡ç†AIè§’è‰²äººè®¾",icon:b,href:"/scope",keywords:["äººè®¾","scope","è§’è‰²","persona"],group:"é…ç½®ä¸­å¿ƒ"},{id:"proxy",label:"ä»£ç†è®¾ç½®",description:"é…ç½®ç½‘ç»œä»£ç†",icon:C.Globe,href:"/settings/proxy",keywords:["ä»£ç†","proxy","ç½‘ç»œ"],group:"é…ç½®ä¸­å¿ƒ"},{id:"links",label:"ç™»å½•é“¾æŽ¥",description:"ç®¡ç†ç™»å½•é“¾æŽ¥",icon:T.Link,href:"/settings/links",keywords:["é“¾æŽ¥","link","ç™»å½•"],group:"é…ç½®ä¸­å¿ƒ"},{id:"tools",label:"å·¥å…·é…ç½®",description:"é…ç½®AIå¯ç”¨å·¥å…·",icon:h.Wrench,href:"/tools",keywords:["å·¥å…·","tool","function"],group:"AIæ‰©å±•"},{id:"mcp",label:"MCPæœåŠ¡",description:"ç®¡ç†MCPæœåŠ¡é…ç½®",icon:m.Bot,href:"/mcp",keywords:["mcp","æœåŠ¡","service"],group:"AIæ‰©å±•"},{id:"imagegen",label:"ç»˜å›¾é¢„è®¾",description:"é…ç½®å›¾åƒç”Ÿæˆå‚æ•°",icon:N.Wand2,href:"/imagegen",keywords:["ç»˜å›¾","å›¾åƒ","image","draw"],group:"AIæ‰©å±•"},{id:"knowledge",label:"çŸ¥è¯†åº“",description:"ç®¡ç†çŸ¥è¯†åº“å†…å®¹",icon:y.BookOpen,href:"/knowledge",keywords:["çŸ¥è¯†","knowledge","rag"],group:"AIæ‰©å±•"},{id:"knowledge-add",label:"æ·»åŠ çŸ¥è¯†åº“",description:"åˆ›å»ºæ–°çš„çŸ¥è¯†åº“",icon:e4.Plus,href:"/knowledge?action=add",keywords:["æ·»åŠ ","æ–°å»º","add","knowledge"],group:"AIæ‰©å±• / çŸ¥è¯†åº“",action:"add"},{id:"knowledge-detail",label:"çŸ¥è¯†åº“è¯¦æƒ…",description:"æŸ¥çœ‹æˆ–ç¼–è¾‘çŸ¥è¯†åº“æ–‡æ¡£",icon:y.BookOpen,href:"/knowledge/[id]",keywords:["çŸ¥è¯†åº“","è¯¦æƒ…","ç¼–è¾‘","knowledge","doc"],group:"AIæ‰©å±• / çŸ¥è¯†åº“"},{id:"memory",label:"è®°å¿†ç®¡ç†",description:"ç®¡ç†AIé•¿æœŸè®°å¿†",icon:j.Brain,href:"/memory",keywords:["è®°å¿†","memory","å­˜å‚¨"],group:"AIæ‰©å±•"},{id:"stats",label:"ä½¿ç”¨ç»Ÿè®¡",description:"æŸ¥çœ‹ä½¿ç”¨ç»Ÿè®¡æ•°æ®",icon:k.BarChart3,href:"/stats",keywords:["ç»Ÿè®¡","stats","æ•°æ®"],group:"æ•°æ®è®°å½•"},{id:"usage",label:"è°ƒç”¨ç»Ÿè®¡",description:"æŸ¥çœ‹APIè°ƒç”¨ç»Ÿè®¡",icon:S.Activity,href:"/history/usage",keywords:["è°ƒç”¨","usage","api"],group:"æ•°æ®è®°å½•"},{id:"conversations",label:"å¯¹è¯åŽ†å²",description:"æŸ¥çœ‹å¯¹è¯è®°å½•",icon:o.MessageSquare,href:"/conversations",keywords:["å¯¹è¯","chat","åŽ†å²","conversation"],group:"æ•°æ®è®°å½•"},{id:"conversations-detail",label:"å¯¹è¯è¯¦æƒ…",description:"æŸ¥çœ‹å•ä¸ªå¯¹è¯çš„æ¶ˆæ¯è®°å½•",icon:o.MessageSquare,href:"/conversations/detail",keywords:["å¯¹è¯","è¯¦æƒ…","conversation","detail"],group:"æ•°æ®è®°å½•"},{id:"history",label:"å·¥å…·è°ƒç”¨",description:"æŸ¥çœ‹å·¥å…·è°ƒç”¨è®°å½•",icon:p.History,href:"/history",keywords:["å·¥å…·","è°ƒç”¨","history"],group:"æ•°æ®è®°å½•"},{id:"users",label:"ç”¨æˆ·ç®¡ç†",description:"ç®¡ç†ç³»ç»Ÿç”¨æˆ·",icon:d.Users,href:"/users",keywords:["ç”¨æˆ·","user","ç®¡ç†"],group:"ç”¨æˆ·ç®¡ç†"},{id:"users-add",label:"æ·»åŠ ç”¨æˆ·",description:"æ·»åŠ æ–°ç”¨æˆ·é…ç½®",icon:e8.UserPlus,href:"/users?action=add",keywords:["æ·»åŠ ","æ–°å»º","add","user"],group:"ç”¨æˆ·ç®¡ç†",action:"add"},{id:"groups",label:"ç¾¤ç»„ç®¡ç†",description:"ç®¡ç†ç¾¤ç»„é…ç½®",icon:x.UsersRound,href:"/groups",keywords:["ç¾¤ç»„","group","ç¾¤"],group:"ç”¨æˆ·ç®¡ç†"},{id:"groups-add",label:"æ·»åŠ ç¾¤ç»„",description:"æ·»åŠ æ–°ç¾¤ç»„é…ç½®",icon:e4.Plus,href:"/groups?action=add",keywords:["æ·»åŠ ","æ–°å»º","add","group","ç¾¤"],group:"ç”¨æˆ·ç®¡ç†",action:"add"},{id:"groups-basic",label:"ç¾¤ç»„åŸºç¡€è®¾ç½®",description:"ç¾¤å·ã€é¢„è®¾ã€è§¦å‘æ¨¡å¼",icon:l.Settings,href:"/groups?tab=basic",keywords:["ç¾¤ç»„","åŸºç¡€","é¢„è®¾","è§¦å‘"],group:"ç”¨æˆ·ç®¡ç† / ç¾¤ç»„ç®¡ç†"},{id:"groups-features",label:"ç¾¤ç»„åŠŸèƒ½å¼€å…³",description:"å·¥å…·è°ƒç”¨ã€ç»˜å›¾ã€æ€»ç»“",icon:eV.Zap,href:"/groups?tab=features",keywords:["åŠŸèƒ½","å·¥å…·","ç»˜å›¾","æ€»ç»“"],group:"ç”¨æˆ·ç®¡ç† / ç¾¤ç»„ç®¡ç†"},{id:"groups-bym",label:"ç¾¤ç»„ä¼ªäººè®¾ç½®",description:"ç¾¤ç»„ä¼ªäººæ¨¡å¼é…ç½®",icon:eb.Sparkles,href:"/groups?tab=bym",keywords:["ä¼ªäºº","bym","æ¨¡æ‹Ÿ"],group:"ç”¨æˆ·ç®¡ç† / ç¾¤ç»„ç®¡ç†"},{id:"groups-events",label:"ç¾¤ç»„äº‹ä»¶å¤„ç†",description:"å…¥ç¾¤æ¬¢è¿Žã€é€€ç¾¤æé†’ç­‰",icon:e3.PartyPopper,href:"/groups?tab=events",keywords:["äº‹ä»¶","æ¬¢è¿Ž","å…¥ç¾¤","é€€ç¾¤"],group:"ç”¨æˆ·ç®¡ç† / ç¾¤ç»„ç®¡ç†"},{id:"groups-welcome",label:"å…¥ç¾¤æ¬¢è¿Žé…ç½®",description:"é…ç½®æ–°æˆå‘˜å…¥ç¾¤æ¬¢è¿Ž",icon:e8.UserPlus,href:"/groups?feature=welcome",keywords:["æ¬¢è¿Ž","å…¥ç¾¤","welcome"],group:"ç”¨æˆ·ç®¡ç† / ç¾¤ç»„ç®¡ç†"},{id:"groups-poke",label:"æˆ³ä¸€æˆ³é…ç½®",description:"é…ç½®æˆ³ä¸€æˆ³å›žå¤",icon:e6.Hand,href:"/groups?feature=poke",keywords:["æˆ³","poke","äº’åŠ¨"],group:"ç”¨æˆ·ç®¡ç† / ç¾¤ç»„ç®¡ç†"},{id:"groups-summary",label:"å®šæ—¶æ€»ç»“é…ç½®",description:"é…ç½®ç¾¤èŠå®šæ—¶æ€»ç»“",icon:e9.Clock,href:"/groups?feature=summary",keywords:["æ€»ç»“","å®šæ—¶","summary"],group:"ç”¨æˆ·ç®¡ç† / ç¾¤ç»„ç®¡ç†"},{id:"groups-imagegen",label:"ç¾¤ç»„ç»˜å›¾è®¾ç½®",description:"é…ç½®ç¾¤ç»„ç»˜å›¾åŠŸèƒ½",icon:e5.Image,href:"/groups?feature=imagegen",keywords:["ç»˜å›¾","å›¾ç‰‡","image"],group:"ç”¨æˆ·ç®¡ç† / ç¾¤ç»„ç®¡ç†"},{id:"groups-emoji",label:"è¡¨æƒ…åŒ…å°å·",description:"é…ç½®è¡¨æƒ…åŒ…æ”¶é›†åŠŸèƒ½",icon:eb.Sparkles,href:"/groups?feature=emoji",keywords:["è¡¨æƒ…","emoji","å°å·"],group:"ç”¨æˆ·ç®¡ç† / ç¾¤ç»„ç®¡ç†"},{id:"groups-models",label:"ç¾¤ç»„æ¨¡åž‹é…ç½®",description:"é…ç½®ç¾¤ç»„ä¸“ç”¨æ¨¡åž‹",icon:m.Bot,href:"/groups?tab=advanced",keywords:["æ¨¡åž‹","model","ç¾¤ç»„"],group:"ç”¨æˆ·ç®¡ç† / ç¾¤ç»„ç®¡ç†"},{id:"groups-knowledge",label:"ç¾¤ç»„çŸ¥è¯†åº“",description:"é…ç½®ç¾¤ç»„å…³è”çŸ¥è¯†åº“",icon:y.BookOpen,href:"/groups?tab=advanced",keywords:["çŸ¥è¯†åº“","knowledge","ç¾¤ç»„"],group:"ç”¨æˆ·ç®¡ç† / ç¾¤ç»„ç®¡ç†"}];function tt({open:e,onOpenChange:s}){let n=(0,r.useRouter)(),[l,o]=a.useState(""),[d,c]=a.useState(0),m=a.useRef(null),h=a.useMemo(()=>l.trim()?te.filter(e=>[e.label,e.description||"",...e.keywords||[],e.group].some(e=>(function(e,t){let s=e.toLowerCase(),r=t.toLowerCase();if(s.includes(r))return!0;let a=0;for(let e=0;e<s.length&&a<r.length;e++)s[e]===r[a]&&a++;return a===r.length})(e,l))):te,[l]),p=a.useMemo(()=>h.reduce((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e),{}),[h]),u=a.useMemo(()=>h,[h]);a.useEffect(()=>{c(0)},[l]),a.useEffect(()=>{e&&(o(""),c(0),setTimeout(()=>m.current?.focus(),0))},[e]);let x=a.useCallback(e=>{s(!1),n.push(e.href)},[n,s]),g=a.useCallback(e=>{switch(e.key){case"ArrowDown":e.preventDefault(),c(e=>(e+1)%u.length);break;case"ArrowUp":e.preventDefault(),c(e=>(e-1+u.length)%u.length);break;case"Enter":e.preventDefault(),u[d]&&x(u[d]);break;case"Escape":e.preventDefault(),s(!1)}},[u,d,x,s]);return(0,t.jsx)(eO.Dialog,{open:e,onOpenChange:s,children:(0,t.jsxs)(eO.DialogContent,{className:"p-0 gap-0 max-w-2xl overflow-hidden bg-background/95 backdrop-blur-xl border-border/50 shadow-2xl",showCloseButton:!1,children:[(0,t.jsx)(eO.DialogTitle,{className:"sr-only",children:"å…¨å±€æœç´¢"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 px-4 border-b border-border/50",children:[(0,t.jsx)(es.Search,{className:"h-5 w-5 text-muted-foreground shrink-0"}),(0,t.jsx)("input",{ref:m,type:"text",value:l,onChange:e=>o(e.target.value),onKeyDown:g,placeholder:"æœç´¢åŠŸèƒ½æˆ–é¡µé¢...",className:"flex-1 h-14 bg-transparent text-base outline-none placeholder:text-muted-foreground/60"}),(0,t.jsx)("kbd",{className:"hidden sm:inline-flex h-6 items-center gap-1 rounded-md border border-border/50 bg-muted/50 px-2 text-xs text-muted-foreground",children:(0,t.jsx)("span",{className:"text-[10px]",children:"ESC"})})]}),(0,t.jsx)(R.ScrollArea,{className:"max-h-[60vh]",children:(0,t.jsx)("div",{className:"p-2",children:0===h.length?(0,t.jsxs)("div",{className:"py-12 text-center",children:[(0,t.jsx)("div",{className:"mx-auto w-12 h-12 rounded-full bg-muted/50 flex items-center justify-center mb-3",children:(0,t.jsx)(es.Search,{className:"h-6 w-6 text-muted-foreground/50"})}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"æœªæ‰¾åˆ°åŒ¹é…çš„åŠŸèƒ½"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground/60 mt-1",children:"å°è¯•å…¶ä»–å…³é”®è¯"})]}):Object.entries(p).map(([e,s])=>(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("div",{className:"px-2 py-1.5 text-xs font-medium text-muted-foreground/70 uppercase tracking-wider",children:e}),s.map(e=>{let s=u.indexOf(e),r=s===d,a=e.icon;return(0,t.jsxs)("button",{onClick:()=>x(e),onMouseEnter:()=>c(s),className:(0,i.cn)("w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-left transition-all duration-150 group",r?"bg-primary text-primary-foreground shadow-md":"hover:bg-accent/50"),children:[(0,t.jsx)("div",{className:(0,i.cn)("flex h-9 w-9 items-center justify-center rounded-lg transition-all",r?"bg-white/20":"bg-muted/50 group-hover:bg-background"),children:(0,t.jsx)(a,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:(0,i.cn)("font-medium text-sm",r?"text-primary-foreground":"text-foreground"),children:e.label}),e.description&&(0,t.jsx)("div",{className:(0,i.cn)("text-xs truncate",r?"text-primary-foreground/70":"text-muted-foreground"),children:e.description})]}),(0,t.jsx)(e2.ArrowRight,{className:(0,i.cn)("h-4 w-4 shrink-0 transition-all",r?"opacity-100 translate-x-0":"opacity-0 -translate-x-2 group-hover:opacity-50 group-hover:translate-x-0")})]},e.id)})]},e))})}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-2.5 border-t border-border/50 bg-muted/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("kbd",{className:"inline-flex h-5 items-center rounded border border-border/50 bg-background px-1.5 text-[10px]",children:"â†‘"}),(0,t.jsx)("kbd",{className:"inline-flex h-5 items-center rounded border border-border/50 bg-background px-1.5 text-[10px]",children:"â†“"}),(0,t.jsx)("span",{className:"ml-1",children:"å¯¼èˆª"})]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("kbd",{className:"inline-flex h-5 items-center rounded border border-border/50 bg-background px-1.5 text-[10px]",children:"â†µ"}),(0,t.jsx)("span",{className:"ml-1",children:"ç¡®è®¤"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[(0,t.jsx)(er.Command,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:"+"}),(0,t.jsx)("span",{children:"K"}),(0,t.jsx)("span",{className:"ml-1",children:"æ‰“å¼€"})]})]})]})})}function ts({children:e}){let s=(0,r.useRouter)(),[n,l]=(0,a.useState)(!0),[o,d]=(0,a.useState)(!1),{open:c,setOpen:m}=function(){let[e,t]=a.useState(!1);return a.useEffect(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),t(e=>!e))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]),{open:e,setOpen:t}}(),{isMobile:h,mounted:p}=(0,ec.useResponsive)();return((0,a.useEffect)(()=>{let e=!1;return(async()=>{try{let t=new URLSearchParams(window.location.search).get("auth_token");t&&(localStorage.setItem("chatai_token",t),window.history.replaceState({},"",window.location.pathname));let r=localStorage.getItem("chatai_token");if(!r)for(let e of document.cookie.split(";")){let[t,s]=e.trim().split("=");if("auth_token"===t&&s){r=s,localStorage.setItem("chatai_token",s);break}}if(!r){e||(l(!1),s.push("/login/"));return}await eu.systemApi.getState(),e||(d(!0),l(!1))}catch{e||(localStorage.removeItem("chatai_token"),document.cookie="auth_token=; path=/chatai; expires=Thu, 01 Jan 1970 00:00:00 GMT",l(!1),s.push("/login/"))}})(),()=>{e=!0}},[s]),n)?(0,t.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full border-4 border-muted"}),(0,t.jsx)("div",{className:"absolute top-0 left-0 w-12 h-12 rounded-full border-4 border-primary border-t-transparent animate-spin"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse-soft",children:"åŠ è½½ä¸­..."})]})}):o?(0,t.jsxs)("div",{className:"flex h-screen overflow-hidden bg-background relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[#f8fafc] dark:bg-[#020617] -z-10"}),(0,t.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] rounded-full bg-primary/5 blur-[120px] -z-10 animate-pulse-soft"}),(0,t.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] rounded-full bg-blue-500/5 blur-[120px] -z-10 animate-pulse-soft delay-700"}),(0,t.jsx)(Y,{}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,t.jsx)(eB,{onSearchClick:()=>m(!0)}),(0,t.jsx)(eK,{}),(0,t.jsx)("main",{className:(0,i.cn)("flex-1 overflow-y-auto scroll-smooth","p-2 sm:p-4 md:p-6",p&&h?"pb-[calc(72px+env(safe-area-inset-bottom,0px))]":"pb-6"),children:e})]}),(0,t.jsx)(ez,{}),(0,t.jsx)(tt,{open:c,onOpenChange:m}),(0,t.jsx)(e1,{}),(0,t.jsx)(eP,{})]}):(0,t.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full border-4 border-muted"}),(0,t.jsx)("div",{className:"absolute top-0 left-0 w-12 h-12 rounded-full border-4 border-primary border-t-transparent animate-spin"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse-soft",children:"æ­£åœ¨è·³è½¬ç™»å½•..."})]})})}e.s(["default",()=>ts],9256)}]);