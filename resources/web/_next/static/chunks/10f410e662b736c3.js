(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43698,e=>{"use strict";var a=e.i(52542),s=e.i(40418),l=e.i(51200),i=e.i(72029),t=e.i(30243),n=e.i(99573),r=e.i(13107),c=e.i(20308),d=e.i(20650),o=e.i(81080),m=e.i(47686),h=e.i(34358),x=e.i(84519),b=e.i(10201),u=e.i(94518),j=e.i(79342),p=e.i(60381),g=e.i(89908),y=e.i(5850),v=e.i(40204),N=e.i(96173),f=e.i(15204),S=e.i(63959),C=e.i(97058),w=e.i(98858),P=e.i(74940),I=e.i(17286),T=e.i(10273),k=e.i(44697),E=e.i(14775),M=e.i(70620),L=e.i(32308),_=e.i(79923),V=e.i(77759),B=e.i(10148),G=e.i(57345),K=e.i(64775),R=e.i(36393),U=e.i(72024),z=e.i(35771),A=e.i(60713);function D(){let[e,D]=(0,s.useState)(!0),[q,F]=(0,s.useState)(!1),[$,J]=(0,s.useState)(""),[X,Z]=(0,s.useState)(""),[W,Y]=(0,s.useState)("basic"),[ee,ea]=(0,s.useState)({total:0,images:[]}),[es,el]=(0,s.useState)(!1),[ei,et]=(0,s.useState)(null),[en,er]=(0,s.useState)({groupId:"",groupName:"",presetId:"__default__",systemPrompt:"",enabled:!0,triggerMode:"default",customPrefix:"",toolsEnabled:"inherit",imageGenEnabled:"inherit",imageGenModel:"",imageGenSize:"1024x1024",imageGenQuality:"standard",imageGenDailyLimit:0,summaryEnabled:"inherit",summaryModel:"",eventEnabled:"inherit",emojiThiefEnabled:"inherit",emojiThiefSeparateFolder:!0,emojiThiefMaxCount:500,emojiThiefStealRate:1,emojiThiefTriggerRate:.05,emojiThiefTriggerMode:"off",bymEnabled:"inherit",bymPresetId:"__default__",bymPrompt:"",bymProbability:"inherit",bymModel:"",bymTemperature:"inherit",bymMaxTokens:"inherit",bymReplyLength:"medium",bymUseEmoji:!0,proactiveChatEnabled:"inherit",proactiveChatProbability:"inherit",proactiveChatCooldown:"inherit",proactiveChatMaxDaily:"inherit",proactiveChatMinMessages:5,proactiveChatTimeStart:8,proactiveChatTimeEnd:23,chatEnabled:!0,chatContextLength:20,chatStreamReply:!0,chatQuoteReply:!1,chatShowThinking:!0,chatModel:"",listMode:"none",blacklist:[],whitelist:[],summaryPushEnabled:!1,summaryPushIntervalType:"day",summaryPushIntervalValue:1,summaryPushHour:20,summaryPushMessageCount:100,welcomeEnabled:"inherit",welcomeMessage:"",welcomePrompt:"",welcomeProbability:"inherit",goodbyeEnabled:"inherit",goodbyePrompt:"",goodbyeProbability:"inherit",pokeEnabled:"inherit",pokeBack:!1,pokeProbability:"inherit",recallEnabled:"inherit",recallProbability:"inherit",banEnabled:"inherit",banProbability:"inherit",luckyKingEnabled:"inherit",luckyKingProbability:"inherit",honorEnabled:"inherit",honorProbability:"inherit",essenceEnabled:"inherit",essenceProbability:"inherit",adminEnabled:"inherit",adminProbability:"inherit",knowledgeIds:[],independentChannelEnabled:!1,independentBaseUrl:"",independentApiKey:"",independentAdapterType:"openai",forbidGlobalModel:!1,independentChannels:[],dailyGroupLimit:0,dailyUserLimit:0,usageLimitMessage:""}),[ec,ed]=(0,s.useState)([]),[eo,em]=(0,s.useState)([]),[eh,ex]=(0,s.useState)([]),[eb,eu]=(0,s.useState)(!1),[ej,ep]=(0,s.useState)(null),[eg,ey]=(0,s.useState)({name:"",baseUrl:"",apiKey:"",adapterType:"openai",models:"",enabled:!0,priority:0,modelsPath:"",chatPath:"",imageTransferMode:"auto",imageCompress:!0,imageQuality:85,imageMaxSize:4096}),[ev,eN]=(0,s.useState)(!1),[ef,eS]=(0,s.useState)(!1),[eC,ew]=(0,s.useState)([]),[eP,eI]=(0,s.useState)([]),[eT,ek]=(0,s.useState)(!1),[eE,eM]=(0,s.useState)(""),[eL,e_]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("code");if(e){window.history.replaceState({},"","/group-admin"),eV(e);return}let a=localStorage.getItem("group_admin_token");if(!a){ek(!0),D(!1);return}eK(a)},[]);let eV=async e=>{D(!0);try{let a=await fetch("/api/group-admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e.toUpperCase()})}),s=await a.json();0===s.code?(localStorage.setItem("group_admin_token",s.data.token),j.toast.success("ç™»å½•æˆåŠŸ"),eK(s.data.token)):(j.toast.error(s.message||"ç™»å½•ç æ— æ•ˆæˆ–å·²è¿‡æœŸ"),ek(!0),D(!1))}catch(e){j.toast.error("ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ"),ek(!0),D(!1)}},eB=async()=>{if(!eE.trim())return void j.toast.error("è¯·è¾“å…¥ç™»å½•ç ");e_(!0);try{let e=await fetch("/api/group-admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:eE.trim().toUpperCase()})}),a=await e.json();0===a.code?(localStorage.setItem("group_admin_token",a.data.token),ek(!1),eM(""),j.toast.success("ç™»å½•æˆåŠŸ"),eK(a.data.token)):j.toast.error(a.message||"ç™»å½•å¤±è´¥")}catch(e){j.toast.error("ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ")}finally{e_(!1)}},eG=()=>localStorage.getItem("group_admin_token")||"",eK=async e=>{try{let a=await fetch("/api/group-admin/config",{headers:{Authorization:`Bearer ${e||eG()}`}});if(!a.ok){if(401===a.status){localStorage.removeItem("group_admin_token"),ek(!0),D(!1);return}throw Error("åŠ è½½é…ç½®å¤±è´¥")}let s=await a.json();if(0===s.code){let e=s.data;J(e.groupId),em(e.presets||[]);let a=new Set;e.channels?.forEach(e=>{e.models&&Array.isArray(e.models)&&e.models.forEach(e=>a.add(e))}),ex(Array.from(a).sort()),er({groupId:e.groupId,groupName:e.groupName||"",presetId:e.presetId||"__default__",systemPrompt:e.systemPrompt||"",enabled:!1!==e.enabled,triggerMode:e.triggerMode||"default",customPrefix:e.customPrefix||"",toolsEnabled:void 0===e.toolsEnabled?"inherit":"true"===e.toolsEnabled||!0===e.toolsEnabled?"on":"off",imageGenEnabled:void 0===e.imageGenEnabled?"inherit":"true"===e.imageGenEnabled||!0===e.imageGenEnabled?"on":"off",imageGenModel:e.models?.image||"",summaryEnabled:void 0===e.summaryEnabled?"inherit":"true"===e.summaryEnabled||!0===e.summaryEnabled?"on":"off",summaryModel:e.models?.summary||"",eventEnabled:void 0===e.eventHandler?"inherit":"true"===e.eventHandler||!0===e.eventHandler?"on":"off",emojiThiefEnabled:e.emojiThief?.enabled===void 0?"inherit":e.emojiThief.enabled?"on":"off",emojiThiefSeparateFolder:e.emojiThief?.independent??!0,emojiThiefMaxCount:e.emojiThief?.maxCount??500,emojiThiefStealRate:(e.emojiThief?.probability??100)/100,emojiThiefTriggerRate:(e.emojiThief?.triggerRate??5)/100,emojiThiefTriggerMode:e.emojiThief?.triggerMode||"off",bymEnabled:e.bym?.enabled===void 0?"inherit":"true"===e.bym.enabled||!0===e.bym.enabled?"on":"off",bymPresetId:e.bym?.presetId||"__default__",bymPrompt:e.bym?.prompt||"",bymProbability:e.bym?.probability===void 0?"inherit":e.bym.probability,bymModel:e.bym?.modelId||"",bymTemperature:e.bym?.temperature===void 0?"inherit":e.bym.temperature,bymMaxTokens:e.bym?.maxTokens===void 0?"inherit":e.bym.maxTokens,chatModel:e.models?.chat||"",listMode:e.listMode||"none",blacklist:e.blacklist||[],whitelist:e.whitelist||[],summaryPushEnabled:e.summary?.push?.enabled||!1,summaryPushIntervalType:e.summary?.push?.intervalType||"day",summaryPushIntervalValue:e.summary?.push?.intervalValue||1,summaryPushHour:e.summary?.push?.pushHour??20,summaryPushMessageCount:e.summary?.push?.messageCount||100,welcomeEnabled:e.events?.welcome?.enabled===void 0?"inherit":e.events?.welcome?.enabled?"on":"off",welcomeMessage:e.events?.welcome?.message||"",welcomePrompt:e.events?.welcome?.prompt||"",welcomeProbability:e.events?.welcome?.probability??"inherit",goodbyeEnabled:e.events?.goodbye?.enabled===void 0?"inherit":e.events?.goodbye?.enabled?"on":"off",goodbyePrompt:e.events?.goodbye?.prompt||"",goodbyeProbability:e.events?.goodbye?.probability??"inherit",pokeEnabled:e.events?.poke?.enabled===void 0?"inherit":e.events?.poke?.enabled?"on":"off",pokeBack:e.events?.poke?.pokeBack||!1,pokeProbability:e.events?.poke?.probability??"inherit",recallEnabled:e.events?.recall?.enabled===void 0?"inherit":e.events?.recall?.enabled?"on":"off",recallProbability:e.events?.recall?.probability??"inherit",banEnabled:e.events?.ban?.enabled===void 0?"inherit":e.events?.ban?.enabled?"on":"off",banProbability:e.events?.ban?.probability??"inherit",luckyKingEnabled:e.events?.luckyKing?.enabled===void 0?"inherit":e.events?.luckyKing?.enabled?"on":"off",luckyKingProbability:e.events?.luckyKing?.probability??"inherit",honorEnabled:e.events?.honor?.enabled===void 0?"inherit":e.events?.honor?.enabled?"on":"off",honorProbability:e.events?.honor?.probability??"inherit",essenceEnabled:e.events?.essence?.enabled===void 0?"inherit":e.events?.essence?.enabled?"on":"off",essenceProbability:e.events?.essence?.probability??"inherit",adminEnabled:e.events?.admin?.enabled===void 0?"inherit":e.events?.admin?.enabled?"on":"off",adminProbability:e.events?.admin?.probability??"inherit",knowledgeIds:e.knowledgeIds||[],proactiveChatEnabled:e.bym?.proactive?.enabled===void 0?"inherit":e.bym?.proactive?.enabled?"on":"off",proactiveChatProbability:e.bym?.proactive?.probability===void 0?"inherit":e.bym?.proactive?.probability,proactiveChatCooldown:e.bym?.proactive?.cooldown===void 0?"inherit":e.bym?.proactive?.cooldown,proactiveChatMaxDaily:e.bym?.proactive?.maxDaily===void 0?"inherit":e.bym?.proactive?.maxDaily,proactiveChatMinMessages:e.bym?.proactive?.minMessages??5,proactiveChatTimeStart:e.bym?.proactive?.timeRange?.start??8,proactiveChatTimeEnd:e.bym?.proactive?.timeRange?.end??23,bymReplyLength:e.bym?.style?.replyLength||"medium",bymUseEmoji:e.bym?.style?.useEmoji??!0,chatEnabled:e.chat?.enabled??!0,chatContextLength:e.chat?.contextLength??20,chatStreamReply:e.chat?.streamReply??!0,chatQuoteReply:e.chat?.quoteReply??!1,chatShowThinking:e.chat?.showThinking??!0,imageGenSize:e.imageGen?.size||"1024x1024",imageGenQuality:e.imageGen?.quality||"standard",imageGenDailyLimit:e.imageGen?.maxDailyLimit??0,independentChannelEnabled:e.independentChannel?.hasChannel||!1,independentBaseUrl:e.independentChannel?.baseUrl||"",independentApiKey:e.independentChannel?.apiKey||"",independentAdapterType:e.independentChannel?.adapterType||"openai",forbidGlobalModel:e.independentChannel?.forbidGlobal||!1,independentChannels:e.independentChannel?.channels||[],dailyGroupLimit:e.usageLimit?.dailyGroupLimit||0,dailyUserLimit:e.usageLimit?.dailyUserLimit||0,usageLimitMessage:e.usageLimit?.limitMessage||""}),e.knowledgeBases&&ed(e.knowledgeBases),e.emojiStats&&ea(e.emojiStats)}else throw Error(s.message||"åŠ è½½å¤±è´¥")}catch(e){Z(e.message)}finally{D(!1)}},eR=async()=>{F(!0);try{let e=await fetch("/api/group-admin/config",{method:"PUT",headers:{Authorization:`Bearer ${eG()}`,"Content-Type":"application/json"},body:JSON.stringify({groupName:en.groupName,systemPrompt:en.systemPrompt||null,presetId:"__default__"===en.presetId?"":en.presetId,enabled:en.enabled,triggerMode:en.triggerMode,customPrefix:en.customPrefix||void 0,toolsEnabled:"inherit"===en.toolsEnabled?void 0:"on"===en.toolsEnabled,imageGenEnabled:"inherit"===en.imageGenEnabled?void 0:"on"===en.imageGenEnabled,summaryEnabled:"inherit"===en.summaryEnabled?void 0:"on"===en.summaryEnabled,eventHandler:"inherit"===en.eventEnabled?void 0:"on"===en.eventEnabled,emojiThief:{enabled:"inherit"===en.emojiThiefEnabled?void 0:"on"===en.emojiThiefEnabled,independent:en.emojiThiefSeparateFolder,maxCount:en.emojiThiefMaxCount,probability:Math.round(100*en.emojiThiefStealRate),triggerRate:Math.round(100*en.emojiThiefTriggerRate),triggerMode:en.emojiThiefTriggerMode},bym:{enabled:"inherit"===en.bymEnabled?void 0:"on"===en.bymEnabled,presetId:"__default__"===en.bymPresetId?void 0:en.bymPresetId,prompt:en.bymPrompt||void 0,probability:"inherit"===en.bymProbability?void 0:en.bymProbability,modelId:en.bymModel||void 0,temperature:"inherit"===en.bymTemperature?void 0:en.bymTemperature,maxTokens:"inherit"===en.bymMaxTokens?void 0:en.bymMaxTokens,proactive:{enabled:"inherit"===en.proactiveChatEnabled?void 0:"on"===en.proactiveChatEnabled,probability:"inherit"===en.proactiveChatProbability?void 0:en.proactiveChatProbability,cooldown:"inherit"===en.proactiveChatCooldown?void 0:en.proactiveChatCooldown,maxDaily:"inherit"===en.proactiveChatMaxDaily?void 0:en.proactiveChatMaxDaily,minMessages:en.proactiveChatMinMessages,timeRange:{start:en.proactiveChatTimeStart,end:en.proactiveChatTimeEnd}},style:{replyLength:en.bymReplyLength,useEmoji:en.bymUseEmoji}},chat:{enabled:en.chatEnabled,contextLength:en.chatContextLength,streamReply:en.chatStreamReply,quoteReply:en.chatQuoteReply,showThinking:en.chatShowThinking},imageGen:{enabled:"inherit"===en.imageGenEnabled?void 0:"on"===en.imageGenEnabled,modelId:en.imageGenModel||void 0,size:en.imageGenSize,quality:en.imageGenQuality,maxDailyLimit:en.imageGenDailyLimit},models:{chat:en.chatModel||void 0,summary:en.summaryModel||void 0},listMode:en.listMode,blacklist:en.blacklist,whitelist:en.whitelist,summary:{enabled:"inherit"===en.summaryEnabled?void 0:"on"===en.summaryEnabled,modelId:en.summaryModel||void 0,push:{enabled:en.summaryPushEnabled,intervalType:en.summaryPushIntervalType,intervalValue:en.summaryPushIntervalValue,pushHour:en.summaryPushHour,messageCount:en.summaryPushMessageCount}},events:{enabled:"inherit"===en.eventEnabled?void 0:"on"===en.eventEnabled,welcome:{enabled:"inherit"===en.welcomeEnabled?void 0:"on"===en.welcomeEnabled,message:en.welcomeMessage||void 0,prompt:en.welcomePrompt||void 0,probability:"inherit"===en.welcomeProbability?void 0:en.welcomeProbability},goodbye:{enabled:"inherit"===en.goodbyeEnabled?void 0:"on"===en.goodbyeEnabled,prompt:en.goodbyePrompt||void 0,probability:"inherit"===en.goodbyeProbability?void 0:en.goodbyeProbability},poke:{enabled:"inherit"===en.pokeEnabled?void 0:"on"===en.pokeEnabled,pokeBack:en.pokeBack,probability:"inherit"===en.pokeProbability?void 0:en.pokeProbability},recall:{enabled:"inherit"===en.recallEnabled?void 0:"on"===en.recallEnabled,probability:"inherit"===en.recallProbability?void 0:en.recallProbability},ban:{enabled:"inherit"===en.banEnabled?void 0:"on"===en.banEnabled,probability:"inherit"===en.banProbability?void 0:en.banProbability},luckyKing:{enabled:"inherit"===en.luckyKingEnabled?void 0:"on"===en.luckyKingEnabled,probability:"inherit"===en.luckyKingProbability?void 0:en.luckyKingProbability},honor:{enabled:"inherit"===en.honorEnabled?void 0:"on"===en.honorEnabled,probability:"inherit"===en.honorProbability?void 0:en.honorProbability},essence:{enabled:"inherit"===en.essenceEnabled?void 0:"on"===en.essenceEnabled,probability:"inherit"===en.essenceProbability?void 0:en.essenceProbability},admin:{enabled:"inherit"===en.adminEnabled?void 0:"on"===en.adminEnabled,probability:"inherit"===en.adminProbability?void 0:en.adminProbability}},independentChannel:{baseUrl:en.independentBaseUrl||void 0,apiKey:en.independentApiKey||void 0,adapterType:en.independentAdapterType,forbidGlobal:en.forbidGlobalModel,channels:en.independentChannels.length>0?en.independentChannels:void 0},usageLimit:{dailyGroupLimit:en.dailyGroupLimit,dailyUserLimit:en.dailyUserLimit,limitMessage:en.usageLimitMessage||void 0},knowledgeIds:en.knowledgeIds.length>0?en.knowledgeIds:void 0})});if(!e.ok){if(401===e.status)return void Z("è®¤è¯å·²è¿‡æœŸ");throw Error("ä¿å­˜å¤±è´¥")}let a=await e.json();if(0===a.code)j.toast.success("é…ç½®å·²ä¿å­˜");else throw Error(a.message||"ä¿å­˜å¤±è´¥")}catch(e){j.toast.error(e.message)}finally{F(!1)}},eU=async e=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè¡¨æƒ…å—ï¼Ÿ"))try{if((await fetch(`/api/group-admin/emoji/delete?file=${encodeURIComponent(e)}`,{method:"DELETE",headers:{Authorization:`Bearer ${eG()}`}})).ok)j.toast.success("å·²åˆ é™¤"),ea({...ee,total:ee.total-1,images:ee.images.filter(a=>a.name!==e)});else throw Error("åˆ é™¤å¤±è´¥")}catch(e){j.toast.error(e.message)}},ez=async()=>{if(confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰è¡¨æƒ…å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼"))try{if((await fetch("/api/group-admin/emoji/clear",{method:"DELETE",headers:{Authorization:`Bearer ${eG()}`}})).ok)j.toast.success("å·²æ¸…ç©º"),ea({total:0,images:[]});else throw Error("æ¸…ç©ºå¤±è´¥")}catch(e){j.toast.error(e.message)}};return e?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,a.jsx)(g.Loader2,{className:"h-8 w-8 animate-spin text-blue-500"})}):eT?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,a.jsx)(l.Card,{className:"w-full max-w-md mx-4",children:(0,a.jsxs)(l.CardContent,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)(v.Settings,{className:"h-12 w-12 text-blue-500 mx-auto"}),(0,a.jsx)("h2",{className:"mt-4 text-xl font-semibold",children:"ç¾¤ç®¡ç†é¢æ¿"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"è¯·è¾“å…¥ç™»å½•ç ç™»å½•"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.Label,{htmlFor:"loginCode",children:"ç™»å½•ç "}),(0,a.jsx)(t.Input,{id:"loginCode",placeholder:"è¯·è¾“å…¥6ä½ç™»å½•ç ",value:eE,onChange:e=>eM(e.target.value.toUpperCase()),onKeyDown:e=>"Enter"===e.key&&eB(),maxLength:6,className:"text-center text-2xl tracking-widest font-mono"})]}),(0,a.jsxs)(i.Button,{className:"w-full",onClick:eB,disabled:eL,children:[eL?(0,a.jsx)(g.Loader2,{className:"h-4 w-4 animate-spin mr-2"}):null,"ç™»å½•"]}),(0,a.jsxs)("p",{className:"text-xs text-center text-gray-500",children:["åœ¨ç¾¤å†…å‘é€"," ",(0,a.jsx)("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:"#ç¾¤ç®¡ç†é¢æ¿"})," ","èŽ·å–ç™»å½•ç "]})]})]})})}):X?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,a.jsx)(l.Card,{className:"w-full max-w-md mx-4",children:(0,a.jsxs)(l.CardContent,{className:"pt-6 text-center",children:[(0,a.jsx)(p.AlertCircle,{className:"h-12 w-12 text-red-500 mx-auto"}),(0,a.jsx)("h2",{className:"mt-4 text-xl font-semibold",children:X}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"è¯·åœ¨ç¾¤å†…å‘é€ #ç¾¤ç®¡ç†é¢æ¿ é‡æ–°èŽ·å–ç™»å½•ç "})]})})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-6",children:[(0,a.jsxs)("div",{className:"max-w-3xl mx-auto px-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"ç¾¤èŠè®¾ç½®"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["ç¾¤å·: ",(0,a.jsx)(r.Badge,{variant:"secondary",children:$})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>eK(),children:[(0,a.jsx)(C.RefreshCw,{className:"h-4 w-4 mr-1"})," åˆ·æ–°"]}),(0,a.jsxs)(i.Button,{size:"sm",onClick:eR,disabled:q,children:[q?(0,a.jsx)(g.Loader2,{className:"h-4 w-4 animate-spin mr-1"}):(0,a.jsx)(y.Save,{className:"h-4 w-4 mr-1"}),"ä¿å­˜"]}),(0,a.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{localStorage.removeItem("group_admin_token"),ek(!0),J(""),j.toast.success("å·²é€€å‡ºç™»å½•")},children:"é€€å‡º"})]})]}),(0,a.jsx)(l.Card,{children:(0,a.jsx)(l.CardContent,{className:"pt-6",children:(0,a.jsxs)(o.Tabs,{value:W,onValueChange:Y,children:[(0,a.jsxs)(o.TabsList,{className:"grid w-full grid-cols-5 mb-4",children:[(0,a.jsxs)(o.TabsTrigger,{value:"basic",children:[(0,a.jsx)(v.Settings,{className:"h-4 w-4 mr-1 hidden sm:inline"}),"åŸºç¡€"]}),(0,a.jsxs)(o.TabsTrigger,{value:"features",children:[(0,a.jsx)(N.Zap,{className:"h-4 w-4 mr-1 hidden sm:inline"}),"åŠŸèƒ½"]}),(0,a.jsxs)(o.TabsTrigger,{value:"bym",children:[(0,a.jsx)(f.Sparkles,{className:"h-4 w-4 mr-1 hidden sm:inline"}),"ä¼ªäºº"]}),(0,a.jsxs)(o.TabsTrigger,{value:"channel",children:[(0,a.jsx)(T.MessageSquare,{className:"h-4 w-4 mr-1 hidden sm:inline"}),"å¯¹è¯"]}),(0,a.jsxs)(o.TabsTrigger,{value:"advanced",children:[(0,a.jsx)(S.BookOpen,{className:"h-4 w-4 mr-1 hidden sm:inline"}),"é«˜çº§"]})]}),(0,a.jsxs)(m.ScrollArea,{className:"h-[calc(100vh-250px)] sm:h-[65vh] pr-4 -mr-4",children:[(0,a.jsxs)(o.TabsContent,{value:"basic",className:"space-y-4 mt-0",children:[(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"ç¾¤å·"}),(0,a.jsx)(t.Input,{value:en.groupId,disabled:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"ç¾¤åç§°"}),(0,a.jsx)(t.Input,{value:en.groupName,onChange:e=>er({...en,groupName:e.target.value}),placeholder:"å¯é€‰ï¼Œä¾¿äºŽè¯†åˆ«"})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"ä½¿ç”¨é¢„è®¾"}),(0,a.jsxs)(b.Select,{value:en.presetId,onValueChange:e=>er({...en,presetId:e}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{placeholder:"ä½¿ç”¨é»˜è®¤é¢„è®¾"})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"__default__",children:"ä½¿ç”¨é»˜è®¤é¢„è®¾"}),eo.map(e=>(0,a.jsx)(b.SelectItem,{value:e.id,children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:e.name}),e.description&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.description})]})},e.id))]})]}),en.presetId&&"__default__"!==en.presetId&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:eo.find(e=>e.id===en.presetId)?.systemPromptPreview||""})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"è§¦å‘æ¨¡å¼"}),(0,a.jsxs)(b.Select,{value:en.triggerMode,onValueChange:e=>er({...en,triggerMode:e}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"default",children:"é»˜è®¤"}),(0,a.jsx)(b.SelectItem,{value:"at",children:"ä»…@è§¦å‘"}),(0,a.jsx)(b.SelectItem,{value:"prefix",children:"ä»…å‰ç¼€è§¦å‘"}),(0,a.jsx)(b.SelectItem,{value:"all",children:"å…¨éƒ¨æ¶ˆæ¯"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"è‡ªå®šä¹‰å‰ç¼€"}),(0,a.jsx)(t.Input,{value:en.customPrefix,onChange:e=>er({...en,customPrefix:e.target.value}),placeholder:"ç•™ç©ºä½¿ç”¨å…¨å±€å‰ç¼€ï¼Œå¦‚ #ai"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"ç‹¬ç«‹äººè®¾"}),(0,a.jsx)(d.Textarea,{value:en.systemPrompt,onChange:e=>er({...en,systemPrompt:e.target.value}),placeholder:"ä¸å¡«å†™åˆ™ä½¿ç”¨é¢„è®¾é…ç½®...",rows:3,className:"font-mono text-sm"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["æ”¯æŒå˜é‡: ","{{user_name}}"," ","{{group_name}}"," ","{{date}}"," ç­‰ | è¡¨è¾¾å¼:"," ","${e.user_id}"," (eä¸ºevent)"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.Power,{className:"h-4 w-4"}),(0,a.jsx)(n.Label,{children:"å¯ç”¨AIå“åº”"})]}),(0,a.jsx)(c.Switch,{checked:en.enabled,onCheckedChange:e=>er({...en,enabled:e})})]})]}),(0,a.jsxs)(o.TabsContent,{value:"features",className:"space-y-3 mt-0",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"ç¾¤ç®¡ç†å‘˜ä¹Ÿå¯é€šè¿‡å‘½ä»¤æŽ§åˆ¶è¿™äº›åŠŸèƒ½"}),(0,a.jsx)(Q,{icon:(0,a.jsx)(N.Zap,{className:"h-4 w-4"}),title:"å·¥å…·è°ƒç”¨",desc:"å…è®¸AIä½¿ç”¨æœç´¢ã€ä»£ç æ‰§è¡Œç­‰å·¥å…·",value:en.toolsEnabled,onChange:e=>er({...en,toolsEnabled:e})}),(0,a.jsx)(Q,{icon:(0,a.jsx)(I.Image,{className:"h-4 w-4"}),title:"ç»˜å›¾åŠŸèƒ½",desc:"æ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾ç­‰",value:en.imageGenEnabled,onChange:e=>er({...en,imageGenEnabled:e})}),"on"===en.imageGenEnabled&&(0,a.jsxs)("div",{className:"ml-4 pl-4 border-l-2 border-muted space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"ç»˜å›¾æ¨¡åž‹"}),(0,a.jsxs)(b.Select,{value:en.imageGenModel||"__default__",onValueChange:e=>er({...en,imageGenModel:"__default__"===e?"":e}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{placeholder:"ç»§æ‰¿å…¨å±€"})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"__default__",children:"ç»§æ‰¿å…¨å±€"}),eh.map(e=>(0,a.jsx)(b.SelectItem,{value:e,children:e},e))]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"å›¾ç‰‡å°ºå¯¸"}),(0,a.jsxs)(b.Select,{value:en.imageGenSize,onValueChange:e=>er({...en,imageGenSize:e}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"1024x1024",children:"1024x1024"}),(0,a.jsx)(b.SelectItem,{value:"1792x1024",children:"1792x1024 (æ¨ª)"}),(0,a.jsx)(b.SelectItem,{value:"1024x1792",children:"1024x1792 (ç«–)"}),(0,a.jsx)(b.SelectItem,{value:"512x512",children:"512x512"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"å›¾ç‰‡è´¨é‡"}),(0,a.jsxs)(b.Select,{value:en.imageGenQuality,onValueChange:e=>er({...en,imageGenQuality:e}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"standard",children:"æ ‡å‡†"}),(0,a.jsx)(b.SelectItem,{value:"hd",children:"é«˜æ¸…"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"æ¯æ—¥é™åˆ¶ï¼ˆ0=æ— é™ï¼‰"}),(0,a.jsx)(t.Input,{type:"number",min:0,value:en.imageGenDailyLimit,onChange:e=>er({...en,imageGenDailyLimit:parseInt(e.target.value)||0}),placeholder:"0",className:"w-24"})]})]}),(0,a.jsx)(Q,{icon:(0,a.jsx)(T.MessageSquare,{className:"h-4 w-4"}),title:"ç¾¤èŠæ€»ç»“",desc:"å…è®¸ä½¿ç”¨ç¾¤èŠæ€»ç»“",value:en.summaryEnabled,onChange:e=>er({...en,summaryEnabled:e})}),"on"===en.summaryEnabled&&(0,a.jsx)(O,{label:"æ€»ç»“æ¨¡åž‹",value:en.summaryModel,models:eh,onChange:e=>er({...en,summaryModel:e})}),(0,a.jsx)(Q,{icon:(0,a.jsx)(k.PartyPopper,{className:"h-4 w-4"}),title:"äº‹ä»¶å¤„ç†",desc:"å…¥ç¾¤æ¬¢è¿Žã€é€€ç¾¤æé†’",value:en.eventEnabled,onChange:e=>er({...en,eventEnabled:e})}),"off"!==en.eventEnabled&&(0,a.jsxs)("div",{className:"ml-4 pl-4 border-l-2 border-muted space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(B.UserPlus,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)(n.Label,{className:"text-sm font-medium",children:"å…¥ç¾¤æ¬¢è¿Ž"})]}),(0,a.jsxs)(b.Select,{value:en.welcomeEnabled,onValueChange:e=>er({...en,welcomeEnabled:e}),children:[(0,a.jsx)(b.SelectTrigger,{className:"w-24",children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(b.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(b.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===en.welcomeEnabled&&(0,a.jsxs)("div",{className:"space-y-3 pl-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"å“åº”æ¦‚çŽ‡"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[Math.round(("inherit"===en.welcomeProbability?1:en.welcomeProbability)*100),"%"]})]}),(0,a.jsx)(x.Slider,{value:["inherit"===en.welcomeProbability?1:en.welcomeProbability],onValueChange:([e])=>er({...en,welcomeProbability:e}),min:0,max:1,step:.05})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"å›ºå®šæ¬¢è¿Žè¯­ï¼ˆä¸ä½¿ç”¨AIç”Ÿæˆï¼‰"}),(0,a.jsx)(d.Textarea,{value:en.welcomeMessage,placeholder:"ç•™ç©ºåˆ™ä½¿ç”¨AIç”Ÿæˆï¼Œæ”¯æŒ {nickname} {at} å˜é‡",onChange:e=>er({...en,welcomeMessage:e.target.value}),rows:2,className:"text-sm"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"AIæ¬¢è¿Žæç¤ºè¯"}),(0,a.jsx)(d.Textarea,{value:en.welcomePrompt,placeholder:"ä¸ºæ–°æˆå‘˜ç”Ÿæˆæ¬¢è¿Žæ¶ˆæ¯æ—¶çš„æç¤º...",onChange:e=>er({...en,welcomePrompt:e.target.value}),rows:2,className:"text-sm"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(G.UserMinus,{className:"h-4 w-4 text-red-500"}),(0,a.jsx)(n.Label,{className:"text-sm font-medium",children:"é€€ç¾¤æé†’"})]}),(0,a.jsxs)(b.Select,{value:en.goodbyeEnabled,onValueChange:e=>er({...en,goodbyeEnabled:e}),children:[(0,a.jsx)(b.SelectTrigger,{className:"w-24",children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(b.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(b.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===en.goodbyeEnabled&&(0,a.jsxs)("div",{className:"space-y-3 pl-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"å“åº”æ¦‚çŽ‡"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[Math.round(("inherit"===en.goodbyeProbability?1:en.goodbyeProbability)*100),"%"]})]}),(0,a.jsx)(x.Slider,{value:["inherit"===en.goodbyeProbability?1:en.goodbyeProbability],onValueChange:([e])=>er({...en,goodbyeProbability:e}),min:0,max:1,step:.05})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"AIå‘Šåˆ«æç¤ºè¯"}),(0,a.jsx)(d.Textarea,{value:en.goodbyePrompt,placeholder:"ä¸ºç¦»å¼€æˆå‘˜ç”Ÿæˆå‘Šåˆ«æ¶ˆæ¯æ—¶çš„æç¤º...",onChange:e=>er({...en,goodbyePrompt:e.target.value}),rows:2,className:"text-sm"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(V.Hand,{className:"h-4 w-4 text-blue-500"}),(0,a.jsx)(n.Label,{className:"text-sm font-medium",children:"æˆ³ä¸€æˆ³å›žå¤"})]}),(0,a.jsxs)(b.Select,{value:en.pokeEnabled,onValueChange:e=>er({...en,pokeEnabled:e}),children:[(0,a.jsx)(b.SelectTrigger,{className:"w-24",children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(b.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(b.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===en.pokeEnabled&&(0,a.jsxs)("div",{className:"space-y-3 pl-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"å“åº”æ¦‚çŽ‡"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[Math.round(("inherit"===en.pokeProbability?1:en.pokeProbability)*100),"%"]})]}),(0,a.jsx)(x.Slider,{value:["inherit"===en.pokeProbability?1:en.pokeProbability],onValueChange:([e])=>er({...en,pokeProbability:e}),min:0,max:1,step:.05})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Switch,{checked:en.pokeBack,onCheckedChange:e=>er({...en,pokeBack:e})}),(0,a.jsx)(n.Label,{className:"text-xs",children:"æˆ³å›žåŽ»ï¼ˆè€Œéžæ–‡å­—å›žå¤ï¼‰"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"ðŸ”„"}),(0,a.jsx)(n.Label,{className:"text-sm font-medium",children:"æ’¤å›žå“åº”"})]}),(0,a.jsxs)(b.Select,{value:en.recallEnabled,onValueChange:e=>{let a={recallEnabled:e};"on"===e&&"inherit"===en.recallProbability&&(a.recallProbability=1),er({...en,...a})},children:[(0,a.jsx)(b.SelectTrigger,{className:"w-24",children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(b.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(b.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===en.recallEnabled&&(0,a.jsx)("div",{className:"pl-6 space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Label,{className:"text-xs w-12",children:"æ¦‚çŽ‡"}),(0,a.jsx)(x.Slider,{value:["inherit"===en.recallProbability?1:en.recallProbability],onValueChange:([e])=>er({...en,recallProbability:e}),min:0,max:1,step:.05,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(("inherit"===en.recallProbability?1:en.recallProbability)*100),"%"]})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"ðŸ”‡"}),(0,a.jsx)(n.Label,{className:"text-sm font-medium",children:"ç¦è¨€å“åº”"})]}),(0,a.jsxs)(b.Select,{value:en.banEnabled,onValueChange:e=>{let a={banEnabled:e};"on"===e&&"inherit"===en.banProbability&&(a.banProbability=1),er({...en,...a})},children:[(0,a.jsx)(b.SelectTrigger,{className:"w-24",children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(b.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(b.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===en.banEnabled&&(0,a.jsx)("div",{className:"pl-6 space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Label,{className:"text-xs w-12",children:"æ¦‚çŽ‡"}),(0,a.jsx)(x.Slider,{value:["inherit"===en.banProbability?1:en.banProbability],onValueChange:([e])=>er({...en,banProbability:e}),min:0,max:1,step:.05,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(("inherit"===en.banProbability?1:en.banProbability)*100),"%"]})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"ðŸ§§"}),(0,a.jsx)(n.Label,{className:"text-sm font-medium",children:"è¿æ°”çŽ‹å“åº”"})]}),(0,a.jsxs)(b.Select,{value:en.luckyKingEnabled,onValueChange:e=>{let a={luckyKingEnabled:e};"on"===e&&"inherit"===en.luckyKingProbability&&(a.luckyKingProbability=1),er({...en,...a})},children:[(0,a.jsx)(b.SelectTrigger,{className:"w-24",children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(b.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(b.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===en.luckyKingEnabled&&(0,a.jsx)("div",{className:"pl-6 space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Label,{className:"text-xs w-12",children:"æ¦‚çŽ‡"}),(0,a.jsx)(x.Slider,{value:["inherit"===en.luckyKingProbability?1:en.luckyKingProbability],onValueChange:([e])=>er({...en,luckyKingProbability:e}),min:0,max:1,step:.05,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(("inherit"===en.luckyKingProbability?1:en.luckyKingProbability)*100),"%"]})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"ðŸ†"}),(0,a.jsx)(n.Label,{className:"text-sm font-medium",children:"è£èª‰å˜æ›´"})]}),(0,a.jsxs)(b.Select,{value:en.honorEnabled,onValueChange:e=>{let a={honorEnabled:e};"on"===e&&"inherit"===en.honorProbability&&(a.honorProbability=1),er({...en,...a})},children:[(0,a.jsx)(b.SelectTrigger,{className:"w-24",children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(b.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(b.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===en.honorEnabled&&(0,a.jsx)("div",{className:"pl-6 space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Label,{className:"text-xs w-12",children:"æ¦‚çŽ‡"}),(0,a.jsx)(x.Slider,{value:["inherit"===en.honorProbability?1:en.honorProbability],onValueChange:([e])=>er({...en,honorProbability:e}),min:0,max:1,step:.05,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(("inherit"===en.honorProbability?1:en.honorProbability)*100),"%"]})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"â­"}),(0,a.jsx)(n.Label,{className:"text-sm font-medium",children:"ç²¾åŽæ¶ˆæ¯"})]}),(0,a.jsxs)(b.Select,{value:en.essenceEnabled,onValueChange:e=>{let a={essenceEnabled:e};"on"===e&&"inherit"===en.essenceProbability&&(a.essenceProbability=1),er({...en,...a})},children:[(0,a.jsx)(b.SelectTrigger,{className:"w-24",children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(b.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(b.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===en.essenceEnabled&&(0,a.jsx)("div",{className:"pl-6 space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Label,{className:"text-xs w-12",children:"æ¦‚çŽ‡"}),(0,a.jsx)(x.Slider,{value:["inherit"===en.essenceProbability?1:en.essenceProbability],onValueChange:([e])=>er({...en,essenceProbability:e}),min:0,max:1,step:.05,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(("inherit"===en.essenceProbability?1:en.essenceProbability)*100),"%"]})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"ðŸ‘‘"}),(0,a.jsx)(n.Label,{className:"text-sm font-medium",children:"ç®¡ç†å‘˜å˜æ›´"})]}),(0,a.jsxs)(b.Select,{value:en.adminEnabled,onValueChange:e=>{let a={adminEnabled:e};"on"===e&&"inherit"===en.adminProbability&&(a.adminProbability=1),er({...en,...a})},children:[(0,a.jsx)(b.SelectTrigger,{className:"w-24",children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(b.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(b.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),"on"===en.adminEnabled&&(0,a.jsx)("div",{className:"pl-6 space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Label,{className:"text-xs w-12",children:"æ¦‚çŽ‡"}),(0,a.jsx)(x.Slider,{value:["inherit"===en.adminProbability?1:en.adminProbability],onValueChange:([e])=>er({...en,adminProbability:e}),min:0,max:1,step:.05,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(("inherit"===en.adminProbability?1:en.adminProbability)*100),"%"]})]})})]})]}),(0,a.jsx)(Q,{icon:(0,a.jsx)(E.Palette,{className:"h-4 w-4 text-pink-500"}),title:"è¡¨æƒ…å°å·",desc:"æ”¶é›†å¹¶å‘é€è¡¨æƒ…åŒ…",value:en.emojiThiefEnabled,onChange:e=>er({...en,emojiThiefEnabled:e})}),"off"!==en.emojiThiefEnabled&&(0,a.jsxs)("div",{className:"ml-4 pl-4 border-l-2 border-muted space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-sm font-medium",children:"ç‹¬ç«‹å­˜å‚¨"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"å¼€å¯åŽæœ¬ç¾¤è¡¨æƒ…ç‹¬ç«‹å­˜å‚¨ï¼Œä¸ä¸Žå…¶ä»–ç¾¤å…±äº«"})]}),(0,a.jsx)(c.Switch,{checked:en.emojiThiefSeparateFolder,onCheckedChange:e=>er({...en,emojiThiefSeparateFolder:e})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"æœ€å¤§å­˜å‚¨æ•°é‡"}),(0,a.jsx)(t.Input,{type:"number",min:10,max:5e3,value:en.emojiThiefMaxCount,onChange:e=>er({...en,emojiThiefMaxCount:parseInt(e.target.value)||500}),className:"h-8"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"æ”¶é›†æ¦‚çŽ‡ (%)"}),(0,a.jsx)(t.Input,{type:"number",min:1,max:100,value:Math.round(100*en.emojiThiefStealRate),onChange:e=>er({...en,emojiThiefStealRate:parseInt(e.target.value)/100}),className:"h-8"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"å‘é€æ¨¡å¼"}),(0,a.jsxs)(b.Select,{value:en.emojiThiefTriggerMode||"off",onValueChange:e=>er({...en,emojiThiefTriggerMode:e}),children:[(0,a.jsx)(b.SelectTrigger,{className:"h-8",children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"off",children:"å…³é—­è‡ªåŠ¨å‘é€"}),(0,a.jsx)(b.SelectItem,{value:"chat_follow",children:"å¯¹è¯è·Ÿéš"}),(0,a.jsx)(b.SelectItem,{value:"chat_random",children:"å¯¹è¯éšæœº"}),(0,a.jsx)(b.SelectItem,{value:"bym_follow",children:"ä¼ªäººè·Ÿéš"}),(0,a.jsx)(b.SelectItem,{value:"bym_random",children:"ä¼ªäººéšæœº"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"å‘é€æ¦‚çŽ‡ (%)"}),(0,a.jsx)(t.Input,{type:"number",min:1,max:100,value:Math.round((en.emojiThiefTriggerRate??.05)*100),onChange:e=>er({...en,emojiThiefTriggerRate:parseInt(e.target.value)/100}),className:"h-8",disabled:"off"===en.emojiThiefTriggerMode||"chat_follow"===en.emojiThiefTriggerMode||"bym_follow"===en.emojiThiefTriggerMode})]})]}),(0,a.jsxs)("div",{className:"mt-4 p-3 rounded-lg border bg-card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(R.Smile,{className:"h-4 w-4 text-yellow-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"è¡¨æƒ…åº“é¢„è§ˆ"}),(0,a.jsxs)(r.Badge,{variant:"secondary",className:"text-[10px]",children:[ee.total," å¼ "]})]}),(0,a.jsxs)(i.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs text-destructive hover:text-destructive",onClick:ez,children:[(0,a.jsx)(z.Trash2,{className:"h-3 w-3 mr-1"})," æ¸…ç©º"]})]}),ee.images.length>0?(0,a.jsx)("div",{className:"grid grid-cols-5 gap-2 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:ee.images.map((e,s)=>(0,a.jsxs)("div",{className:"relative group aspect-square rounded border bg-muted/50 overflow-hidden cursor-pointer",onClick:()=>et(e),children:[(0,a.jsx)("img",{src:e.url,alt:e.name,className:"w-full h-full object-cover"}),(0,a.jsx)("button",{className:"absolute top-0 right-0 p-1 bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:a=>{a.stopPropagation(),eU(e.name)},children:(0,a.jsx)(P.X,{className:"h-3 w-3"})})]},s))}):(0,a.jsx)("div",{className:"text-center py-4 text-xs text-muted-foreground",children:"æš‚æ— è¡¨æƒ…ï¼Œå¼€å¯æ”¶é›†åŽä¼šè‡ªåŠ¨æŠ“å–"})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-muted",children:(0,a.jsx)(L.Users,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"ç”¨æˆ·æƒé™ç®¡ç†"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"è®¾ç½®é»‘ç™½åå•"})]})]}),(0,a.jsxs)(b.Select,{value:en.listMode,onValueChange:e=>er({...en,listMode:e}),children:[(0,a.jsx)(b.SelectTrigger,{className:"w-28",children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"none",children:"ä¸å¯ç”¨"}),(0,a.jsx)(b.SelectItem,{value:"blacklist",children:"é»‘åå•"}),(0,a.jsx)(b.SelectItem,{value:"whitelist",children:"ç™½åå•"})]})]})]}),"blacklist"===en.listMode&&(0,a.jsx)(d.Textarea,{className:"mt-2 font-mono",placeholder:"æ¯è¡Œä¸€ä¸ªQQå·",value:en.blacklist.join("\n"),onChange:e=>er({...en,blacklist:e.target.value.split("\n").filter(Boolean)})}),"whitelist"===en.listMode&&(0,a.jsx)(d.Textarea,{className:"mt-2 font-mono",placeholder:"æ¯è¡Œä¸€ä¸ªQQå·",value:en.whitelist.join("\n"),onChange:e=>er({...en,whitelist:e.target.value.split("\n").filter(Boolean)})})]}),(0,a.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-muted",children:(0,a.jsx)(_.Clock,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"å®šæ—¶æ€»ç»“æŽ¨é€"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"å®šæœŸæŽ¨é€ç¾¤èŠæ€»ç»“æŠ¥å‘Š"})]})]}),(0,a.jsx)(c.Switch,{checked:en.summaryPushEnabled,onCheckedChange:e=>er({...en,summaryPushEnabled:e})})]}),en.summaryPushEnabled&&(0,a.jsxs)("div",{className:"ml-4 pl-4 border-l-2 border-muted space-y-3 mt-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"é—´éš”ç±»åž‹"}),(0,a.jsxs)(b.Select,{value:en.summaryPushIntervalType,onValueChange:e=>er({...en,summaryPushIntervalType:e}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"day",children:"æŒ‰å¤©"}),(0,a.jsx)(b.SelectItem,{value:"hour",children:"æŒ‰å°æ—¶"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"é—´éš”å€¼"}),(0,a.jsx)(t.Input,{type:"number",min:1,value:en.summaryPushIntervalValue,onChange:e=>er({...en,summaryPushIntervalValue:parseInt(e.target.value)||1})})]})]}),"day"===en.summaryPushIntervalType&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"æŽ¨é€æ—¶é—´ (0-23ç‚¹)"}),(0,a.jsx)(t.Input,{type:"number",min:0,max:23,value:en.summaryPushHour,onChange:e=>er({...en,summaryPushHour:parseInt(e.target.value)}),className:"w-24"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"æ¶ˆæ¯æ•°é‡"}),(0,a.jsx)(t.Input,{type:"number",min:10,max:500,value:en.summaryPushMessageCount,onChange:e=>er({...en,summaryPushMessageCount:parseInt(e.target.value)||100}),className:"w-24"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"æ¯æ¬¡æ€»ç»“èŽ·å–æŒ‡å®šæ•°é‡çš„æ–°æ¶ˆæ¯ï¼Œä¸ä¼šé‡å¤æ€»ç»“å·²å¤„ç†çš„æ¶ˆæ¯"})]})]})]}),(0,a.jsxs)(o.TabsContent,{value:"bym",className:"space-y-4 mt-0",children:[(0,a.jsx)(Q,{icon:(0,a.jsx)(f.Sparkles,{className:"h-4 w-4 text-purple-500"}),title:"ä¼ªäººæ¨¡å¼",desc:"éšæœºå›žå¤ï¼Œæ¨¡æ‹ŸçœŸäººèŠå¤©",value:en.bymEnabled,onChange:e=>er({...en,bymEnabled:e})}),"off"!==en.bymEnabled&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"ä¼ªäººäººè®¾"}),(0,a.jsxs)(b.Select,{value:en.bymPresetId,onValueChange:e=>er({...en,bymPresetId:e}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{placeholder:"é€‰æ‹©äººè®¾..."})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"__default__",children:"ä½¿ç”¨é»˜è®¤é¢„è®¾"}),(0,a.jsx)(b.SelectItem,{value:"__custom__",children:"è‡ªå®šä¹‰æç¤ºè¯"}),eo.map(e=>(0,a.jsx)(b.SelectItem,{value:e.id,children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:e.name}),e.description&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.description})]})},e.id))]})]}),en.bymPresetId&&"__default__"!==en.bymPresetId&&"__custom__"!==en.bymPresetId&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:eo.find(e=>e.id===en.bymPresetId)?.systemPromptPreview||""})]}),"__custom__"===en.bymPresetId&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"è‡ªå®šä¹‰æç¤ºè¯"}),(0,a.jsx)(d.Textarea,{value:en.bymPrompt,onChange:e=>er({...en,bymPrompt:e.target.value}),placeholder:"ä½ æ˜¯ä¸€ä¸ªçœŸå®žçš„ç¾¤å‹...",rows:3,className:"font-mono text-sm"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-sm",children:"è§¦å‘æ¦‚çŽ‡"}),"inherit"===en.bymProbability?(0,a.jsx)(i.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>er({...en,bymProbability:.02}),children:"ç»§æ‰¿å…¨å±€"}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(t.Input,{type:"number",min:0,max:100,className:"w-20",value:"number"==typeof en.bymProbability?Math.round(100*en.bymProbability):2,onChange:e=>er({...en,bymProbability:parseInt(e.target.value)/100})}),(0,a.jsx)("span",{className:"text-sm",children:"%"}),(0,a.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>er({...en,bymProbability:"inherit"}),children:(0,a.jsx)(P.X,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-sm",children:"ä½¿ç”¨æ¨¡åž‹"}),(0,a.jsxs)(b.Select,{value:en.bymModel||"__default__",onValueChange:e=>er({...en,bymModel:"__default__"===e?"":e}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{placeholder:"ç»§æ‰¿"})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"__default__",children:"ç»§æ‰¿å…¨å±€"}),eh.map(e=>(0,a.jsx)(b.SelectItem,{value:e,children:e},e))]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-sm",children:"æ¸©åº¦"}),"inherit"===en.bymTemperature?(0,a.jsx)(i.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>er({...en,bymTemperature:.9}),children:"ç»§æ‰¿å…¨å±€"}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(t.Input,{type:"number",min:0,max:2,step:.1,value:"number"==typeof en.bymTemperature?en.bymTemperature:.9,onChange:e=>er({...en,bymTemperature:parseFloat(e.target.value)})}),(0,a.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>er({...en,bymTemperature:"inherit"}),children:(0,a.jsx)(P.X,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-sm",children:"æœ€å¤§Token"}),"inherit"===en.bymMaxTokens?(0,a.jsx)(i.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>er({...en,bymMaxTokens:100}),children:"ç»§æ‰¿å…¨å±€"}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(t.Input,{type:"number",min:10,max:2e3,value:"number"==typeof en.bymMaxTokens?en.bymMaxTokens:100,onChange:e=>er({...en,bymMaxTokens:parseInt(e.target.value)})}),(0,a.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>er({...en,bymMaxTokens:"inherit"}),children:(0,a.jsx)(P.X,{className:"h-3 w-3"})})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.MessageSquare,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)(n.Label,{className:"font-medium",children:"ä¸»åŠ¨å‘è¨€"})]}),(0,a.jsxs)(b.Select,{value:en.proactiveChatEnabled,onValueChange:e=>er({...en,proactiveChatEnabled:e}),children:[(0,a.jsx)(b.SelectTrigger,{className:"w-24",children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(b.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(b.SelectItem,{value:"off",children:"å…³é—­"})]})]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:"ä¼ªäººæ¨¡å¼ä¸‹å…è®¸æœºå™¨äººä¸»åŠ¨å‘è¨€"}),"off"!==en.proactiveChatEnabled&&(0,a.jsxs)("div",{className:"space-y-3 ml-4 pl-4 border-l-2 border-muted",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"è§¦å‘æ¦‚çŽ‡"}),(0,a.jsxs)(b.Select,{value:"inherit"===en.proactiveChatProbability?"inherit":String(en.proactiveChatProbability),onValueChange:e=>er({...en,proactiveChatProbability:"inherit"===e?"inherit":parseFloat(e)}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(b.SelectItem,{value:"0.02",children:"2%"}),(0,a.jsx)(b.SelectItem,{value:"0.05",children:"5%"}),(0,a.jsx)(b.SelectItem,{value:"0.1",children:"10%"}),(0,a.jsx)(b.SelectItem,{value:"0.2",children:"20%"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"å†·å´(åˆ†é’Ÿ)"}),(0,a.jsxs)(b.Select,{value:"inherit"===en.proactiveChatCooldown?"inherit":String(en.proactiveChatCooldown),onValueChange:e=>er({...en,proactiveChatCooldown:"inherit"===e?"inherit":parseInt(e)}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(b.SelectItem,{value:"5",children:"5åˆ†é’Ÿ"}),(0,a.jsx)(b.SelectItem,{value:"10",children:"10åˆ†é’Ÿ"}),(0,a.jsx)(b.SelectItem,{value:"30",children:"30åˆ†é’Ÿ"}),(0,a.jsx)(b.SelectItem,{value:"60",children:"1å°æ—¶"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"æ¯æ—¥ä¸Šé™"}),(0,a.jsxs)(b.Select,{value:"inherit"===en.proactiveChatMaxDaily?"inherit":String(en.proactiveChatMaxDaily),onValueChange:e=>er({...en,proactiveChatMaxDaily:"inherit"===e?"inherit":parseInt(e)}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(b.SelectItem,{value:"5",children:"5æ¬¡"}),(0,a.jsx)(b.SelectItem,{value:"10",children:"10æ¬¡"}),(0,a.jsx)(b.SelectItem,{value:"20",children:"20æ¬¡"}),(0,a.jsx)(b.SelectItem,{value:"50",children:"50æ¬¡"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"æœ€å°‘æ¶ˆæ¯"}),(0,a.jsx)(t.Input,{type:"number",min:1,max:50,value:en.proactiveChatMinMessages,onChange:e=>er({...en,proactiveChatMinMessages:parseInt(e.target.value)||5})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"æ´»è·ƒæ—¶æ®µå¼€å§‹"}),(0,a.jsx)(t.Input,{type:"number",min:0,max:23,value:en.proactiveChatTimeStart,onChange:e=>er({...en,proactiveChatTimeStart:parseInt(e.target.value)||8})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"æ´»è·ƒæ—¶æ®µç»“æŸ"}),(0,a.jsx)(t.Input,{type:"number",min:0,max:23,value:en.proactiveChatTimeEnd,onChange:e=>er({...en,proactiveChatTimeEnd:parseInt(e.target.value)||23})})]})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(R.Smile,{className:"h-4 w-4 text-yellow-500"}),(0,a.jsx)(n.Label,{className:"font-medium",children:"å›žå¤é£Žæ ¼"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"å›žå¤é•¿åº¦"}),(0,a.jsxs)(b.Select,{value:en.bymReplyLength,onValueChange:e=>er({...en,bymReplyLength:e}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"short",children:"ç®€çŸ­"}),(0,a.jsx)(b.SelectItem,{value:"medium",children:"é€‚ä¸­"}),(0,a.jsx)(b.SelectItem,{value:"long",children:"è¯¦ç»†"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-5",children:[(0,a.jsx)(c.Switch,{checked:en.bymUseEmoji,onCheckedChange:e=>er({...en,bymUseEmoji:e})}),(0,a.jsx)(n.Label,{className:"text-sm",children:"ä½¿ç”¨è¡¨æƒ…"})]})]})]})]})]}),(0,a.jsxs)(o.TabsContent,{value:"channel",className:"space-y-4 mt-0",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.MessageSquare,{className:"h-4 w-4 text-blue-500"}),(0,a.jsx)(n.Label,{className:"text-base font-medium",children:"èŠå¤©é…ç½®"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"é…ç½®æœ¬ç¾¤çš„èŠå¤©è¡Œä¸ºå’Œå›žå¤æ–¹å¼"}),(0,a.jsxs)("div",{className:"space-y-3 p-3 rounded-lg border bg-card",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"ä¸Šä¸‹æ–‡é•¿åº¦"}),(0,a.jsx)(t.Input,{type:"number",min:1,max:100,value:en.chatContextLength,onChange:e=>er({...en,chatContextLength:parseInt(e.target.value)||20})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-5",children:[(0,a.jsx)(c.Switch,{checked:en.chatEnabled,onCheckedChange:e=>er({...en,chatEnabled:e})}),(0,a.jsx)(n.Label,{className:"text-sm",children:"å¯ç”¨å¯¹è¯"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Switch,{checked:en.chatStreamReply,onCheckedChange:e=>er({...en,chatStreamReply:e})}),(0,a.jsx)(n.Label,{className:"text-xs",children:"æµå¼å›žå¤"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Switch,{checked:en.chatQuoteReply,onCheckedChange:e=>er({...en,chatQuoteReply:e})}),(0,a.jsx)(n.Label,{className:"text-xs",children:"å¼•ç”¨å›žå¤"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Switch,{checked:en.chatShowThinking,onCheckedChange:e=>er({...en,chatShowThinking:e})}),(0,a.jsx)(n.Label,{className:"text-xs",children:"æ˜¾ç¤ºæ€è€ƒ"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4 border-t pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(U.Server,{className:"h-4 w-4 text-purple-500"}),(0,a.jsx)(n.Label,{className:"text-base font-medium",children:"ç¾¤ç‹¬ç«‹æ¸ é“"})]}),(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{ep(null),ey({name:"",baseUrl:"",apiKey:"",adapterType:"openai",models:"",enabled:!0,priority:0,modelsPath:"",chatPath:"",imageTransferMode:"auto",imageCompress:!0,imageQuality:85,imageMaxSize:4096}),eu(!0)},children:[(0,a.jsx)(A.Plus,{className:"h-4 w-4 mr-2"}),"æ·»åŠ æ¸ é“"]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"é…ç½®æœ¬ç¾¤ä¸“ç”¨çš„APIæ¸ é“ï¼Œä¼˜å…ˆçº§é«˜äºŽå…¨å±€é…ç½®ã€‚æ”¯æŒé…ç½®å¤šä¸ªæ¸ é“ï¼ŒæŒ‰ä¼˜å…ˆçº§é¡ºåºè°ƒç”¨ã€‚"}),0===en.independentChannels.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground border rounded-lg border-dashed",children:[(0,a.jsx)(U.Server,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"æš‚æ— ç‹¬ç«‹æ¸ é“"}),(0,a.jsx)("p",{className:"text-xs",children:"ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ æ¸ é“"})]}):(0,a.jsx)("div",{className:"space-y-3",children:en.independentChannels.map((e,s)=>(0,a.jsx)("div",{className:"p-4 rounded-lg border bg-card",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-medium",children:e.name}),(0,a.jsx)(r.Badge,{variant:e.enabled?"default":"secondary",children:e.enabled?"å¯ç”¨":"ç¦ç”¨"}),(0,a.jsx)(r.Badge,{variant:"outline",children:e.adapterType}),(0,a.jsxs)(r.Badge,{variant:"outline",children:["æƒé‡: ",e.priority]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:e.baseUrl||"ä½¿ç”¨é»˜è®¤åœ°å€"}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[e.models.slice(0,3).map(e=>(0,a.jsx)(r.Badge,{variant:"secondary",className:"text-xs font-normal",children:e},e)),e.models.length>3&&(0,a.jsxs)(r.Badge,{variant:"secondary",className:"text-xs font-normal",children:["+",e.models.length-3]})]})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>{ep(s),ey({name:e.name,baseUrl:e.baseUrl,apiKey:e.apiKey,adapterType:e.adapterType,models:e.models.join(","),enabled:e.enabled,priority:e.priority,modelsPath:e.modelsPath||"",chatPath:e.chatPath||"",imageTransferMode:e.imageConfig?.transferMode||"auto",imageCompress:e.imageConfig?.compress??!0,imageQuality:e.imageConfig?.quality??85,imageMaxSize:e.imageConfig?.maxSize??4096}),eu(!0)},children:(0,a.jsx)(v.Settings,{className:"h-4 w-4"})}),(0,a.jsx)(i.Button,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ¸ é“å—ï¼Ÿ")){let e=[...en.independentChannels];e.splice(s,1),er({...en,independentChannels:e})}},children:(0,a.jsx)(z.Trash2,{className:"h-4 w-4"})})]})]})},e.id))}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-muted/50 mt-2",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(n.Label,{className:"text-xs font-medium",children:"ç¦ç”¨å…¨å±€æ¸ é“"}),(0,a.jsx)("p",{className:"text-[10px] text-muted-foreground text-orange-500",children:"å¼€å¯åŽæœ¬ç¾¤ä»…ä½¿ç”¨ç‹¬ç«‹æ¸ é“"})]}),(0,a.jsx)(c.Switch,{checked:en.forbidGlobalModel,onCheckedChange:e=>er({...en,forbidGlobalModel:e})})]})]})]}),(0,a.jsxs)(o.TabsContent,{value:"advanced",className:"space-y-4 mt-0",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(M.Bot,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(n.Label,{children:"æ¨¡åž‹é…ç½®"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"ä¸ºæœ¬ç¾¤é…ç½®å„åœºæ™¯ç‹¬ç«‹æ¨¡åž‹ï¼ˆç•™ç©ºä½¿ç”¨å…¨å±€é…ç½®ï¼‰"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)(H,{label:"å¯¹è¯æ¨¡åž‹",desc:"ä¸»æ¨¡åž‹",value:en.chatModel,models:eh,onChange:e=>er({...en,chatModel:e})}),(0,a.jsx)(H,{label:"æ€»ç»“æ¨¡åž‹",desc:"ç¾¤èŠæ€»ç»“",value:en.summaryModel,models:eh,onChange:e=>er({...en,summaryModel:e})}),(0,a.jsx)(H,{label:"ä¼ªäººæ¨¡åž‹",desc:"ä¼ªäººå›žå¤",value:en.bymModel,models:eh,onChange:e=>er({...en,bymModel:e})}),(0,a.jsx)(H,{label:"ç»˜å›¾æ¨¡åž‹",desc:"å›¾åƒç”Ÿæˆ",value:en.imageGenModel,models:eh,onChange:e=>er({...en,imageGenModel:e})})]})]}),ec.length>0&&(0,a.jsxs)("div",{className:"space-y-3 border-t pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(K.Brain,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(n.Label,{children:"çŸ¥è¯†åº“"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"ä¸ºæœ¬ç¾¤å…³è”çŸ¥è¯†åº“ï¼ŒAIå›žå¤æ—¶å¯å‚è€ƒçŸ¥è¯†åº“å†…å®¹"}),(0,a.jsx)("div",{className:"space-y-2",children:ec.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded border bg-card",children:[(0,a.jsx)(c.Switch,{checked:en.knowledgeIds.includes(e.id),onCheckedChange:a=>{a?er({...en,knowledgeIds:[...en.knowledgeIds,e.id]}):er({...en,knowledgeIds:en.knowledgeIds.filter(a=>a!==e.id)})}}),(0,a.jsx)("span",{className:"text-sm",children:e.name})]},e.id))})]}),(0,a.jsx)("div",{className:"border-t pt-4 mt-4",children:(0,a.jsx)("div",{className:"p-3 rounded-lg bg-muted/50 text-sm text-muted-foreground",children:(0,a.jsx)("p",{children:"ðŸ’¡ æ›´å¤šé«˜çº§è®¾ç½®ï¼ˆå¦‚MCPæœåŠ¡ã€å·¥å…·ç»„é…ç½®ç­‰ï¼‰è¯·åœ¨ä¸»ç®¡ç†é¢æ¿ä¸­é…ç½®"})})})]})]})]})})}),(0,a.jsx)("div",{className:"mt-6 text-center text-sm text-gray-500",children:(0,a.jsxs)("p",{children:["ChatGPT Plugin ç¾¤ç®¡ç†é¢æ¿ Â· ç¾¤ ",$]})})]}),(0,a.jsx)(u.Dialog,{open:!!ei,onOpenChange:e=>!e&&et(null),children:(0,a.jsx)(u.DialogContent,{className:"max-w-sm sm:max-w-md p-0 overflow-hidden bg-transparent border-none shadow-none",children:ei&&(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:ei.url,alt:ei.name,className:"w-full h-auto rounded-lg shadow-2xl bg-background/10 backdrop-blur-sm"}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-4 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsxs)(i.Button,{variant:"secondary",size:"sm",onClick:()=>eU(ei.name),children:[(0,a.jsx)(z.Trash2,{className:"h-4 w-4 mr-1"})," åˆ é™¤"]}),(0,a.jsx)(i.Button,{variant:"secondary",size:"sm",onClick:()=>et(null),children:"å…³é—­"})]})]})})}),(0,a.jsx)(u.Dialog,{open:eb,onOpenChange:eu,children:(0,a.jsxs)(u.DialogContent,{className:"max-w-lg",children:[(0,a.jsx)(u.DialogHeader,{children:(0,a.jsx)(u.DialogTitle,{children:null!==ej?"ç¼–è¾‘æ¸ é“":"æ·»åŠ æ¸ é“"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"æ¸ é“åç§°"}),(0,a.jsx)(t.Input,{value:eg.name,onChange:e=>ey({...eg,name:e.target.value}),placeholder:"ä¾‹å¦‚ï¼šOpenAI-1"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"Base URL"}),(0,a.jsx)(t.Input,{value:eg.baseUrl,onChange:e=>ey({...eg,baseUrl:e.target.value}),placeholder:"https://api.openai.com/v1"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"API Key"}),(0,a.jsx)(t.Input,{type:"password",value:eg.apiKey,onChange:e=>ey({...eg,apiKey:e.target.value}),placeholder:"sk-..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"é€‚é…å™¨ç±»åž‹"}),(0,a.jsxs)(b.Select,{value:eg.adapterType,onValueChange:e=>ey({...eg,adapterType:e}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"openai",children:"OpenAI"}),(0,a.jsx)(b.SelectItem,{value:"azure",children:"Azure"}),(0,a.jsx)(b.SelectItem,{value:"claude",children:"Claude"}),(0,a.jsx)(b.SelectItem,{value:"gemini",children:"Gemini"}),(0,a.jsx)(b.SelectItem,{value:"ollama",children:"Ollama"}),(0,a.jsx)(b.SelectItem,{value:"deepseek",children:"DeepSeek"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"æƒé‡ (ä¼˜å…ˆçº§)"}),(0,a.jsx)(t.Input,{type:"number",value:eg.priority,onChange:e=>ey({...eg,priority:parseInt(e.target.value)||0})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"å¯ç”¨æ¨¡åž‹ (é€—å·åˆ†éš”)"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(t.Input,{value:eg.models,onChange:e=>ey({...eg,models:e.target.value}),placeholder:"gpt-4o,gpt-4-turbo...",className:"flex-1"}),(0,a.jsx)(i.Button,{variant:"outline",size:"icon",onClick:async()=>{if(!eg.baseUrl||!eg.apiKey)return void j.toast.error("è¯·å…ˆå¡«å†™ Base URL å’Œ API Key");eN(!0);try{let e=await fetch("/api/admin/models/fetch",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${eG()}`},body:JSON.stringify({baseUrl:eg.baseUrl,apiKey:eg.apiKey,adapterType:eg.adapterType})}),a=await e.json();0===a.code?(ew(a.data),eI(eg.models.split(",").filter(Boolean)),eS(!0)):j.toast.error(a.message||"èŽ·å–å¤±è´¥")}catch(e){j.toast.error(e.message)}finally{eN(!1)}},disabled:ev,children:ev?(0,a.jsx)(C.RefreshCw,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(C.RefreshCw,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)(n.Label,{className:"mb-2 block",children:"é«˜çº§é…ç½®"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"æ¨¡åž‹åˆ—è¡¨è·¯å¾„"}),(0,a.jsx)(t.Input,{value:eg.modelsPath,onChange:e=>ey({...eg,modelsPath:e.target.value}),placeholder:"data",className:"h-8 text-sm"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"èŠå¤©æŽ¥å£è·¯å¾„"}),(0,a.jsx)(t.Input,{value:eg.chatPath,onChange:e=>ey({...eg,chatPath:e.target.value}),placeholder:"/chat/completions",className:"h-8 text-sm"})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)(n.Label,{className:"mb-2 block",children:"å›¾ç‰‡å¤„ç†"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"ä¼ è¾“æ¨¡å¼"}),(0,a.jsxs)(b.Select,{value:eg.imageTransferMode,onValueChange:e=>ey({...eg,imageTransferMode:e}),children:[(0,a.jsx)(b.SelectTrigger,{className:"h-8",children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"auto",children:"è‡ªåŠ¨ (Auto)"}),(0,a.jsx)(b.SelectItem,{value:"base64",children:"Base64"}),(0,a.jsx)(b.SelectItem,{value:"url",children:"URLé“¾æŽ¥"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"åŽ‹ç¼©å›¾ç‰‡"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 h-8",children:[(0,a.jsx)(c.Switch,{checked:eg.imageCompress,onCheckedChange:e=>ey({...eg,imageCompress:e})}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:eg.imageCompress?"å¼€å¯":"å…³é—­"})]})]}),eg.imageCompress&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"è´¨é‡ (1-100)"}),(0,a.jsx)(t.Input,{type:"number",value:eg.imageQuality,onChange:e=>ey({...eg,imageQuality:parseInt(e.target.value)||85}),min:1,max:100,className:"h-8 text-sm"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:"æœ€å¤§å°ºå¯¸ (px)"}),(0,a.jsx)(t.Input,{type:"number",value:eg.imageMaxSize,onChange:e=>ey({...eg,imageMaxSize:parseInt(e.target.value)||4096}),min:100,className:"h-8 text-sm"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[(0,a.jsx)(c.Switch,{checked:eg.enabled,onCheckedChange:e=>ey({...eg,enabled:e})}),(0,a.jsx)(n.Label,{children:"å¯ç”¨æ­¤æ¸ é“"})]})]}),(0,a.jsxs)(u.DialogFooter,{children:[(0,a.jsx)(i.Button,{variant:"outline",onClick:()=>eu(!1),children:"å–æ¶ˆ"}),(0,a.jsx)(i.Button,{onClick:()=>{if(!eg.name||!eg.baseUrl||!eg.apiKey)return void j.toast.error("è¯·å¡«å†™å¿…è¦ä¿¡æ¯");let e={id:null!==ej?en.independentChannels[ej].id:Math.random().toString(36).substring(7),name:eg.name,baseUrl:eg.baseUrl,apiKey:eg.apiKey,adapterType:eg.adapterType,models:eg.models.split(",").filter(Boolean),enabled:eg.enabled,priority:eg.priority,modelsPath:eg.modelsPath||void 0,chatPath:eg.chatPath||void 0,imageConfig:{transferMode:eg.imageTransferMode,compress:eg.imageCompress,quality:eg.imageQuality,maxSize:eg.imageMaxSize}},a=[...en.independentChannels];null!==ej?a[ej]=e:a.push(e),er({...en,independentChannels:a}),eu(!1)},children:null!==ej?"æ›´æ–°":"æ·»åŠ "})]})]})}),(0,a.jsx)(u.Dialog,{open:ef,onOpenChange:eS,children:(0,a.jsxs)(u.DialogContent,{children:[(0,a.jsx)(u.DialogHeader,{children:(0,a.jsx)(u.DialogTitle,{children:"é€‰æ‹©æ¨¡åž‹"})}),(0,a.jsx)(m.ScrollArea,{className:"h-[300px] pr-4",children:(0,a.jsx)("div",{className:"space-y-2",children:eC.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Checkbox,{checked:eP.includes(e),onCheckedChange:a=>{a?eI([...eP,e]):eI(eP.filter(a=>a!==e))}}),(0,a.jsx)(n.Label,{className:"text-sm font-normal",children:e})]},e))})}),(0,a.jsxs)(u.DialogFooter,{children:[(0,a.jsx)(i.Button,{variant:"outline",onClick:()=>eS(!1),children:"å–æ¶ˆ"}),(0,a.jsx)(i.Button,{onClick:()=>{ey({...eg,models:eP.join(",")}),eS(!1)},children:"ç¡®è®¤"})]})]})})]})}function Q({icon:e,title:s,desc:l,value:i,onChange:t}){return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-muted",children:e}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:s}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:l})]})]}),(0,a.jsxs)(b.Select,{value:i,onValueChange:t,children:[(0,a.jsx)(b.SelectTrigger,{className:"w-28",children:(0,a.jsx)(b.SelectValue,{})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"inherit",children:"ç»§æ‰¿"}),(0,a.jsx)(b.SelectItem,{value:"on",children:"å¼€å¯"}),(0,a.jsx)(b.SelectItem,{value:"off",children:"å…³é—­"})]})]})]})}function O({label:e,value:s,models:l,onChange:i}){return(0,a.jsxs)("div",{className:"ml-4 pl-4 border-l-2 border-muted space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-xs",children:e}),(0,a.jsxs)(b.Select,{value:s||"__default__",onValueChange:e=>i("__default__"===e?"":e),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{placeholder:"ç»§æ‰¿å…¨å±€"})}),(0,a.jsxs)(b.SelectContent,{children:[(0,a.jsx)(b.SelectItem,{value:"__default__",children:"ç»§æ‰¿å…¨å±€"}),l.map(e=>(0,a.jsx)(b.SelectItem,{value:e,children:e},e))]})]})]})}function H({label:e,desc:s,value:l,models:i,onChange:t}){return(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)(n.Label,{className:"text-xs",children:[e," ",(0,a.jsxs)("span",{className:"text-muted-foreground",children:["ï¼ˆ",s,"ï¼‰"]})]}),(0,a.jsxs)(b.Select,{value:l||"__default__",onValueChange:e=>t("__default__"===e?"":e),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{placeholder:"ä½¿ç”¨å…¨å±€é…ç½®"})}),(0,a.jsxs)(b.SelectContent,{className:"max-h-[200px] overflow-y-auto",children:[(0,a.jsx)(b.SelectItem,{value:"__default__",children:"ä½¿ç”¨å…¨å±€é…ç½®"}),i.map(e=>(0,a.jsx)(b.SelectItem,{value:e,children:e},e))]})]})]})}e.s(["default",()=>D])}]);