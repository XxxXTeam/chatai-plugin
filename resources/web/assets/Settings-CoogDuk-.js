import{K as h,x as U,a5 as c,C as L,L as ee,M,O as r,P as l,Q as N,R as G,S as p,T as t,a6 as Q,V as s,U as v,X as b,a1 as k,a2 as q,Y as o,a3 as D,Z as w,$ as le,N as f,a7 as d,a8 as te,a9 as S,B as y,aa as x,W as ae}from"./index-DILGEmlc.js";import{M as re}from"./ModelSelector-BVdkJwfK.js";import{N as m}from"./Divider-CMEiRSnR.js";import{N as i}from"./Switch-BEXbUwW7.js";import{N as ue}from"./Select-bkYqJANp.js";import{N as $}from"./Slider-C371N2zF.js";import{N as T}from"./DynamicTags-I0NdHX5A.js";import{N as C}from"./InputNumber-BtvMAXsH.js";import"./SearchOutlined-sPbk7PsC.js";import"./text-CPOOFq-e.js";import"./Add-CG2bvB3N.js";import"./prop-NnGblK-3.js";const we={__name:"Settings",setup(oe){const R=h(),I=U(!1),j=U(!1),a=c({basic:{commandPrefix:"#ai",debug:!1,showThinkingMessage:!0,debugToConsoleOnly:!0,quoteReply:!0,autoRecall:{enabled:!1,delay:60,recallError:!0}},admin:{masterQQ:[],loginNotifyPrivate:!0,sensitiveCommandMasterOnly:!0},llm:{defaultModel:"",models:{chat:"",roleplay:"",toolCall:"",search:"",reasoning:""},chatModel:"",codeModel:"",translationModel:""},bym:{enable:!1,probability:.02,temperature:.9,maxTokens:100,recall:!1,model:"",systemPrompt:"",inheritPersonality:!0,exclusiveFeatures:["groupSummary","userPortrait"]},tools:{showCallLogs:!0,useForwardMsg:!0},thinking:{showThinkingContent:!0,useForwardMsg:!0},features:{groupSummary:{enabled:!0,maxMessages:100},userPortrait:{enabled:!0,minMessages:10},poke:{enabled:!1,pokeBack:!1,message:"别戳了~"},reaction:{enabled:!1}},memory:{enabled:!1,autoExtract:!0},trigger:{private:{enabled:!0,mode:"always"},group:{enabled:!0,at:!0,prefix:!0,keyword:!1,random:!1,randomRate:.05},prefixes:["#chat"],keywords:[],collectGroupMsg:!0,blacklistUsers:[],whitelistUsers:[],blacklistGroups:[],whitelistGroups:[]}}),K=[{label:"总是响应",value:"always"},{label:"需要前缀",value:"prefix"},{label:"关闭",value:"off"}],z=L({get:()=>(a.trigger.prefixes||[]).join(", "),set:n=>{a.trigger.prefixes=n.split(/[,，]\s*/).filter(Boolean)}}),B=L({get:()=>(a.trigger.keywords||[]).join(", "),set:n=>{a.trigger.keywords=n.split(/[,，]\s*/).filter(Boolean)}}),F=U([]),O=U(!1),A=U("defaultModel"),P=U("");function W(){const n=P.value.trim();n?a.admin.masterQQ=n.split(/[,，\s]+/).filter(Boolean):a.admin.masterQQ=[]}function Y(){P.value=(a.admin.masterQQ||[]).join(", ")}async function X(){I.value=!0;try{const n=await G.get("/api/config");if(n.data.code===0){const e=n.data.data;e.basic&&(Object.assign(a.basic,e.basic),e.basic.autoRecall&&Object.assign(a.basic.autoRecall,e.basic.autoRecall)),e.llm&&(Object.assign(a.llm,e.llm),e.llm.models&&Object.assign(a.llm.models,e.llm.models)),e.admin&&Object.assign(a.admin,e.admin),e.bym&&Object.assign(a.bym,e.bym),e.tools&&Object.assign(a.tools,e.tools),e.thinking&&Object.assign(a.thinking,e.thinking),e.features&&(e.features.groupSummary&&Object.assign(a.features.groupSummary,e.features.groupSummary),e.features.userPortrait&&Object.assign(a.features.userPortrait,e.features.userPortrait),e.features.poke&&Object.assign(a.features.poke,e.features.poke),e.features.reaction&&Object.assign(a.features.reaction,e.features.reaction)),e.memory&&Object.assign(a.memory,e.memory),e.trigger&&(a.trigger.private=e.trigger.private||{enabled:!0,mode:"always"},a.trigger.group=e.trigger.group||{enabled:!0,at:!0,prefix:!0,keyword:!1,random:!1,randomRate:.05},a.trigger.prefixes=e.trigger.prefixes||["#chat"],a.trigger.keywords=e.trigger.keywords||[],a.trigger.collectGroupMsg=e.trigger.collectGroupMsg??!0,a.trigger.blacklistUsers=e.trigger.blacklistUsers||[],a.trigger.whitelistUsers=e.trigger.whitelistUsers||[],a.trigger.blacklistGroups=e.trigger.blacklistGroups||[],a.trigger.whitelistGroups=e.trigger.whitelistGroups||[]);const u=await G.get("/api/channels/list");if(u.data.code===0){const J=u.data.data,E=new Set;J.forEach(V=>{V.models&&V.models.forEach(_=>E.add(_))}),F.value=Array.from(E).sort()}Y()}}catch(n){R.error("加载配置失败: "+n.message)}finally{I.value=!1}}async function Z(){j.value=!0;try{const n={basic:{...a.basic},admin:{...a.admin},llm:{...a.llm},bym:{...a.bym},tools:{...a.tools},thinking:{...a.thinking},features:{...a.features},memory:{...a.memory},trigger:{...a.trigger}},e=await G.post("/api/config",n);e.data.code===0?R.success("✓ 配置已保存",{duration:2e3}):R.error("保存失败: "+e.data.message)}catch(n){R.error("保存失败: "+n.message)}finally{j.value=!1}}function g(n){A.value=n,O.value=!0}function H(n){if(n.length>0){const e=A.value;if(e==="bymModel")a.bym.model=n[0];else if(e.startsWith("models.")){const u=e.replace("models.","");a.llm.models[u]=n[0]}else a.llm[e]=n[0]}O.value=!1}return ee(()=>{X()}),(n,e)=>(p(),M(l(N),{vertical:"",size:"large"},{default:r(()=>[t(l(Q),{type:"info",title:"提示",style:{"margin-bottom":"16px"}},{default:r(()=>[...e[70]||(e[70]=[s(" API Key 和渠道配置请前往「渠道管理」页面进行设置 ",-1)])]),_:1}),t(l(v),{title:"AI触发配置"},{default:r(()=>[t(l(Q),{type:"info",style:{"margin-bottom":"16px"}},{default:r(()=>[...e[71]||(e[71]=[s(" 配置机器人何时响应消息。私聊和群聊可独立配置触发方式。 ",-1)])]),_:1}),t(l(b),{"label-placement":"left","label-width":"140"},{default:r(()=>[t(l(m),{"title-placement":"left"},{default:r(()=>[...e[72]||(e[72]=[s("私聊触发",-1)])]),_:1}),t(l(o),{label:"响应私聊"},{default:r(()=>[t(l(i),{value:a.trigger.private.enabled,"onUpdate:value":e[0]||(e[0]=u=>a.trigger.private.enabled=u)},null,8,["value"])]),_:1}),a.trigger.private.enabled?(p(),M(l(o),{key:0,label:"私聊模式"},{default:r(()=>[t(l(ue),{value:a.trigger.private.mode,"onUpdate:value":e[1]||(e[1]=u=>a.trigger.private.mode=u),options:K,style:{width:"180px"}},null,8,["value"])]),_:1})):k("",!0),t(l(m),{"title-placement":"left"},{default:r(()=>[...e[73]||(e[73]=[s("群聊触发",-1)])]),_:1}),t(l(o),{label:"响应群聊"},{default:r(()=>[t(l(i),{value:a.trigger.group.enabled,"onUpdate:value":e[2]||(e[2]=u=>a.trigger.group.enabled=u)},null,8,["value"])]),_:1}),a.trigger.group.enabled?(p(),q(D,{key:1},[t(l(o),{label:"@机器人触发"},{default:r(()=>[t(l(i),{value:a.trigger.group.at,"onUpdate:value":e[3]||(e[3]=u=>a.trigger.group.at=u)},null,8,["value"])]),_:1}),t(l(o),{label:"前缀触发"},{default:r(()=>[t(l(i),{value:a.trigger.group.prefix,"onUpdate:value":e[4]||(e[4]=u=>a.trigger.group.prefix=u)},null,8,["value"])]),_:1}),t(l(o),{label:"关键词触发"},{default:r(()=>[t(l(i),{value:a.trigger.group.keyword,"onUpdate:value":e[5]||(e[5]=u=>a.trigger.group.keyword=u)},null,8,["value"])]),_:1}),t(l(o),{label:"随机触发"},{default:r(()=>[t(l(N),{align:"center"},{default:r(()=>[t(l(i),{value:a.trigger.group.random,"onUpdate:value":e[6]||(e[6]=u=>a.trigger.group.random=u)},null,8,["value"]),a.trigger.group.random?(p(),q(D,{key:0},[t(l($),{value:a.trigger.group.randomRate,"onUpdate:value":e[7]||(e[7]=u=>a.trigger.group.randomRate=u),min:0,max:.5,step:.01,style:{width:"120px"}},null,8,["value"]),w("span",null,le((a.trigger.group.randomRate*100).toFixed(0))+"%",1)],64)):k("",!0)]),_:1})]),_:1})],64)):k("",!0),t(l(m),{"title-placement":"left"},{default:r(()=>[...e[74]||(e[74]=[s("触发词",-1)])]),_:1}),t(l(o),{label:"触发前缀"},{default:r(()=>[t(l(f),{value:z.value,"onUpdate:value":e[8]||(e[8]=u=>z.value=u),placeholder:"多个用逗号分隔，如: #chat, 小助手"},null,8,["value"])]),_:1}),a.trigger.group.keyword?(p(),M(l(o),{key:2,label:"触发关键词"},{default:r(()=>[t(l(f),{value:B.value,"onUpdate:value":e[9]||(e[9]=u=>B.value=u),placeholder:"消息包含这些词时触发"},null,8,["value"])]),_:1})):k("",!0),t(l(m),{"title-placement":"left"},{default:r(()=>[...e[75]||(e[75]=[s("其他",-1)])]),_:1}),t(l(o),{label:"采集群消息"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(i),{value:a.trigger.collectGroupMsg,"onUpdate:value":e[10]||(e[10]=u=>a.trigger.collectGroupMsg=u)},null,8,["value"])]),default:r(()=>[e[76]||(e[76]=s(" 用于记忆和上下文分析 ",-1))]),_:1})]),_:1}),t(l(m),{"title-placement":"left"},{default:r(()=>[...e[77]||(e[77]=[s("访问控制",-1)])]),_:1}),t(l(te),{cols:2,"x-gap":24,responsive:"screen","collapsed-cols":1},{default:r(()=>[t(l(S),null,{default:r(()=>[t(l(o),{label:"群白名单"},{default:r(()=>[t(l(T),{value:a.trigger.whitelistGroups,"onUpdate:value":e[11]||(e[11]=u=>a.trigger.whitelistGroups=u)},null,8,["value"])]),_:1})]),_:1}),t(l(S),null,{default:r(()=>[t(l(o),{label:"群黑名单"},{default:r(()=>[t(l(T),{value:a.trigger.blacklistGroups,"onUpdate:value":e[12]||(e[12]=u=>a.trigger.blacklistGroups=u)},null,8,["value"])]),_:1})]),_:1}),t(l(S),null,{default:r(()=>[t(l(o),{label:"用户白名单"},{default:r(()=>[t(l(T),{value:a.trigger.whitelistUsers,"onUpdate:value":e[13]||(e[13]=u=>a.trigger.whitelistUsers=u)},null,8,["value"])]),_:1})]),_:1}),t(l(S),null,{default:r(()=>[t(l(o),{label:"用户黑名单"},{default:r(()=>[t(l(T),{value:a.trigger.blacklistUsers,"onUpdate:value":e[14]||(e[14]=u=>a.trigger.blacklistUsers=u)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(l(v),{title:"基础配置"},{default:r(()=>[t(l(b),{"label-placement":"left","label-width":"140"},{default:r(()=>[t(l(o),{label:"命令前缀"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(f),{value:a.basic.commandPrefix,"onUpdate:value":e[15]||(e[15]=u=>a.basic.commandPrefix=u),placeholder:"#ai"},null,8,["value"])]),default:r(()=>[e[78]||(e[78]=s(" 管理命令的前缀，如 #ai帮助、#ai状态 等 ",-1))]),_:1})]),_:1}),t(l(o),{label:"思考提示"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(i),{value:a.basic.showThinkingMessage,"onUpdate:value":e[16]||(e[16]=u=>a.basic.showThinkingMessage=u)},null,8,["value"])]),default:r(()=>[e[79]||(e[79]=s(' 开启后，AI处理时会先发送"思考中..."提示 ',-1))]),_:1})]),_:1}),t(l(o),{label:"引用回复"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(i),{value:a.basic.quoteReply,"onUpdate:value":e[17]||(e[17]=u=>a.basic.quoteReply=u)},null,8,["value"])]),default:r(()=>[e[80]||(e[80]=s(" 开启后，AI回复会引用触发消息 ",-1))]),_:1})]),_:1}),t(l(o),{label:"调试模式"},{default:r(()=>[t(l(i),{value:a.basic.debug,"onUpdate:value":e[18]||(e[18]=u=>a.basic.debug=u)},null,8,["value"])]),_:1}),a.basic.debug?(p(),M(l(o),{key:0,label:"调试仅控制台"},{default:r(()=>[t(l(i),{value:a.basic.debugToConsoleOnly,"onUpdate:value":e[19]||(e[19]=u=>a.basic.debugToConsoleOnly=u)},null,8,["value"])]),_:1})):k("",!0),t(l(m),{"title-placement":"left"},{default:r(()=>[...e[81]||(e[81]=[s("自动撤回",-1)])]),_:1}),t(l(o),{label:"启用自动撤回"},{default:r(()=>[t(l(i),{value:a.basic.autoRecall.enabled,"onUpdate:value":e[20]||(e[20]=u=>a.basic.autoRecall.enabled=u)},null,8,["value"])]),_:1}),a.basic.autoRecall.enabled?(p(),M(l(o),{key:1,label:"撤回延迟(秒)"},{default:r(()=>[t(l(C),{value:a.basic.autoRecall.delay,"onUpdate:value":e[21]||(e[21]=u=>a.basic.autoRecall.delay=u),min:5,max:300},null,8,["value"])]),_:1})):k("",!0),a.basic.autoRecall.enabled?(p(),M(l(o),{key:2,label:"撤回错误消息"},{default:r(()=>[t(l(i),{value:a.basic.autoRecall.recallError,"onUpdate:value":e[22]||(e[22]=u=>a.basic.autoRecall.recallError=u)},null,8,["value"])]),_:1})):k("",!0)]),_:1})]),_:1}),t(l(v),{title:"管理配置"},{default:r(()=>[t(l(b),{"label-placement":"left","label-width":"140"},{default:r(()=>[t(l(o),{label:"主人QQ"},{default:r(()=>[t(l(f),{value:P.value,"onUpdate:value":e[23]||(e[23]=u=>P.value=u),placeholder:"多个用逗号分隔，留空使用Yunzai配置",onBlur:W},null,8,["value"])]),_:1}),t(l(o),{label:"登录链接私聊推送"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(i),{value:a.admin.loginNotifyPrivate,"onUpdate:value":e[24]||(e[24]=u=>a.admin.loginNotifyPrivate=u)},null,8,["value"])]),default:r(()=>[e[82]||(e[82]=s(" 开启后，群聊中触发管理面板命令时会私聊推送登录链接 ",-1))]),_:1})]),_:1}),t(l(o),{label:"敏感命令仅主人"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(i),{value:a.admin.sensitiveCommandMasterOnly,"onUpdate:value":e[25]||(e[25]=u=>a.admin.sensitiveCommandMasterOnly=u)},null,8,["value"])]),default:r(()=>[e[83]||(e[83]=s(" 开启后，敏感命令（如管理面板）仅限主人使用 ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(l(v),{title:"模型配置"},{default:r(()=>[t(l(b),{"label-placement":"left","label-width":"140"},{default:r(()=>[t(l(o),{label:"默认模型"},{default:r(()=>[t(l(f),{value:a.llm.defaultModel,"onUpdate:value":e[27]||(e[27]=u=>a.llm.defaultModel=u),placeholder:"选择模型",readonly:"",onClick:e[28]||(e[28]=u=>g("defaultModel"))},{suffix:r(()=>[t(l(y),{size:"small",onClick:e[26]||(e[26]=x(u=>g("defaultModel"),["stop"]))},{default:r(()=>[...e[84]||(e[84]=[s("选择",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(l(m),{"title-placement":"left"},{default:r(()=>[...e[85]||(e[85]=[s("模型分类 (可选，留空使用默认模型)",-1)])]),_:1}),t(l(o),{label:"对话模型"},{default:r(()=>[t(l(f),{value:a.llm.models.chat,"onUpdate:value":e[30]||(e[30]=u=>a.llm.models.chat=u),placeholder:"普通聊天使用的模型",readonly:"",onClick:e[31]||(e[31]=u=>g("models.chat"))},{suffix:r(()=>[t(l(y),{size:"small",onClick:e[29]||(e[29]=x(u=>g("models.chat"),["stop"]))},{default:r(()=>[...e[86]||(e[86]=[s("选择",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(l(o),{label:"伪人模型"},{default:r(()=>[t(l(f),{value:a.llm.models.roleplay,"onUpdate:value":e[33]||(e[33]=u=>a.llm.models.roleplay=u),placeholder:"模拟真人回复的模型",readonly:"",onClick:e[34]||(e[34]=u=>g("models.roleplay"))},{suffix:r(()=>[t(l(y),{size:"small",onClick:e[32]||(e[32]=x(u=>g("models.roleplay"),["stop"]))},{default:r(()=>[...e[87]||(e[87]=[s("选择",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(l(o),{label:"工具调用模型"},{default:r(()=>[t(l(f),{value:a.llm.models.toolCall,"onUpdate:value":e[36]||(e[36]=u=>a.llm.models.toolCall=u),placeholder:"Function Calling 模型",readonly:"",onClick:e[37]||(e[37]=u=>g("models.toolCall"))},{suffix:r(()=>[t(l(y),{size:"small",onClick:e[35]||(e[35]=x(u=>g("models.toolCall"),["stop"]))},{default:r(()=>[...e[88]||(e[88]=[s("选择",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(l(o),{label:"搜索模型"},{default:r(()=>[t(l(f),{value:a.llm.models.search,"onUpdate:value":e[39]||(e[39]=u=>a.llm.models.search=u),placeholder:"联网搜索使用的模型",readonly:"",onClick:e[40]||(e[40]=u=>g("models.search"))},{suffix:r(()=>[t(l(y),{size:"small",onClick:e[38]||(e[38]=x(u=>g("models.search"),["stop"]))},{default:r(()=>[...e[89]||(e[89]=[s("选择",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(l(o),{label:"思考模型"},{default:r(()=>[t(l(f),{value:a.llm.models.reasoning,"onUpdate:value":e[42]||(e[42]=u=>a.llm.models.reasoning=u),placeholder:"深度推理使用的模型",readonly:"",onClick:e[43]||(e[43]=u=>g("models.reasoning"))},{suffix:r(()=>[t(l(y),{size:"small",onClick:e[41]||(e[41]=x(u=>g("models.reasoning"),["stop"]))},{default:r(()=>[...e[90]||(e[90]=[s("选择",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(l(v),{title:"伪人模式"},{default:r(()=>[t(l(b),{"label-placement":"left","label-width":"140"},{default:r(()=>[t(l(o),{label:"启用"},{default:r(()=>[t(l(i),{value:a.bym.enable,"onUpdate:value":e[44]||(e[44]=u=>a.bym.enable=u)},null,8,["value"])]),_:1}),t(l(o),{label:"触发概率"},{default:r(()=>[t(l(N),{vertical:"",style:{width:"100%"}},{default:r(()=>[t(l($),{value:a.bym.probability,"onUpdate:value":e[45]||(e[45]=u=>a.bym.probability=u),min:0,max:1,step:.01,marks:{0:"0%",.5:"50%",1:"100%"}},null,8,["value"]),t(l(C),{value:a.bym.probability,"onUpdate:value":e[46]||(e[46]=u=>a.bym.probability=u),min:0,max:1,step:.01,size:"small",style:{width:"120px"}},null,8,["value"])]),_:1})]),_:1}),t(l(o),{label:"回复温度"},{default:r(()=>[t(l(N),{vertical:"",style:{width:"100%"}},{default:r(()=>[t(l($),{value:a.bym.temperature,"onUpdate:value":e[47]||(e[47]=u=>a.bym.temperature=u),min:0,max:2,step:.1,marks:{0:"0",1:"1",2:"2"}},null,8,["value"]),t(l(C),{value:a.bym.temperature,"onUpdate:value":e[48]||(e[48]=u=>a.bym.temperature=u),min:0,max:2,step:.1,size:"small",style:{width:"120px"}},null,8,["value"])]),_:1})]),_:1}),t(l(o),{label:"最大 Token"},{default:r(()=>[t(l(C),{value:a.bym.maxTokens,"onUpdate:value":e[49]||(e[49]=u=>a.bym.maxTokens=u),min:10,max:1e3,step:10,style:{width:"100%"}},null,8,["value"])]),_:1}),t(l(o),{label:"启用记忆"},{default:r(()=>[t(l(i),{value:a.bym.recall,"onUpdate:value":e[50]||(e[50]=u=>a.bym.recall=u)},null,8,["value"])]),_:1}),t(l(o),{label:"使用模型"},{default:r(()=>[t(l(f),{value:a.bym.model,"onUpdate:value":e[52]||(e[52]=u=>a.bym.model=u),placeholder:"留空使用默认模型",readonly:"",onClick:e[53]||(e[53]=u=>g("bymModel"))},{suffix:r(()=>[t(l(y),{size:"small",onClick:e[51]||(e[51]=x(u=>g("bymModel"),["stop"]))},{default:r(()=>[...e[91]||(e[91]=[s("选择",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(l(o),{label:"系统提示词"},{default:r(()=>[t(l(f),{value:a.bym.systemPrompt,"onUpdate:value":e[54]||(e[54]=u=>a.bym.systemPrompt=u),type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"伪人模式的系统提示词"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(l(v),{title:"工具调用"},{default:r(()=>[t(l(b),{"label-placement":"left","label-width":"140"},{default:r(()=>[t(l(o),{label:"显示调用日志"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(i),{value:a.tools.showCallLogs,"onUpdate:value":e[55]||(e[55]=u=>a.tools.showCallLogs=u)},null,8,["value"])]),default:r(()=>[e[92]||(e[92]=s(" 开启后，显示工具调用的详细日志 ",-1))]),_:1})]),_:1}),t(l(o),{label:"日志合并转发"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(i),{value:a.tools.useForwardMsg,"onUpdate:value":e[56]||(e[56]=u=>a.tools.useForwardMsg=u)},null,8,["value"])]),default:r(()=>[e[93]||(e[93]=s(" 开启后，工具调用日志使用合并转发发送 ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(l(v),{title:"深度思考"},{default:r(()=>[t(l(b),{"label-placement":"left","label-width":"140"},{default:r(()=>[t(l(o),{label:"显示思考内容"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(i),{value:a.thinking.showThinkingContent,"onUpdate:value":e[57]||(e[57]=u=>a.thinking.showThinkingContent=u)},null,8,["value"])]),default:r(()=>[e[94]||(e[94]=s(" 开启后，显示AI的思考过程 ",-1))]),_:1})]),_:1}),t(l(o),{label:"思考合并转发"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(i),{value:a.thinking.useForwardMsg,"onUpdate:value":e[58]||(e[58]=u=>a.thinking.useForwardMsg=u)},null,8,["value"])]),default:r(()=>[e[95]||(e[95]=s(" 开启后，思考内容使用合并转发发送 ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(l(v),{title:"高级功能"},{default:r(()=>[t(l(b),{"label-placement":"left","label-width":"140"},{default:r(()=>[t(l(m),{"title-placement":"left"},{default:r(()=>[...e[96]||(e[96]=[s("群聊总结",-1)])]),_:1}),t(l(o),{label:"启用"},{default:r(()=>[t(l(i),{value:a.features.groupSummary.enabled,"onUpdate:value":e[59]||(e[59]=u=>a.features.groupSummary.enabled=u)},null,8,["value"])]),_:1}),t(l(o),{label:"最大消息数"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(C),{value:a.features.groupSummary.maxMessages,"onUpdate:value":e[60]||(e[60]=u=>a.features.groupSummary.maxMessages=u),min:10,max:500,step:10,style:{width:"150px"}},null,8,["value"])]),default:r(()=>[e[97]||(e[97]=s(" 总结时分析的最大消息数量 ",-1))]),_:1})]),_:1}),t(l(m),{"title-placement":"left"},{default:r(()=>[...e[98]||(e[98]=[s("个人画像",-1)])]),_:1}),t(l(o),{label:"启用"},{default:r(()=>[t(l(i),{value:a.features.userPortrait.enabled,"onUpdate:value":e[61]||(e[61]=u=>a.features.userPortrait.enabled=u)},null,8,["value"])]),_:1}),t(l(o),{label:"最少消息数"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(C),{value:a.features.userPortrait.minMessages,"onUpdate:value":e[62]||(e[62]=u=>a.features.userPortrait.minMessages=u),min:5,max:100,step:5,style:{width:"150px"}},null,8,["value"])]),default:r(()=>[e[99]||(e[99]=s(" 生成画像需要的最少消息数量 ",-1))]),_:1})]),_:1}),t(l(m),{"title-placement":"left"},{default:r(()=>[...e[100]||(e[100]=[s("戳一戳响应",-1)])]),_:1}),t(l(o),{label:"启用"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(i),{value:a.features.poke.enabled,"onUpdate:value":e[63]||(e[63]=u=>a.features.poke.enabled=u)},null,8,["value"])]),default:r(()=>[e[101]||(e[101]=s(" 开启后，被戳时会使用AI人设回复 ",-1))]),_:1})]),_:1}),t(l(o),{label:"自动回戳"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(i),{value:a.features.poke.pokeBack,"onUpdate:value":e[64]||(e[64]=u=>a.features.poke.pokeBack=u),disabled:!a.features.poke.enabled},null,8,["value","disabled"])]),default:r(()=>[e[102]||(e[102]=s(" 回复后自动戳回去 ",-1))]),_:1})]),_:1}),t(l(o),{label:"备用回复"},{default:r(()=>[t(l(f),{value:a.features.poke.message,"onUpdate:value":e[65]||(e[65]=u=>a.features.poke.message=u),placeholder:"AI回复失败时的备用回复",disabled:!a.features.poke.enabled},null,8,["value","disabled"])]),_:1}),t(l(m),{"title-placement":"left"},{default:r(()=>[...e[103]||(e[103]=[s("表情回应",-1)])]),_:1}),t(l(o),{label:"启用"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(i),{value:a.features.reaction.enabled,"onUpdate:value":e[66]||(e[66]=u=>a.features.reaction.enabled=u)},null,8,["value"])]),default:r(()=>[e[104]||(e[104]=s(" 开启后，收到表情回应时会使用AI人设处理（需适配器支持） ",-1))]),_:1})]),_:1}),t(l(m),{"title-placement":"left"},{default:r(()=>[...e[105]||(e[105]=[s("长期记忆",-1)])]),_:1}),t(l(o),{label:"启用记忆"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(i),{value:a.memory.enabled,"onUpdate:value":e[67]||(e[67]=u=>a.memory.enabled=u)},null,8,["value"])]),default:r(()=>[e[106]||(e[106]=s(" 启用后，AI会记住用户透露的个人信息和偏好 ",-1))]),_:1})]),_:1}),t(l(o),{label:"自动提取"},{default:r(()=>[t(l(d),{trigger:"hover"},{trigger:r(()=>[t(l(i),{value:a.memory.autoExtract,"onUpdate:value":e[68]||(e[68]=u=>a.memory.autoExtract=u),disabled:!a.memory.enabled},null,8,["value","disabled"])]),default:r(()=>[e[107]||(e[107]=s(" 自动从对话中提取值得记忆的信息 ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(l(Q),{type:"info",title:"命令提示",style:{"margin-top":"8px"}},{default:r(()=>[...e[108]||(e[108]=[w("div",null,[s("• "),w("strong",null,"#群聊总结"),s(" - 总结群聊消息")],-1),w("div",null,[s("• "),w("strong",null,"#个人画像"),s(" - 分析自己的用户画像")],-1),w("div",null,[s("• "),w("strong",null,"#分析 @用户"),s(" - 分析指定用户的画像")],-1)])]),_:1}),t(l(N),{justify:"end",style:{"margin-top":"16px",position:"sticky",bottom:"16px",background:"var(--n-color)",padding:"12px","border-radius":"8px","box-shadow":"0 -2px 8px rgba(0,0,0,0.1)"}},{default:r(()=>[t(l(y),{type:"primary",size:"large",onClick:Z,loading:j.value},{default:r(()=>[...e[109]||(e[109]=[s(" 保存配置 ",-1)])]),_:1},8,["loading"])]),_:1}),t(l(ae),{show:O.value,"onUpdate:show":e[69]||(e[69]=u=>O.value=u),preset:"card",title:"选择模型",style:{width:"800px","max-height":"85vh"}},{default:r(()=>[t(re,{"all-models":F.value,value:[],multiple:!1,"onUpdate:value":H},null,8,["all-models"])]),_:1},8,["show"])]),_:1}))}};export{we as default};
