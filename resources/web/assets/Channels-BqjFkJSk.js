import{d as F,h as s,c as w,a as ce,b as T,e as z,f as k,u as ne,g as Ne,i as re,p as pe,j as Se,k as Te,r as A,l as L,m as we,n as se,o as Ve,q as ke,s as Ce,t as W,N as Ae,w as Be,v as De,x as ee,y as ze,z as le,A as Ke,B as Pe,C as Ee,D as ie,E as Me,F as ve,G as Y,H as Le,I as Fe,J as Oe,K as je,L as qe,M as _e,O as We,P as G,Q as B,R as ge,S as Ge,T as oe,U as de,V as He,_ as Ze,W as Je,X as Qe,Y as Xe,Z as o,$ as n,a0 as E,a1 as _,a2 as Ye,a3 as r,a4 as ea,a5 as j,a6 as he,a7 as aa,a8 as U,a9 as ta,aa as la,ab as na}from"./index-CRg1HdVx.js";import{N as ae,M as ra}from"./ModelSelector-BpyNIQHV.js";import{s as sa,r as ia,A as oa,N as da,a as ua}from"./DataTable-DbuCZ_k3.js";import{N as ye}from"./Select-BGDn_bB1.js";import{A as be,N as Z}from"./Switch-B98PVpOU.js";import{R as ca,N as J}from"./InputNumber-SCy6odil.js";import{N as pa,a as ma}from"./Popconfirm-61UpVbqn.js";import"./text-DAbFSmry.js";import"./Divider-BMulYv-W.js";import"./Empty-DAAIJU8L.js";const fa=F({name:"ArrowUp",render(){return s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s("g",{fill:"none"},s("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),va=F({name:"ChevronLeft",render(){return s("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}}),x="0!important",Re="-1px!important";function Q(l){return T(`${l}-type`,[z("& +",[w("button",{},[T(`${l}-type`,[k("border",{borderLeftWidth:x}),k("state-border",{left:Re})])])])])}function X(l){return T(`${l}-type`,[z("& +",[w("button",[T(`${l}-type`,[k("border",{borderTopWidth:x}),k("state-border",{top:Re})])])])])}const ga=w("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[ce("vertical",{flexDirection:"row"},[ce("rtl",[w("button",[z("&:first-child:not(:last-child)",`
 margin-right: ${x};
 border-top-right-radius: ${x};
 border-bottom-right-radius: ${x};
 `),z("&:last-child:not(:first-child)",`
 margin-left: ${x};
 border-top-left-radius: ${x};
 border-bottom-left-radius: ${x};
 `),z("&:not(:first-child):not(:last-child)",`
 margin-left: ${x};
 margin-right: ${x};
 border-radius: ${x};
 `),Q("default"),T("ghost",[Q("primary"),Q("info"),Q("success"),Q("warning"),Q("error")])])])]),T("vertical",{flexDirection:"column"},[w("button",[z("&:first-child:not(:last-child)",`
 margin-bottom: ${x};
 margin-left: ${x};
 margin-right: ${x};
 border-bottom-left-radius: ${x};
 border-bottom-right-radius: ${x};
 `),z("&:last-child:not(:first-child)",`
 margin-top: ${x};
 margin-left: ${x};
 margin-right: ${x};
 border-top-left-radius: ${x};
 border-top-right-radius: ${x};
 `),z("&:not(:first-child):not(:last-child)",`
 margin: ${x};
 border-radius: ${x};
 `),X("default"),T("ghost",[X("primary"),X("info"),X("success"),X("warning"),X("error")])])])]),ha={size:{type:String,default:void 0},vertical:Boolean},ya=F({name:"ButtonGroup",props:ha,setup(l){const{mergedClsPrefixRef:d,mergedRtlRef:m}=ne(l);return Ne("-button-group",ga,d),pe(Se,l),{rtlEnabled:re("ButtonGroup",m,d),mergedClsPrefix:d}},render(){const{mergedClsPrefix:l}=this;return s("div",{class:[`${l}-button-group`,this.rtlEnabled&&`${l}-button-group--rtl`,this.vertical&&`${l}-button-group--vertical`],role:"group"},this.$slots)}}),ba=w("collapse","width: 100%;",[w("collapse-item",`
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 margin: var(--n-item-margin);
 `,[T("disabled",[k("header","cursor: not-allowed;",[k("header-main",`
 color: var(--n-title-text-color-disabled);
 `),w("collapse-item-arrow",`
 color: var(--n-arrow-color-disabled);
 `)])]),w("collapse-item","margin-left: 32px;"),z("&:first-child","margin-top: 0;"),z("&:first-child >",[k("header","padding-top: 0;")]),T("left-arrow-placement",[k("header",[w("collapse-item-arrow","margin-right: 4px;")])]),T("right-arrow-placement",[k("header",[w("collapse-item-arrow","margin-left: 4px;")])]),k("content-wrapper",[k("content-inner","padding-top: 16px;"),Te({duration:"0.15s"})]),T("active",[k("header",[T("active",[w("collapse-item-arrow","transform: rotate(90deg);")])])]),z("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),ce("disabled",[T("trigger-area-main",[k("header",[k("header-main","cursor: pointer;"),w("collapse-item-arrow","cursor: default;")])]),T("trigger-area-arrow",[k("header",[w("collapse-item-arrow","cursor: pointer;")])]),T("trigger-area-extra",[k("header",[k("header-extra","cursor: pointer;")])])]),k("header",`
 font-size: var(--n-title-font-size);
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: color .3s var(--n-bezier);
 position: relative;
 padding: var(--n-title-padding);
 color: var(--n-title-text-color);
 `,[k("header-main",`
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 color: var(--n-title-text-color);
 `),k("header-extra",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),w("collapse-item-arrow",`
 display: flex;
 transition:
 transform .15s var(--n-bezier),
 color .3s var(--n-bezier);
 font-size: 18px;
 color: var(--n-arrow-color);
 `)])])]),xa=Object.assign(Object.assign({},se.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},triggerAreas:{type:Array,default:()=>["main","extra","arrow"]},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),$e=Ce("n-collapse"),wa=F({name:"Collapse",props:xa,slots:Object,setup(l,{slots:d}){const{mergedClsPrefixRef:m,inlineThemeDisabled:u,mergedRtlRef:c}=ne(l),p=A(l.defaultExpandedNames),y=L(()=>l.expandedNames),C=we(y,p),V=se("Collapse","-collapse",ba,Ve,l,m);function v(P){const{"onUpdate:expandedNames":b,onUpdateExpandedNames:N,onExpandedNamesChange:$}=l;N&&W(N,P),b&&W(b,P),$&&W($,P),p.value=P}function I(P){const{onItemHeaderClick:b}=l;b&&W(b,P)}function t(P,b,N){const{accordion:$}=l,{value:D}=C;if($)P?(v([b]),I({name:b,expanded:!0,event:N})):(v([]),I({name:b,expanded:!1,event:N}));else if(!Array.isArray(D))v([b]),I({name:b,expanded:!0,event:N});else{const f=D.slice(),K=f.findIndex(q=>b===q);~K?(f.splice(K,1),v(f),I({name:b,expanded:!1,event:N})):(f.push(b),v(f),I({name:b,expanded:!0,event:N}))}}pe($e,{props:l,mergedClsPrefixRef:m,expandedNamesRef:C,slots:d,toggleItem:t});const S=re("Collapse",c,m),M=L(()=>{const{common:{cubicBezierEaseInOut:P},self:{titleFontWeight:b,dividerColor:N,titlePadding:$,titleTextColor:D,titleTextColorDisabled:f,textColor:K,arrowColor:q,fontSize:H,titleFontSize:i,arrowColorDisabled:e,itemMargin:a}}=V.value;return{"--n-font-size":H,"--n-bezier":P,"--n-text-color":K,"--n-divider-color":N,"--n-title-padding":$,"--n-title-font-size":i,"--n-title-text-color":D,"--n-title-text-color-disabled":f,"--n-title-font-weight":b,"--n-arrow-color":q,"--n-arrow-color-disabled":e,"--n-item-margin":a}}),R=u?ke("collapse",void 0,M,l):void 0;return{rtlEnabled:S,mergedTheme:V,mergedClsPrefix:m,cssVars:u?void 0:M,themeClass:R?.themeClass,onRender:R?.onRender}},render(){var l;return(l=this.onRender)===null||l===void 0||l.call(this),s("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),ka=F({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup(l){return{onceTrue:De(ee(l,"show"))}},render(){return s(Ae,null,{default:()=>{const{show:l,displayDirective:d,onceTrue:m,clsPrefix:u}=this,c=d==="show"&&m,p=s("div",{class:`${u}-collapse-item__content-wrapper`},s("div",{class:`${u}-collapse-item__content-inner`},this.$slots));return c?Be(p,[[ze,l]]):l?p:null}})}}),Ca={title:String,name:[String,Number],disabled:Boolean,displayDirective:String},ue=F({name:"CollapseItem",props:Ca,setup(l){const{mergedRtlRef:d}=ne(l),m=Pe(),u=Ee(()=>{var t;return(t=l.name)!==null&&t!==void 0?t:m}),c=ie($e);c||Me("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:p,props:y,mergedClsPrefixRef:C,slots:V}=c,v=L(()=>{const{value:t}=p;if(Array.isArray(t)){const{value:S}=u;return!~t.findIndex(M=>M===S)}else if(t){const{value:S}=u;return S!==t}return!0});return{rtlEnabled:re("Collapse",d,C),collapseSlots:V,randomName:m,mergedClsPrefix:C,collapsed:v,triggerAreas:ee(y,"triggerAreas"),mergedDisplayDirective:L(()=>{const{displayDirective:t}=l;return t||y.displayDirective}),arrowPlacement:L(()=>y.arrowPlacement),handleClick(t){let S="main";ve(t,"arrow")&&(S="arrow"),ve(t,"extra")&&(S="extra"),y.triggerAreas.includes(S)&&c&&!l.disabled&&c.toggleItem(v.value,u.value,t)}}},render(){const{collapseSlots:l,$slots:d,arrowPlacement:m,collapsed:u,mergedDisplayDirective:c,mergedClsPrefix:p,disabled:y,triggerAreas:C}=this,V=le(d.header,{collapsed:u},()=>[this.title]),v=d["header-extra"]||l["header-extra"],I=d.arrow||l.arrow;return s("div",{class:[`${p}-collapse-item`,`${p}-collapse-item--${m}-arrow-placement`,y&&`${p}-collapse-item--disabled`,!u&&`${p}-collapse-item--active`,C.map(t=>`${p}-collapse-item--trigger-area-${t}`)]},s("div",{class:[`${p}-collapse-item__header`,!u&&`${p}-collapse-item__header--active`]},s("div",{class:`${p}-collapse-item__header-main`,onClick:this.handleClick},m==="right"&&V,s("div",{class:`${p}-collapse-item-arrow`,key:this.rtlEnabled?0:1,"data-arrow":!0},le(I,{collapsed:u},()=>[s(Y,{clsPrefix:p},{default:()=>this.rtlEnabled?s(va,null):s(Le,null)})])),m==="left"&&V),Ke(v,{collapsed:u},t=>s("div",{class:`${p}-collapse-item__header-extra`,onClick:this.handleClick,"data-extra":!0},t))),s(ka,{clsPrefix:p,displayDirective:c,show:!u},d))}}),xe=F({name:"RadioButton",props:ia,setup:sa,render(){const{mergedClsPrefix:l}=this;return s("label",{class:[`${l}-radio-button`,this.mergedDisabled&&`${l}-radio-button--disabled`,this.renderSafeChecked&&`${l}-radio-button--checked`,this.focus&&[`${l}-radio-button--focus`]]},s("input",{ref:"inputRef",type:"radio",class:`${l}-radio-input`,value:this.value,name:this.mergedName,checked:this.renderSafeChecked,disabled:this.mergedDisabled,onChange:this.handleRadioInputChange,onFocus:this.handleRadioInputFocus,onBlur:this.handleRadioInputBlur}),s("div",{class:`${l}-radio-button__state-border`}),Fe(this.$slots.default,d=>!d&&!this.label?null:s("div",{ref:"labelRef",class:`${l}-radio__label`},d||this.label)))}});function Pa(){return We}const Ra=Oe({name:"DynamicInput",common:_e,peers:{Input:qe,Button:je},self:Pa}),me=Ce("n-dynamic-input"),$a=F({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:l,placeholderRef:d}=ie(me);return{mergedTheme:l,placeholder:d}},render(){const{mergedTheme:l,placeholder:d,value:m,clsPrefix:u,onUpdateValue:c,disabled:p}=this;return s("div",{class:`${u}-dynamic-input-preset-input`},s(G,{theme:l.peers.Input,"theme-overrides":l.peerOverrides.Input,value:m,placeholder:d,onUpdateValue:c,disabled:p}))}}),Ua=F({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(l){const{mergedThemeRef:d,keyPlaceholderRef:m,valuePlaceholderRef:u}=ie(me);return{mergedTheme:d,keyPlaceholder:m,valuePlaceholder:u,handleKeyInput(c){l.onUpdateValue({key:c,value:l.value.value})},handleValueInput(c){l.onUpdateValue({key:l.value.key,value:c})}}},render(){const{mergedTheme:l,keyPlaceholder:d,valuePlaceholder:m,value:u,clsPrefix:c,disabled:p}=this;return s("div",{class:`${c}-dynamic-input-preset-pair`},s(G,{theme:l.peers.Input,"theme-overrides":l.peerOverrides.Input,value:u.key,class:`${c}-dynamic-input-pair-input`,placeholder:d,onUpdateValue:this.handleKeyInput,disabled:p}),s(G,{theme:l.peers.Input,"theme-overrides":l.peerOverrides.Input,value:u.value,class:`${c}-dynamic-input-pair-input`,placeholder:m,onUpdateValue:this.handleValueInput,disabled:p}))}}),Ia=w("dynamic-input",{width:"100%"},[w("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[w("dynamic-input-preset-input",{flex:1,alignItems:"center"}),w("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[w("dynamic-input-pair-input",[z("&:first-child",{"margin-right":"12px"})])]),k("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[T("icon",{cursor:"pointer"})]),z("&:last-child",{marginBottom:0})]),w("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[w("form-item-blank",{paddingTop:"0 !important"})])]),te=new WeakMap,Na=Object.assign(Object.assign({},se.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),Sa=F({name:"DynamicInput",props:Na,setup(l,{slots:d}){const{mergedComponentPropsRef:m,mergedClsPrefixRef:u,mergedRtlRef:c,inlineThemeDisabled:p}=ne(),y=ie(He,null),C=A(l.defaultValue),V=ee(l,"value"),v=we(V,C),I=se("DynamicInput","-dynamic-input",Ia,Ra,l,u),t=L(()=>{const{value:e}=v;if(Array.isArray(e)){const{max:a}=l;return a!==void 0&&e.length>=a}return!1}),S=L(()=>{const{value:e}=v;return Array.isArray(e)?e.length<=l.min:!0}),M=L(()=>{var e,a;return(a=(e=m?.value)===null||e===void 0?void 0:e.DynamicInput)===null||a===void 0?void 0:a.buttonSize});function R(e){const{onInput:a,"onUpdate:value":h,onUpdateValue:g}=l;a&&W(a,e),h&&W(h,e),g&&W(g,e),C.value=e}function P(e,a){if(e==null||typeof e!="object")return a;const h=oe(e)?de(e):e;let g=te.get(h);return g===void 0&&te.set(h,g=Pe()),g}function b(e,a){const{value:h}=v,g=Array.from(h??[]),O=g[e];if(g[e]=a,O&&a&&typeof O=="object"&&typeof a=="object"){const Ue=oe(O)?de(O):O,Ie=oe(a)?de(a):a,fe=te.get(Ue);fe!==void 0&&te.set(Ie,fe)}R(g)}function N(){$(-1)}function $(e){const{value:a}=v,{onCreate:h}=l,g=Array.from(a??[]);if(h)g.splice(e+1,0,h(e+1)),R(g);else if(d.default)g.splice(e+1,0,null),R(g);else switch(l.preset){case"input":g.splice(e+1,0,""),R(g);break;case"pair":g.splice(e+1,0,{key:"",value:""}),R(g);break}}function D(e){const{value:a}=v;if(!Array.isArray(a))return;const{min:h}=l;if(a.length<=h)return;const{onRemove:g}=l;g&&g(e);const O=Array.from(a);O.splice(e,1),R(O)}function f(e,a,h){if(a<0||h<0||a>=e.length||h>=e.length||a===h)return;const g=e[a];e[a]=e[h],e[h]=g}function K(e,a){const{value:h}=v;if(!Array.isArray(h))return;const g=Array.from(h);e==="up"&&f(g,a,a-1),e==="down"&&f(g,a,a+1),R(g)}pe(me,{mergedThemeRef:I,keyPlaceholderRef:ee(l,"keyPlaceholder"),valuePlaceholderRef:ee(l,"valuePlaceholder"),placeholderRef:ee(l,"placeholder")});const q=re("DynamicInput",c,u),H=L(()=>{const{self:{actionMargin:e,actionMarginRtl:a}}=I.value;return{"--action-margin":e,"--action-margin-rtl":a}}),i=p?ke("dynamic-input",void 0,H,l):void 0;return{locale:Ge("DynamicInput").localeRef,rtlEnabled:q,buttonSize:M,mergedClsPrefix:u,NFormItem:y,uncontrolledValue:C,mergedValue:v,insertionDisabled:t,removeDisabled:S,handleCreateClick:N,ensureKey:P,handleValueChange:b,remove:D,move:K,createItem:$,mergedTheme:I,cssVars:p?void 0:H,themeClass:i?.themeClass,onRender:i?.onRender}},render(){const{$slots:l,itemClass:d,buttonSize:m,mergedClsPrefix:u,mergedValue:c,locale:p,mergedTheme:y,keyField:C,itemStyle:V,preset:v,showSortButton:I,NFormItem:t,ensureKey:S,handleValueChange:M,remove:R,createItem:P,move:b,onRender:N,disabled:$}=this;return N?.(),s("div",{class:[`${u}-dynamic-input`,this.rtlEnabled&&`${u}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(c)||c.length===0?s(B,Object.assign({block:!0,ghost:!0,dashed:!0,size:m},this.createButtonProps,{disabled:this.insertionDisabled||$,theme:y.peers.Button,themeOverrides:y.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>ge(l["create-button-default"],()=>[p.create]),icon:()=>ge(l["create-button-icon"],()=>[s(Y,{clsPrefix:u},{default:()=>s(be,null)})])}):c.map((D,f)=>s("div",{key:C?D[C]:S(D,f),"data-key":C?D[C]:S(D,f),class:[`${u}-dynamic-input-item`,d],style:V},le(l.default,{value:c[f],index:f},()=>[v==="input"?s($a,{disabled:$,clsPrefix:u,value:c[f],parentPath:t?t.path.value:void 0,path:t?.path.value?`${t.path.value}[${f}]`:void 0,onUpdateValue:K=>{M(f,K)}}):v==="pair"?s(Ua,{disabled:$,clsPrefix:u,value:c[f],parentPath:t?t.path.value:void 0,path:t?.path.value?`${t.path.value}[${f}]`:void 0,onUpdateValue:K=>{M(f,K)}}):null]),le(l.action,{value:c[f],index:f,create:P,remove:R,move:b},()=>[s("div",{class:`${u}-dynamic-input-item__action`},s(ya,{size:m},{default:()=>[s(B,{disabled:this.removeDisabled||$,theme:y.peers.Button,themeOverrides:y.peerOverrides.Button,circle:!0,onClick:()=>{R(f)}},{icon:()=>s(Y,{clsPrefix:u},{default:()=>s(ca,null)})}),s(B,{disabled:this.insertionDisabled||$,circle:!0,theme:y.peers.Button,themeOverrides:y.peerOverrides.Button,onClick:()=>{P(f)}},{icon:()=>s(Y,{clsPrefix:u},{default:()=>s(be,null)})}),I?s(B,{disabled:f===0||$,circle:!0,theme:y.peers.Button,themeOverrides:y.peerOverrides.Button,onClick:()=>{b("up",f)}},{icon:()=>s(Y,{clsPrefix:u},{default:()=>s(fa,null)})}):null,I?s(B,{disabled:f===c.length-1||$,circle:!0,theme:y.peers.Button,themeOverrides:y.peerOverrides.Button,onClick:()=>{b("down",f)}},{icon:()=>s(Y,{clsPrefix:u},{default:()=>s(oa,null)})}):null]}))]))))}}),Ta={style:{display:"flex","align-items":"center",width:"100%",gap:"10px"}},Va={__name:"Channels",setup(l){const d=Je(),m=A([]),u=A(!1),c=A(!1);A(!1);const p=A(!1),y=A(!1),C=A(""),V=A([]),v=A([]);A("");const I=A(null),t=A({name:"",adapterType:"openai",baseUrl:"",apiKey:"",apiKeys:[],strategy:"round-robin",models:[],priority:1,enabled:!0,advanced:{streaming:{enabled:!1,chunkSize:1024},thinking:{enableReasoning:!1,defaultLevel:"medium",adaptThinking:!0,sendThinkingAsMessage:!1},llm:{temperature:.7,maxTokens:4e3,topP:1,frequencyPenalty:0,presencePenalty:0}}}),S={name:{required:!0,message:"请输入名称",trigger:"blur"},adapterType:{required:!0,message:"请选择类型",trigger:"change"},baseUrl:{required:!0,message:"请输入BaseURL",trigger:"blur"},apiKey:{required:!0,message:"请输入API Key",trigger:"blur"}},M=[{title:"名称",key:"name"},{title:"类型",key:"adapterType"},{title:"BaseURL",key:"baseUrl",ellipsis:{tooltip:!0}},{title:"启用",key:"enabled",width:80,render(i){return s(Z,{value:i.enabled,onUpdateValue:e=>R(i,e)})}},{title:"状态",key:"status",width:80,render(i){let e="idle",a="default";return i.enabled?i.lastError?(e="错误",a="error"):i.lastUsed?(e="正常",a="success"):(e="待测试",a="info"):(e="已禁用",a="warning"),s(na,{type:a,size:"small"},{default:()=>e})}},{title:"优先级",key:"priority",width:80,sorter:(i,e)=>i.priority-e.priority},{title:"操作",key:"actions",width:180,render(i){return s(E,{},{default:()=>[s(B,{size:"small",onClick:()=>D(i)},{default:()=>"测试"}),s(B,{size:"small",onClick:()=>N(i)},{default:()=>"编辑"}),s(ma,{onPositiveClick:()=>$(i)},{trigger:()=>s(B,{size:"small",type:"error"},{default:()=>"删除"}),default:()=>"确定要删除吗？"})]})}}];async function R(i,e){try{const a=await _.put(`/api/channels/${i.id}`,{...i,enabled:e});a.data.code===0?(d.success(e?"渠道已启用":"渠道已禁用"),P()):d.error(a.data.message)}catch(a){d.error("操作失败: "+(a.response?.data?.message||a.message))}}async function P(){try{const i=await _.get("/api/channels/list");i.data.code===0&&(m.value=i.data.data)}catch{d.error("获取渠道列表失败")}}function b(){y.value=!1,C.value="",t.value={name:"",adapterType:"openai",baseUrl:"",apiKey:"",apiKeys:[],strategy:"round-robin",models:[],priority:1,enabled:!0,advanced:{streaming:{enabled:!1,chunkSize:1024},thinking:{enableReasoning:!1,defaultLevel:"medium",adaptThinking:!0,sendThinkingAsMessage:!1},llm:{temperature:.7,maxTokens:4e3,topP:1,frequencyPenalty:0,presencePenalty:0}}},u.value=!0}function N(i){y.value=!0,C.value=i.id,t.value={...i,apiKey:i.apiKey||"",apiKeys:i.apiKeys&&i.apiKeys.length>0?i.apiKeys:i.apiKey?[{key:i.apiKey,enabled:!0}]:[],strategy:i.strategy||"round-robin",advanced:i.advanced||{streaming:{enabled:!1,chunkSize:1024},thinking:{enableReasoning:!1,defaultLevel:"medium",adaptThinking:!0,sendThinkingAsMessage:!1},llm:{temperature:.7,maxTokens:4e3,topP:1,frequencyPenalty:0,presencePenalty:0}}},u.value=!0}async function $(i){try{const e=await _.delete(`/api/channels/${i.id}`);e.data.code===0?(d.success("删除成功"),P()):d.error(e.data.message)}catch{d.error("删除失败")}}async function D(i){try{const e=await _.post("/api/channels/test",{adapterType:i.adapterType,baseUrl:i.baseUrl,apiKey:i.apiKey,models:i.models||[],advanced:i.advanced||{}});e.data.code===0?d.success(e.data.data.message):d.error(e.data.message)}catch(e){d.error("测试失败: "+(e.response?.data?.message||e.message))}}L(()=>V.value.filter(i=>!t.value.models.includes(i)).length),L(()=>t.value.models.length);async function f(){const i=t.value.apiKeys.find(e=>e.enabled)?.key||t.value.apiKey;if(!t.value.baseUrl||!i){d.warning("请先填写 BaseURL 和至少一个启用的 API Key");return}p.value=!0;try{const e=await _.post("/api/channels/fetch-models",{adapterType:t.value.adapterType,baseUrl:t.value.baseUrl,apiKey:i});e.data.code===0?(V.value=e.data.data.models,v.value=t.value.models||[],c.value=!0,d.success(`获取到 ${e.data.data.models.length} 个模型`)):d.error(e.data.message)}catch(e){d.error("获取模型失败: "+e.message)}finally{p.value=!1}}function K(){t.value.models=[...v.value],c.value=!1,d.success(`已选择 ${v.value.length} 个模型`)}function q(){return{key:"",enabled:!0}}async function H(){I.value?.validate(async i=>{if(!i)try{let e;y.value?e=await _.put(`/api/channels/${C.value}`,t.value):e=await _.post("/api/channels",t.value),e.data.code===0?(d.success("保存成功"),u.value=!1,P()):d.error(e.data.message)}catch{d.error("保存失败")}})}return Qe(()=>{P()}),(i,e)=>(Ye(),Xe(n(E),{vertical:""},{default:o(()=>[r(n(ea),{title:"渠道管理"},{"header-extra":o(()=>[r(n(B),{type:"primary",onClick:b},{default:o(()=>[...e[27]||(e[27]=[j("添加渠道",-1)])]),_:1})]),default:o(()=>[r(n(da),{columns:M,data:m.value},null,8,["data"])]),_:1}),r(n(he),{show:u.value,"onUpdate:show":e[23]||(e[23]=a=>u.value=a),preset:"card",title:"配置渠道",style:{width:"600px"}},{footer:o(()=>[r(n(E),{justify:"end"},{default:o(()=>[r(n(B),{onClick:e[22]||(e[22]=a=>u.value=!1)},{default:o(()=>[...e[31]||(e[31]=[j("取消",-1)])]),_:1}),r(n(B),{type:"primary",onClick:H},{default:o(()=>[...e[32]||(e[32]=[j("保存",-1)])]),_:1})]),_:1})]),default:o(()=>[r(n(aa),{ref_key:"formRef",ref:I,model:t.value,rules:S,"label-placement":"left","label-width":"100"},{default:o(()=>[r(n(U),{label:"名称",path:"name"},{default:o(()=>[r(n(G),{value:t.value.name,"onUpdate:value":e[0]||(e[0]=a=>t.value.name=a),placeholder:"请输入名称"},null,8,["value"])]),_:1}),r(n(U),{label:"类型",path:"adapterType"},{default:o(()=>[r(n(ye),{value:t.value.adapterType,"onUpdate:value":e[1]||(e[1]=a=>t.value.adapterType=a),options:[{label:"OpenAI",value:"openai"},{label:"Gemini",value:"gemini"},{label:"Claude",value:"claude"}]},null,8,["value"])]),_:1}),r(n(U),{label:"BaseURL",path:"baseUrl"},{default:o(()=>[r(n(G),{value:t.value.baseUrl,"onUpdate:value":e[2]||(e[2]=a=>t.value.baseUrl=a),placeholder:"请输入BaseURL"},null,8,["value"])]),_:1}),r(n(U),{label:"轮询策略",path:"strategy"},{default:o(()=>[r(n(ua),{value:t.value.strategy,"onUpdate:value":e[3]||(e[3]=a=>t.value.strategy=a)},{default:o(()=>[r(n(xe),{value:"round-robin",label:"轮询 (Round Robin)"}),r(n(xe),{value:"random",label:"随机 (Random)"})]),_:1},8,["value"])]),_:1}),r(n(U),{label:"API Keys",path:"apiKeys"},{default:o(()=>[r(n(Sa),{value:t.value.apiKeys,"onUpdate:value":e[4]||(e[4]=a=>t.value.apiKeys=a),"on-create":q},{default:o(({value:a})=>[ta("div",Ta,[r(n(G),{value:a.key,"onUpdate:value":h=>a.key=h,placeholder:"sk-...",type:"password","show-password-on":"click"},null,8,["value","onUpdate:value"]),r(n(Z),{value:a.enabled,"onUpdate:value":h=>a.enabled=h},{checked:o(()=>[...e[28]||(e[28]=[j("启用",-1)])]),unchecked:o(()=>[...e[29]||(e[29]=[j("禁用",-1)])]),_:1},8,["value","onUpdate:value"])])]),_:1},8,["value"])]),_:1}),r(n(U),{label:"优先级",path:"priority"},{default:o(()=>[r(n(G),{value:t.value.priority,"onUpdate:value":e[5]||(e[5]=a=>t.value.priority=a),type:"number",placeholder:"数字越小优先级越高"},null,8,["value"])]),_:1}),r(n(U),{label:"模型列表",path:"models"},{default:o(()=>[r(n(E),{vertical:"",style:{width:"100%"}},{default:o(()=>[r(n(pa),{value:t.value.models,"onUpdate:value":e[6]||(e[6]=a=>t.value.models=a)},null,8,["value"]),r(n(B),{block:"",loading:p.value,onClick:f},{default:o(()=>[...e[30]||(e[30]=[j("获取模型列表",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),r(n(U),{label:"高级设置"},{default:o(()=>[r(n(wa),{style:{width:"100%"}},{default:o(()=>[r(n(ue),{title:"流式输出设置",name:"streaming"},{default:o(()=>[r(n(E),{vertical:""},{default:o(()=>[r(n(U),{label:"启用流式输出","label-placement":"left"},{default:o(()=>[r(n(Z),{value:t.value.advanced.streaming.enabled,"onUpdate:value":e[7]||(e[7]=a=>t.value.advanced.streaming.enabled=a)},null,8,["value"])]),_:1}),r(n(U),{label:"块大小","label-placement":"left"},{default:o(()=>[r(n(J),{value:t.value.advanced.streaming.chunkSize,"onUpdate:value":e[8]||(e[8]=a=>t.value.advanced.streaming.chunkSize=a),min:512,max:8192,step:512,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),r(n(ue),{title:"思考控制设置",name:"thinking"},{default:o(()=>[r(n(E),{vertical:""},{default:o(()=>[r(n(U),{label:"启用推理模式","label-placement":"left"},{default:o(()=>[r(n(Z),{value:t.value.advanced.thinking.enableReasoning,"onUpdate:value":e[9]||(e[9]=a=>t.value.advanced.thinking.enableReasoning=a)},null,8,["value"])]),_:1}),r(n(U),{label:"默认思考级别","label-placement":"left"},{default:o(()=>[r(n(ye),{value:t.value.advanced.thinking.defaultLevel,"onUpdate:value":e[10]||(e[10]=a=>t.value.advanced.thinking.defaultLevel=a),options:[{label:"低 (Low)",value:"low"},{label:"中 (Medium)",value:"medium"},{label:"高 (High)",value:"high"}]},null,8,["value"])]),_:1}),r(n(U),{label:"自适应思考","label-placement":"left"},{default:o(()=>[r(n(Z),{value:t.value.advanced.thinking.adaptThinking,"onUpdate:value":e[11]||(e[11]=a=>t.value.advanced.thinking.adaptThinking=a)},null,8,["value"])]),_:1}),r(n(U),{label:"发送思考为消息","label-placement":"left"},{default:o(()=>[r(n(Z),{value:t.value.advanced.thinking.sendThinkingAsMessage,"onUpdate:value":e[12]||(e[12]=a=>t.value.advanced.thinking.sendThinkingAsMessage=a)},null,8,["value"])]),_:1})]),_:1})]),_:1}),r(n(ue),{title:"LLM 参数设置",name:"llm"},{default:o(()=>[r(n(E),{vertical:""},{default:o(()=>[r(n(U),{label:"Temperature","label-placement":"left"},{default:o(()=>[r(n(E),{vertical:"",style:{width:"100%"}},{default:o(()=>[r(n(ae),{value:t.value.advanced.llm.temperature,"onUpdate:value":e[13]||(e[13]=a=>t.value.advanced.llm.temperature=a),min:0,max:2,step:.1,marks:{0:"0",1:"1",2:"2"}},null,8,["value"]),r(n(J),{value:t.value.advanced.llm.temperature,"onUpdate:value":e[14]||(e[14]=a=>t.value.advanced.llm.temperature=a),min:0,max:2,step:.1,size:"small",style:{width:"100px"}},null,8,["value"])]),_:1})]),_:1}),r(n(U),{label:"Max Tokens","label-placement":"left"},{default:o(()=>[r(n(J),{value:t.value.advanced.llm.maxTokens,"onUpdate:value":e[15]||(e[15]=a=>t.value.advanced.llm.maxTokens=a),min:100,max:128e3,step:100,style:{width:"100%"}},null,8,["value"])]),_:1}),r(n(U),{label:"Top P","label-placement":"left"},{default:o(()=>[r(n(E),{vertical:"",style:{width:"100%"}},{default:o(()=>[r(n(ae),{value:t.value.advanced.llm.topP,"onUpdate:value":e[16]||(e[16]=a=>t.value.advanced.llm.topP=a),min:0,max:1,step:.1,marks:{0:"0",.5:"0.5",1:"1"}},null,8,["value"]),r(n(J),{value:t.value.advanced.llm.topP,"onUpdate:value":e[17]||(e[17]=a=>t.value.advanced.llm.topP=a),min:0,max:1,step:.1,size:"small",style:{width:"100px"}},null,8,["value"])]),_:1})]),_:1}),r(n(U),{label:"Frequency Penalty","label-placement":"left"},{default:o(()=>[r(n(E),{vertical:"",style:{width:"100%"}},{default:o(()=>[r(n(ae),{value:t.value.advanced.llm.frequencyPenalty,"onUpdate:value":e[18]||(e[18]=a=>t.value.advanced.llm.frequencyPenalty=a),min:-2,max:2,step:.1,marks:{"-2":"-2",0:"0",2:"2"}},null,8,["value"]),r(n(J),{value:t.value.advanced.llm.frequencyPenalty,"onUpdate:value":e[19]||(e[19]=a=>t.value.advanced.llm.frequencyPenalty=a),min:-2,max:2,step:.1,size:"small",style:{width:"100px"}},null,8,["value"])]),_:1})]),_:1}),r(n(U),{label:"Presence Penalty","label-placement":"left"},{default:o(()=>[r(n(E),{vertical:"",style:{width:"100%"}},{default:o(()=>[r(n(ae),{value:t.value.advanced.llm.presencePenalty,"onUpdate:value":e[20]||(e[20]=a=>t.value.advanced.llm.presencePenalty=a),min:-2,max:2,step:.1,marks:{"-2":"-2",0:"0",2:"2"}},null,8,["value"]),r(n(J),{value:t.value.advanced.llm.presencePenalty,"onUpdate:value":e[21]||(e[21]=a=>t.value.advanced.llm.presencePenalty=a),min:-2,max:2,step:.1,size:"small",style:{width:"100px"}},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show"]),r(n(he),{show:c.value,"onUpdate:show":e[26]||(e[26]=a=>c.value=a),preset:"card",title:"选择模型",style:{width:"800px","max-height":"85vh"},segmented:{content:"soft",footer:"soft"}},{footer:o(()=>[r(n(E),{justify:"end"},{default:o(()=>[r(n(B),{onClick:e[25]||(e[25]=a=>c.value=!1)},{default:o(()=>[...e[33]||(e[33]=[j("取消",-1)])]),_:1}),r(n(B),{type:"primary",onClick:K},{default:o(()=>[j(" 确定 ("+la(v.value.length)+") ",1)]),_:1})]),_:1})]),default:o(()=>[r(ra,{"all-models":V.value,value:v.value,"onUpdate:value":e[24]||(e[24]=a=>v.value=a),multiple:!0},null,8,["all-models","value"])]),_:1},8,["show"])]),_:1}))}},ja=Ze(Va,[["__scopeId","data-v-84ae2c17"]]);export{ja as default};
