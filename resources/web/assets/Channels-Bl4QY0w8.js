import{d as _,h as i,c as w,a as fe,b as A,e as E,f as k,u as ie,g as Te,i as oe,p as ve,j as Ae,k as Ve,r as B,l as M,m as Pe,n as de,o as Be,q as Re,s as Ue,t as J,N as De,w as Ke,v as ze,x as le,y as Ee,z as se,A as Le,B as $e,C as Oe,D as ue,E as Me,F as ye,G as te,H as je,I as Fe,J as _e,K as qe,L as We,M as Ge,O as He,P as Y,Q as T,R as he,S as Je,T as ce,U as pe,V as Ye,_ as Ze,W as Qe,X as Xe,Y as ea,Z as o,$ as r,a0 as z,a1 as W,a2 as aa,a3 as s,a4 as ta,a5 as F,a6 as be,a7 as la,a8 as $,a9 as na,aa as ra,ab as we}from"./index-CRakMPDg.js";import{N as ne,M as sa}from"./ModelSelector-CCcQK8Ed.js";import{s as ia,r as oa,A as da,N as ua,a as ca}from"./DataTable-CXAOfpSM.js";import{N as xe}from"./Select-U6r2k9OD.js";import{A as ke,N as Q}from"./Switch--hMZqOTq.js";import{R as pa,N as X}from"./InputNumber-BI1-BG-b.js";import{N as ma}from"./DynamicTags-CNXWRSAo.js";import{N as fa}from"./Popconfirm-C3k1JAwe.js";import"./SearchOutlined-BjHSUrQM.js";import"./text-Di0Zr8-y.js";import"./Divider-BVnan_L_.js";const va=_({name:"ArrowUp",render(){return i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},i("g",{fill:"none"},i("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),ga=_({name:"ChevronLeft",render(){return i("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}}),b="0!important",Ie="-1px!important";function ee(n){return A(`${n}-type`,[E("& +",[w("button",{},[A(`${n}-type`,[k("border",{borderLeftWidth:b}),k("state-border",{left:Ie})])])])])}function ae(n){return A(`${n}-type`,[E("& +",[w("button",[A(`${n}-type`,[k("border",{borderTopWidth:b}),k("state-border",{top:Ie})])])])])}const ya=w("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[fe("vertical",{flexDirection:"row"},[fe("rtl",[w("button",[E("&:first-child:not(:last-child)",`
 margin-right: ${b};
 border-top-right-radius: ${b};
 border-bottom-right-radius: ${b};
 `),E("&:last-child:not(:first-child)",`
 margin-left: ${b};
 border-top-left-radius: ${b};
 border-bottom-left-radius: ${b};
 `),E("&:not(:first-child):not(:last-child)",`
 margin-left: ${b};
 margin-right: ${b};
 border-radius: ${b};
 `),ee("default"),A("ghost",[ee("primary"),ee("info"),ee("success"),ee("warning"),ee("error")])])])]),A("vertical",{flexDirection:"column"},[w("button",[E("&:first-child:not(:last-child)",`
 margin-bottom: ${b};
 margin-left: ${b};
 margin-right: ${b};
 border-bottom-left-radius: ${b};
 border-bottom-right-radius: ${b};
 `),E("&:last-child:not(:first-child)",`
 margin-top: ${b};
 margin-left: ${b};
 margin-right: ${b};
 border-top-left-radius: ${b};
 border-top-right-radius: ${b};
 `),E("&:not(:first-child):not(:last-child)",`
 margin: ${b};
 border-radius: ${b};
 `),ae("default"),A("ghost",[ae("primary"),ae("info"),ae("success"),ae("warning"),ae("error")])])])]),ha={size:{type:String,default:void 0},vertical:Boolean},ba=_({name:"ButtonGroup",props:ha,setup(n){const{mergedClsPrefixRef:d,mergedRtlRef:f}=ie(n);return Te("-button-group",ya,d),ve(Ae,n),{rtlEnabled:oe("ButtonGroup",f,d),mergedClsPrefix:d}},render(){const{mergedClsPrefix:n}=this;return i("div",{class:[`${n}-button-group`,this.rtlEnabled&&`${n}-button-group--rtl`,this.vertical&&`${n}-button-group--vertical`],role:"group"},this.$slots)}}),wa=w("collapse","width: 100%;",[w("collapse-item",`
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 margin: var(--n-item-margin);
 `,[A("disabled",[k("header","cursor: not-allowed;",[k("header-main",`
 color: var(--n-title-text-color-disabled);
 `),w("collapse-item-arrow",`
 color: var(--n-arrow-color-disabled);
 `)])]),w("collapse-item","margin-left: 32px;"),E("&:first-child","margin-top: 0;"),E("&:first-child >",[k("header","padding-top: 0;")]),A("left-arrow-placement",[k("header",[w("collapse-item-arrow","margin-right: 4px;")])]),A("right-arrow-placement",[k("header",[w("collapse-item-arrow","margin-left: 4px;")])]),k("content-wrapper",[k("content-inner","padding-top: 16px;"),Ve({duration:"0.15s"})]),A("active",[k("header",[A("active",[w("collapse-item-arrow","transform: rotate(90deg);")])])]),E("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),fe("disabled",[A("trigger-area-main",[k("header",[k("header-main","cursor: pointer;"),w("collapse-item-arrow","cursor: default;")])]),A("trigger-area-arrow",[k("header",[w("collapse-item-arrow","cursor: pointer;")])]),A("trigger-area-extra",[k("header",[k("header-extra","cursor: pointer;")])])]),k("header",`
 font-size: var(--n-title-font-size);
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: color .3s var(--n-bezier);
 position: relative;
 padding: var(--n-title-padding);
 color: var(--n-title-text-color);
 `,[k("header-main",`
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 color: var(--n-title-text-color);
 `),k("header-extra",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),w("collapse-item-arrow",`
 display: flex;
 transition:
 transform .15s var(--n-bezier),
 color .3s var(--n-bezier);
 font-size: 18px;
 color: var(--n-arrow-color);
 `)])])]),xa=Object.assign(Object.assign({},de.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},triggerAreas:{type:Array,default:()=>["main","extra","arrow"]},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),Ne=Ue("n-collapse"),ka=_({name:"Collapse",props:xa,slots:Object,setup(n,{slots:d}){const{mergedClsPrefixRef:f,inlineThemeDisabled:c,mergedRtlRef:p}=ie(n),m=B(n.defaultExpandedNames),y=M(()=>n.expandedNames),C=Pe(y,m),V=de("Collapse","-collapse",wa,Be,n,f);function g(x){const{"onUpdate:expandedNames":h,onUpdateExpandedNames:N,onExpandedNamesChange:R}=n;N&&J(N,x),h&&J(h,x),R&&J(R,x),m.value=x}function I(x){const{onItemHeaderClick:h}=n;h&&J(h,x)}function l(x,h,N){const{accordion:R}=n,{value:D}=C;if(R)x?(g([h]),I({name:h,expanded:!0,event:N})):(g([]),I({name:h,expanded:!1,event:N}));else if(!Array.isArray(D))g([h]),I({name:h,expanded:!0,event:N});else{const v=D.slice(),L=v.findIndex(G=>h===G);~L?(v.splice(L,1),g(v),I({name:h,expanded:!1,event:N})):(v.push(h),g(v),I({name:h,expanded:!0,event:N}))}}ve(Ne,{props:n,mergedClsPrefixRef:f,expandedNamesRef:C,slots:d,toggleItem:l});const S=oe("Collapse",p,f),O=M(()=>{const{common:{cubicBezierEaseInOut:x},self:{titleFontWeight:h,dividerColor:N,titlePadding:R,titleTextColor:D,titleTextColorDisabled:v,textColor:L,arrowColor:G,fontSize:Z,titleFontSize:j,arrowColorDisabled:u,itemMargin:t}}=V.value;return{"--n-font-size":Z,"--n-bezier":x,"--n-text-color":L,"--n-divider-color":N,"--n-title-padding":R,"--n-title-font-size":j,"--n-title-text-color":D,"--n-title-text-color-disabled":v,"--n-title-font-weight":h,"--n-arrow-color":G,"--n-arrow-color-disabled":u,"--n-item-margin":t}}),P=c?Re("collapse",void 0,O,n):void 0;return{rtlEnabled:S,mergedTheme:V,mergedClsPrefix:f,cssVars:c?void 0:O,themeClass:P?.themeClass,onRender:P?.onRender}},render(){var n;return(n=this.onRender)===null||n===void 0||n.call(this),i("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),Ca=_({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup(n){return{onceTrue:ze(le(n,"show"))}},render(){return i(De,null,{default:()=>{const{show:n,displayDirective:d,onceTrue:f,clsPrefix:c}=this,p=d==="show"&&f,m=i("div",{class:`${c}-collapse-item__content-wrapper`},i("div",{class:`${c}-collapse-item__content-inner`},this.$slots));return p?Ke(m,[[Ee,n]]):n?m:null}})}}),Pa={title:String,name:[String,Number],disabled:Boolean,displayDirective:String},me=_({name:"CollapseItem",props:Pa,setup(n){const{mergedRtlRef:d}=ie(n),f=$e(),c=Oe(()=>{var l;return(l=n.name)!==null&&l!==void 0?l:f}),p=ue(Ne);p||Me("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:m,props:y,mergedClsPrefixRef:C,slots:V}=p,g=M(()=>{const{value:l}=m;if(Array.isArray(l)){const{value:S}=c;return!~l.findIndex(O=>O===S)}else if(l){const{value:S}=c;return S!==l}return!0});return{rtlEnabled:oe("Collapse",d,C),collapseSlots:V,randomName:f,mergedClsPrefix:C,collapsed:g,triggerAreas:le(y,"triggerAreas"),mergedDisplayDirective:M(()=>{const{displayDirective:l}=n;return l||y.displayDirective}),arrowPlacement:M(()=>y.arrowPlacement),handleClick(l){let S="main";ye(l,"arrow")&&(S="arrow"),ye(l,"extra")&&(S="extra"),y.triggerAreas.includes(S)&&p&&!n.disabled&&p.toggleItem(g.value,c.value,l)}}},render(){const{collapseSlots:n,$slots:d,arrowPlacement:f,collapsed:c,mergedDisplayDirective:p,mergedClsPrefix:m,disabled:y,triggerAreas:C}=this,V=se(d.header,{collapsed:c},()=>[this.title]),g=d["header-extra"]||n["header-extra"],I=d.arrow||n.arrow;return i("div",{class:[`${m}-collapse-item`,`${m}-collapse-item--${f}-arrow-placement`,y&&`${m}-collapse-item--disabled`,!c&&`${m}-collapse-item--active`,C.map(l=>`${m}-collapse-item--trigger-area-${l}`)]},i("div",{class:[`${m}-collapse-item__header`,!c&&`${m}-collapse-item__header--active`]},i("div",{class:`${m}-collapse-item__header-main`,onClick:this.handleClick},f==="right"&&V,i("div",{class:`${m}-collapse-item-arrow`,key:this.rtlEnabled?0:1,"data-arrow":!0},se(I,{collapsed:c},()=>[i(te,{clsPrefix:m},{default:()=>this.rtlEnabled?i(ga,null):i(je,null)})])),f==="left"&&V),Le(g,{collapsed:c},l=>i("div",{class:`${m}-collapse-item__header-extra`,onClick:this.handleClick,"data-extra":!0},l))),i(Ca,{clsPrefix:m,displayDirective:p,show:!c},d))}}),Ce=_({name:"RadioButton",props:oa,setup:ia,render(){const{mergedClsPrefix:n}=this;return i("label",{class:[`${n}-radio-button`,this.mergedDisabled&&`${n}-radio-button--disabled`,this.renderSafeChecked&&`${n}-radio-button--checked`,this.focus&&[`${n}-radio-button--focus`]]},i("input",{ref:"inputRef",type:"radio",class:`${n}-radio-input`,value:this.value,name:this.mergedName,checked:this.renderSafeChecked,disabled:this.mergedDisabled,onChange:this.handleRadioInputChange,onFocus:this.handleRadioInputFocus,onBlur:this.handleRadioInputBlur}),i("div",{class:`${n}-radio-button__state-border`}),Fe(this.$slots.default,d=>!d&&!this.label?null:i("div",{ref:"labelRef",class:`${n}-radio__label`},d||this.label)))}});function Ra(){return He}const Ua=_e({name:"DynamicInput",common:Ge,peers:{Input:We,Button:qe},self:Ra}),ge=Ue("n-dynamic-input"),$a=_({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:n,placeholderRef:d}=ue(ge);return{mergedTheme:n,placeholder:d}},render(){const{mergedTheme:n,placeholder:d,value:f,clsPrefix:c,onUpdateValue:p,disabled:m}=this;return i("div",{class:`${c}-dynamic-input-preset-input`},i(Y,{theme:n.peers.Input,"theme-overrides":n.peerOverrides.Input,value:f,placeholder:d,onUpdateValue:p,disabled:m}))}}),Ia=_({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(n){const{mergedThemeRef:d,keyPlaceholderRef:f,valuePlaceholderRef:c}=ue(ge);return{mergedTheme:d,keyPlaceholder:f,valuePlaceholder:c,handleKeyInput(p){n.onUpdateValue({key:p,value:n.value.value})},handleValueInput(p){n.onUpdateValue({key:n.value.key,value:p})}}},render(){const{mergedTheme:n,keyPlaceholder:d,valuePlaceholder:f,value:c,clsPrefix:p,disabled:m}=this;return i("div",{class:`${p}-dynamic-input-preset-pair`},i(Y,{theme:n.peers.Input,"theme-overrides":n.peerOverrides.Input,value:c.key,class:`${p}-dynamic-input-pair-input`,placeholder:d,onUpdateValue:this.handleKeyInput,disabled:m}),i(Y,{theme:n.peers.Input,"theme-overrides":n.peerOverrides.Input,value:c.value,class:`${p}-dynamic-input-pair-input`,placeholder:f,onUpdateValue:this.handleValueInput,disabled:m}))}}),Na=w("dynamic-input",{width:"100%"},[w("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[w("dynamic-input-preset-input",{flex:1,alignItems:"center"}),w("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[w("dynamic-input-pair-input",[E("&:first-child",{"margin-right":"12px"})])]),k("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[A("icon",{cursor:"pointer"})]),E("&:last-child",{marginBottom:0})]),w("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[w("form-item-blank",{paddingTop:"0 !important"})])]),re=new WeakMap,Sa=Object.assign(Object.assign({},de.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),Ta=_({name:"DynamicInput",props:Sa,setup(n,{slots:d}){const{mergedComponentPropsRef:f,mergedClsPrefixRef:c,mergedRtlRef:p,inlineThemeDisabled:m}=ie(),y=ue(Ye,null),C=B(n.defaultValue),V=le(n,"value"),g=Pe(V,C),I=de("DynamicInput","-dynamic-input",Na,Ua,n,c),l=M(()=>{const{value:u}=g;if(Array.isArray(u)){const{max:t}=n;return t!==void 0&&u.length>=t}return!1}),S=M(()=>{const{value:u}=g;return Array.isArray(u)?u.length<=n.min:!0}),O=M(()=>{var u,t;return(t=(u=f?.value)===null||u===void 0?void 0:u.DynamicInput)===null||t===void 0?void 0:t.buttonSize});function P(u){const{onInput:t,"onUpdate:value":e,onUpdateValue:a}=n;t&&J(t,u),e&&J(e,u),a&&J(a,u),C.value=u}function x(u,t){if(u==null||typeof u!="object")return t;const e=ce(u)?pe(u):u;let a=re.get(e);return a===void 0&&re.set(e,a=$e()),a}function h(u,t){const{value:e}=g,a=Array.from(e??[]),U=a[u];if(a[u]=t,U&&t&&typeof U=="object"&&typeof t=="object"){const q=ce(U)?pe(U):U,K=ce(t)?pe(t):t,H=re.get(q);H!==void 0&&re.set(K,H)}P(a)}function N(){R(-1)}function R(u){const{value:t}=g,{onCreate:e}=n,a=Array.from(t??[]);if(e)a.splice(u+1,0,e(u+1)),P(a);else if(d.default)a.splice(u+1,0,null),P(a);else switch(n.preset){case"input":a.splice(u+1,0,""),P(a);break;case"pair":a.splice(u+1,0,{key:"",value:""}),P(a);break}}function D(u){const{value:t}=g;if(!Array.isArray(t))return;const{min:e}=n;if(t.length<=e)return;const{onRemove:a}=n;a&&a(u);const U=Array.from(t);U.splice(u,1),P(U)}function v(u,t,e){if(t<0||e<0||t>=u.length||e>=u.length||t===e)return;const a=u[t];u[t]=u[e],u[e]=a}function L(u,t){const{value:e}=g;if(!Array.isArray(e))return;const a=Array.from(e);u==="up"&&v(a,t,t-1),u==="down"&&v(a,t,t+1),P(a)}ve(ge,{mergedThemeRef:I,keyPlaceholderRef:le(n,"keyPlaceholder"),valuePlaceholderRef:le(n,"valuePlaceholder"),placeholderRef:le(n,"placeholder")});const G=oe("DynamicInput",p,c),Z=M(()=>{const{self:{actionMargin:u,actionMarginRtl:t}}=I.value;return{"--action-margin":u,"--action-margin-rtl":t}}),j=m?Re("dynamic-input",void 0,Z,n):void 0;return{locale:Je("DynamicInput").localeRef,rtlEnabled:G,buttonSize:O,mergedClsPrefix:c,NFormItem:y,uncontrolledValue:C,mergedValue:g,insertionDisabled:l,removeDisabled:S,handleCreateClick:N,ensureKey:x,handleValueChange:h,remove:D,move:L,createItem:R,mergedTheme:I,cssVars:m?void 0:Z,themeClass:j?.themeClass,onRender:j?.onRender}},render(){const{$slots:n,itemClass:d,buttonSize:f,mergedClsPrefix:c,mergedValue:p,locale:m,mergedTheme:y,keyField:C,itemStyle:V,preset:g,showSortButton:I,NFormItem:l,ensureKey:S,handleValueChange:O,remove:P,createItem:x,move:h,onRender:N,disabled:R}=this;return N?.(),i("div",{class:[`${c}-dynamic-input`,this.rtlEnabled&&`${c}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(p)||p.length===0?i(T,Object.assign({block:!0,ghost:!0,dashed:!0,size:f},this.createButtonProps,{disabled:this.insertionDisabled||R,theme:y.peers.Button,themeOverrides:y.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>he(n["create-button-default"],()=>[m.create]),icon:()=>he(n["create-button-icon"],()=>[i(te,{clsPrefix:c},{default:()=>i(ke,null)})])}):p.map((D,v)=>i("div",{key:C?D[C]:S(D,v),"data-key":C?D[C]:S(D,v),class:[`${c}-dynamic-input-item`,d],style:V},se(n.default,{value:p[v],index:v},()=>[g==="input"?i($a,{disabled:R,clsPrefix:c,value:p[v],parentPath:l?l.path.value:void 0,path:l?.path.value?`${l.path.value}[${v}]`:void 0,onUpdateValue:L=>{O(v,L)}}):g==="pair"?i(Ia,{disabled:R,clsPrefix:c,value:p[v],parentPath:l?l.path.value:void 0,path:l?.path.value?`${l.path.value}[${v}]`:void 0,onUpdateValue:L=>{O(v,L)}}):null]),se(n.action,{value:p[v],index:v,create:x,remove:P,move:h},()=>[i("div",{class:`${c}-dynamic-input-item__action`},i(ba,{size:f},{default:()=>[i(T,{disabled:this.removeDisabled||R,theme:y.peers.Button,themeOverrides:y.peerOverrides.Button,circle:!0,onClick:()=>{P(v)}},{icon:()=>i(te,{clsPrefix:c},{default:()=>i(pa,null)})}),i(T,{disabled:this.insertionDisabled||R,circle:!0,theme:y.peers.Button,themeOverrides:y.peerOverrides.Button,onClick:()=>{x(v)}},{icon:()=>i(te,{clsPrefix:c},{default:()=>i(ke,null)})}),I?i(T,{disabled:v===0||R,circle:!0,theme:y.peers.Button,themeOverrides:y.peerOverrides.Button,onClick:()=>{h("up",v)}},{icon:()=>i(te,{clsPrefix:c},{default:()=>i(va,null)})}):null,I?i(T,{disabled:v===p.length-1||R,circle:!0,theme:y.peers.Button,themeOverrides:y.peerOverrides.Button,onClick:()=>{h("down",v)}},{icon:()=>i(te,{clsPrefix:c},{default:()=>i(da,null)})}):null]}))]))))}}),Aa={style:{display:"flex","align-items":"center",width:"100%",gap:"10px"}},Va={__name:"Channels",setup(n){const d=Qe(),f=B([]),c=B(!1),p=B(!1);B(!1);const m=B(!1),y=B(!1),C=B(""),V=B([]),g=B([]);B("");const I=B(null),l=B({name:"",adapterType:"openai",baseUrl:"",apiKey:"",apiKeys:[],strategy:"round-robin",models:[],priority:1,enabled:!0,advanced:{streaming:{enabled:!1,chunkSize:1024},thinking:{enableReasoning:!1,defaultLevel:"medium",adaptThinking:!0,sendThinkingAsMessage:!1},llm:{temperature:.7,maxTokens:4e3,topP:1,frequencyPenalty:0,presencePenalty:0}}}),S={name:{required:!0,message:"请输入名称",trigger:"blur"},adapterType:{required:!0,message:"请选择类型",trigger:"change"},baseUrl:{required:!0,message:"请输入BaseURL",trigger:"blur"},apiKey:{required:!0,message:"请输入API Key",trigger:"blur"}},O=[{title:"名称",key:"name"},{title:"类型",key:"adapterType"},{title:"BaseURL",key:"baseUrl",ellipsis:{tooltip:!0}},{title:"启用",key:"enabled",width:80,render(t){return i(Q,{value:t.enabled,onUpdateValue:e=>P(t,e)})}},{title:"状态",key:"status",width:80,render(t){let e="idle",a="default";return t.enabled?t.lastError?(e="错误",a="error"):t.lastUsed?(e="正常",a="success"):(e="待测试",a="info"):(e="已禁用",a="warning"),i(we,{type:a,size:"small"},{default:()=>e})}},{title:"优先级",key:"priority",width:80,sorter:(t,e)=>t.priority-e.priority},{title:"调用次数",key:"stats.totalCalls",width:90,render(t){const e=t.stats||{};return i(we,{size:"small",type:e.totalCalls>0?"success":"default"},{default:()=>e.totalCalls||0})}},{title:"操作",key:"actions",width:180,render(t){return i(z,{},{default:()=>[i(T,{size:"small",onClick:()=>D(t)},{default:()=>"测试"}),i(T,{size:"small",onClick:()=>N(t)},{default:()=>"编辑"}),i(fa,{onPositiveClick:()=>R(t)},{trigger:()=>i(T,{size:"small",type:"error"},{default:()=>"删除"}),default:()=>"确定要删除吗？"})]})}}];async function P(t,e){try{const a=await W.put(`/api/channels/${t.id}`,{...t,enabled:e});a.data.code===0?(d.success(e?"渠道已启用":"渠道已禁用"),x()):d.error(a.data.message)}catch(a){d.error("操作失败: "+(a.response?.data?.message||a.message))}}async function x(){try{const t=await W.get("/api/channels/list?withStats=true");t.data.code===0&&(f.value=t.data.data)}catch{d.error("获取渠道列表失败")}}function h(){y.value=!1,C.value="",l.value={name:"",adapterType:"openai",baseUrl:"",apiKey:"",apiKeys:[],strategy:"round-robin",models:[],priority:1,enabled:!0,advanced:{streaming:{enabled:!1,chunkSize:1024},thinking:{enableReasoning:!1,defaultLevel:"medium",adaptThinking:!0,sendThinkingAsMessage:!1},llm:{temperature:.7,maxTokens:4e3,topP:1,frequencyPenalty:0,presencePenalty:0}}},c.value=!0}function N(t){y.value=!0,C.value=t.id,l.value={...t,apiKey:t.apiKey||"",apiKeys:t.apiKeys&&t.apiKeys.length>0?t.apiKeys:t.apiKey?[{key:t.apiKey,enabled:!0}]:[],strategy:t.strategy||"round-robin",advanced:t.advanced||{streaming:{enabled:!1,chunkSize:1024},thinking:{enableReasoning:!1,defaultLevel:"medium",adaptThinking:!0,sendThinkingAsMessage:!1},llm:{temperature:.7,maxTokens:4e3,topP:1,frequencyPenalty:0,presencePenalty:0}}},c.value=!0}async function R(t){try{const e=await W.delete(`/api/channels/${t.id}`);e.data.code===0?(d.success("删除成功"),x()):d.error(e.data.message)}catch{d.error("删除失败")}}async function D(t){try{const e=await W.post("/api/channels/test",{adapterType:t.adapterType,baseUrl:t.baseUrl,apiKey:t.apiKey,models:t.models||[],advanced:t.advanced||{}});e.data.code===0?d.success(e.data.data.message):d.error(e.data.message)}catch(e){d.error("测试失败: "+(e.response?.data?.message||e.message))}}M(()=>V.value.filter(t=>!l.value.models.includes(t)).length),M(()=>l.value.models.length);async function v(){const t=l.value.apiKeys.find(e=>e.enabled)?.key||l.value.apiKey;if(!l.value.baseUrl||!t){d.warning("请先填写 BaseURL 和至少一个启用的 API Key");return}m.value=!0;try{const e=await W.post("/api/channels/fetch-models",{adapterType:l.value.adapterType,baseUrl:l.value.baseUrl,apiKey:t});e.data.code===0?(V.value=e.data.data.models,g.value=l.value.models||[],p.value=!0,d.success(`获取到 ${e.data.data.models.length} 个模型`)):d.error(e.data.message)}catch(e){d.error("获取模型失败: "+e.message)}finally{m.value=!1}}function L(){l.value.models=[...g.value],p.value=!1,d.success(`已选择 ${g.value.length} 个模型`)}function G(){return{key:"",enabled:!0}}function Z(){const t=f.value.map(K=>({name:K.name,adapterType:K.adapterType,baseUrl:K.baseUrl,models:K.models,priority:K.priority,enabled:K.enabled,advanced:K.advanced,strategy:K.strategy})),e=JSON.stringify(t,null,2),a=new Blob([e],{type:"application/json"}),U=URL.createObjectURL(a),q=document.createElement("a");q.href=U,q.download=`channels_${new Date().toISOString().slice(0,10)}.json`,q.click(),URL.revokeObjectURL(U),d.success("导出成功（不含 API Key）")}function j(){const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=async e=>{const a=e.target.files[0];if(a)try{const U=await a.text(),q=JSON.parse(U);if(!Array.isArray(q)){d.error("无效的渠道文件格式");return}let K=0;for(const H of q)try{H.apiKey||(H.apiKey="PLEASE_FILL_YOUR_API_KEY"),await W.post("/api/channels",H),K++}catch(Se){console.error("导入渠道失败:",H.name,Se)}d.success(`成功导入 ${K} 个渠道，请编辑填写 API Key`),x()}catch(U){d.error("导入失败: "+U.message)}},t.click()}async function u(){I.value?.validate(async t=>{if(!t)try{let e;y.value?e=await W.put(`/api/channels/${C.value}`,l.value):e=await W.post("/api/channels",l.value),e.data.code===0?(d.success("保存成功"),c.value=!1,x()):d.error(e.data.message)}catch{d.error("保存失败")}})}return Xe(()=>{x()}),(t,e)=>(aa(),ea(r(z),{vertical:""},{default:o(()=>[s(r(ta),{title:"渠道管理"},{"header-extra":o(()=>[s(r(z),null,{default:o(()=>[s(r(T),{onClick:j},{default:o(()=>[...e[27]||(e[27]=[F("导入",-1)])]),_:1}),s(r(T),{onClick:Z},{default:o(()=>[...e[28]||(e[28]=[F("导出",-1)])]),_:1}),s(r(T),{type:"primary",onClick:h},{default:o(()=>[...e[29]||(e[29]=[F("添加渠道",-1)])]),_:1})]),_:1})]),default:o(()=>[s(r(ua),{columns:O,data:f.value},null,8,["data"])]),_:1}),s(r(be),{show:c.value,"onUpdate:show":e[23]||(e[23]=a=>c.value=a),preset:"card",title:"配置渠道",style:{width:"600px"}},{footer:o(()=>[s(r(z),{justify:"end"},{default:o(()=>[s(r(T),{onClick:e[22]||(e[22]=a=>c.value=!1)},{default:o(()=>[...e[33]||(e[33]=[F("取消",-1)])]),_:1}),s(r(T),{type:"primary",onClick:u},{default:o(()=>[...e[34]||(e[34]=[F("保存",-1)])]),_:1})]),_:1})]),default:o(()=>[s(r(la),{ref_key:"formRef",ref:I,model:l.value,rules:S,"label-placement":"left","label-width":"100"},{default:o(()=>[s(r($),{label:"名称",path:"name"},{default:o(()=>[s(r(Y),{value:l.value.name,"onUpdate:value":e[0]||(e[0]=a=>l.value.name=a),placeholder:"请输入名称"},null,8,["value"])]),_:1}),s(r($),{label:"类型",path:"adapterType"},{default:o(()=>[s(r(xe),{value:l.value.adapterType,"onUpdate:value":e[1]||(e[1]=a=>l.value.adapterType=a),options:[{label:"OpenAI",value:"openai"},{label:"Gemini",value:"gemini"},{label:"Claude",value:"claude"}]},null,8,["value"])]),_:1}),s(r($),{label:"BaseURL",path:"baseUrl"},{default:o(()=>[s(r(Y),{value:l.value.baseUrl,"onUpdate:value":e[2]||(e[2]=a=>l.value.baseUrl=a),placeholder:"请输入BaseURL"},null,8,["value"])]),_:1}),s(r($),{label:"轮询策略",path:"strategy"},{default:o(()=>[s(r(ca),{value:l.value.strategy,"onUpdate:value":e[3]||(e[3]=a=>l.value.strategy=a)},{default:o(()=>[s(r(Ce),{value:"round-robin",label:"轮询 (Round Robin)"}),s(r(Ce),{value:"random",label:"随机 (Random)"})]),_:1},8,["value"])]),_:1}),s(r($),{label:"API Keys",path:"apiKeys"},{default:o(()=>[s(r(Ta),{value:l.value.apiKeys,"onUpdate:value":e[4]||(e[4]=a=>l.value.apiKeys=a),"on-create":G},{default:o(({value:a})=>[na("div",Aa,[s(r(Y),{value:a.key,"onUpdate:value":U=>a.key=U,placeholder:"sk-...",type:"password","show-password-on":"click"},null,8,["value","onUpdate:value"]),s(r(Q),{value:a.enabled,"onUpdate:value":U=>a.enabled=U},{checked:o(()=>[...e[30]||(e[30]=[F("启用",-1)])]),unchecked:o(()=>[...e[31]||(e[31]=[F("禁用",-1)])]),_:1},8,["value","onUpdate:value"])])]),_:1},8,["value"])]),_:1}),s(r($),{label:"优先级",path:"priority"},{default:o(()=>[s(r(Y),{value:l.value.priority,"onUpdate:value":e[5]||(e[5]=a=>l.value.priority=a),type:"number",placeholder:"数字越小优先级越高"},null,8,["value"])]),_:1}),s(r($),{label:"模型列表",path:"models"},{default:o(()=>[s(r(z),{vertical:"",style:{width:"100%"}},{default:o(()=>[s(r(ma),{value:l.value.models,"onUpdate:value":e[6]||(e[6]=a=>l.value.models=a)},null,8,["value"]),s(r(T),{block:"",loading:m.value,onClick:v},{default:o(()=>[...e[32]||(e[32]=[F("获取模型列表",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),s(r($),{label:"高级设置"},{default:o(()=>[s(r(ka),{style:{width:"100%"}},{default:o(()=>[s(r(me),{title:"流式输出设置",name:"streaming"},{default:o(()=>[s(r(z),{vertical:""},{default:o(()=>[s(r($),{label:"启用流式输出","label-placement":"left"},{default:o(()=>[s(r(Q),{value:l.value.advanced.streaming.enabled,"onUpdate:value":e[7]||(e[7]=a=>l.value.advanced.streaming.enabled=a)},null,8,["value"])]),_:1}),s(r($),{label:"块大小","label-placement":"left"},{default:o(()=>[s(r(X),{value:l.value.advanced.streaming.chunkSize,"onUpdate:value":e[8]||(e[8]=a=>l.value.advanced.streaming.chunkSize=a),min:512,max:8192,step:512,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),s(r(me),{title:"思考控制设置",name:"thinking"},{default:o(()=>[s(r(z),{vertical:""},{default:o(()=>[s(r($),{label:"启用推理模式","label-placement":"left"},{default:o(()=>[s(r(Q),{value:l.value.advanced.thinking.enableReasoning,"onUpdate:value":e[9]||(e[9]=a=>l.value.advanced.thinking.enableReasoning=a)},null,8,["value"])]),_:1}),s(r($),{label:"默认思考级别","label-placement":"left"},{default:o(()=>[s(r(xe),{value:l.value.advanced.thinking.defaultLevel,"onUpdate:value":e[10]||(e[10]=a=>l.value.advanced.thinking.defaultLevel=a),options:[{label:"低 (Low)",value:"low"},{label:"中 (Medium)",value:"medium"},{label:"高 (High)",value:"high"}]},null,8,["value"])]),_:1}),s(r($),{label:"自适应思考","label-placement":"left"},{default:o(()=>[s(r(Q),{value:l.value.advanced.thinking.adaptThinking,"onUpdate:value":e[11]||(e[11]=a=>l.value.advanced.thinking.adaptThinking=a)},null,8,["value"])]),_:1}),s(r($),{label:"发送思考为消息","label-placement":"left"},{default:o(()=>[s(r(Q),{value:l.value.advanced.thinking.sendThinkingAsMessage,"onUpdate:value":e[12]||(e[12]=a=>l.value.advanced.thinking.sendThinkingAsMessage=a)},null,8,["value"])]),_:1})]),_:1})]),_:1}),s(r(me),{title:"LLM 参数设置",name:"llm"},{default:o(()=>[s(r(z),{vertical:""},{default:o(()=>[s(r($),{label:"Temperature","label-placement":"left"},{default:o(()=>[s(r(z),{vertical:"",style:{width:"100%"}},{default:o(()=>[s(r(ne),{value:l.value.advanced.llm.temperature,"onUpdate:value":e[13]||(e[13]=a=>l.value.advanced.llm.temperature=a),min:0,max:2,step:.1,marks:{0:"0",1:"1",2:"2"}},null,8,["value"]),s(r(X),{value:l.value.advanced.llm.temperature,"onUpdate:value":e[14]||(e[14]=a=>l.value.advanced.llm.temperature=a),min:0,max:2,step:.1,size:"small",style:{width:"100px"}},null,8,["value"])]),_:1})]),_:1}),s(r($),{label:"Max Tokens","label-placement":"left"},{default:o(()=>[s(r(X),{value:l.value.advanced.llm.maxTokens,"onUpdate:value":e[15]||(e[15]=a=>l.value.advanced.llm.maxTokens=a),min:100,max:128e3,step:100,style:{width:"100%"}},null,8,["value"])]),_:1}),s(r($),{label:"Top P","label-placement":"left"},{default:o(()=>[s(r(z),{vertical:"",style:{width:"100%"}},{default:o(()=>[s(r(ne),{value:l.value.advanced.llm.topP,"onUpdate:value":e[16]||(e[16]=a=>l.value.advanced.llm.topP=a),min:0,max:1,step:.1,marks:{0:"0",.5:"0.5",1:"1"}},null,8,["value"]),s(r(X),{value:l.value.advanced.llm.topP,"onUpdate:value":e[17]||(e[17]=a=>l.value.advanced.llm.topP=a),min:0,max:1,step:.1,size:"small",style:{width:"100px"}},null,8,["value"])]),_:1})]),_:1}),s(r($),{label:"Frequency Penalty","label-placement":"left"},{default:o(()=>[s(r(z),{vertical:"",style:{width:"100%"}},{default:o(()=>[s(r(ne),{value:l.value.advanced.llm.frequencyPenalty,"onUpdate:value":e[18]||(e[18]=a=>l.value.advanced.llm.frequencyPenalty=a),min:-2,max:2,step:.1,marks:{"-2":"-2",0:"0",2:"2"}},null,8,["value"]),s(r(X),{value:l.value.advanced.llm.frequencyPenalty,"onUpdate:value":e[19]||(e[19]=a=>l.value.advanced.llm.frequencyPenalty=a),min:-2,max:2,step:.1,size:"small",style:{width:"100px"}},null,8,["value"])]),_:1})]),_:1}),s(r($),{label:"Presence Penalty","label-placement":"left"},{default:o(()=>[s(r(z),{vertical:"",style:{width:"100%"}},{default:o(()=>[s(r(ne),{value:l.value.advanced.llm.presencePenalty,"onUpdate:value":e[20]||(e[20]=a=>l.value.advanced.llm.presencePenalty=a),min:-2,max:2,step:.1,marks:{"-2":"-2",0:"0",2:"2"}},null,8,["value"]),s(r(X),{value:l.value.advanced.llm.presencePenalty,"onUpdate:value":e[21]||(e[21]=a=>l.value.advanced.llm.presencePenalty=a),min:-2,max:2,step:.1,size:"small",style:{width:"100px"}},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show"]),s(r(be),{show:p.value,"onUpdate:show":e[26]||(e[26]=a=>p.value=a),preset:"card",title:"选择模型",style:{width:"800px","max-height":"85vh"},segmented:{content:"soft",footer:"soft"}},{footer:o(()=>[s(r(z),{justify:"end"},{default:o(()=>[s(r(T),{onClick:e[25]||(e[25]=a=>p.value=!1)},{default:o(()=>[...e[35]||(e[35]=[F("取消",-1)])]),_:1}),s(r(T),{type:"primary",onClick:L},{default:o(()=>[F(" 确定 ("+ra(g.value.length)+") ",1)]),_:1})]),_:1})]),default:o(()=>[s(sa,{"all-models":V.value,value:g.value,"onUpdate:value":e[24]||(e[24]=a=>g.value=a),multiple:!0},null,8,["all-models","value"])]),_:1},8,["show"])]),_:1}))}},qa=Ze(Va,[["__scopeId","data-v-ec56bc71"]]);export{qa as default};
