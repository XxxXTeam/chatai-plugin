import{K as O,x as B,C as I,L as $,a2 as x,T as a,O as u,P as l,Q as i,R as T,S as p,U as z,a6 as F,Z as d,X as E,M as f,a1 as v,V as o,Y as s,$ as m,a3 as V,N as A,a8 as H,a9 as b,a0 as g,B as j}from"./index-DILGEmlc.js";import{N as k}from"./Divider-CMEiRSnR.js";import{N as y}from"./Switch-BEXbUwW7.js";import{N as K}from"./Select-bkYqJANp.js";import{N as P}from"./Slider-C371N2zF.js";import{N as w}from"./DynamicTags-I0NdHX5A.js";import"./Add-CG2bvB3N.js";import"./prop-NnGblK-3.js";const Q={style:{color:"#999","font-size":"12px"}},X={key:1,style:{color:"#999","font-size":"12px"}},le={__name:"ListenerConfig",setup(Y){const U=O(),N=B(!1),G=B(!1),t=B({private:{enabled:!0,mode:"always"},group:{enabled:!0,at:!0,reply:!1,replyBot:!1,prefix:!0,keyword:!1,random:!1,randomRate:.05},prefixes:["#chat"],keywords:[],collectGroupMsg:!0,blacklistUsers:[],whitelistUsers:[],blacklistGroups:[],whitelistGroups:[]}),D=[{label:"æ€»æ˜¯å“åº”",value:"always"},{label:"éœ€è¦å‰ç¼€",value:"prefix"},{label:"å…³é—­",value:"off"}],C=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`}),M=I({get:()=>(t.value.prefixes||[]).join(", "),set:n=>{t.value.prefixes=n.split(/[,ï¼Œ]\s*/).filter(Boolean)}}),R=I({get:()=>(t.value.keywords||[]).join(", "),set:n=>{t.value.keywords=n.split(/[,ï¼Œ]\s*/).filter(Boolean)}});async function S(){N.value=!0;try{const n=await T.get("/api/trigger/config",{headers:C()});if(n.data?.data){const e=n.data.data;t.value={...t.value,...e,private:e.private||{enabled:!0,mode:"always"},group:{enabled:e.group?.enabled??!0,at:e.group?.at??!0,reply:e.group?.reply??!1,replyBot:e.group?.replyBot??!1,prefix:e.group?.prefix??!0,keyword:e.group?.keyword??!1,random:e.group?.random??!1,randomRate:e.group?.randomRate??.05},prefixes:e.prefixes||["#chat"],keywords:e.keywords||[],collectGroupMsg:e.collectGroupMsg??!0,whitelistGroups:e.whitelistGroups||[],blacklistGroups:e.blacklistGroups||[],whitelistUsers:e.whitelistUsers||[],blacklistUsers:e.blacklistUsers||[]}}}catch(n){U.error("åŠ è½½é…ç½®å¤±è´¥: "+n.message)}finally{N.value=!1}}async function L(){G.value=!0;try{await T.put("/api/trigger/config",t.value,{headers:C()}),U.success("é…ç½®å·²ä¿å­˜")}catch(n){U.error("ä¿å­˜å¤±è´¥: "+n.message)}finally{G.value=!1}}return $(()=>{S()}),(n,e)=>(p(),x("div",null,[a(l(i),{vertical:"",size:"large"},{default:u(()=>[a(l(z),{title:"AIè§¦å‘é…ç½®"},{default:u(()=>[a(l(F),{type:"info",style:{"margin-bottom":"16px"}},{default:u(()=>[...e[16]||(e[16]=[d("p",{style:{margin:"0"}},"é…ç½®æœºå™¨äººä½•æ—¶å“åº”æ¶ˆæ¯ã€‚ç§èŠå’Œç¾¤èŠå¯ç‹¬ç«‹é…ç½®è§¦å‘æ–¹å¼ã€‚",-1),d("p",{style:{margin:"8px 0 0 0","font-size":"12px",color:"#666"}},'ğŸ’¡ æç¤ºï¼šå‰ç¼€è§¦å‘è§†ä¸º@ï¼Œå¦‚è®¾ç½®å‰ç¼€"xx"ï¼Œåˆ™"xxä½ å¥½"æˆ–"xx ä½ å¥½"éƒ½èƒ½è§¦å‘',-1)])]),_:1}),a(l(E),{"label-placement":"left","label-width":"150px"},{default:u(()=>[a(l(k),{"title-placement":"left"},{default:u(()=>[...e[17]||(e[17]=[o("ç§èŠè§¦å‘",-1)])]),_:1}),a(l(s),{label:"å“åº”ç§èŠ"},{default:u(()=>[a(l(y),{value:t.value.private.enabled,"onUpdate:value":e[0]||(e[0]=r=>t.value.private.enabled=r)},null,8,["value"])]),_:1}),t.value.private.enabled?(p(),f(l(s),{key:0,label:"ç§èŠæ¨¡å¼"},{default:u(()=>[a(l(i),{align:"center"},{default:u(()=>[a(l(K),{value:t.value.private.mode,"onUpdate:value":e[1]||(e[1]=r=>t.value.private.mode=r),options:D,style:{width:"180px"}},null,8,["value"]),d("span",Q,m(t.value.private.mode==="always"?"ç§èŠæ¶ˆæ¯æ€»æ˜¯å“åº”":t.value.private.mode==="prefix"?"ç§èŠéœ€è¦å‰ç¼€æ‰å“åº”":"ç§èŠå·²å…³é—­"),1)]),_:1})]),_:1})):v("",!0),a(l(k),{"title-placement":"left"},{default:u(()=>[...e[18]||(e[18]=[o("ç¾¤èŠè§¦å‘",-1)])]),_:1}),a(l(s),{label:"å“åº”ç¾¤èŠ"},{default:u(()=>[a(l(y),{value:t.value.group.enabled,"onUpdate:value":e[2]||(e[2]=r=>t.value.group.enabled=r)},null,8,["value"])]),_:1}),t.value.group.enabled?(p(),x(V,{key:1},[a(l(s),{label:"@æœºå™¨äººè§¦å‘"},{default:u(()=>[a(l(i),{align:"center"},{default:u(()=>[a(l(y),{value:t.value.group.at,"onUpdate:value":e[3]||(e[3]=r=>t.value.group.at=r)},null,8,["value"]),e[19]||(e[19]=d("span",{style:{color:"#999","font-size":"12px"}},"è¢«@æ—¶å“åº”",-1))]),_:1})]),_:1}),a(l(s),{label:"å¼•ç”¨æœºå™¨äººè§¦å‘"},{default:u(()=>[a(l(i),{align:"center"},{default:u(()=>[a(l(y),{value:t.value.group.replyBot,"onUpdate:value":e[4]||(e[4]=r=>t.value.group.replyBot=r)},null,8,["value"]),e[20]||(e[20]=d("span",{style:{color:"#999","font-size":"12px"}},"å¼•ç”¨æœºå™¨äººæ¶ˆæ¯æ—¶è§¦å‘ï¼ˆå…³é—­å¯é˜²æ­¢é‡å¤å“åº”ï¼‰",-1))]),_:1})]),_:1}),a(l(s),{label:"å‰ç¼€è§¦å‘"},{default:u(()=>[a(l(i),{align:"center",wrap:""},{default:u(()=>[a(l(y),{value:t.value.group.prefix,"onUpdate:value":e[5]||(e[5]=r=>t.value.group.prefix=r)},null,8,["value"]),e[21]||(e[21]=d("span",{style:{color:"#999","font-size":"12px"}},'å‰ç¼€è§†ä¸º@ï¼Œå¦‚"æ®‹èŠ±ä½ å¥½"æˆ–"æ®‹èŠ± ä½ å¥½"éƒ½èƒ½è§¦å‘',-1))]),_:1})]),_:1}),a(l(s),{label:"å…³é”®è¯è§¦å‘"},{default:u(()=>[a(l(i),{align:"center"},{default:u(()=>[a(l(y),{value:t.value.group.keyword,"onUpdate:value":e[6]||(e[6]=r=>t.value.group.keyword=r)},null,8,["value"]),e[22]||(e[22]=d("span",{style:{color:"#999","font-size":"12px"}},"æ¶ˆæ¯åŒ…å«å…³é”®è¯æ—¶å“åº”",-1))]),_:1})]),_:1}),a(l(s),{label:"éšæœºè§¦å‘"},{default:u(()=>[a(l(i),{align:"center"},{default:u(()=>[a(l(y),{value:t.value.group.random,"onUpdate:value":e[7]||(e[7]=r=>t.value.group.random=r)},null,8,["value"]),t.value.group.random?(p(),x(V,{key:0},[a(l(P),{value:t.value.group.randomRate,"onUpdate:value":e[8]||(e[8]=r=>t.value.group.randomRate=r),min:0,max:.5,step:.01,style:{width:"120px"}},null,8,["value"]),d("span",null,m((t.value.group.randomRate*100).toFixed(0))+"%",1)],64)):(p(),x("span",X,"æŒ‰æ¦‚ç‡éšæœºå“åº”ï¼ˆä¼ªäººæ¨¡å¼ï¼‰"))]),_:1})]),_:1})],64)):v("",!0),a(l(k),{"title-placement":"left"},{default:u(()=>[...e[23]||(e[23]=[o("è§¦å‘è¯",-1)])]),_:1}),a(l(s),{label:"è§¦å‘å‰ç¼€"},{default:u(()=>[a(l(i),{vertical:""},{default:u(()=>[a(l(A),{value:M.value,"onUpdate:value":e[9]||(e[9]=r=>M.value=r),placeholder:"å¤šä¸ªç”¨é€—å·åˆ†éš”ï¼Œå¦‚: #chat, æ®‹èŠ±",style:{width:"300px"}},null,8,["value"]),e[24]||(e[24]=d("span",{style:{color:"#999","font-size":"12px"}},'å‰ç¼€åå¯ç›´æ¥è·Ÿå†…å®¹æˆ–ç©ºæ ¼ï¼Œå¦‚"æ®‹èŠ±ä½ å¥½""æ®‹èŠ± ä½ å¥½"éƒ½å¯è§¦å‘',-1))]),_:1})]),_:1}),t.value.group.keyword?(p(),f(l(s),{key:2,label:"è§¦å‘å…³é”®è¯"},{default:u(()=>[a(l(A),{value:R.value,"onUpdate:value":e[10]||(e[10]=r=>R.value=r),placeholder:"æ¶ˆæ¯åŒ…å«è¿™äº›è¯æ—¶è§¦å‘",style:{width:"300px"}},null,8,["value"])]),_:1})):v("",!0),a(l(k),{"title-placement":"left"},{default:u(()=>[...e[25]||(e[25]=[o("å…¶ä»–",-1)])]),_:1}),a(l(s),{label:"é‡‡é›†ç¾¤æ¶ˆæ¯"},{default:u(()=>[a(l(i),{align:"center"},{default:u(()=>[a(l(y),{value:t.value.collectGroupMsg,"onUpdate:value":e[11]||(e[11]=r=>t.value.collectGroupMsg=r)},null,8,["value"]),e[26]||(e[26]=d("span",{style:{color:"#999","font-size":"12px"}},"é‡‡é›†ç¾¤æ¶ˆæ¯ç”¨äºAIä¸Šä¸‹æ–‡ç†è§£ï¼ˆä¸ä¼šè§¦å‘å“åº”ï¼‰",-1))]),_:1})]),_:1})]),_:1})]),_:1}),a(l(z),{title:"è®¿é—®æ§åˆ¶"},{default:u(()=>[a(l(F),{type:"warning",style:{"margin-bottom":"16px"}},{default:u(()=>[...e[27]||(e[27]=[o(" ç™½åå•ä¼˜å…ˆäºé»‘åå•ã€‚è®¾ç½®ç™½åå•åï¼Œåªæœ‰åå•å†…çš„æ‰ä¼šè§¦å‘ã€‚ ",-1)])]),_:1}),a(l(H),{cols:2,"x-gap":24,responsive:"screen"},{default:u(()=>[a(l(b),null,{default:u(()=>[a(l(s),{label:"ç¾¤ç™½åå•"},{default:u(()=>[a(l(w),{value:t.value.whitelistGroups,"onUpdate:value":e[12]||(e[12]=r=>t.value.whitelistGroups=r)},null,8,["value"])]),_:1})]),_:1}),a(l(b),null,{default:u(()=>[a(l(s),{label:"ç¾¤é»‘åå•"},{default:u(()=>[a(l(w),{value:t.value.blacklistGroups,"onUpdate:value":e[13]||(e[13]=r=>t.value.blacklistGroups=r)},null,8,["value"])]),_:1})]),_:1}),a(l(b),null,{default:u(()=>[a(l(s),{label:"ç”¨æˆ·ç™½åå•"},{default:u(()=>[a(l(w),{value:t.value.whitelistUsers,"onUpdate:value":e[14]||(e[14]=r=>t.value.whitelistUsers=r)},null,8,["value"])]),_:1})]),_:1}),a(l(b),null,{default:u(()=>[a(l(s),{label:"ç”¨æˆ·é»‘åå•"},{default:u(()=>[a(l(w),{value:t.value.blacklistUsers,"onUpdate:value":e[15]||(e[15]=r=>t.value.blacklistUsers=r)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),a(l(z),{title:"å½“å‰çŠ¶æ€"},{default:u(()=>[a(l(i),null,{default:u(()=>[a(l(g),{type:t.value.private.enabled?"success":"default"},{default:u(()=>[o(" ç§èŠ: "+m(t.value.private.enabled?t.value.private.mode:"å…³é—­"),1)]),_:1},8,["type"]),a(l(g),{type:t.value.group.enabled?"success":"default"},{default:u(()=>[o(" ç¾¤èŠ: "+m(t.value.group.enabled?"å¼€å¯":"å…³é—­"),1)]),_:1},8,["type"]),t.value.group.at?(p(),f(l(g),{key:0,type:"info"},{default:u(()=>[...e[28]||(e[28]=[o("@è§¦å‘",-1)])]),_:1})):v("",!0),t.value.group.replyBot?(p(),f(l(g),{key:1,type:"info"},{default:u(()=>[...e[29]||(e[29]=[o("å¼•ç”¨è§¦å‘",-1)])]),_:1})):v("",!0),t.value.group.prefix?(p(),f(l(g),{key:2,type:"info"},{default:u(()=>[...e[30]||(e[30]=[o("å‰ç¼€è§¦å‘",-1)])]),_:1})):v("",!0),t.value.group.keyword?(p(),f(l(g),{key:3,type:"info"},{default:u(()=>[...e[31]||(e[31]=[o("å…³é”®è¯è§¦å‘",-1)])]),_:1})):v("",!0),t.value.group.random?(p(),f(l(g),{key:4,type:"warning"},{default:u(()=>[o("éšæœº"+m((t.value.group.randomRate*100).toFixed(0))+"%",1)]),_:1})):v("",!0),t.value.group.replyBot?v("",!0):(p(),f(l(g),{key:5,type:"default"},{default:u(()=>[...e[32]||(e[32]=[o("å¼•ç”¨æœºå™¨äººä¸è§¦å‘",-1)])]),_:1}))]),_:1})]),_:1}),a(l(i),{justify:"center"},{default:u(()=>[a(l(j),{type:"primary",size:"large",onClick:L,loading:G.value},{default:u(()=>[...e[33]||(e[33]=[o(" ä¿å­˜é…ç½® ",-1)])]),_:1},8,["loading"]),a(l(j),{size:"large",onClick:S,loading:N.value},{default:u(()=>[...e[34]||(e[34]=[o(" é‡æ–°åŠ è½½ ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]))}};export{le as default};
