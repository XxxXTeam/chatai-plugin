import{K as J,x as k,a5 as _,C as h,L as c,M as N,O as a,P as l,Q as P,R as Q,S as O,T as t,a6 as F,V as o,U as p,X as g,a1 as j,Y as r,a7 as n,N as m,B as b,a8 as y,a9 as E,aa as S,Z as x,W as ee}from"./index-C4kcv-k7.js";import{N as V,M as le}from"./ModelSelector-BmQVEKzJ.js";import{N as L}from"./Select-Ds4k6n0x.js";import{N as i}from"./Switch-DAJY3CYl.js";import{N as v}from"./Divider-DPtH06by.js";import{N as U}from"./InputNumber-DCvyj33l.js";import{N as R}from"./DynamicTags-BsZOeVpU.js";import"./SearchOutlined-DpgsDztV.js";import"./text-Duqyefkl.js";import"./Add-4cw-Rc12.js";import"./prop-NnGblK-3.js";const pe={__name:"Settings",setup(te){const w=J(),I=k(!1),T=k(!1),s=_({basic:{toggleMode:"at",togglePrefix:"#chat",commandPrefix:"#ai",debug:!1,showThinkingMessage:!0,debugToConsoleOnly:!0,quoteReply:!0,autoRecall:{enabled:!1,delay:60,recallError:!0}},admin:{masterQQ:[],loginNotifyPrivate:!0,sensitiveCommandMasterOnly:!0},llm:{defaultModel:"",models:{chat:"",roleplay:"",toolCall:"",search:"",reasoning:""},chatModel:"",codeModel:"",translationModel:""},bym:{enable:!1,probability:.02,temperature:.9,maxTokens:100,recall:!1,model:"",systemPrompt:"",exclusiveFeatures:["groupSummary","userPortrait"]},tools:{showCallLogs:!0,useForwardMsg:!0},thinking:{showThinkingContent:!0,useForwardMsg:!0},features:{groupSummary:{enabled:!0,maxMessages:100},userPortrait:{enabled:!0,minMessages:10},poke:{enabled:!1,pokeBack:!1,message:"别戳了~"},reaction:{enabled:!1}},memory:{enabled:!1,autoExtract:!0},listener:{enabled:!0,triggerMode:"at",triggerPrefix:"",whitelistGroups:[],blacklistGroups:[],whitelistUsers:[],blacklistUsers:[]}}),$=[{label:"仅@触发",value:"at"},{label:"仅前缀触发",value:"prefix"},{label:"@或前缀",value:"at_or_prefix"},{label:"始终触发",value:"always"}],q=h(()=>["prefix","at_or_prefix"].includes(s.listener.triggerMode)),z=k([]),M=k(!1),A=k("defaultModel"),C=k("");function D(){const d=C.value.trim();d?s.admin.masterQQ=d.split(/[,，\s]+/).filter(Boolean):s.admin.masterQQ=[]}function K(){C.value=(s.admin.masterQQ||[]).join(", ")}async function W(){I.value=!0;try{const d=await Q.get("/api/config");if(d.data.code===0){const e=d.data.data;e.basic&&(Object.assign(s.basic,e.basic),e.basic.autoRecall&&Object.assign(s.basic.autoRecall,e.basic.autoRecall)),e.llm&&(Object.assign(s.llm,e.llm),e.llm.models&&Object.assign(s.llm.models,e.llm.models)),e.admin&&Object.assign(s.admin,e.admin),e.bym&&Object.assign(s.bym,e.bym),e.tools&&Object.assign(s.tools,e.tools),e.thinking&&Object.assign(s.thinking,e.thinking),e.features&&(e.features.groupSummary&&Object.assign(s.features.groupSummary,e.features.groupSummary),e.features.userPortrait&&Object.assign(s.features.userPortrait,e.features.userPortrait),e.features.poke&&Object.assign(s.features.poke,e.features.poke),e.features.reaction&&Object.assign(s.features.reaction,e.features.reaction)),e.memory&&Object.assign(s.memory,e.memory),e.listener&&(Object.assign(s.listener,e.listener),s.listener.whitelistGroups=e.listener.whitelistGroups||[],s.listener.blacklistGroups=e.listener.blacklistGroups||[],s.listener.whitelistUsers=e.listener.whitelistUsers||[],s.listener.blacklistUsers=e.listener.blacklistUsers||[]);const u=await Q.get("/api/channels/list");if(u.data.code===0){const Z=u.data.data,G=new Set;Z.forEach(B=>{B.models&&B.models.forEach(H=>G.add(H))}),z.value=Array.from(G).sort()}K()}}catch(d){w.error("加载配置失败: "+d.message)}finally{I.value=!1}}async function Y(){T.value=!0;try{const d={basic:{...s.basic},admin:{...s.admin},llm:{...s.llm},bym:{...s.bym},tools:{...s.tools},thinking:{...s.thinking},features:{...s.features},memory:{...s.memory},listener:{...s.listener}},e=await Q.post("/api/config",d);e.data.code===0?w.success("✓ 配置已保存",{duration:2e3}):w.error("保存失败: "+e.data.message)}catch(d){w.error("保存失败: "+d.message)}finally{T.value=!1}}function f(d){A.value=d,M.value=!0}function X(d){if(d.length>0){const e=A.value;if(e==="bymModel")s.bym.model=d[0];else if(e.startsWith("models.")){const u=e.replace("models.","");s.llm.models[u]=d[0]}else s.llm[e]=d[0]}M.value=!1}return c(()=>{W()}),(d,e)=>(O(),N(l(P),{vertical:"",size:"large"},{default:a(()=>[t(l(F),{type:"info",title:"提示",style:{"margin-bottom":"16px"}},{default:a(()=>[...e[64]||(e[64]=[o(" API Key 和渠道配置请前往「渠道管理」页面进行设置 ",-1)])]),_:1}),t(l(p),{title:"触发模式"},{default:a(()=>[t(l(g),{"label-placement":"left","label-width":"140"},{default:a(()=>[t(l(r),{label:"触发方式"},{default:a(()=>[t(l(L),{value:s.basic.toggleMode,"onUpdate:value":e[0]||(e[0]=u=>s.basic.toggleMode=u),options:$,placeholder:"选择触发方式"},null,8,["value"])]),_:1}),t(l(r),{label:"触发前缀"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(m),{value:s.basic.togglePrefix,"onUpdate:value":e[1]||(e[1]=u=>s.basic.togglePrefix=u),placeholder:"#chat",disabled:s.basic.toggleMode==="at"},null,8,["value","disabled"])]),default:a(()=>[e[65]||(e[65]=o(" 当触发方式包含前缀时，用户发送此前缀开头的消息会触发AI对话 ",-1))]),_:1})]),_:1}),t(l(r),{label:"命令前缀"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(m),{value:s.basic.commandPrefix,"onUpdate:value":e[2]||(e[2]=u=>s.basic.commandPrefix=u),placeholder:"#ai"},null,8,["value"])]),default:a(()=>[e[66]||(e[66]=o(" 管理命令的前缀，如 #ai帮助、#ai状态 等 ",-1))]),_:1})]),_:1}),t(l(r),{label:"调试模式"},{default:a(()=>[t(l(i),{value:s.basic.debug,"onUpdate:value":e[3]||(e[3]=u=>s.basic.debug=u)},null,8,["value"])]),_:1}),t(l(r),{label:"思考提示"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.basic.showThinkingMessage,"onUpdate:value":e[4]||(e[4]=u=>s.basic.showThinkingMessage=u)},null,8,["value"])]),default:a(()=>[e[67]||(e[67]=o(' 开启后，AI处理时会先发送"思考中..."提示 ',-1))]),_:1})]),_:1}),t(l(r),{label:"调试仅控制台"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.basic.debugToConsoleOnly,"onUpdate:value":e[5]||(e[5]=u=>s.basic.debugToConsoleOnly=u)},null,8,["value"])]),default:a(()=>[e[68]||(e[68]=o(" 开启后，调试信息仅输出到控制台，不发送到聊天 ",-1))]),_:1})]),_:1}),t(l(r),{label:"引用回复"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.basic.quoteReply,"onUpdate:value":e[6]||(e[6]=u=>s.basic.quoteReply=u)},null,8,["value"])]),default:a(()=>[e[69]||(e[69]=o(" 开启后，AI回复会引用触发消息 ",-1))]),_:1})]),_:1}),t(l(v),{"title-placement":"left"},{default:a(()=>[...e[70]||(e[70]=[o("自动撤回",-1)])]),_:1}),t(l(r),{label:"启用自动撤回"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.basic.autoRecall.enabled,"onUpdate:value":e[7]||(e[7]=u=>s.basic.autoRecall.enabled=u)},null,8,["value"])]),default:a(()=>[e[71]||(e[71]=o(" 开启后，AI回复会在指定时间后自动撤回 ",-1))]),_:1})]),_:1}),s.basic.autoRecall.enabled?(O(),N(l(r),{key:0,label:"撤回延迟(秒)"},{default:a(()=>[t(l(U),{value:s.basic.autoRecall.delay,"onUpdate:value":e[8]||(e[8]=u=>s.basic.autoRecall.delay=u),min:5,max:300},null,8,["value"])]),_:1})):j("",!0),s.basic.autoRecall.enabled?(O(),N(l(r),{key:1,label:"撤回错误消息"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.basic.autoRecall.recallError,"onUpdate:value":e[9]||(e[9]=u=>s.basic.autoRecall.recallError=u)},null,8,["value"])]),default:a(()=>[e[72]||(e[72]=o(" 开启后，错误提示也会自动撤回 ",-1))]),_:1})]),_:1})):j("",!0)]),_:1})]),_:1}),t(l(p),{title:"管理配置"},{default:a(()=>[t(l(g),{"label-placement":"left","label-width":"140"},{default:a(()=>[t(l(r),{label:"主人QQ"},{default:a(()=>[t(l(m),{value:C.value,"onUpdate:value":e[10]||(e[10]=u=>C.value=u),placeholder:"多个用逗号分隔，留空使用Yunzai配置",onBlur:D},null,8,["value"])]),_:1}),t(l(r),{label:"登录链接私聊推送"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.admin.loginNotifyPrivate,"onUpdate:value":e[11]||(e[11]=u=>s.admin.loginNotifyPrivate=u)},null,8,["value"])]),default:a(()=>[e[73]||(e[73]=o(" 开启后，群聊中触发管理面板命令时会私聊推送登录链接 ",-1))]),_:1})]),_:1}),t(l(r),{label:"敏感命令仅主人"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.admin.sensitiveCommandMasterOnly,"onUpdate:value":e[12]||(e[12]=u=>s.admin.sensitiveCommandMasterOnly=u)},null,8,["value"])]),default:a(()=>[e[74]||(e[74]=o(" 开启后，敏感命令（如管理面板）仅限主人使用 ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(l(p),{title:"模型配置"},{default:a(()=>[t(l(g),{"label-placement":"left","label-width":"140"},{default:a(()=>[t(l(r),{label:"默认模型"},{default:a(()=>[t(l(m),{value:s.llm.defaultModel,"onUpdate:value":e[14]||(e[14]=u=>s.llm.defaultModel=u),placeholder:"选择模型",readonly:"",onClick:e[15]||(e[15]=u=>f("defaultModel"))},{suffix:a(()=>[t(l(b),{size:"small",onClick:e[13]||(e[13]=y(u=>f("defaultModel"),["stop"]))},{default:a(()=>[...e[75]||(e[75]=[o("选择",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(l(v),{"title-placement":"left"},{default:a(()=>[...e[76]||(e[76]=[o("模型分类 (可选，留空使用默认模型)",-1)])]),_:1}),t(l(r),{label:"对话模型"},{default:a(()=>[t(l(m),{value:s.llm.models.chat,"onUpdate:value":e[17]||(e[17]=u=>s.llm.models.chat=u),placeholder:"普通聊天使用的模型",readonly:"",onClick:e[18]||(e[18]=u=>f("models.chat"))},{suffix:a(()=>[t(l(b),{size:"small",onClick:e[16]||(e[16]=y(u=>f("models.chat"),["stop"]))},{default:a(()=>[...e[77]||(e[77]=[o("选择",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(l(r),{label:"伪人模型"},{default:a(()=>[t(l(m),{value:s.llm.models.roleplay,"onUpdate:value":e[20]||(e[20]=u=>s.llm.models.roleplay=u),placeholder:"模拟真人回复的模型",readonly:"",onClick:e[21]||(e[21]=u=>f("models.roleplay"))},{suffix:a(()=>[t(l(b),{size:"small",onClick:e[19]||(e[19]=y(u=>f("models.roleplay"),["stop"]))},{default:a(()=>[...e[78]||(e[78]=[o("选择",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(l(r),{label:"工具调用模型"},{default:a(()=>[t(l(m),{value:s.llm.models.toolCall,"onUpdate:value":e[23]||(e[23]=u=>s.llm.models.toolCall=u),placeholder:"Function Calling 模型",readonly:"",onClick:e[24]||(e[24]=u=>f("models.toolCall"))},{suffix:a(()=>[t(l(b),{size:"small",onClick:e[22]||(e[22]=y(u=>f("models.toolCall"),["stop"]))},{default:a(()=>[...e[79]||(e[79]=[o("选择",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(l(r),{label:"搜索模型"},{default:a(()=>[t(l(m),{value:s.llm.models.search,"onUpdate:value":e[26]||(e[26]=u=>s.llm.models.search=u),placeholder:"联网搜索使用的模型",readonly:"",onClick:e[27]||(e[27]=u=>f("models.search"))},{suffix:a(()=>[t(l(b),{size:"small",onClick:e[25]||(e[25]=y(u=>f("models.search"),["stop"]))},{default:a(()=>[...e[80]||(e[80]=[o("选择",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(l(r),{label:"思考模型"},{default:a(()=>[t(l(m),{value:s.llm.models.reasoning,"onUpdate:value":e[29]||(e[29]=u=>s.llm.models.reasoning=u),placeholder:"深度推理使用的模型",readonly:"",onClick:e[30]||(e[30]=u=>f("models.reasoning"))},{suffix:a(()=>[t(l(b),{size:"small",onClick:e[28]||(e[28]=y(u=>f("models.reasoning"),["stop"]))},{default:a(()=>[...e[81]||(e[81]=[o("选择",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(l(p),{title:"伪人模式"},{default:a(()=>[t(l(g),{"label-placement":"left","label-width":"140"},{default:a(()=>[t(l(r),{label:"启用"},{default:a(()=>[t(l(i),{value:s.bym.enable,"onUpdate:value":e[31]||(e[31]=u=>s.bym.enable=u)},null,8,["value"])]),_:1}),t(l(r),{label:"触发概率"},{default:a(()=>[t(l(P),{vertical:"",style:{width:"100%"}},{default:a(()=>[t(l(V),{value:s.bym.probability,"onUpdate:value":e[32]||(e[32]=u=>s.bym.probability=u),min:0,max:1,step:.01,marks:{0:"0%",.5:"50%",1:"100%"}},null,8,["value"]),t(l(U),{value:s.bym.probability,"onUpdate:value":e[33]||(e[33]=u=>s.bym.probability=u),min:0,max:1,step:.01,size:"small",style:{width:"120px"}},null,8,["value"])]),_:1})]),_:1}),t(l(r),{label:"回复温度"},{default:a(()=>[t(l(P),{vertical:"",style:{width:"100%"}},{default:a(()=>[t(l(V),{value:s.bym.temperature,"onUpdate:value":e[34]||(e[34]=u=>s.bym.temperature=u),min:0,max:2,step:.1,marks:{0:"0",1:"1",2:"2"}},null,8,["value"]),t(l(U),{value:s.bym.temperature,"onUpdate:value":e[35]||(e[35]=u=>s.bym.temperature=u),min:0,max:2,step:.1,size:"small",style:{width:"120px"}},null,8,["value"])]),_:1})]),_:1}),t(l(r),{label:"最大 Token"},{default:a(()=>[t(l(U),{value:s.bym.maxTokens,"onUpdate:value":e[36]||(e[36]=u=>s.bym.maxTokens=u),min:10,max:1e3,step:10,style:{width:"100%"}},null,8,["value"])]),_:1}),t(l(r),{label:"启用记忆"},{default:a(()=>[t(l(i),{value:s.bym.recall,"onUpdate:value":e[37]||(e[37]=u=>s.bym.recall=u)},null,8,["value"])]),_:1}),t(l(r),{label:"使用模型"},{default:a(()=>[t(l(m),{value:s.bym.model,"onUpdate:value":e[39]||(e[39]=u=>s.bym.model=u),placeholder:"留空使用默认模型",readonly:"",onClick:e[40]||(e[40]=u=>f("bymModel"))},{suffix:a(()=>[t(l(b),{size:"small",onClick:e[38]||(e[38]=y(u=>f("bymModel"),["stop"]))},{default:a(()=>[...e[82]||(e[82]=[o("选择",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(l(r),{label:"系统提示词"},{default:a(()=>[t(l(m),{value:s.bym.systemPrompt,"onUpdate:value":e[41]||(e[41]=u=>s.bym.systemPrompt=u),type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"伪人模式的系统提示词"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(l(p),{title:"工具调用"},{default:a(()=>[t(l(g),{"label-placement":"left","label-width":"140"},{default:a(()=>[t(l(r),{label:"显示调用日志"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.tools.showCallLogs,"onUpdate:value":e[42]||(e[42]=u=>s.tools.showCallLogs=u)},null,8,["value"])]),default:a(()=>[e[83]||(e[83]=o(" 开启后，显示工具调用的详细日志 ",-1))]),_:1})]),_:1}),t(l(r),{label:"日志合并转发"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.tools.useForwardMsg,"onUpdate:value":e[43]||(e[43]=u=>s.tools.useForwardMsg=u)},null,8,["value"])]),default:a(()=>[e[84]||(e[84]=o(" 开启后，工具调用日志使用合并转发发送 ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(l(p),{title:"深度思考"},{default:a(()=>[t(l(g),{"label-placement":"left","label-width":"140"},{default:a(()=>[t(l(r),{label:"显示思考内容"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.thinking.showThinkingContent,"onUpdate:value":e[44]||(e[44]=u=>s.thinking.showThinkingContent=u)},null,8,["value"])]),default:a(()=>[e[85]||(e[85]=o(" 开启后，显示AI的思考过程 ",-1))]),_:1})]),_:1}),t(l(r),{label:"思考合并转发"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.thinking.useForwardMsg,"onUpdate:value":e[45]||(e[45]=u=>s.thinking.useForwardMsg=u)},null,8,["value"])]),default:a(()=>[e[86]||(e[86]=o(" 开启后，思考内容使用合并转发发送 ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(l(p),{title:"高级功能"},{default:a(()=>[t(l(g),{"label-placement":"left","label-width":"140"},{default:a(()=>[t(l(v),{"title-placement":"left"},{default:a(()=>[...e[87]||(e[87]=[o("群聊总结",-1)])]),_:1}),t(l(r),{label:"启用"},{default:a(()=>[t(l(i),{value:s.features.groupSummary.enabled,"onUpdate:value":e[46]||(e[46]=u=>s.features.groupSummary.enabled=u)},null,8,["value"])]),_:1}),t(l(r),{label:"最大消息数"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(U),{value:s.features.groupSummary.maxMessages,"onUpdate:value":e[47]||(e[47]=u=>s.features.groupSummary.maxMessages=u),min:10,max:500,step:10,style:{width:"150px"}},null,8,["value"])]),default:a(()=>[e[88]||(e[88]=o(" 总结时分析的最大消息数量 ",-1))]),_:1})]),_:1}),t(l(v),{"title-placement":"left"},{default:a(()=>[...e[89]||(e[89]=[o("个人画像",-1)])]),_:1}),t(l(r),{label:"启用"},{default:a(()=>[t(l(i),{value:s.features.userPortrait.enabled,"onUpdate:value":e[48]||(e[48]=u=>s.features.userPortrait.enabled=u)},null,8,["value"])]),_:1}),t(l(r),{label:"最少消息数"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(U),{value:s.features.userPortrait.minMessages,"onUpdate:value":e[49]||(e[49]=u=>s.features.userPortrait.minMessages=u),min:5,max:100,step:5,style:{width:"150px"}},null,8,["value"])]),default:a(()=>[e[90]||(e[90]=o(" 生成画像需要的最少消息数量 ",-1))]),_:1})]),_:1}),t(l(v),{"title-placement":"left"},{default:a(()=>[...e[91]||(e[91]=[o("戳一戳响应",-1)])]),_:1}),t(l(r),{label:"启用"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.features.poke.enabled,"onUpdate:value":e[50]||(e[50]=u=>s.features.poke.enabled=u)},null,8,["value"])]),default:a(()=>[e[92]||(e[92]=o(" 开启后，被戳时会使用AI人设回复 ",-1))]),_:1})]),_:1}),t(l(r),{label:"自动回戳"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.features.poke.pokeBack,"onUpdate:value":e[51]||(e[51]=u=>s.features.poke.pokeBack=u),disabled:!s.features.poke.enabled},null,8,["value","disabled"])]),default:a(()=>[e[93]||(e[93]=o(" 回复后自动戳回去 ",-1))]),_:1})]),_:1}),t(l(r),{label:"备用回复"},{default:a(()=>[t(l(m),{value:s.features.poke.message,"onUpdate:value":e[52]||(e[52]=u=>s.features.poke.message=u),placeholder:"AI回复失败时的备用回复",disabled:!s.features.poke.enabled},null,8,["value","disabled"])]),_:1}),t(l(v),{"title-placement":"left"},{default:a(()=>[...e[94]||(e[94]=[o("表情回应",-1)])]),_:1}),t(l(r),{label:"启用"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.features.reaction.enabled,"onUpdate:value":e[53]||(e[53]=u=>s.features.reaction.enabled=u)},null,8,["value"])]),default:a(()=>[e[95]||(e[95]=o(" 开启后，收到表情回应时会使用AI人设处理（需适配器支持） ",-1))]),_:1})]),_:1}),t(l(v),{"title-placement":"left"},{default:a(()=>[...e[96]||(e[96]=[o("长期记忆",-1)])]),_:1}),t(l(r),{label:"启用记忆"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.memory.enabled,"onUpdate:value":e[54]||(e[54]=u=>s.memory.enabled=u)},null,8,["value"])]),default:a(()=>[e[97]||(e[97]=o(" 启用后，AI会记住用户透露的个人信息和偏好 ",-1))]),_:1})]),_:1}),t(l(r),{label:"自动提取"},{default:a(()=>[t(l(n),{trigger:"hover"},{trigger:a(()=>[t(l(i),{value:s.memory.autoExtract,"onUpdate:value":e[55]||(e[55]=u=>s.memory.autoExtract=u),disabled:!s.memory.enabled},null,8,["value","disabled"])]),default:a(()=>[e[98]||(e[98]=o(" 自动从对话中提取值得记忆的信息 ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(l(p),{title:"监听配置"},{default:a(()=>[t(l(g),{"label-placement":"left","label-width":"140"},{default:a(()=>[t(l(r),{label:"启用监听"},{default:a(()=>[t(l(i),{value:s.listener.enabled,"onUpdate:value":e[56]||(e[56]=u=>s.listener.enabled=u)},null,8,["value"])]),_:1}),t(l(r),{label:"触发模式"},{default:a(()=>[t(l(L),{value:s.listener.triggerMode,"onUpdate:value":e[57]||(e[57]=u=>s.listener.triggerMode=u),options:$,style:{width:"200px"}},null,8,["value"])]),_:1}),q.value?(O(),N(l(r),{key:0,label:"触发前缀"},{default:a(()=>[t(l(m),{value:s.listener.triggerPrefix,"onUpdate:value":e[58]||(e[58]=u=>s.listener.triggerPrefix=u),placeholder:"如: #ai 或 /chat",style:{width:"200px"}},null,8,["value"])]),_:1})):j("",!0),t(l(v),{"title-placement":"left"},{default:a(()=>[...e[99]||(e[99]=[o("群组过滤",-1)])]),_:1}),t(l(E),{cols:2,"x-gap":24,responsive:"screen","collapsed-cols":1},{default:a(()=>[t(l(S),null,{default:a(()=>[t(l(r),{label:"群白名单"},{default:a(()=>[t(l(R),{value:s.listener.whitelistGroups,"onUpdate:value":e[59]||(e[59]=u=>s.listener.whitelistGroups=u)},null,8,["value"])]),_:1})]),_:1}),t(l(S),null,{default:a(()=>[t(l(r),{label:"群黑名单"},{default:a(()=>[t(l(R),{value:s.listener.blacklistGroups,"onUpdate:value":e[60]||(e[60]=u=>s.listener.blacklistGroups=u)},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(l(v),{"title-placement":"left"},{default:a(()=>[...e[100]||(e[100]=[o("用户过滤",-1)])]),_:1}),t(l(E),{cols:2,"x-gap":24,responsive:"screen","collapsed-cols":1},{default:a(()=>[t(l(S),null,{default:a(()=>[t(l(r),{label:"用户白名单"},{default:a(()=>[t(l(R),{value:s.listener.whitelistUsers,"onUpdate:value":e[61]||(e[61]=u=>s.listener.whitelistUsers=u)},null,8,["value"])]),_:1})]),_:1}),t(l(S),null,{default:a(()=>[t(l(r),{label:"用户黑名单"},{default:a(()=>[t(l(R),{value:s.listener.blacklistUsers,"onUpdate:value":e[62]||(e[62]=u=>s.listener.blacklistUsers=u)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(l(F),{type:"info",title:"命令提示",style:{"margin-top":"8px"}},{default:a(()=>[...e[101]||(e[101]=[x("div",null,[o("• "),x("strong",null,"#群聊总结"),o(" - 总结群聊消息")],-1),x("div",null,[o("• "),x("strong",null,"#个人画像"),o(" - 分析自己的用户画像")],-1),x("div",null,[o("• "),x("strong",null,"#分析 @用户"),o(" - 分析指定用户的画像")],-1)])]),_:1}),t(l(P),{justify:"end",style:{"margin-top":"16px",position:"sticky",bottom:"16px",background:"var(--n-color)",padding:"12px","border-radius":"8px","box-shadow":"0 -2px 8px rgba(0,0,0,0.1)"}},{default:a(()=>[t(l(b),{type:"primary",size:"large",onClick:Y,loading:T.value},{default:a(()=>[...e[102]||(e[102]=[o(" 保存配置 ",-1)])]),_:1},8,["loading"])]),_:1}),t(l(ee),{show:M.value,"onUpdate:show":e[63]||(e[63]=u=>M.value=u),preset:"card",title:"选择模型",style:{width:"800px","max-height":"85vh"}},{default:a(()=>[t(le,{"all-models":z.value,value:[],multiple:!1,"onUpdate:value":X},null,8,["all-models"])]),_:1},8,["show"])]),_:1}))}};export{pe as default};
