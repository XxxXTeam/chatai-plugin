import{G as g,j as n,s as f,U as m,K as r,L as s,at as p,H as k,E as y,J as o,M as _,as as v}from"./index-o4Nj2Cvq.js";import{N}from"./DataTable-jiwH-0KG.js";import"./Select-D4Iz-QNo.js";const M={__name:"LoadBalancingView",setup(x){const u=g(),l=n([]),t=n(!1),c=[{title:"ID",key:"id"},{title:"名称",key:"name"},{title:"状态",key:"status",render(a){return h(v,{type:a.status==="active"?"success":a.status==="error"?"error":"default"},{default:()=>a.status})}},{title:"优先级",key:"priority"},{title:"今日用量",key:"usage",render(a){if(!a.usage)return"0";let e=`${a.usage.count} 次`;if(a.quota&&a.quota.daily){const d=Math.round(a.usage.count/a.quota.daily*100);e+=` (${d}%)`}return e}},{title:"最后检查",key:"lastHealthCheck",render:a=>a.lastHealthCheck?new Date(a.lastHealthCheck).toLocaleString():"-"}];async function i(){t.value=!0;try{const a=localStorage.getItem("token"),e=await k.get("/api/stats/load-balancing",{headers:{Authorization:`Bearer ${a}`}});l.value=e.data.data}catch(a){u.error("获取统计失败: "+(a.response?.data?.message||a.message))}finally{t.value=!1}}return f(()=>{i()}),(a,e)=>(y(),m(s(p),{vertical:""},{default:r(()=>[o(s(_),{title:"负载均衡监控"},{default:r(()=>[o(s(N),{columns:c,data:l.value,loading:t.value},null,8,["data","loading"])]),_:1})]),_:1}))}};export{M as default};
