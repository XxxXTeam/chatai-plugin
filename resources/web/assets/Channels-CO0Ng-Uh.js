import{d as Q,h as o,c as T,a as pe,b as L,e as B,f as Z,u as be,g as Ce,i as ke,p as Pe,j as $e,r as Ie,k as Te,l as Se,m as Ve,n as Be,o as Ne,q as xe,N as q,s as oe,B as k,t as me,v as ce,w,x as ae,y as Ke,z as Ue,A as Y,C as Ae,D as De,E as re,F as se,G as Le,H as X,I as ie,J as Me,_ as Oe,K as ze,L as je,M as Fe,O as i,P as l,Q as R,R as D,S as qe,T as n,U as Ee,V,W as ve,X as Ge,Y as y,Z as We,$ as _e,a0 as fe}from"./index-Dj2VUuXx.js";import{N as te,M as He}from"./ModelSelector-Dc460xJQ.js";import{s as Je,r as Ye,A as Qe,N as Xe,a as Ze}from"./DataTable-BO9cITB4.js";import{N as ye}from"./Select-DHY3UzF1.js";import{A as ge}from"./Add-BU62hiNV.js";import{R as ea,N as W}from"./InputNumber-BFUNVxPe.js";import{N as _}from"./Switch-PZo65JJn.js";import{N as aa}from"./DynamicTags-ExFb375B.js";import{N as ta,a as ue}from"./CollapseItem-BT2d37p1.js";import{N as la}from"./Popconfirm-BzYoWkDx.js";import"./SearchOutlined-Cists19_.js";import"./text-BNgTA-fV.js";const na=Q({name:"ArrowUp",render(){return o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},o("g",{fill:"none"},o("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),v="0!important",Re="-1px!important";function H(s){return L(`${s}-type`,[B("& +",[T("button",{},[L(`${s}-type`,[Z("border",{borderLeftWidth:v}),Z("state-border",{left:Re})])])])])}function J(s){return L(`${s}-type`,[B("& +",[T("button",[L(`${s}-type`,[Z("border",{borderTopWidth:v}),Z("state-border",{top:Re})])])])])}const ra=T("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[pe("vertical",{flexDirection:"row"},[pe("rtl",[T("button",[B("&:first-child:not(:last-child)",`
 margin-right: ${v};
 border-top-right-radius: ${v};
 border-bottom-right-radius: ${v};
 `),B("&:last-child:not(:first-child)",`
 margin-left: ${v};
 border-top-left-radius: ${v};
 border-bottom-left-radius: ${v};
 `),B("&:not(:first-child):not(:last-child)",`
 margin-left: ${v};
 margin-right: ${v};
 border-radius: ${v};
 `),H("default"),L("ghost",[H("primary"),H("info"),H("success"),H("warning"),H("error")])])])]),L("vertical",{flexDirection:"column"},[T("button",[B("&:first-child:not(:last-child)",`
 margin-bottom: ${v};
 margin-left: ${v};
 margin-right: ${v};
 border-bottom-left-radius: ${v};
 border-bottom-right-radius: ${v};
 `),B("&:last-child:not(:first-child)",`
 margin-top: ${v};
 margin-left: ${v};
 margin-right: ${v};
 border-top-left-radius: ${v};
 border-top-right-radius: ${v};
 `),B("&:not(:first-child):not(:last-child)",`
 margin: ${v};
 border-radius: ${v};
 `),J("default"),L("ghost",[J("primary"),J("info"),J("success"),J("warning"),J("error")])])])]),sa={size:{type:String,default:void 0},vertical:Boolean},ia=Q({name:"ButtonGroup",props:sa,setup(s){const{mergedClsPrefixRef:d,mergedRtlRef:g}=be(s);return Ce("-button-group",ra,d),Pe($e,s),{rtlEnabled:ke("ButtonGroup",g,d),mergedClsPrefix:d}},render(){const{mergedClsPrefix:s}=this;return o("div",{class:[`${s}-button-group`,this.rtlEnabled&&`${s}-button-group--rtl`,this.vertical&&`${s}-button-group--vertical`],role:"group"},this.$slots)}}),he=Q({name:"RadioButton",props:Ye,setup:Je,render(){const{mergedClsPrefix:s}=this;return o("label",{class:[`${s}-radio-button`,this.mergedDisabled&&`${s}-radio-button--disabled`,this.renderSafeChecked&&`${s}-radio-button--checked`,this.focus&&[`${s}-radio-button--focus`]]},o("input",{ref:"inputRef",type:"radio",class:`${s}-radio-input`,value:this.value,name:this.mergedName,checked:this.renderSafeChecked,disabled:this.mergedDisabled,onChange:this.handleRadioInputChange,onFocus:this.handleRadioInputFocus,onBlur:this.handleRadioInputBlur}),o("div",{class:`${s}-radio-button__state-border`}),Ie(this.$slots.default,d=>!d&&!this.label?null:o("div",{ref:"labelRef",class:`${s}-radio__label`},d||this.label)))}});function ua(){return Ne}const oa=Te({name:"DynamicInput",common:Be,peers:{Input:Ve,Button:Se},self:ua}),de=xe("n-dynamic-input"),da=Q({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:s,placeholderRef:d}=oe(de);return{mergedTheme:s,placeholder:d}},render(){const{mergedTheme:s,placeholder:d,value:g,clsPrefix:p,onUpdateValue:m,disabled:P}=this;return o("div",{class:`${p}-dynamic-input-preset-input`},o(q,{theme:s.peers.Input,"theme-overrides":s.peerOverrides.Input,value:g,placeholder:d,onUpdateValue:m,disabled:P}))}}),pa=Q({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(s){const{mergedThemeRef:d,keyPlaceholderRef:g,valuePlaceholderRef:p}=oe(de);return{mergedTheme:d,keyPlaceholder:g,valuePlaceholder:p,handleKeyInput(m){s.onUpdateValue({key:m,value:s.value.value})},handleValueInput(m){s.onUpdateValue({key:s.value.key,value:m})}}},render(){const{mergedTheme:s,keyPlaceholder:d,valuePlaceholder:g,value:p,clsPrefix:m,disabled:P}=this;return o("div",{class:`${m}-dynamic-input-preset-pair`},o(q,{theme:s.peers.Input,"theme-overrides":s.peerOverrides.Input,value:p.key,class:`${m}-dynamic-input-pair-input`,placeholder:d,onUpdateValue:this.handleKeyInput,disabled:P}),o(q,{theme:s.peers.Input,"theme-overrides":s.peerOverrides.Input,value:p.value,class:`${m}-dynamic-input-pair-input`,placeholder:g,onUpdateValue:this.handleValueInput,disabled:P}))}}),ma=T("dynamic-input",{width:"100%"},[T("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[T("dynamic-input-preset-input",{flex:1,alignItems:"center"}),T("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[T("dynamic-input-pair-input",[B("&:first-child",{"margin-right":"12px"})])]),Z("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[L("icon",{cursor:"pointer"})]),B("&:last-child",{marginBottom:0})]),T("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[T("form-item-blank",{paddingTop:"0 !important"})])]),le=new WeakMap,ca=Object.assign(Object.assign({},Ue.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),va=Q({name:"DynamicInput",props:ca,setup(s,{slots:d}){const{mergedComponentPropsRef:g,mergedClsPrefixRef:p,mergedRtlRef:m,inlineThemeDisabled:P}=be(),b=oe(Me,null),C=w(s.defaultValue),M=ae(s,"value"),h=Ke(M,C),N=Ue("DynamicInput","-dynamic-input",ma,oa,s,p),r=Y(()=>{const{value:u}=h;if(Array.isArray(u)){const{max:t}=s;return t!==void 0&&u.length>=t}return!1}),E=Y(()=>{const{value:u}=h;return Array.isArray(u)?u.length<=s.min:!0}),G=Y(()=>{var u,t;return(t=(u=g?.value)===null||u===void 0?void 0:u.DynamicInput)===null||t===void 0?void 0:t.buttonSize});function $(u){const{onInput:t,"onUpdate:value":e,onUpdateValue:a}=s;t&&ie(t,u),e&&ie(e,u),a&&ie(a,u),C.value=u}function S(u,t){if(u==null||typeof u!="object")return t;const e=re(u)?se(u):u;let a=le.get(e);return a===void 0&&le.set(e,a=Le()),a}function O(u,t){const{value:e}=h,a=Array.from(e??[]),f=a[u];if(a[u]=t,f&&t&&typeof f=="object"&&typeof t=="object"){const A=re(f)?se(f):f,U=re(t)?se(t):t,F=le.get(A);F!==void 0&&le.set(U,F)}$(a)}function z(){I(-1)}function I(u){const{value:t}=h,{onCreate:e}=s,a=Array.from(t??[]);if(e)a.splice(u+1,0,e(u+1)),$(a);else if(d.default)a.splice(u+1,0,null),$(a);else switch(s.preset){case"input":a.splice(u+1,0,""),$(a);break;case"pair":a.splice(u+1,0,{key:"",value:""}),$(a);break}}function x(u){const{value:t}=h;if(!Array.isArray(t))return;const{min:e}=s;if(t.length<=e)return;const{onRemove:a}=s;a&&a(u);const f=Array.from(t);f.splice(u,1),$(f)}function c(u,t,e){if(t<0||e<0||t>=u.length||e>=u.length||t===e)return;const a=u[t];u[t]=u[e],u[e]=a}function j(u,t){const{value:e}=h;if(!Array.isArray(e))return;const a=Array.from(e);u==="up"&&c(a,t,t-1),u==="down"&&c(a,t,t+1),$(a)}Pe(de,{mergedThemeRef:N,keyPlaceholderRef:ae(s,"keyPlaceholder"),valuePlaceholderRef:ae(s,"valuePlaceholder"),placeholderRef:ae(s,"placeholder")});const ne=ke("DynamicInput",m,p),ee=Y(()=>{const{self:{actionMargin:u,actionMarginRtl:t}}=N.value;return{"--action-margin":u,"--action-margin-rtl":t}}),K=P?Ae("dynamic-input",void 0,ee,s):void 0;return{locale:De("DynamicInput").localeRef,rtlEnabled:ne,buttonSize:G,mergedClsPrefix:p,NFormItem:b,uncontrolledValue:C,mergedValue:h,insertionDisabled:r,removeDisabled:E,handleCreateClick:z,ensureKey:S,handleValueChange:O,remove:x,move:j,createItem:I,mergedTheme:N,cssVars:P?void 0:ee,themeClass:K?.themeClass,onRender:K?.onRender}},render(){const{$slots:s,itemClass:d,buttonSize:g,mergedClsPrefix:p,mergedValue:m,locale:P,mergedTheme:b,keyField:C,itemStyle:M,preset:h,showSortButton:N,NFormItem:r,ensureKey:E,handleValueChange:G,remove:$,createItem:S,move:O,onRender:z,disabled:I}=this;return z?.(),o("div",{class:[`${p}-dynamic-input`,this.rtlEnabled&&`${p}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(m)||m.length===0?o(k,Object.assign({block:!0,ghost:!0,dashed:!0,size:g},this.createButtonProps,{disabled:this.insertionDisabled||I,theme:b.peers.Button,themeOverrides:b.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>me(s["create-button-default"],()=>[P.create]),icon:()=>me(s["create-button-icon"],()=>[o(X,{clsPrefix:p},{default:()=>o(ge,null)})])}):m.map((x,c)=>o("div",{key:C?x[C]:E(x,c),"data-key":C?x[C]:E(x,c),class:[`${p}-dynamic-input-item`,d],style:M},ce(s.default,{value:m[c],index:c},()=>[h==="input"?o(da,{disabled:I,clsPrefix:p,value:m[c],parentPath:r?r.path.value:void 0,path:r?.path.value?`${r.path.value}[${c}]`:void 0,onUpdateValue:j=>{G(c,j)}}):h==="pair"?o(pa,{disabled:I,clsPrefix:p,value:m[c],parentPath:r?r.path.value:void 0,path:r?.path.value?`${r.path.value}[${c}]`:void 0,onUpdateValue:j=>{G(c,j)}}):null]),ce(s.action,{value:m[c],index:c,create:S,remove:$,move:O},()=>[o("div",{class:`${p}-dynamic-input-item__action`},o(ia,{size:g},{default:()=>[o(k,{disabled:this.removeDisabled||I,theme:b.peers.Button,themeOverrides:b.peerOverrides.Button,circle:!0,onClick:()=>{$(c)}},{icon:()=>o(X,{clsPrefix:p},{default:()=>o(ea,null)})}),o(k,{disabled:this.insertionDisabled||I,circle:!0,theme:b.peers.Button,themeOverrides:b.peerOverrides.Button,onClick:()=>{S(c)}},{icon:()=>o(X,{clsPrefix:p},{default:()=>o(ge,null)})}),N?o(k,{disabled:c===0||I,circle:!0,theme:b.peers.Button,themeOverrides:b.peerOverrides.Button,onClick:()=>{O("up",c)}},{icon:()=>o(X,{clsPrefix:p},{default:()=>o(na,null)})}):null,N?o(k,{disabled:c===m.length-1||I,circle:!0,theme:b.peers.Button,themeOverrides:b.peerOverrides.Button,onClick:()=>{O("down",c)}},{icon:()=>o(X,{clsPrefix:p},{default:()=>o(Qe,null)})}):null]}))]))))}}),fa={style:{display:"flex","align-items":"center",width:"100%",gap:"10px"}},ya={__name:"Channels",setup(s){const d=ze(),g=w([]),p=w(!1),m=w(!1);w(!1);const P=w(!1),b=w(!1),C=w(""),M=w([]),h=w([]);w("");const N=w(null),r=w({name:"",adapterType:"openai",baseUrl:"",apiKey:"",apiKeys:[],strategy:"round-robin",models:[],priority:1,enabled:!0,advanced:{streaming:{enabled:!1,chunkSize:1024},thinking:{enableReasoning:!1,defaultLevel:"medium",adaptThinking:!0,sendThinkingAsMessage:!1},llm:{temperature:.7,maxTokens:4e3,topP:1,frequencyPenalty:0,presencePenalty:0}}}),E={name:{required:!0,message:"请输入名称",trigger:"blur"},adapterType:{required:!0,message:"请选择类型",trigger:"change"},baseUrl:{required:!0,message:"请输入BaseURL",trigger:"blur"},apiKey:{required:!0,message:"请输入API Key",trigger:"blur"}},G=[{title:"名称",key:"name"},{title:"类型",key:"adapterType"},{title:"BaseURL",key:"baseUrl",ellipsis:{tooltip:!0}},{title:"启用",key:"enabled",width:80,render(t){return o(_,{value:t.enabled,onUpdateValue:e=>$(t,e)})}},{title:"状态",key:"status",width:80,render(t){let e="idle",a="default";return t.enabled?t.lastError?(e="错误",a="error"):t.lastUsed?(e="正常",a="success"):(e="待测试",a="info"):(e="已禁用",a="warning"),o(fe,{type:a,size:"small"},{default:()=>e})}},{title:"优先级",key:"priority",width:80,sorter:(t,e)=>t.priority-e.priority},{title:"调用次数",key:"stats.totalCalls",width:90,render(t){const e=t.stats||{};return o(fe,{size:"small",type:e.totalCalls>0?"success":"default"},{default:()=>e.totalCalls||0})}},{title:"操作",key:"actions",width:180,render(t){return o(R,{},{default:()=>[o(k,{size:"small",onClick:()=>x(t)},{default:()=>"测试"}),o(k,{size:"small",onClick:()=>z(t)},{default:()=>"编辑"}),o(la,{onPositiveClick:()=>I(t)},{trigger:()=>o(k,{size:"small",type:"error"},{default:()=>"删除"}),default:()=>"确定要删除吗？"})]})}}];async function $(t,e){try{const a=await D.put(`/api/channels/${t.id}`,{...t,enabled:e});a.data.code===0?(d.success(e?"渠道已启用":"渠道已禁用"),S()):d.error(a.data.message)}catch(a){d.error("操作失败: "+(a.response?.data?.message||a.message))}}async function S(){try{const t=await D.get("/api/channels/list?withStats=true");t.data.code===0&&(g.value=t.data.data)}catch{d.error("获取渠道列表失败")}}function O(){b.value=!1,C.value="",r.value={name:"",adapterType:"openai",baseUrl:"",apiKey:"",apiKeys:[],strategy:"round-robin",models:[],priority:1,enabled:!0,advanced:{streaming:{enabled:!1,chunkSize:1024},thinking:{enableReasoning:!1,defaultLevel:"medium",adaptThinking:!0,sendThinkingAsMessage:!1},llm:{temperature:.7,maxTokens:4e3,topP:1,frequencyPenalty:0,presencePenalty:0}}},p.value=!0}function z(t){b.value=!0,C.value=t.id,r.value={...t,apiKey:t.apiKey||"",apiKeys:t.apiKeys&&t.apiKeys.length>0?t.apiKeys:t.apiKey?[{key:t.apiKey,enabled:!0}]:[],strategy:t.strategy||"round-robin",advanced:t.advanced||{streaming:{enabled:!1,chunkSize:1024},thinking:{enableReasoning:!1,defaultLevel:"medium",adaptThinking:!0,sendThinkingAsMessage:!1},llm:{temperature:.7,maxTokens:4e3,topP:1,frequencyPenalty:0,presencePenalty:0}}},p.value=!0}async function I(t){try{const e=await D.delete(`/api/channels/${t.id}`);e.data.code===0?(d.success("删除成功"),S()):d.error(e.data.message)}catch{d.error("删除失败")}}async function x(t){try{const e=await D.post("/api/channels/test",{adapterType:t.adapterType,baseUrl:t.baseUrl,apiKey:t.apiKey,models:t.models||[],advanced:t.advanced||{}});e.data.code===0?d.success(e.data.data.message):d.error(e.data.message)}catch(e){d.error("测试失败: "+(e.response?.data?.message||e.message))}}Y(()=>M.value.filter(t=>!r.value.models.includes(t)).length),Y(()=>r.value.models.length);async function c(){const t=r.value.apiKeys.find(e=>e.enabled)?.key||r.value.apiKey;if(!r.value.baseUrl||!t){d.warning("请先填写 BaseURL 和至少一个启用的 API Key");return}P.value=!0;try{const e=await D.post("/api/channels/fetch-models",{adapterType:r.value.adapterType,baseUrl:r.value.baseUrl,apiKey:t});e.data.code===0?(M.value=e.data.data.models,h.value=r.value.models||[],m.value=!0,d.success(`获取到 ${e.data.data.models.length} 个模型`)):d.error(e.data.message)}catch(e){d.error("获取模型失败: "+e.message)}finally{P.value=!1}}function j(){r.value.models=[...h.value],m.value=!1,d.success(`已选择 ${h.value.length} 个模型`)}function ne(){return{key:"",enabled:!0}}function ee(){const t=g.value.map(U=>({name:U.name,adapterType:U.adapterType,baseUrl:U.baseUrl,models:U.models,priority:U.priority,enabled:U.enabled,advanced:U.advanced,strategy:U.strategy})),e=JSON.stringify(t,null,2),a=new Blob([e],{type:"application/json"}),f=URL.createObjectURL(a),A=document.createElement("a");A.href=f,A.download=`channels_${new Date().toISOString().slice(0,10)}.json`,A.click(),URL.revokeObjectURL(f),d.success("导出成功（不含 API Key）")}function K(){const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=async e=>{const a=e.target.files[0];if(a)try{const f=await a.text(),A=JSON.parse(f);if(!Array.isArray(A)){d.error("无效的渠道文件格式");return}let U=0;for(const F of A)try{F.apiKey||(F.apiKey="PLEASE_FILL_YOUR_API_KEY"),await D.post("/api/channels",F),U++}catch(we){console.error("导入渠道失败:",F.name,we)}d.success(`成功导入 ${U} 个渠道，请编辑填写 API Key`),S()}catch(f){d.error("导入失败: "+f.message)}},t.click()}async function u(){N.value?.validate(async t=>{if(!t)try{let e;b.value?e=await D.put(`/api/channels/${C.value}`,r.value):e=await D.post("/api/channels",r.value),e.data.code===0?(d.success("保存成功"),p.value=!1,S()):d.error(e.data.message)}catch{d.error("保存失败")}})}return je(()=>{S()}),(t,e)=>(qe(),Fe(l(R),{vertical:""},{default:i(()=>[n(l(Ee),{title:"渠道管理"},{"header-extra":i(()=>[n(l(R),null,{default:i(()=>[n(l(k),{onClick:K},{default:i(()=>[...e[27]||(e[27]=[V("导入",-1)])]),_:1}),n(l(k),{onClick:ee},{default:i(()=>[...e[28]||(e[28]=[V("导出",-1)])]),_:1}),n(l(k),{type:"primary",onClick:O},{default:i(()=>[...e[29]||(e[29]=[V("添加渠道",-1)])]),_:1})]),_:1})]),default:i(()=>[n(l(Xe),{columns:G,data:g.value},null,8,["data"])]),_:1}),n(l(ve),{show:p.value,"onUpdate:show":e[23]||(e[23]=a=>p.value=a),preset:"card",title:"配置渠道",style:{width:"600px"}},{footer:i(()=>[n(l(R),{justify:"end"},{default:i(()=>[n(l(k),{onClick:e[22]||(e[22]=a=>p.value=!1)},{default:i(()=>[...e[33]||(e[33]=[V("取消",-1)])]),_:1}),n(l(k),{type:"primary",onClick:u},{default:i(()=>[...e[34]||(e[34]=[V("保存",-1)])]),_:1})]),_:1})]),default:i(()=>[n(l(Ge),{ref_key:"formRef",ref:N,model:r.value,rules:E,"label-placement":"left","label-width":"100"},{default:i(()=>[n(l(y),{label:"名称",path:"name"},{default:i(()=>[n(l(q),{value:r.value.name,"onUpdate:value":e[0]||(e[0]=a=>r.value.name=a),placeholder:"请输入名称"},null,8,["value"])]),_:1}),n(l(y),{label:"类型",path:"adapterType"},{default:i(()=>[n(l(ye),{value:r.value.adapterType,"onUpdate:value":e[1]||(e[1]=a=>r.value.adapterType=a),options:[{label:"OpenAI",value:"openai"},{label:"Gemini",value:"gemini"},{label:"Claude",value:"claude"}]},null,8,["value"])]),_:1}),n(l(y),{label:"BaseURL",path:"baseUrl"},{default:i(()=>[n(l(q),{value:r.value.baseUrl,"onUpdate:value":e[2]||(e[2]=a=>r.value.baseUrl=a),placeholder:"请输入BaseURL"},null,8,["value"])]),_:1}),n(l(y),{label:"轮询策略",path:"strategy"},{default:i(()=>[n(l(Ze),{value:r.value.strategy,"onUpdate:value":e[3]||(e[3]=a=>r.value.strategy=a)},{default:i(()=>[n(l(he),{value:"round-robin",label:"轮询 (Round Robin)"}),n(l(he),{value:"random",label:"随机 (Random)"})]),_:1},8,["value"])]),_:1}),n(l(y),{label:"API Keys",path:"apiKeys"},{default:i(()=>[n(l(va),{value:r.value.apiKeys,"onUpdate:value":e[4]||(e[4]=a=>r.value.apiKeys=a),"on-create":ne},{default:i(({value:a})=>[We("div",fa,[n(l(q),{value:a.key,"onUpdate:value":f=>a.key=f,placeholder:"sk-...",type:"password","show-password-on":"click"},null,8,["value","onUpdate:value"]),n(l(_),{value:a.enabled,"onUpdate:value":f=>a.enabled=f},{checked:i(()=>[...e[30]||(e[30]=[V("启用",-1)])]),unchecked:i(()=>[...e[31]||(e[31]=[V("禁用",-1)])]),_:1},8,["value","onUpdate:value"])])]),_:1},8,["value"])]),_:1}),n(l(y),{label:"优先级",path:"priority"},{default:i(()=>[n(l(q),{value:r.value.priority,"onUpdate:value":e[5]||(e[5]=a=>r.value.priority=a),type:"number",placeholder:"数字越小优先级越高"},null,8,["value"])]),_:1}),n(l(y),{label:"模型列表",path:"models"},{default:i(()=>[n(l(R),{vertical:"",style:{width:"100%"}},{default:i(()=>[n(l(aa),{value:r.value.models,"onUpdate:value":e[6]||(e[6]=a=>r.value.models=a)},null,8,["value"]),n(l(k),{block:"",loading:P.value,onClick:c},{default:i(()=>[...e[32]||(e[32]=[V("获取模型列表",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),n(l(y),{label:"高级设置"},{default:i(()=>[n(l(ta),{style:{width:"100%"}},{default:i(()=>[n(l(ue),{title:"流式输出设置",name:"streaming"},{default:i(()=>[n(l(R),{vertical:""},{default:i(()=>[n(l(y),{label:"启用流式输出","label-placement":"left"},{default:i(()=>[n(l(_),{value:r.value.advanced.streaming.enabled,"onUpdate:value":e[7]||(e[7]=a=>r.value.advanced.streaming.enabled=a)},null,8,["value"])]),_:1}),n(l(y),{label:"块大小","label-placement":"left"},{default:i(()=>[n(l(W),{value:r.value.advanced.streaming.chunkSize,"onUpdate:value":e[8]||(e[8]=a=>r.value.advanced.streaming.chunkSize=a),min:512,max:8192,step:512,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),n(l(ue),{title:"思考控制设置",name:"thinking"},{default:i(()=>[n(l(R),{vertical:""},{default:i(()=>[n(l(y),{label:"启用推理模式","label-placement":"left"},{default:i(()=>[n(l(_),{value:r.value.advanced.thinking.enableReasoning,"onUpdate:value":e[9]||(e[9]=a=>r.value.advanced.thinking.enableReasoning=a)},null,8,["value"])]),_:1}),n(l(y),{label:"默认思考级别","label-placement":"left"},{default:i(()=>[n(l(ye),{value:r.value.advanced.thinking.defaultLevel,"onUpdate:value":e[10]||(e[10]=a=>r.value.advanced.thinking.defaultLevel=a),options:[{label:"低 (Low)",value:"low"},{label:"中 (Medium)",value:"medium"},{label:"高 (High)",value:"high"}]},null,8,["value"])]),_:1}),n(l(y),{label:"自适应思考","label-placement":"left"},{default:i(()=>[n(l(_),{value:r.value.advanced.thinking.adaptThinking,"onUpdate:value":e[11]||(e[11]=a=>r.value.advanced.thinking.adaptThinking=a)},null,8,["value"])]),_:1}),n(l(y),{label:"发送思考为消息","label-placement":"left"},{default:i(()=>[n(l(_),{value:r.value.advanced.thinking.sendThinkingAsMessage,"onUpdate:value":e[12]||(e[12]=a=>r.value.advanced.thinking.sendThinkingAsMessage=a)},null,8,["value"])]),_:1})]),_:1})]),_:1}),n(l(ue),{title:"LLM 参数设置",name:"llm"},{default:i(()=>[n(l(R),{vertical:""},{default:i(()=>[n(l(y),{label:"Temperature","label-placement":"left"},{default:i(()=>[n(l(R),{vertical:"",style:{width:"100%"}},{default:i(()=>[n(l(te),{value:r.value.advanced.llm.temperature,"onUpdate:value":e[13]||(e[13]=a=>r.value.advanced.llm.temperature=a),min:0,max:2,step:.1,marks:{0:"0",1:"1",2:"2"}},null,8,["value"]),n(l(W),{value:r.value.advanced.llm.temperature,"onUpdate:value":e[14]||(e[14]=a=>r.value.advanced.llm.temperature=a),min:0,max:2,step:.1,size:"small",style:{width:"100px"}},null,8,["value"])]),_:1})]),_:1}),n(l(y),{label:"Max Tokens","label-placement":"left"},{default:i(()=>[n(l(W),{value:r.value.advanced.llm.maxTokens,"onUpdate:value":e[15]||(e[15]=a=>r.value.advanced.llm.maxTokens=a),min:100,max:128e3,step:100,style:{width:"100%"}},null,8,["value"])]),_:1}),n(l(y),{label:"Top P","label-placement":"left"},{default:i(()=>[n(l(R),{vertical:"",style:{width:"100%"}},{default:i(()=>[n(l(te),{value:r.value.advanced.llm.topP,"onUpdate:value":e[16]||(e[16]=a=>r.value.advanced.llm.topP=a),min:0,max:1,step:.1,marks:{0:"0",.5:"0.5",1:"1"}},null,8,["value"]),n(l(W),{value:r.value.advanced.llm.topP,"onUpdate:value":e[17]||(e[17]=a=>r.value.advanced.llm.topP=a),min:0,max:1,step:.1,size:"small",style:{width:"100px"}},null,8,["value"])]),_:1})]),_:1}),n(l(y),{label:"Frequency Penalty","label-placement":"left"},{default:i(()=>[n(l(R),{vertical:"",style:{width:"100%"}},{default:i(()=>[n(l(te),{value:r.value.advanced.llm.frequencyPenalty,"onUpdate:value":e[18]||(e[18]=a=>r.value.advanced.llm.frequencyPenalty=a),min:-2,max:2,step:.1,marks:{"-2":"-2",0:"0",2:"2"}},null,8,["value"]),n(l(W),{value:r.value.advanced.llm.frequencyPenalty,"onUpdate:value":e[19]||(e[19]=a=>r.value.advanced.llm.frequencyPenalty=a),min:-2,max:2,step:.1,size:"small",style:{width:"100px"}},null,8,["value"])]),_:1})]),_:1}),n(l(y),{label:"Presence Penalty","label-placement":"left"},{default:i(()=>[n(l(R),{vertical:"",style:{width:"100%"}},{default:i(()=>[n(l(te),{value:r.value.advanced.llm.presencePenalty,"onUpdate:value":e[20]||(e[20]=a=>r.value.advanced.llm.presencePenalty=a),min:-2,max:2,step:.1,marks:{"-2":"-2",0:"0",2:"2"}},null,8,["value"]),n(l(W),{value:r.value.advanced.llm.presencePenalty,"onUpdate:value":e[21]||(e[21]=a=>r.value.advanced.llm.presencePenalty=a),min:-2,max:2,step:.1,size:"small",style:{width:"100px"}},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show"]),n(l(ve),{show:m.value,"onUpdate:show":e[26]||(e[26]=a=>m.value=a),preset:"card",title:"选择模型",style:{width:"800px","max-height":"85vh"},segmented:{content:"soft",footer:"soft"}},{footer:i(()=>[n(l(R),{justify:"end"},{default:i(()=>[n(l(k),{onClick:e[25]||(e[25]=a=>m.value=!1)},{default:i(()=>[...e[35]||(e[35]=[V("取消",-1)])]),_:1}),n(l(k),{type:"primary",onClick:j},{default:i(()=>[V(" 确定 ("+_e(h.value.length)+") ",1)]),_:1})]),_:1})]),default:i(()=>[n(He,{"all-models":M.value,value:h.value,"onUpdate:value":e[24]||(e[24]=a=>h.value=a),multiple:!0},null,8,["all-models","value"])]),_:1},8,["show"])]),_:1}))}},Sa=Oe(ya,[["__scopeId","data-v-ec56bc71"]]);export{Sa as default};
