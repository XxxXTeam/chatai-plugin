import { PostProcessor } from 'chaite'
import ChatGPTConfig from '../../config/config.js'

export class BlackPostProcessor extends PostProcessor {
  name = 'BlackPostProcessor'

  /**
   * 处理逻辑
   * 可以通过`asyncLocalStorage.getStore().getEvent()`获取e实例
   * @param {import('chaite').AssistantMessage} message
   * @returns {Promise<import('chaite').AssistantMessage>}
   */
  async process (message) {
    switch (ChatGPTConfig.llm.blockStrategy) {
      case 'full': {
        for (let content of message.content) {
          for (const blockWord of ChatGPTConfig.llm.responseBlockWords) {
            if (content.type === 'text' && content.text?.includes(blockWord)) {
              content.text = '回复已屏蔽'
              break
            }
          }
        }
        break
      }
      case 'mask': {
        for (let content of message.content) {
          for (const blockWord of ChatGPTConfig.llm.responseBlockWords) {
            if (content.type === 'text' && content.text?.includes(blockWord)) {
              content.text = content.text.replaceAll(blockWord, ChatGPTConfig.llm.blockWordMask || '***')
              break
            }
          }
        }
      }
    }
    return message
  }
}
